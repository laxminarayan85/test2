<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:view="com.efi.view.*" xmlns:vo="com.efi.vo.*" xmlns:fc="http://www.adobe.com/2006/fc" xmlns:hc="com.hillelcoren.components.*"
width="100%" height="100%" title="Contact Editor"
creationComplete="init()" label="Contact Editor" name="Contact Editor" xmlns:ns1="com.efi.components.*">

<mx:RemoteObject id="dataService" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadResult(event)"/>
	<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveResult(event)"/>
	<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteResult(event)"/>
</mx:RemoteObject>

<mx:RemoteObject id="salesRepDataService" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSalesReps(event)"/>
    <mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveSalesRepResult(event)"/>
</mx:RemoteObject>	

<mx:RemoteObject id="cityDataService" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCity(event)"/>
	<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCityResult(event)"/>
</mx:RemoteObject>

<mx:RemoteObject id="stateDataService" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadState(event)"/>
	<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStateResult(event)"/>
</mx:RemoteObject>

<mx:RemoteObject id="countryDataService" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCountry(event)"/>
	<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCountryResult(event)"/>
</mx:RemoteObject>

<mx:RemoteObject id="zipDataService" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadZip(event)"/>
	<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveZipResult(event)"/>
</mx:RemoteObject>

<mx:RemoteObject id="accountDataService" destination="dataService">
	<mx:method name="getById" fault="handleFault(event)" result="handleLoadAccountById(event)"/>
</mx:RemoteObject>

<mx:Producer id="producer" destination="contacts"/>
<mx:Consumer id="consumer" destination="salesreps"  message="messageHandler(event.message)"/>
<!--<mx:Consumer id="consumer" destination="citys" message="messageHandler(event.message)"/>
<mx:Consumer id="consumer" destination="countrys" message="messageHandler(event.message)"/>
<mx:Consumer id="consumer" destination="states" message="messageHandler(event.message)"/>
<mx:Consumer id="consumer" destination="zips" message="messageHandler(event.message)"/>-->
<mx:Consumer id="notification_consumer" destination="notifications" message="messageHandler(event.message)"/>


<mx:StringValidator id="contactFirstValidator" source="{name_edit}"	property="text"	minLength="2" required="true"/>
<mx:StringValidator id="contactLastValidator" source="{last_name_edit}"	property="text"	minLength="2" required="true"/>


<mx:Script> 
                                  
<![CDATA[
	import com.efi.vo.Contact;
	import com.efi.vo.Address;                        
	import com.efi.vo.Account; 
	import com.efi.vo.CreditCard;
	import com.efi.vo.Campaigns;
	import com.efi.vo.City;
	import com.efi.vo.Country;
	import com.efi.vo.State;
	import com.efi.vo.Zip;
	import com.efi.vo.Grade;
	import com.efi.vo.Marketing;
	import com.efi.vo.SalesRep;  
	import com.efi.events.AccountPickerSelectEvent;
	import com.efi.events.ContactPickerSelectEvent;
	                                      
	import mx.controls.Alert;                                         
	import mx.managers.PopUpManager;                                         
	import mx.containers.TitleWindow;                                         
	import mx.collections.ArrayCollection;                                         
	import mx.rpc.events.ResultEvent;                                         
	import mx.rpc.events.FaultEvent;                                         
	import mx.messaging.messages.AsyncMessage;
	import mx.messaging.messages.IMessage;
    import mx.printing.FlexPrintJob;
    import mx.printing.PrintAdvancedDataGrid;
    import mx.printing.PrintDataGrid;
    import mx.core.Application;
    import mx.validators.Validator;
    import mx.events.ValidationResultEvent;    
    
    private var enableSave:Boolean = true;
    private var contacts:ArrayCollection = new ArrayCollection();
                 
	[Bindable]                                         
	private var contact:Contact;
		
	[Bindable]
	private var account:Account;
	
	               
	 [Bindable]
    private var salesReps:ArrayCollection = new ArrayCollection(); 
    [Bindable]
    private var citys:ArrayCollection = new ArrayCollection();   
    [Bindable]
    private var states1:ArrayCollection = new ArrayCollection();   
    [Bindable]
    private var countrys:ArrayCollection = new ArrayCollection();  
    [Bindable]
    private var zips:ArrayCollection = new ArrayCollection();                  
    private var formIsValid:Boolean = false;
    
    private var focussedFormControl:DisplayObject;
    
   
	public function init():void {
		consumer.subscribe();
		notification_consumer.subscribe();     
		this.doGet();
		account= new Account();
		dataService.getAll("Contact");  
		salesRepDataService.getAll("SalesRep");
		cityDataService.getAll("City");
		stateDataService.getAll("State");
		countryDataService.getAll("Country");
		zipDataService.getAll("Zip");   		    
	}      
	      
	private function doAccountPicker():void {
		var accountPickerWindow:AccountPicker = AccountPicker(PopUpManager.createPopUp(this, AccountPicker, true));
	    accountPickerWindow.setStyle("borderAlpha", 0.9);
	    accountPickerWindow.formIsEmpty = true;
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.CANCELSELECTACCOUNT, handleAccountPickerCancel);
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.SELECTACCOUNT, handleAccountPickerSelect);
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.SELECTNEWACCOUNT, handleAccountPickerNew);		
	}           
	                                  	
	private function handleAccountPickerCancel(evt:AccountPickerSelectEvent):void {
		account = new Account();
		this.setAccount(account);
	}
	
	private function handleAccountPickerSelect(evt:AccountPickerSelectEvent):void {
		if (evt.account != null) {
			this.setAccount(evt.account);
			
		} else {
			this.setAccount(new Account());
			Alert.show("Account Picker returned a null account", "Error");
		}
	}
	
	private function handleAccountPickerNew(evt:AccountPickerSelectEvent):void {
		this.account = new Account();
	}

	private function send():void
	{
		var message:IMessage = new AsyncMessage();
		message.body.contacts = "*";
		//producer.send(message);
	}
		
	public function setContact(contact:Contact):void
	{
		if (contact != null){
			this.contact = contact;
			if (contact.address == null) contact.address = new Address(); 
			if (contact.shipToAddress == null) contact.shipToAddress = new Address();
			if (contact.marketing == null) setMarketing();
			if( contact.creditCard == null) setCreditCard();
			mapFromContactData();
		}
	}
					
	private function setAccount(account:Account):void
	{
		if (account != null){
			this.account = account;
			contact.parentAccount= this.account
			accountName.text = account.title;
		}

	}
	private function setMarketing():void{
 		
 		if ( contact.marketing == null){
 			contact.marketing = new Marketing();
 			contact.marketing.birthDate = new Date();
 			contact.marketing.followup = new Date();
 			contact.marketing.user3 = new Date();
 			contact.marketing.user4 = new Date();
 			contact.marketing.user5 = new Date();
 		}else{
 			if (contact.marketing.followup == null)
				contact.marketing.followup = new Date();
			if (contact.marketing.birthDate == null)
				contact.marketing.birthDate = new Date();
			if (contact.marketing.user3 == null)
				contact.marketing.user3 = new Date();
			if (contact.marketing.user4 == null)
				contact.marketing.user4 = new Date();
			if (contact.marketing.user5 == null)
				contact.marketing.user5 = new Date();
 					
 		}
 		
 	}
	private function setCreditCard():void{
 		
 		if ( contact.creditCard == null){
 			contact.creditCard = new CreditCard();
 		}else{
 			if (contact.creditCard.expiresDate == null)
 				contact.creditCard.expiresDate = new Date();
 			if ( contact.creditCard.address == null)
 				contact.creditCard.address = new Address();
 		}
 		
 	}
	private function messageHandler(message:IMessage):void
	{
	}
                                  
	private function deleteContact():void {              
	     dataService.deleteItem("Contact",contact.id);                                     
	}
	
	                                                       
		
	private function mapToContactData():void {
		contact.firstName = name_edit.text;
		contact.lastName =  last_name_edit.text;
		contact.prefix = contact_prefix_edit.text;
		contact.salutation= contact_salutation_edit.text;
		contact.suffix = contact_suffix_edit.text;
		contact.jobTitle= contact_job_title_edit.text;
		
		contact.shipToAddress = ship_to_address_editor.getAddress();
		contact.address = address_editor.getAddress();
		
			
		if (sales_rep_combo != null && sales_rep_combo.selectedItem != null) 
			contact.defaultSalesRep= sales_rep_combo.selectedItem as SalesRep;
		if (cardzip != null && cardzip.selectedItem != null) 
			contact.creditCard.address.zip = cardzip.selectedItem as Zip;
			
			
		contact.marketing.birthDate = birthDate.selectedDate;
		contact.marketing.followup= followUp.selectedDate;
		contact.marketing.commonInterst = commonInterest.text;
		contact.marketing.leadSource = leadSource.text;
		contact.marketing.leadSource2 = leadSource1.text;
		contact.marketing.mailerType = mailerType.text;
		contact.marketing.typeWork = typeofWork.text;
		contact.marketing.user3 =  userDate3.selectedDate;
		contact.marketing.user4 = userDate4.selectedDate;
		contact.marketing.user5 = userDate5.selectedDate;
		contact.marketing.user6 = user3Tag.text
		contact.marketing.user7 = user4Tag.text;
		contact.marketing.user8 = user8Tag.text;
		contact.marketing.user9 = user9Tag.text; 
		
		contact.creditCard.cardHolderName = cardholder.text;
		contact.creditCard.cardNumber = cardnumber.text;
		contact.creditCard.expiresDate = cardexpiresdate.selectedDate;
		if (contact.creditCard.address != null){
			contact.creditCard.address.street1 = cardstreet.text;
			contact.creditCard.address.zip.name = cardzip.text;
		}
		
		contact.marketing.noMail = noMail.selected;
		contact.marketing.personalAcct = personalAccount.selected;
		contact.marketing.sportsInterst= sportsInterest.text;
		contact.creditCard.type = cardtype.text;
		if (contact.parentAccount != null)
			contact.parentAccount.id = parseInt(accountID.text);
	}
	
	private function mapFromContactData():void{
		
	 	ship_to_address_editor.setAddress(contact.shipToAddress);
		ship_to_address_editor.cityDataProvider = citys;
		ship_to_address_editor.stateDataProvider = states1;
		ship_to_address_editor.zipDataProvider = zips;
		ship_to_address_editor.countryDataProvider = countrys;
		
		address_editor.setAddress(contact.address);
		address_editor.cityDataProvider = citys;
		address_editor.stateDataProvider = states1;
		address_editor.zipDataProvider = zips;
		address_editor.countryDataProvider = countrys;
		if (contact.parentAccount != null)
			accountName.text = contact.parentAccount.title;
	 	if (contact.creditCard.address != null)
			cardzip.selectedIndex = findItem(contact.creditCard.address.zip.name, zips);
		if (contact.creditCard.expiresDate != null)
		 	cardexpiresdate.selectedDate =contact.creditCard.expiresDate;
		if (contact.marketing.followup != null)
			followUp.selectedDate =contact.marketing.followup;
		if (contact.marketing.birthDate != null)
			birthDate.selectedDate =contact.marketing.birthDate;
		if (contact.marketing.user3!= null)
			userDate3.selectedDate =contact.marketing.user3;
		if (contact.marketing.user4!= null)
			userDate4.selectedDate =contact.marketing.user4;
		if (contact.marketing.user5!= null)
			userDate5.selectedDate =contact.marketing.user5;
		if (contact.defaultSalesRep != null)
			sales_rep_combo.selectedIndex = findItem(contact.defaultSalesRep.name, salesReps);
	    
	   
		
	}
	private function findItem(name:String, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (name == element.name) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}
	
	private function doNew():void {
	    contact = new Contact();
	    setMarketing();
	    setCreditCard();
	     setContact(contact);
	 	
	}  
	private function doDelete():void {
	    dataService.deleteItem("Contact",contact.id);
	 	
	}  
	private function doGet():void{
		
		var contactPickerWindow:ContactPicker = ContactPicker(PopUpManager.createPopUp(this, ContactPicker, true));
	    contactPickerWindow.setStyle("borderAlpha", 0.9);
	    contactPickerWindow.formIsEmpty = true;
	    contactPickerWindow.addEventListener(ContactPickerSelectEvent.CANCELSELECTACCOUNT, handleContactPickerCancel);
	    contactPickerWindow.addEventListener(ContactPickerSelectEvent.SELECTACCOUNT, handleContactPickerSelect);
	    contactPickerWindow.addEventListener(ContactPickerSelectEvent.SELECTNEWACCOUNT, handleContactPickerNew);
		/* var titleWindow:ContactPicker = ContactPicker(PopUpManager.createPopUp(this, ContactPicker, true));
		titleWindow.setStyle("borderAlpha", 0.9);
		titleWindow.formIsEmpty = true; */
	   	    
	}    
	private function handleContactPickerCancel(evt:ContactPickerSelectEvent):void {
		
		contact = new Contact();
		setMarketing();
		setCreditCard();
		this.setContact(contact);

	}
	
	private function handleContactPickerSelect(evt:ContactPickerSelectEvent):void {
		if (evt.contact != null) {
			this.setContact(evt.contact);
			setMarketing();
			setCreditCard();
		} else {
			this.setContact(new Contact());
			Alert.show("Account Picker returned a null contact", "Error");
		}
	}
	
	private function handleContactPickerNew(evt:ContactPickerSelectEvent):void {
		this.contact = new Contact();
		setMarketing();
		setCreditCard();
	}
	
	private function doNext():void {  
		var itemp:int;
		itemp = contacts.getItemIndex(account); 
		itemp++;
		if (itemp == contacts.length){
			itemp = contacts.length - 1;
		}
		contact = contacts.getItemAt(itemp,0) as Contact;   
	    setContact(contact);                         
	}
	private function doPrev():void {              
	    var itemp:int;
		itemp = contacts.getItemIndex(contact); 
		itemp--;
		if (itemp < 0){
			itemp = 0; 
		}
		contact = contacts.getItemAt(itemp,0) as Contact;   
	    setContact(contact);                                           
	}                                           
	
	private function doSave():void {
		mapToContactData();
		dataService.addUpdate(contact);
		                                    		
	}   

	private function doZipCredit(): void{                             
		var zip:Zip;
		var result:Boolean;
		
		if (cardzip.typedText != null && cardzip.typedText != "" && cardzip.selectedIndex == -1) {
			var item:int = findItem(cardzip.typedText, zips);
			if (item == -1) {
				zip = new Zip();
				zip.name = cardzip.text;
				zipDataService.addUpdate(zip);
				contact.creditCard.address.zip = zip;
			}
			else {
				cardzip.selectedItem = item;
			}
		}
	}
	
	private function doSaleRep(): void{                             
		var sales:SalesRep;
		var result:Boolean;
		
		if (sales_rep_combo.typedText != null && sales_rep_combo.typedText != "" && sales_rep_combo.selectedIndex == -1) {
			var item:int = findItem(sales_rep_combo.typedText, salesReps);
			if (item == -1) {
				sales = new SalesRep();
				sales.name = sales_rep_combo.text;
				salesRepDataService.addUpdate(sales);
				contact.defaultSalesRep = sales
			}
			else {
				sales_rep_combo.selectedItem = item;
			}
		}
	}
	
	private function handleSaveResult(ev:ResultEvent):void {
		this.contact = ev.result as Contact;
		setContact(this.contact);
		dataService.getAll("Contact");
	}

	
	private function handleLoadResult(ev:ResultEvent):void {
		contacts = ev.result as ArrayCollection;
	}
	private function handleLoadSalesReps(ev:ResultEvent):void {
		var selectedItem:Object = sales_rep_combo.selectedItem;
		salesReps = ev.result as ArrayCollection;
		sales_rep_combo.selectedItem = selectedItem;
	}
	private function handleLoadCity(ev:ResultEvent):void {
	 	citys = ev.result as ArrayCollection;
		
	}   
	 private function handleLoadState(ev:ResultEvent):void {
		states1 = ev.result as ArrayCollection;
		
	}   
	 private function handleLoadCountry(ev:ResultEvent):void {
		
		countrys = ev.result as ArrayCollection;
		
	}   
	 private function handleLoadZip(ev:ResultEvent):void {
		
	 	var selectedItem2:Object = cardzip.selectedItem;
		zips = ev.result as ArrayCollection;
		
		cardzip.selectedItem = selectedItem2;
	}                                 


	 private function handleLoadAccountById(ev:ResultEvent):void {
		account = ev.result as Account;
	}                              

	private function handleDeleteResult(ev:ResultEvent):void {
		dataService.getAll("Contact");
		doNew();
	}
	
	private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error", 0, null, null, null,null);                                 
	}
	private function handleSaveCityResult(ev:ResultEvent):void {
		
		cityDataService.getAll("City");
		
		
	}      
	private function handleSaveStateResult(ev:ResultEvent):void {
		stateDataService.getAll("State");
	}      

	private function handleSaveCountryResult(ev:ResultEvent):void {
		countryDataService.getAll("Country");
	}      

	private function handleSaveZipResult(ev:ResultEvent):void {
		zipDataService.getAll("Zip");
	}
	private function handleSaveSalesRepResult(ev:ResultEvent):void {
		salesRepDataService.getAll("SalesRep");
	}   
	    
	private function validateForm(event:Event):void{                    
        focussedFormControl = event.target as DisplayObject;    
        formIsValid = true;            
        validate(contactFirstValidator);
        validate(contactLastValidator);        
    }
    private function validate(validator:Validator):Boolean
	{                
        var validatorSource:DisplayObject = validator.source as DisplayObject;
     	var suppressEvents:Boolean = (validatorSource != focussedFormControl);
        var event:ValidationResultEvent = validator.validate(null, suppressEvents); 
        var currentControlIsValid:Boolean = (event.type == ValidationResultEvent.VALID);
		formIsValid = formIsValid && currentControlIsValid;
        return currentControlIsValid;
	}
 
]]>	

                             
</mx:Script>

<mx:VBox width="100%" height="100%">
	<mx:Canvas width="851" height="704">
		<mx:TabNavigator x="0" y="70" width="681" height="635" creationPolicy="all">
			<mx:Canvas label="Address" width="100%" height="100%">
				<mx:TextInput x="315" y="8" id="name_edit" width="193" text="{contact.firstName}" />
				<mx:Text x="17" y="40" text="Acct #:&#xd;" width="46"/>
				<ns1:AddressEditor x="10" y="215" id="address_editor" height="157" width="325"/>
				<mx:Label x="40" y="12" text="ID:"/>
				<mx:Text x="80" y="40" width="100" id="accountID" text="{contact.parentAccount.id}"/>
				<mx:Text x="80" y="12" text="{contact.id}" id="contactID"/>
				<mx:Label x="241" y="170" text="Sales Rep:"/>
				<mx:Label x="249" y="144" text="Created: "/>
				<mx:Text x="315" y="144" width="160" id="createdDate" text="{contact.created.date}" height="27"/>
				<ns1:AddressEditor x="344" y="215" id="ship_to_address_editor" height="157" width="325"/>
				<fc:AutoComplete id="sales_rep_combo" x="315" y="168" width="160" dataProvider="{salesReps}"  labelField="name" focusOut="doSaleRep();" lookAhead="true" />
				<mx:Label x="8" y="90" text="Account:" width="55"/>
				<mx:Text x="80" y="90" width="142" id="accountName" text="{account.title}"/>
				<mx:Button x="10" y="168" label="Accounts" id="AccountsPicker" click="doAccountPicker"/>
				<mx:Label x="224" y="10" text="First Name:" width="83" textAlign="right"/>
				<mx:Label x="224" y="38" text="Last Name:" width="83" textAlign="right"/>
				<mx:Label x="240" y="66" text="Prefix:" width="67" textAlign="right"/>
				<mx:Label x="240" y="94" text="Job Title:" width="67" textAlign="right"/>
				<mx:Label x="407" y="68" text="Suffix:" width="48" textAlign="right"/>
				<mx:Label x="240" y="122" text="Salutation:" width="67" textAlign="right"/>
				<mx:TextInput x="315" y="40" width="194" id="last_name_edit" text="{contact.lastName}" change="validateForm(event);"/>
				<mx:TextInput x="316.5" y="64" width="46" id="contact_prefix_edit" text="{contact.prefix}"/>
				<mx:TextInput x="463" y="66" width="46" id="contact_suffix_edit" text="{contact.suffix}"/>
				<mx:TextInput x="315" y="92" width="194" id="contact_job_title_edit" text="{contact.jobTitle}"/>
				<mx:TextInput x="315" y="120" id="contact_salutation_edit" text="{contact.salutation}"/>
			</mx:Canvas>
			<mx:Canvas label="Marketing" width="100%" height="100%">
				<mx:RadioButtonGroup id="cust_prospect_radio_group"/>
				<mx:CheckBox x="123" y="10" label="Personal account" id="personalAccount" selected="{contact.marketing.personalAcct}"/>
				<mx:CheckBox x="123" y="36" label="Do not mail" id="noMail" selected="{contact.marketing.noMail}"/>
				<mx:Panel x="377" y="10" width="292" height="190" layout="absolute" title="Marketing Dates" dropShadowEnabled="false">
					<mx:Label x="12" y="10" text="Follow Up:"/>
					<mx:Label x="10" y="38" text="Birthdate:"/>
					<mx:Label x="21" y="66" text="User 3:"/>
					<mx:Label x="21" y="94" text="User 4:"/>
					<mx:Label x="21" y="122" text="User 5:"/>
					<mx:DateField x="119" y="10" id="followUp" text="{contact.marketing.followup}" showToday="false" width="143"/>
					<mx:DateField x="119" y="36" id="birthDate" text= "{contact.marketing.birthDate}" showToday="false" width="143"/>
					<mx:DateField x="119" y="64" id="userDate3" text="{contact.marketing.user3}" showToday="false" width="143"/>
					<mx:DateField x="119" y="92" id="userDate4" text="{contact.marketing.user4}" showToday="false" width="143"/>
					<mx:DateField x="119" y="118" id="userDate5" text= "{contact.marketing.user5}" showToday="false" width="143"/>
				</mx:Panel>
				<mx:Panel x="10" y="208" width="659" height="195" layout="absolute" title="Marketing Tags" dropShadowEnabled="false">
					<mx:Label x="28" y="10" text="Lead Source:"/>
					<mx:Label x="-3" y="38" text="Common Interest:"/>
					<mx:TextInput x="114" y="36" width="175" id="commonInterest" text="{contact.marketing.commonInterst}"/>
					<mx:TextInput x="114" y="64" width="175" id="user3Tag" text="{contact.marketing.user6}"/>
					<mx:Label x="60" y="66" text="User 3:"/>
					<mx:TextInput x="114" y="92" width="175" id="user4Tag" text="{contact.marketing.user7}"/>
					<mx:Label x="60" y="94" text="User 4:"/>
					<mx:TextInput x="114" y="118" width="175" id="typeofWork" text="{contact.marketing.typeWork}"/>
					<mx:Label x="21" y="122" text="Type of Work:"/>
					<mx:TextInput x="114" y="8" width="175" id="leadSource" text="{contact.marketing.leadSource}"/>
					<mx:TextInput x="454" y="38" width="175" id="sportsInterest" text= "{contact.marketing.sportsInterst}"/>
					<mx:TextInput x="454" y="66" width="175" id="user8Tag" text="{contact.marketing.user8}"/>
					<mx:TextInput x="454" y="94" width="175" id="user9Tag" text="{contact.marketing.user9}"/>
					<mx:TextInput x="454" y="120" width="175" id="mailerType" text="{contact.marketing.mailerType}"/>
					<mx:TextInput x="454" y="10" width="175" id="leadSource1" text="{contact.marketing.leadSource}"/>
					<mx:Label x="368" y="12" text="Lead Source:"/>
					<mx:Label x="359" y="40" text="Sport Interest:"/>
					<mx:Label x="400" y="68" text="User 8:"/>
					<mx:Label x="400" y="96" text="User 9:"/>
					<mx:Label x="361" y="124" text="Mailer Type:"/>
				</mx:Panel>
			</mx:Canvas>
			<mx:Canvas label="Credit Info" width="100%" height="100%">
				<mx:Label x="159" y="32" text="Card Holder:"/>
				<mx:Label x="152" y="58" text="Card Number:"/>
				<mx:Label x="131" y="84" text="Credit Card Type:"/>
				<mx:Label x="185" y="110" text="Expires:"/>
				<mx:Label x="192" y="159" text="Street:"/>
				<mx:Label x="208" y="185" text="Zip:"/>
				<mx:TextInput x="243" y="30" id="cardholder" text="{contact.creditCard.cardHolderName}"/>
				<mx:TextInput x="243" y="56" id="cardnumber" text="{contact.creditCard.cardNumber}"/>
				<mx:DateField x="243" y="108" id="cardexpiresdate" text="{contact.creditCard.expiresDate}" showToday="false"/>
				<mx:TextInput x="243" y="157" id="cardstreet" text="{contact.creditCard.address.street1}"/>
				<!--<mx:TextInput x="243" y="183" width="80" id="cardzip" text="{contact.creditCard.address.zip}"/>-->
				<fc:AutoComplete id="cardzip" x="243" y="183" width="80"  dataProvider="{zips}"  labelField="name" focusOut="doZipCredit()" lookAhead="true"/>
					
				<mx:ComboBox x="243" y="82" id="cardtype" text="{contact.creditCard.type}"></mx:ComboBox>
			</mx:Canvas>
			<mx:Canvas label="Web" width="100%" height="100%">
			</mx:Canvas>
		</mx:TabNavigator>
		<mx:Button x="10" y="10" width="38" height="38" click="doPrev();">
			<mx:icon>@Embed(source='../../../assets/previous_page.png')</mx:icon>
		</mx:Button>
		<mx:Button x="56" y="10" width="38" height="38" click="doNext();">
			<mx:icon>@Embed(source='../../../assets/next_page.png')</mx:icon>
		</mx:Button>
		<mx:Label x="10" y="46" text="Prev" width="38" textAlign="center"/>
		<mx:Label x="56" y="46" text="Next" width="38" textAlign="center"/>
		<mx:Button x="171" y="10" width="38" height="38" click="doSave();" enabled="{enableSave}">
			<mx:icon>@Embed(source='../../../assets/file.png')</mx:icon>
		</mx:Button>
		<mx:Label x="171" y="46" text="Save" width="38" textAlign="center"/>
		<mx:Button x="217" y="10" width="38" height="38" click="doGet();">
			<mx:icon>@Embed(source='../../../assets/get.png')</mx:icon>
		</mx:Button>
		<mx:Label x="217" y="46" text="Get" width="38" textAlign="center"/>
		<mx:Button x="263" y="10" width="38" height="38" click="doNew();">
			<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
		</mx:Button>
		<mx:Button x="370" y="10" width="38" height="38" click="doDelete();">
			<mx:icon>@Embed(source='../../../assets/delete.png')</mx:icon>
		</mx:Button>
	    <mx:Label x="360" y="46" text="Delete" width="58" textAlign="center"/>
		<mx:Button x="493" y="10" width="38" height="38">
			<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
		</mx:Button>
		<mx:Label x="483" y="46" text="Revert" width="58" textAlign="center"/>
		<mx:Label x="263" y="46" text="New" width="38" textAlign="center"/>
	</mx:Canvas>
</mx:VBox>
</mx:Panel>