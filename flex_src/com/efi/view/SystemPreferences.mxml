<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="init()" xmlns:fc="http://www.adobe.com/2006/fc" xmlns:vo="com.efi.vo.*"
width="800" height="678" title="Preferences"
 label="Preferences" name="systempreferences" xmlns:ns1="com.efi.components.*">
 
 	<mx:RemoteObject id="dataServiceSystem" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSystemResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveSystemResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServicePOS" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPOSResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSavePOSResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceEstimator" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadEstimatorResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveEstimatorResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceAccounting" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadAccountingResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveAccountingResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceCountry" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCountryResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCountryResult(event)"/>
	</mx:RemoteObject>
	
 	<mx:RemoteObject id="dataServiceCashRegister" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCashRegisterResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCashRegisterResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceCreditCard" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCreditCardResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCreditCardResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceMarkups" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadMarkupsResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveMarkupsResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServicePendingList" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPendingListResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSavePendingListResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServicePricingMethod" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPricingMethodResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSavePricingMethodResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceQuantityBreaks" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadQuantityBreaksResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveQuantityBreaksResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceSalesCategory" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSalesCategoryResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveSalesCategoryResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceStockDefinition" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockDefinitionResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockDefinitionResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceStocks" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStocksResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStocksResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceColumnNames" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadColumnNamesResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveColumnNamesResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceSizeTable" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSizeTableResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveSizeTableResult(event)"/>
	</mx:RemoteObject>

 	<mx:RemoteObject id="dataServiceCategory" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCategoryResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCategoryResult(event)"/>
	</mx:RemoteObject>

	<mx:Producer id="producer" destination="systempreferences"/>
	<mx:Consumer id="consumer" destination="systempreferences" message="messageHandler(event.message)"/>
	<mx:Consumer id="notification_consumer" destination="notifications" message="messageHandler(event.message)"/>
<mx:Script>                                   
<![CDATA[
	import mx.controls.Text;
	
	import com.efi.vo.PreferencesAccounting;
	import com.efi.vo.PreferencesEstimating;
	import com.efi.vo.PreferencesPOS;
	import com.efi.vo.PreferencesSystem;
	import com.efi.vo.PreferencesCashRegister;
	
	import com.efi.vo.PreferencesCreditCard;
	import com.efi.vo.PreferencesMarkups;
	import com.efi.vo.PreferencesPendingList;
	import com.efi.vo.PreferencesPricingMethod;
	import com.efi.vo.PreferencesQuantityBreaks;
	import com.efi.vo.PreferencesSalesCategory;
	import com.efi.vo.PreferencesStockDefinition;
	import com.efi.vo.PreferencesStocks;
	
	
	import com.efi.vo.Country;
	import com.efi.vo.ColumnNames;
	import com.efi.vo.SizeTable;
	import com.efi.vo.SalesCategory;
	
	import mx.controls.Alert;                                         
	import mx.managers.PopUpManager;                                         
	import mx.containers.TitleWindow;                                         
	import mx.collections.ArrayCollection;                                         
	import mx.rpc.events.ResultEvent;                                         
	import mx.rpc.events.FaultEvent;                                         
	import mx.messaging.messages.AsyncMessage;
	import mx.messaging.messages.IMessage;
	import mx.collections.XMLListCollection;

	[Bindable]
	private var enableSave:Boolean = false;

//Data field arrays
	[Bindable]
	private var PreferencesSystemArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesPOSArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesEstimatorArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesAccountingArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesCashRegisterArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesCreditCardArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesMarkupsArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesPendingListArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesPricingMethodArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesQuantityBreaksArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesSalesCategoryArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesStockDefinitionArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesStocksArray:ArrayCollection = new ArrayCollection();

//AutoComplete arrays
	[Bindable]
	private var CountryArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var ColumnNamesArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var SizeTableArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var CategoryArray:ArrayCollection = new ArrayCollection();

//Combo box arrays
	[Bindable]
	private var DaysArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var MonthsArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var ReceiptPrinterArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var BaudRateArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var StopBitsArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var ParityArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var DataSizeArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var DefaultInvoiceArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var DefaultEstimateArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var RunToFinishGrainArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var JobTicketStylesArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var AccountingPackagesArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var JournalDocumentPreferenceArray:ArrayCollection = new ArrayCollection();

//Data view variables
	[Bindable]
	private var preferencesSystem:PreferencesSystem;

	[Bindable]                                         
	private var preferencesPOS:PreferencesPOS;

	[Bindable]                                         
	private var preferencesEstimator:PreferencesEstimating;

	[Bindable]                                         
	private var preferencesAccounting:PreferencesAccounting;

	[Bindable]
	private var country:Country;

//Tree view XML table
	[Bindable]
	private var treeData:XML =
    	<root>
			<node label="System">
				<node label="Behavior" isBranch="false" tag="0"/>
				<node label="Company" isBranch="false" tag="1"/>
				<node label="Business Calendar" isBranch="false" tag="2"/>
				<node label="Numbers" isBranch="false" tag="3"/>
				<node label="Alternate Currency" isBranch="false" tag="4"/>
				<node label="International" isBranch="false" tag="5"/>
				<node label="Product Activation" isBranch="false" tag="6"/>
				<node label="Integration" isBranch="false" tag="7"/>
				<node label="Palm Tracker" isBranch="false" tag="8"/>
				<node label="Address Formatting" isBranch="false" tag="9"/>
			</node>
			<node label="POS">
				<node label="Receipt" isBranch="false" tag="10"/>
				<node label="Cash Drawer" isBranch="false" tag="11"/>
				<node label="Cash Register" isBranch="false" tag="12"/>
				<node label="Pending List" isBranch="false" tag="13"/>
			</node>
			<node label="Estimator">
				<node label="Estimator Behavior" isBranch="false" tag="14"/>
				<node label="Estimator Printing" isBranch="false" tag="15"/>
				<node label="Paper Calculator" isBranch="false" tag="16"/>
				<node label="Job Ticket" isBranch="false" tag="17"/>
				<node label="Quantity Breaks" isBranch="false" tag="18"/>
				<node label="Markups" isBranch="false" tag="19"/>
				<node label="Stocks and Sizes" isBranch="false" tag="20"/>
				<node label="Stock Definitions" isBranch="false" tag="21"/>
				<node label="Pricing Method" isBranch="false" tag="22"/>
			</node>			
			<node label="Accounting">
				<node label="Credit/Defaults" isBranch="false" tag="23"/>
				<node label="Aging Periods" isBranch="false" tag="24"/>
				<node label="Sales Categories" isBranch="false" tag="25"/>
				<node label="GL Profiles" isBranch="false" tag="26"/>
				<node label="Credit Card Info" isBranch="false" tag="27"/>
				<node label="Order Number Format" isBranch="false" tag="28"/>
				<node label="Journal Entries" isBranch="false" tag="29"/>
			</node>
		</root>;
	
	private function fillDaysArray(fillArray:ArrayCollection):void {
		var day:Object=new Object();
		day.name="Sunday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Monday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Tuesday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Wednesday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Thursday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Friday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Saturday";
		fillArray.addItem(day);
		
	}

	private function fillMonthsArray(fillArray:ArrayCollection):void{
		var month:Object=new Object();
		month.name="January";
		fillArray.addItem(month);
		month=new Object();
		month.name="February";
		fillArray.addItem(month);
		month=new Object();
		month.name="March";
		fillArray.addItem(month);
		month=new Object();
		month.name="April";
		fillArray.addItem(month);
		month=new Object();
		month.name="May";
		fillArray.addItem(month);
		month=new Object();
		month.name="June";
		fillArray.addItem(month);
		month=new Object();
		month.name="July";
		fillArray.addItem(month);
		month=new Object();
		month.name="August";
		fillArray.addItem(month);
		month=new Object();
		month.name="September";
		fillArray.addItem(month);
		month=new Object();
		month.name="October";
		fillArray.addItem(month);
		month=new Object();
		month.name="November";
		fillArray.addItem(month);
		month=new Object();
		month.name="December";
		fillArray.addItem(month);
	}
	
	private function fillReceiptPrinterArray(fillArray:ArrayCollection):void{
		var printer:Object=new Object();
		printer.name="Off";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="Modem Port";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="Printer Port";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="USB Serial Port";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="Named Graphics Printer";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="Names Serial Port";
		fillArray.addItem(printer);

	}
	private function fillModemArray():void{
		var setting:Object = new Object();
		setting.name="300";
		BaudRateArray.addItem(setting);

		setting=new Object();
		setting.name="1 bit";
		StopBitsArray.addItem(setting);

		setting=new Object();
		setting.name="None";
		ParityArray.addItem(setting);

		setting=new Object();
		setting.name="5 Bits";
		DataSizeArray.addItem(setting);

	}
	
	private function fillDefaultDocumentsArray(fillArray:ArrayCollection):void{
		var setting:Object = new Object();
		setting.name="No default specified";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Alternate Currency";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Credit Memo";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Estimate - Long Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Estimate - Short Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Fax Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Invoice - Long Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Invoice - Short Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Quote Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Quote Letter";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Standard";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Thank You Letter";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Unit Price / each";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Unit Price / thousand";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="[en]!TaxName !Remarks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="[en]!TaxName +Remarks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="[en]+TaxName !Remarks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="[en]+TaxName +Remarks";
		fillArray.addItem(setting);
	}

	private function fillRunToFinishGrainArray(fillArray:ArrayCollection):void{
		var setting:Object = new Object();
		setting.name="Neither";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Match Grain";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Swing / Combination";
		fillArray.addItem(setting);
	}
	
	private function fillJobTicketStylesArray(fillArray:ArrayCollection):void{
		
	}
	private function fillAccountingPackagesArray(fillArray:ArrayCollection):void{
		var setting:Object = new Object();
		setting.name="MYOB";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Peachtree Accounting";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Quickbooks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="MultiLedger";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="SAGE Accounting";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Simply Accounting";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="BusinessWorks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Great Plains Import Manager";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="SAGE Line 50";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Peachtree CSV";
		fillArray.addItem(setting);
	}
		
	public function init():void {
		consumer.subscribe();
		notification_consumer.subscribe();
		
		fillStaticData();
		
		checkAlternateCurrency();
		
		getPreferencesData();
		
		openTree();
		
	}

	private function fillStaticData():void{
		fillDaysArray(DaysArray);
		fillMonthsArray(MonthsArray);
		fillReceiptPrinterArray(ReceiptPrinterArray);	
		dataServiceCountry.getAll("Country");
		fillModemArray();
		fillDefaultDocumentsArray(DefaultInvoiceArray);
		fillDefaultDocumentsArray(DefaultEstimateArray);
		fillDefaultDocumentsArray(JournalDocumentPreferenceArray)
		fillRunToFinishGrainArray(RunToFinishGrainArray);
		fillJobTicketStylesArray(JobTicketStylesArray);
		fillAccountingPackagesArray(AccountingPackagesArray);
	}
	
	private function getPreferencesData():void{
		dataServiceSystem.getAll("PreferencesSystem");
		dataServicePOS.getAll("PreferencesPOS");
		dataServiceEstimator.getAll("PreferencesEstimating");
		dataServiceAccounting.getAll("PreferencesAccounting");
	}

	private function updatePreferencesData():void{
		dataServiceSystem.addUpdate("PreferencesSystem");
		dataServicePOS.addUpdate("PreferencesPOS");
		dataServiceEstimator.addUpdate("PreferencesEstimating");
		dataServiceAccounting.addUpdate("PreferencesAccounting");
	}

	private function messageHandler(message:IMessage):void
	{
	}
     
	private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error", 0, null, null, null, 4);                                 
	}

	private function doCountryFind(completeTextObject:AutoComplete,lookupArray:ArrayCollection) : void {
		var countries:Country;
		var result:Boolean;
		
		if (completeTextObject.typedText != null && completeTextObject.typedText != "" && completeTextObject.selectedIndex == -1) {
			var item:int = findItem(completeTextObject.typedText, lookupArray);
			if (item == -1) {
				countries = new Country();
				countries.name = completeTextObject.text;
				dataServiceCountry.addUpdate(countries);
				completeTextObject.selectedItem = findItem(countries.name, lookupArray);
			}
			else {
				completeTextObject.selectedItem = item;
			}
		}
	}

	private function findItem(name:String, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (name == element.name) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}

// Data Load Handlers
	private function handleLoadSystemResult(ev:ResultEvent):void {
	     PreferencesSystemArray = ev.result as ArrayCollection;
	}
	private function handleLoadPOSResult(ev:ResultEvent):void {
	     PreferencesPOSArray = ev.result as ArrayCollection;
	}
	private function handleLoadEstimatorResult(ev:ResultEvent):void {
	     PreferencesEstimatorArray = ev.result as ArrayCollection;
	}
	private function handleLoadAccountingResult(ev:ResultEvent):void {
	     PreferencesAccountingArray = ev.result as ArrayCollection;
	}
	private function handleLoadCountryResult(ev:ResultEvent):void {
	     CountryArray = ev.result as ArrayCollection;
	}
	private function handleLoadCashRegisterResult(ev:ResultEvent):void {
	     PreferencesCashRegisterArray = ev.result as ArrayCollection;
	}
	private function handleLoadCreditCardResult(ev:ResultEvent):void {
	     PreferencesCreditCardArray = ev.result as ArrayCollection;
	}
	private function handleLoadMarkupsResult(ev:ResultEvent):void {
	     PreferencesMarkupsArray = ev.result as ArrayCollection;
	}
	private function handleLoadPendingListResult(ev:ResultEvent):void {
	     PreferencesPendingListArray = ev.result as ArrayCollection;
	}
	private function handleLoadPricingMethodResult(ev:ResultEvent):void {
	     PreferencesPricingMethodArray = ev.result as ArrayCollection;
	}
	private function handleLoadQuantityBreaksResult(ev:ResultEvent):void {
	     PreferencesQuantityBreaksArray = ev.result as ArrayCollection;
	}
	private function handleLoadSalesCategoryResult(ev:ResultEvent):void {
	     PreferencesSalesCategoryArray = ev.result as ArrayCollection;
	}
	private function handleLoadStockDefinitionResult(ev:ResultEvent):void {
	     PreferencesStockDefinitionArray = ev.result as ArrayCollection;
	}
	private function handleLoadStocksResult(ev:ResultEvent):void {
	     PreferencesStocksArray = ev.result as ArrayCollection;
	}
	private function handleLoadColumnNamesResult(ev:ResultEvent):void {
	     ColumnNamesArray = ev.result as ArrayCollection;
	}
	private function handleLoadSizeTableResult(ev:ResultEvent):void {
	     SizeTableArray = ev.result as ArrayCollection;
	}
	private function handleLoadCategoryResult(ev:ResultEvent):void {
	     CategoryArray = ev.result as ArrayCollection;
	}

// Data Save Handlers
	private function handleSaveSystemResult(ev:ResultEvent):void {
    	dataServiceSystem.getAll("PreferencesSystem");
	}
	private function handleSavePOSResult(ev:ResultEvent):void {
    	dataServicePOS.getAll("PreferencesPOS");
	}
	private function handleSaveEstimatorResult(ev:ResultEvent):void {
    	dataServiceEstimator.getAll("PreferencesEstimator");
	}
	private function handleSaveAccountingResult(ev:ResultEvent):void {
    	dataServiceAccounting.getAll("PreferencesAccounting");
	}
	private function handleSaveCountryResult(ev:ResultEvent):void {
    	dataServiceCountry.getAll("Country");
		country = ev.result as Country;
	}
	private function handleSaveCashRegisterResult(ev:ResultEvent):void {
    	dataServiceCashRegister.getAll("PreferencesCashRegister");
	}
	private function handleSaveCreditCardResult(ev:ResultEvent):void {
    	dataServiceCreditCard.getAll("PreferencesCreditCard");
	}
	private function handleSaveMarkupsResult(ev:ResultEvent):void {
    	dataServiceMarkups.getAll("PreferencesMarkups");
	}
	private function handleSavePendingListResult(ev:ResultEvent):void {
    	dataServicePendingList.getAll("PreferencesPendingList");
	}
	private function handleSavePricingMethodResult(ev:ResultEvent):void {
    	dataServicePricingMethod.getAll("PreferencesPricingMethod");
	}
	private function handleSaveQuantityBreaksResult(ev:ResultEvent):void {
    	dataServiceQuantityBreaks.getAll("PreferencesQuantityBreaks");
	}
	private function handleSaveSalesCategoryResult(ev:ResultEvent):void {
    	dataServiceSalesCategory.getAll("PreferencesSalesCategory");
	}
	private function handleSaveStockDefinitionResult(ev:ResultEvent):void {
    	dataServiceStockDefinition.getAll("PreferencesStockDefinition");
	}
	private function handleSaveStocksResult(ev:ResultEvent):void {
    	dataServiceStocks.getAll("PreferencesStocks");
	}
	private function handleSaveColumnNamesResult(ev:ResultEvent):void {
    	dataServiceColumnNames.getAll("ColumnNames");
	}
	private function handleSaveSizeTableResult(ev:ResultEvent):void {
    	dataServiceSizeTable.getAll("SizeTable");
	}
	private function handleSaveCategoryResult(ev:ResultEvent):void {
    	dataServiceCategory.getAll("SalesCategory");
	}


	private var openSequence:Array = [];

	private function openTree():void {
		var nodeList:XMLListCollection = 
			tvPreference.dataProvider as XMLListCollection;
		var node:XMLList = nodeList.source;
		for(var i:int=0; i < 4; i++) {
			var n:XML = node[i];
			if( n.children() != null ) {
				tvPreference.expandItem(n,true,false);
			}
		}
		tvPreference.selectedIndex = 1;
		preferences_stack.selectedIndex = 0; 
	}

	private function treeSelect(event:Event):void {
		
		var node:XML = XML(event.currentTarget.selectedItem);
		if( node == null ) return;
		
		if( node.@label == "System" ) return;
		if( node.@label == "POS" ) return;
		if( node.@label == "Estimator" ) return;
		if( node.@label == "Accounting" ) return;

		//var message:String;
		//message = node.@label; 
		//Alert.show(message, "Selected Item", 0, null, null, null, 4);                                 
		preferences_stack.selectedIndex = node.@tag; 
	}
	private function setDisplayText(text:TextInput):void{
		txtDisplayArea.text = "";
		txtDisplayDemo.text = text.name;
	}

	private function checkEnableAutoLogOut():void{
		chkSecondsOfInactivity.enabled = chkEnableAutomaticLogOut.selected;
		chkTriggerAfterPosting.enabled = chkEnableAutomaticLogOut.selected;
	}
	
	private function checkAlternateCurrency():void{
		txtFormat.enabled = chkUseAlternateCurrency.selected;
		txtConversionFactor.enabled = chkUseAlternateCurrency.selected;
		txtRoundToAlternateCurrency.enabled = chkUseAlternateCurrency.selected;
		chkAlwaysRoundDownAlternateCurrency.enabled = chkUseAlternateCurrency.selected;
	}
	
	private function doSave():void{
		updatePreferencesData();		
	}
	
	private function doRevert():void{
		getPreferencesData();
	}
	
	private function doCheckPNIConnection():void{
		
	}
	private function doBrowsePath():void{
		
	}
	
	private function doCreateLocationFile():void{
		
	}
	
	private function doCheckForPalmData():void{
		
	}
	private function doSelectColor(text:TextInput):void{
		
	}
	private function doSelectFont(text:TextInput):void{
		if (text != null)
		{
			//do something
		}else{
			//do something else
		}
		
	}
	private function doPrintBarCodes():void{
		
	}
	
]]>
                             
</mx:Script>	
	<mx:Tree x="0" y="0" width="200" fontSize="8" 
		id="tvPreference" 
		dataProvider="{treeData.node}"
		labelField="@label"
		height="100%" change="treeSelect(event);"></mx:Tree>

	<mx:Button x="228" y="6" width="38" height="38" click="doSave();" enabled="{enableSave}" id="btnSave">
		<mx:icon>@Embed(source='../../../assets/file.png')</mx:icon>
	</mx:Button>
	<mx:Button x="274" y="6" width="38" height="38" click="doRevert();" enabled="{enableSave}" id="btnRevert">
		<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
	</mx:Button>

	<mx:VBox id="vbox2" left="200" top="50" height="100%" width="100%" creationPolicy="all">
		<mx:ViewStack id="preferences_stack" width="100%" height="100%">
			<mx:Canvas width="100%" height="100%" id="behavior_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" text="Behavior" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				<mx:CheckBox x="50" y="30"  id="chkEliminateSomeWarningMessages" label="Eliminate some warning messages"/>
				<mx:CheckBox x="50" y="60"  id="chkOnlyPostInvoicesMarkedReady" label="Only post invoices marked ready"/>
				<mx:CheckBox x="50" y="90"  id="chkEnablePricingSystem" label="Enable Pricing system Import / Eport features"/>
				<mx:CheckBox x="50" y="120" id="chkActivateUserEventLogging" label="Activate user event logging, all workstatioins."/>
				<mx:CheckBox x="50" y="150" id="chkEnableAutomaticLogOut" label="Enable automatic log out" change="checkEnableAutoLogOut();"/>
				<mx:CheckBox x="80" y="180" id="chkSecondsOfInactivity" label="Seconds of inactivity to trigger:" enabled="false"/>
				<mx:CheckBox x="80" y="210" id="chkTriggerAfterPosting" label="Trigger after posting" enabled="false"/>
				<mx:CheckBox x="50" y="240" id="chkShowInvoices" label="Show invoices with firm due date of &quot;today&quot; at login"/>
				<mx:CheckBox x="50" y="270" id="chkEnableLineItemTaxes" label="Enable line-item taxes"/>
				<mx:CheckBox x="50" y="300" id="chkEnableAutomaticQuit" label="Enable automatic quit"/>
				<mx:TextInput x="277" y="180" width="61" id="txtInactivitySeconds"/>
				<mx:Label x="50" y="330" text="Time of day to quit:"/>
				<mx:TextInput x="168" y="328" width="59" id="txtTimeOfDayQuit"/>
				<mx:Label x="80" y="367" text="Shut down notification message:"/>
				<mx:TextArea x="80" y="393" width="400" height="72" id="txtShutdownNotificationMessage"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="company_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Company" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				<ns1:AddressEditor x="50" y="30" id="address_editor" height="155" width="400"/>

				<mx:Label x="79" y="197" text="Phone:"/>
				<mx:TextInput x="127" y="195" width="148" id="txtPhone"/>
				<mx:Label x="344" y="197" text="Fax:"/>
				<mx:TextInput x="377" y="195" width="148" id="txtFax"/>
				<mx:Label x="79" y="227" text="E-Mail:"/>
				<mx:TextInput x="125" y="225" width="400" id="txtEmail"/>
				<mx:Label x="81" y="257" text="Other:"/>
				<mx:TextInput x="125" y="255" width="400" id="txtOther1"/>
				<mx:Label x="81" y="287" text="Other:"/>
				<mx:TextInput x="125" y="285" width="400" id="txtOther2"/>
				<mx:Label x="8" y="317" text="Company ID Label:"/>
				<mx:TextInput x="125" y="315" width="100" id="txtCompanyIdLabel"/>
				<mx:Label x="242" y="317" text="Company ID:"/>
				<mx:TextInput x="326" y="315" width="199" id="txtCompanyId"/>
				
				<mx:Label x="187" y="367" text="Store Number:"/>
				<mx:TextInput x="276" y="365" width="249" id="txtStoreNumber"/>
				<mx:Label x="52" y="392" text="Workstation/Store Location Reference:"/>
				<mx:TextInput x="276" y="390" width="249" id="txtLocationReference"/>
				<mx:TextArea x="125" y="420" width="400" height="63">
					<mx:text>The company ID is printed on Invoices and Estimates, the workstation specific Store location information prints on receipts and appears in the Account history transactions, if empy the global Store Number is used for these purposes.</mx:text>
				</mx:TextArea>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="calendar_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Business Calendar" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="50" y="92" text="Fiscal year starts first day of:"/>
				<mx:ComboBox x="220" y="90" width="260" dataProvider="{MonthsArray}" labelField="name"></mx:ComboBox>
				<mx:Label x="176" y="146" text="Current Range:"/>
				<mx:TextArea x="270" y="145" height="19" width="210"/>
				
				<mx:Label x="50" y="185" text="Work Days:"/>
				<mx:RadioButtonGroup id="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="53" y="250" id="opgSunday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="93" y="250" id="opgMonday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="133" y="250" id="opgTuesday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="173" y="250" id="opgWednesday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="213" y="250" id="opgThursday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="253" y="250" id="opgFriday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="293" y="250" id="opgSaturday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:Button x="40" y="211" label="S" width="40"/>
				<mx:Button x="80" y="211" label="M" width="40"/>
				<mx:Button x="120" y="211" label="T" width="40"/>
				<mx:Button x="160" y="211" label="W" width="40"/>
				<mx:Button x="200" y="211" label="T" width="40"/>
				<mx:Button x="240" y="211" label="F" width="40"/>
				<mx:Button x="280" y="211" label="S" width="40"/>
				<mx:Label x="325" y="250" text="First Day of Work Week"/>
				<mx:CheckBox x="40" y="327" label="Future dates exclude days that company is Closed"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="numbers_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Numbers" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="67" y="32" text="Integers:"/>
				<mx:Label x="46" y="62" text="Percentages:"/>
				<mx:Label x="71" y="92" text="Amount:"/>
				<mx:Label x="88" y="122" text="Rate:"/>
				<mx:Label x="81" y="152" text="Factor:"/>
				<mx:Label x="74" y="182" text="Invoice:"/>
				<mx:Label x="40" y="212" text="Short Percent:"/>
				<mx:Label x="63" y="242" text="Round to:"/>

				<mx:TextInput x="127" y="30" width="347" name="Integers" id="txtIntegers" focusIn="setDisplayText(txtIntegers);"/>
				<mx:TextInput x="127" y="60" width="347" name="Percentages" id="txtPercentages" focusIn="setDisplayText(txtPercentages);"/>
				<mx:TextInput x="127" y="90" width="347" name="Amount" id="txtAmount" focusIn="setDisplayText(txtAmount);"/>
				<mx:TextInput x="127" y="120" width="347" name="Rate" id="txtRate" focusIn="setDisplayText(txtRate);"/>
				<mx:TextInput x="127" y="150" width="347" name="Factor" id="txtFactor" focusIn="setDisplayText(txtFactor);"/>
				<mx:TextInput x="127" y="180" width="347" name="Invoice" id="txtInvoice" focusIn="setDisplayText(txtInvoice);"/>
				<mx:TextInput x="127" y="210" width="347" name="Short Percent" id="txtShortPercent" focusIn="setDisplayText(txtShortPercent);"/>
				<mx:TextInput x="127" y="240" width="75" name="Rounded Integers" id="txtRoundTo" focusIn="setDisplayText(txtRoundTo);"/>

				<mx:CheckBox x="216" y="240"  id="chkAlwaysRoundDown" label="Always Round Down"/>
				<mx:CheckBox x="216" y="270"  id="chkTaxRoundUp" label="Tax Round Up"/>

				<mx:Button x="50" y="320" label="Dollar"  width="75"/>
				<mx:Button x="130" y="320" label="Pound"  width="75"/>
				<mx:Button x="210" y="320" label="Yen"  width="75"/>
				<mx:Button x="290" y="320" label="Euro"  width="75"/>
				<mx:Button x="370" y="320" label="Space"  width="75"/>
				<mx:TextArea x="23" y="391" height="131" width="451" id="txtDisplayArea" enabled="false"/>
				<mx:Text x="50" y="374" text="xx" id="txtDisplayDemo"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="alternatecurrency_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Alternate Currency" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30"  id="chkUseAlternateCurrency" label="Use Alternate Currency System." change="checkAlternateCurrency();"/>

				<mx:Label x="84" y="62" text="Format:"/>
				<mx:TextInput x="136" y="60" width="338" id="txtFormat" enabled="false"/>
				<mx:Label x="24" y="92" text="Conversion Factor:"/>
				<mx:TextInput x="136" y="90" width="75" id="txtConversionFactor" enabled="false"/>
				<mx:Label x="72" y="122" text="Round to:"/>
				<mx:TextInput x="136" y="120" width="75" id="txtRoundToAlternateCurrency" enabled="false"/>

				<mx:CheckBox x="221" y="120"  id="chkAlwaysRoundDownAlternateCurrency" label="Always Round Down" enabled="false"/>
				
				
				<mx:TextArea x="23" y="203" height="40%" width="451" id="txtSampleArea" enabled="false"/>
				<mx:Label x="50" y="186" text="Sample Currency" id="txtSampleDemo"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="international_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="International" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30"  id="chkUseInternationalTextSorting" label="Use international (slower) text sorting"/>
				<mx:CheckBox x="50" y="60"  id="chkUseChileTaxIdVerification" label="Use Chile Tax ID verification"/>
				<mx:CheckBox x="50" y="90"  id="chkDisableTextStyles" label="Disable text styles"/>
				<mx:CheckBox x="50" y="120"  id="chkUseAustralianInvoiceRounding" label="Use Australian invoice rounding"/>
				<mx:CheckBox x="50" y="150"  id="chkDisableNonTaxableOptions" label="Disable non-taxable options for invoices, jobs and charges"/>

				<mx:Label x="26" y="182" text="Ink Weight(singular):"/>
				<mx:TextInput x="154" y="180" id="txtInkWeightSingular"/>
				<mx:Label x="39" y="212" text="Ink Weight(plural):"/>
				<mx:TextInput x="154" y="210" id="txtInkWeightPlural"/>

				<mx:Label x="27" y="272" text="Authorize the decrypt of CC to ADMIN users:"/>
				<mx:TextInput x="280" y="270" width="187" id="txtAuthorizeDecrypt"/>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="activation_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Product Activation" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="208" y="32" text="Credit Card Approval:"/>
				<mx:Label x="194" y="62" text="Tracker Data Collection:"/>
				<mx:Label x="235" y="92" text="Validation Code:"/>

				<mx:TextInput x="335" y="30" id="txtCreditCardApproval"/>
				<mx:TextInput x="335" y="60" id="txtTrackerDataCollection"/>
				<mx:TextInput x="335" y="90" id="txtValidationCode" enabled="false"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="integration_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Integration" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:Panel x="10" y="27" width="520" height="174" layout="absolute" title="PNI">
					<mx:Label x="20" y="12" text="PrintNet Integrator IP Address:"/>
					<mx:Button x="20" y="35" label="Check Connection" click="doCheckPNIConnection();"/>
					<mx:Label x="20" y="72" text="PNI Status:"/>

					<mx:TextInput x="199" y="10" id="txtPNIAddress" width="291"/>
					<mx:TextInput x="165" y="37" id="txtPNIConnection" width="325"/>
					<mx:TextInput x="87" y="70" id="txtPNIStatus" width="403"/>

					<mx:CheckBox x="20" y="100"  id="chkPNIIsVersion45orLater" label="The PrintNet Integrator is version 4.5 or later"/>
				</mx:Panel>
				<mx:Panel x="10" y="218" width="520" height="160" layout="absolute" title="JDF Connector">
					<mx:Label x="20" y="12" text="Fiery Connector URL:"/>
					<mx:TextInput x="141" y="10" id="txtFieryUrl" width="349"/>
					<mx:CheckBox x="20" y="50"  id="chkJDFConnectorIsVersion45orLater" label="The JDF Connector URL from the PNI (PNI 4.5 and later"/>
					<mx:CheckBox x="20" y="80"  id="chkJDFConnectorSupportsNonAsciiCharacters" label="JDF Connector supports non-ASCII characters"/>

				</mx:Panel>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="palmtracking_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Palm Tracking" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30"  id="chkUsePalmPilotTracking" label="Use PalmPilot tracking"/>
				<mx:Label x="50" y="60" text="Palm user path:"/>
				<mx:TextInput x="50" y="78" id="txtPalmPath" width="349"/>
				<mx:Button x="50" y="110" label="Browse..." click="doBrowsePath();"/>
				<mx:Label x="138" y="112" text="for HotSync application."/>
				
				<mx:Label x="50" y="142" text="Polling Interval:"/>
				<mx:TextInput x="145" y="140" id="txtPollingInterval" width="57"/>
				<mx:Label x="205" y="142" text="seconds."/>

				<mx:Button x="50" y="180" label="Create Location file" click="doCreateLocationFile();" width="141"/>
				<mx:Button x="50" y="210" label="Check for Palm data" click="doCheckForPalmData();" width="141"/>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="addressformatting_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Address Formatting" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:Label x="50" y="32" text="Default Country:"/>
				<fc:AutoComplete  x="148" y="30" width="181" id="cboDefaultCountry" dataProvider="{CountryArray}" lookAhead="true" labelField="name" focusOut="doCountryFind(cboDefaultCountry,CountryArray)"/>
				<mx:TextArea x="23" y="203" height="25%" width="451" id="txtSampleAddressArea" enabled="false"/>
				<mx:Text x="50" y="186" text="Sample Address" id="txtSampleAddress"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="receipt_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Receipt" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="54" y="32" text="Header:"/>
				<mx:Label x="59" y="182" text="Footer:"/>
				<mx:TextArea x="107" y="30" id="txtReceiptHeader" width="390" height="130"/>
				<mx:TextArea x="107" y="180" id="txtReceiptFooter" width="390" height="100"/>

				<mx:TextInput x="272" y="300" id="txtSerialNumber" width="70"/>
				<mx:CheckBox x="50" y="300"  id="chkSerialNumberReceiptsStart" label="Serial numbers on receipts start at:"/>
				<mx:CheckBox x="50" y="330"  id="chkHideTaxLineItems" label="Hide tax in line items"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="cashdrawer_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Cash Drawer" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="50" y="32" text="Receipt Printer:"/>
				<mx:ComboBox x="143" y="30" id="cboReceiptPrinter"  dataProvider="{ReceiptPrinterArray}" labelField="name" width="120"/>
				<mx:Label x="95" y="62" text="Printer:"/>
				<mx:TextInput x="143" y="60" id="txtSelectedPrinter" width="200"/>

				<mx:CheckBox x="50" y="90" id="chkEnableCashDrawer" label="Enable Cash Drawer"/>
				<mx:CheckBox x="50" y="115" id="chkPrintReceipts" label="Print Receipts"/>
				<mx:CheckBox x="70" y="140" id="chkPrint2forCredit" label="Print (2) for Credit Cards"/>
				<mx:CheckBox x="70" y="165" id="chkPrint2forCash" label="Print (2) for Cash"/>
				<mx:CheckBox x="50" y="190" id="chkPrintInvoices" label="Print Invoices"/>
				<mx:CheckBox x="50" y="215" id="chkLockSettings" label="Lock Settings"/>

				<mx:CheckBox x="290" y="90" id="chkUseMasterDrawer" label="Use Master's Drawer"/>
				<mx:CheckBox x="290" y="115" id="chkKeepSettingsLocal" label="Keep settings local"/>

				<mx:Label x="50" y="273" text="ASCII Code to Open Drawer:"/>
				<mx:Label x="56" y="298" text="Blank Lines Before Receipt:"/>
				<mx:Label x="66" y="323" text="Blank Lines After Receipt:"/>
				<mx:Label x="101" y="348" text="Receipt Start Code:"/>
				<mx:Label x="107" y="373" text="Receipt End Code:"/>

				<mx:TextInput x="216" y="271" id="txtAsciiCodeOpenDrawer" width="47"/>
				<mx:TextInput x="216" y="296" id="txtBlankBeforeReceipt" width="47"/>
				<mx:TextInput x="216" y="321" id="txtBlankAfterReceipt" width="47"/>
				<mx:TextInput x="216" y="346" id="txtReceiptStartCode" width="77"/>
				<mx:TextInput x="216" y="371" id="txtReceiptEndCode" width="77"/>

				<mx:Label x="50" y="420" text="Baud Rate:"/>
				<mx:Label x="220" y="420" text="Stop Bits:"/>
				<mx:Label x="77" y="445" text="Parity:"/>
				<mx:Label x="216" y="445" text="Data Size:"/>

				<mx:ComboBox x="119" y="418" id="cboBaudRate"  dataProvider="{BaudRateArray}" labelField="name" width="90" enabled="false"/>
				<mx:ComboBox x="281" y="418" id="cboStopBits"  dataProvider="{StopBitsArray}" labelField="name" width="90" enabled="false"/>
				<mx:ComboBox x="119" y="443" id="cboParity"  dataProvider="{ParityArray}" labelField="name" width="90" enabled="false"/>
				<mx:ComboBox x="281" y="443" id="cboDataSize"  dataProvider="{DataSizeArray}" labelField="name" width="90" enabled="false"/>

				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="cashregister_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Cash Register" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="pendinglist_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Pending List" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="120" id="chkShowDocumentType" label="Show Document Type in Number"/>
				<mx:CheckBox x="50" y="145" id="chkAlwaysIncludePastDue" label="Always Include Past Due Documents in Filter"/>
				<mx:CheckBox x="50" y="170" id="chkColorPastDueEntries" label="Color Past Due Entries"/>

				<mx:Button x="50" y="200" label="Past Due Color..." click="doSelectColor(txtPastDueColor);" width="167"/>
				<mx:Button x="50" y="230" label="Ready for Pickup Color..." click="doSelectColor(txtReadyforPickupColor);" width="167"/>
				<mx:Button x="50" y="260" label="Invoice Color..." click="doSelectColor(txtInvoiceColor);" width="167"/>
				<mx:Button x="50" y="290" label="Estimate Color..." click="doSelectColor(txtEstimateColor);" width="167"/>

				<mx:Button x="50" y="320" label="List Font..." click="doSelectFont(txtListFont);" width="167"/>
				<mx:Button x="50" y="350" label="Header Font..." click="doSelectFont(txtHeaderFont);" width="167"/>

				<mx:TextInput x="225" y="200" id="txtPastDueColor" width="80"/>
				<mx:TextInput x="225" y="230" id="txtReadyforPickupColor" width="80"/>
				<mx:TextInput x="225" y="260" id="txtInvoiceColor" width="80"/>
				<mx:TextInput x="225" y="290" id="txtEstimateColor" width="80"/>
				<mx:TextInput x="225" y="320" id="txtListFont" width="150"/>
				<mx:TextInput x="225" y="350" id="txtHeaderFont" width="150"/>
				<mx:DataGrid x="50" y="27" width="442" height="85">
					<mx:columns>
						<mx:DataGridColumn headerText="Visible" dataField="col1" width="80"/>
						<mx:DataGridColumn headerText="Column Title" dataField="col2"/>
					</mx:columns>
				</mx:DataGrid>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="estimatorbehavior_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Estimator Behavior" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30" id="chkCloseSourceAfterCopying" label="Close cource document after copying"/>
				<mx:CheckBox x="50" y="55" id="chkEnterStockCost" label="Enter Stock Cost in Estimator"/>
				<mx:CheckBox x="50" y="80" id="chkCanChangeAddress" label="Can Change Address on ALL Documnets"/>
				<mx:CheckBox x="50" y="105" id="chkAutoShowPaperCalculator" label="Auto Show Paper Calculator on New Jobs"/>
				<mx:CheckBox x="50" y="130" id="chkAlwaysUseStockParentSize" label="AlwaysUseStockParentSize"/>
				<mx:CheckBox x="50" y="155" id="chkCalculateReOrderDate" label="Calculate Re-Order Date on Invoice Copy"/>
				<mx:CheckBox x="50" y="180" id="chkValidateSalesRep" label="Validate Sales Rep"/>
				<mx:CheckBox x="50" y="205" id="chkLeaveFoldedSizeEmpty" label="Leave Folded Size empty on new Jobs"/>
				<mx:CheckBox x="50" y="230" id="chkDoNotCostDuringPost" label="Do not perform Costing during invoice POST"/>
				<mx:CheckBox x="50" y="255" id="chkAutoShowCharges" label="Auto Show Charges on new Jobs"/>
				<mx:CheckBox x="50" y="280" id="chkShowSinglePassWorkAndTurnOptions" label="Show Single Pass Work and Turn Options"/>
				<mx:CheckBox x="50" y="305" id="chkNeverUsePresetPress" label="Never Use Preset Press on Stock Changes"/>
				<mx:CheckBox x="50" y="330" id="chkAddFixedWasteForEachPass" label="Add Fixed Waste for Each Pass (Affects historic Documents)"/>
				<mx:CheckBox x="50" y="355" id="chkAddFixedWasteForEachColor" label="Add Fixed Waste for Each Color (Affects historic Documents)"/>
				<mx:CheckBox x="50" y="380" id="chkCalculateInkByImpressions" label="Calculate INK by Impressions, Includes Waste (Affects history)"/>
				<mx:CheckBox x="50" y="405" id="chkUseHistoryTitle" label="Use the History Title for New Document Title"/>

				<mx:Label x="50" y="442" text="Normal Due Date (days):"/>
				<mx:TextInput x="196" y="440" id="txtNormalDueDateDays" width="70"/>
				
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="estimatorprinting_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Estimator Printing" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:CheckBox x="50" y="30" id="chkCloseInvoiceAfterPrinting" label="Close Invoice after Printing Job Tickets"/>
				<mx:CheckBox x="50" y="55" id="chkCloseInvoiceAndEstimatesAfterPrinting" label="Close Invoices and Estimates after Printing"/>

				<mx:Label x="58" y="92" text="Default Invoice:"/>
				<mx:Label x="50" y="117" text="Default Estimate:"/>

				<mx:ComboBox x="160" y="90" id="cboDefaultInvoice"  dataProvider="{DefaultInvoiceArray}" labelField="name" width="250"/>
				<mx:ComboBox x="160" y="115" id="cboDefaultEstimate"  dataProvider="{DefaultEstimateArray}" labelField="name" width="250"/>


				<mx:Panel x="10" y="159" width="520" height="174" layout="absolute" title="Payment Due Date">
					<mx:Label x="20" y="7" text="Number of Days Before Due:"/>
					<mx:TextInput x="188" y="5" id="txtNumberOfDaysBeforeDue" width="50"/>

					<mx:RadioButtonGroup id="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="25" id="opbFromNotifiedDate" label="From Notified Date" groupName="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="45" id="opbFromCompletedDate" label="From Completed Date" groupName="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="65" id="opbFromPickupDate" label="From Pickup Date" groupName="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="85" id="opbFromOrderedDate" label="From Ordered Date" groupName="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="105" id="opbFromPrintedDate" label="From Printed Date" groupName="optPaymentDueDays"/>
				</mx:Panel>

				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="papercalculator_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Paper Calculator" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="30" y="52" id="chkGripEdge"/>
				<mx:CheckBox x="30" y="102" id="chkFolioEdge"/>
				<mx:CheckBox x="30" y="152" id="chkColorBar"/>
				<mx:CheckBox x="30" y="202" id="chkWhiteSpace"/>
				<mx:CheckBox x="30" y="302" id="chkGutter"/>
				<mx:CheckBox x="30" y="352" id="chkBleed"/>
				
				<mx:Label x="50" y="30" text="Grip Edge / Gap"/>
				<mx:Label x="50" y="80" text="Folio Edge"/>
				<mx:Label x="50" y="130" text="Color Bar"/>
				<mx:Label x="50" y="180" text="White Space"/>
				<mx:Label x="50" y="230" text="Right"/>
				<mx:Label x="50" y="280" text="Gutter"/>
				<mx:Label x="50" y="330" text="Bleed"/>
				<mx:Label x="50" y="380" text="Right"/>

				<mx:TextInput x="50" y="50" id="txtGripEdge" width="93"/>
				<mx:TextInput x="50" y="100" id="txtFolioEdge" width="93"/>
				<mx:TextInput x="50" y="150" id="txtColorBar" width="93"/>
				<mx:TextInput x="50" y="200" id="txtWhiteSpace" width="93"/>
				<mx:TextInput x="50" y="250" id="txtWhiteSpaceRight" width="93"/>
				<mx:TextInput x="50" y="300" id="txtGutter" width="93"/>
				<mx:TextInput x="50" y="350" id="txtBleed" width="93"/>
				<mx:TextInput x="50" y="400" id="txtBleedRight" width="93"/>

				<mx:Label x="151" y="180" text="Top"/>
				<mx:Label x="151" y="230" text="Bottom"/>
				<mx:Label x="151" y="280" text="Horizontal"/>
				<mx:Label x="151" y="330" text="Top"/>
				<mx:Label x="151" y="380" text="Bottom"/>

				<mx:TextInput x="151" y="200" id="txtWhiteSpaceTop" width="93"/>
				<mx:TextInput x="151" y="250" id="txtWhiteSpaceBottom" width="93"/>
				<mx:TextInput x="151" y="300" id="txtGutterHorizontal" width="93"/>
				<mx:TextInput x="151" y="350" id="txtBleedTop" width="93"/>
				<mx:TextInput x="151" y="400" id="txtBleedBottom" width="93"/>


				<mx:Label x="27" y="462" text="Default Press Cutoff:"/>
				<mx:TextInput x="151" y="460" id="txtDefaultPressCutoff" width="93"/>


				<mx:CheckBox x="260" y="52" id="chkBackTrimParent" label="Back Trim, Parent"/>
				<mx:CheckBox x="260" y="77" id="chkTrimFourSides" label="Trim Four Sides"/>
				<mx:CheckBox x="260" y="102" id="chkWorkAndTumble" label="Work And Tumble"/>

				<mx:Label x="260" y="152" text="Run to Finish Grain:"/>
				<mx:ComboBox x="377" y="150" id="cboRunToFinishGrain"  dataProvider="{RunToFinishGrainArray}" labelField="name" width="80"/>

				<mx:Panel x="260" y="200" width="270" height="135" layout="absolute" title="Print Options">
					<mx:CheckBox x="10" y="5" id="chkPrintParentToFinish" label="Print Parent to Finish Section"/>
					<mx:CheckBox x="10" y="25" id="chkPrintParentToRun" label="Print Parent to Run Section"/>
					<mx:CheckBox x="10" y="45" id="chkPrintRunToFinish" label="Print Run to Finish Section"/>
					<mx:CheckBox x="10" y="65" id="chkAttachToJobTicket" label="Attach To Job Ticket"/>
				</mx:Panel>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="jobticket_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Job Ticket" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="30" y="30" text="Ticket Format:"/>
				<mx:RadioButtonGroup id="opgTicketFormat"/>
				<mx:RadioButton x="50" y="50" id="opgOldStyle" label="Old Style (pre 5.0)" groupName="opgTicketFormat"/>
				<mx:RadioButton x="50" y="70" id="opgStandardStyle" label="Standard Style" groupName="opgTicketFormat"/>
				<mx:RadioButton x="50" y="90" id="opgCustomStyle" label="Custom Style:" groupName="opgTicketFormat"/>
				<mx:ComboBox x="155" y="90" id="cboCustomStyle" dataProvider="{JobTicketStylesArray}" labelField="name" width="375"/>


				<mx:Label x="30" y="120" text="Options:"/>
				<mx:CheckBox x="50" y="140" id="chkShowAmountsOnTicket" label="Show Amount on Ticket"/>
				<mx:CheckBox x="50" y="160" id="chkAddTrackingBarCodes" label="Add Tracking Bar Codes"/>
				<mx:CheckBox x="50" y="180" id="chkShowReferenceNumber" label="Show Customer ext. Reference Number"/>
				
				<mx:Panel x="50" y="220" width="340" height="110" layout="absolute" title="Charge Description">
					<mx:RadioButtonGroup id="opgChargeDescription"/>
					<mx:RadioButton x="10" y="5" id="opgShowName" label="Show Name" groupName="opgChargeDescription"/>
					<mx:RadioButton x="10" y="25" id="opgShowDescription" label="Show Description" groupName="opgChargeDescription"/>
					<mx:RadioButton x="10" y="45" id="opgShowBothIfDifferent" label="Show Both if Different" groupName="opgChargeDescription"/>
				</mx:Panel>

				<mx:Button x="50" y="345" label="Set Bar Code Font..." click="doSelectFont(null);" width="167"/>
				<mx:Button x="50" y="375" label="Print Bar Codes..." click="doPrintBarCodes();" width="167"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="quantitybreaks_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Quantity Breaks" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="markups_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Markups" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="stocksizes_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Stocks And Sizes" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="stockdefinitions_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Stock Definitions" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="pricingmethod_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Pricing Method" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="creditdefaults_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Credit/Defaults" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:Label x="72" y="32" text="Credit Limit:"/>
				<mx:Label x="50" y="62" text="Finance Charge:"/>
				<mx:Label x="53" y="92" text="Inactive Period:"/>
				<mx:CheckBox x="50" y="120" id="chkRemoveDraftFromDeposit" label="Remove Drafts from Deposit Ticket"/>
				<mx:Label x="50" y="152" text="Default Sales Rep for New Accounts:"/>
				<mx:Label x="58" y="182" text="Default Shipping for New Accounts:"/>

				<mx:TextInput x="151" y="30" id="txtCreditLimit" width="379"/>
				<mx:TextInput x="151" y="60" id="txtFinanceCharge" width="379"/>
				<mx:TextInput x="151" y="90" id="txtInactivePeriod" width="379"/>
				<mx:TextInput x="255" y="150" id="txtDefaultSalesRep" width="275"/>
				<mx:TextInput x="255" y="180" id="txtDefaultShippingAddress" width="275"/>
				
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="agingperiods_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Aging Periods" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="28" y="32" text="Past Due:"/>
				<mx:Label x="18" y="132" text="Delinquent:"/>
				<mx:Label x="41" y="232" text="Frozen:"/>
				<mx:TextInput x="90" y="30" id="txtPastDue" width="60"/>
				<mx:TextInput x="90" y="130" id="txtDelinquent" width="60"/>
				<mx:TextInput x="90" y="230" id="txtFrozen" width="60"/>

				<mx:TextArea x="90" y="60" id="txtPastDueArea" width="390" height="60"/>
				<mx:TextArea x="90" y="160" id="txtDelinquentArea" width="390" height="60"/>
				<mx:TextArea x="90" y="260" id="txtFrozenArea" width="390" height="60"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="salescategories_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Sales Categories" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="glprofiles_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="GL Profiles" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="50" y="32" text="Link to:"/>
				<mx:ComboBox x="110" y="30" id="cboAccountingPackages"  dataProvider="{AccountingPackagesArray}" labelField="name" width="200"/>
				
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="creditcards_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Credit Card Info" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="ordernumberformat_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Order Number Format" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="journalentries_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Journal Entries" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30" id="chkPrintDocument" label="Print Document"/>
				
				<mx:Label x="50" y="92" text="Journal Document Preference:"/>
				<mx:ComboBox x="224" y="90" id="cboJournalDocumentPreference"  dataProvider="{JournalDocumentPreferenceArray}" labelField="name" width="250"/>

			</mx:Canvas>
		</mx:ViewStack>					
	</mx:VBox>
</mx:Panel>
