<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="init()" xmlns:fc="http://www.adobe.com/2006/fc" xmlns:vo="com.efi.vo.*"
width="800" height="678" title="Preferences"
 label="Preferences" name="systempreferences" xmlns:ns1="com.efi.components.*">
 
 	<mx:RemoteObject id="dataServiceSystem" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSystemResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveSystemResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServicePOS" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPOSResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSavePOSResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceEstimator" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadEstimatorResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveEstimatorResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceAccounting" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadAccountingResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveAccountingResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceCountry" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCountryResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCountryResult(event)"/>
	</mx:RemoteObject>
	 	<mx:RemoteObject id="dataServiceCashRegister" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCashRegisterResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCashRegisterResult(event)"/>
		<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteCashRegisterResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceCreditCard" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCreditCardResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCreditCardResult(event)"/>
		<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteCreditCardResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceMarkups" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadMarkupsResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveMarkupsResult(event)"/>
		<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteMarkupsResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceMarkupsMerchandise" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadMarkupsMerchandiseResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveMarkupsMerchandiseResult(event)"/>
		<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteMarkupsMerchandiseResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServicePendingList" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPendingListResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSavePendingListResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServicePricingMethod" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPricingMethodResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSavePricingMethodResult(event)"/>
		<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeletePricingMethodResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceQuantityBreaks" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadQuantityBreaksResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveQuantityBreaksResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceSalesCategory" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSalesCategoryResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveSalesCategoryResult(event)"/>
		<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteSalesCategoryResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceStockDefinition" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockDefinitionResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockDefinitionResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceStocks" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStocksResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStocksResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceColumnNames" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadColumnNamesResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveColumnNamesResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceSizeTable" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSizeTableResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveSizeTableResult(event)"/>
	</mx:RemoteObject>
 	<mx:RemoteObject id="dataServiceCategory" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCategoryResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveCategoryResult(event)"/>
	</mx:RemoteObject>

	<mx:Producer id="producer" destination="systempreferences"/>
	<mx:Consumer id="consumer" destination="systempreferences" message="messageHandler(event.message)"/>
	<mx:Consumer id="notification_consumer" destination="notifications" message="messageHandler(event.message)"/>
<mx:Script>                                   
<![CDATA[
	import com.efi.vo.Merchandise;
	import com.efi.vo.OutsideService;
	import com.efi.vo.TaxTable;
	import com.efi.vo.TaxCodes;
	import mx.controls.Text;
	import com.efi.itemRenderers.SalesCategoryEditor;
	import com.efi.itemRenderers.TaxCodeEditor;
	import com.efi.itemRenderers.TaxTableEditor;
			
	import com.efi.vo.PreferencesAccounting;
	import com.efi.vo.PreferencesEstimating;
	import com.efi.vo.PreferencesPOS;
	import com.efi.vo.PreferencesSystem;
	import com.efi.vo.PreferencesCashRegister;
	
	import com.efi.vo.PreferencesCreditCard;
	import com.efi.vo.PreferencesMarkups;
	import com.efi.vo.PreferencesPendingList;
	import com.efi.vo.PricingMethod;
	import com.efi.vo.PreferencesQuantityBreaks;
	import com.efi.vo.PreferencesSalesCategory;
	import com.efi.vo.PreferencesStockDefinition;
	import com.efi.vo.PreferencesStocks;
	
	
	import com.efi.vo.Country;
	import com.efi.vo.ColumnNames;
	import com.efi.vo.SizeTable;
	import com.efi.vo.SalesCategory;
	
	import mx.events.AdvancedDataGridEvent
	import mx.events.AdvancedDataGridEventReason
	
    import mx.events.DataGridEvent;
    import mx.events.DataGridEventReason;
	import mx.controls.Alert;                                         
	import mx.managers.PopUpManager;                                         
	import mx.containers.TitleWindow;                                         
	import mx.collections.ArrayCollection;                                         
	import mx.rpc.events.ResultEvent;                                         
	import mx.rpc.events.FaultEvent;                                         
	import mx.messaging.messages.AsyncMessage;
	import mx.messaging.messages.IMessage;
	import mx.collections.XMLListCollection;

	[Bindable]
	private var enableSave:Boolean = true;

//Data field arrays
	[Bindable]
	private var PreferencesSystemArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesPOSArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesEstimatingArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesAccountingArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesCashRegisterArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesCreditCardArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesMarkupsArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesMarkupsMerchandiseArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesPendingListArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesPricingMethodArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesQuantityBreaksArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesSalesCategoryArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesStockDefinitionArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesStocksArray:ArrayCollection = new ArrayCollection();

	[Bindable]
	private var PreferencesCashRegisterDeleteArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesMarkupsDeleteArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesMarkupsMerchandiseDeleteArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesPricingMethodDeleteArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesSalesCategoryDeleteArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var PreferencesCreditCardDeleteArray:ArrayCollection = new ArrayCollection();

//AutoComplete arrays
	[Bindable]
	private var CountryArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var ColumnNamesArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var SizeTableArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var CategoryArray:ArrayCollection = new ArrayCollection();

//Combo box arrays
	[Bindable]
	private var DaysArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var MonthsArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var ReceiptPrinterArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var BaudRateArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var StopBitsArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var ParityArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var DataSizeArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var DefaultInvoiceArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var DefaultEstimateArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var RunToFinishGrainArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var JobTicketStylesArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var AccountingPackagesArray:ArrayCollection = new ArrayCollection();
	[Bindable]
	private var JournalDocumentPreferenceArray:ArrayCollection = new ArrayCollection();

//Radio Buttons
	[Bindable]
	private var opgFirstDayOfWorkWeekValue:String = "opgSunday";
	[Bindable]
	private var optPaymentDueDaysValue:String = "opbFromNotifiedDate";
	[Bindable]
	private var opgChargeDescriptionValue:String = "opgShowName";
//Data view variables
	[Bindable]
	private var preferencesSystem:PreferencesSystem;

	[Bindable]                                         
	private var preferencesPOS:PreferencesPOS;

	[Bindable]                                         
	private var preferencesEstimating:PreferencesEstimating;

	[Bindable]                                         
	private var preferencesAccounting:PreferencesAccounting;

	[Bindable]
	private var preferencesStocks:PreferencesStocks;
	
	[Bindable]
	private var preferencesCashRegister:PreferencesCashRegister;
		
	[Bindable]
	private var country:Country;

//Tree view XML table
	[Bindable]
	private var treeData:XML =
    	<root>
			<node label="System">
				<node label="Behavior" isBranch="false" tag="0"/>
				<node label="Company" isBranch="false" tag="1"/>
				<node label="Business Calendar" isBranch="false" tag="2"/>
				<node label="Numbers" isBranch="false" tag="3"/>
				<node label="Alternate Currency" isBranch="false" tag="4"/>
				<node label="International" isBranch="false" tag="5"/>
				<node label="Product Activation" isBranch="false" tag="6"/>
				<node label="Integration" isBranch="false" tag="7"/>
				<node label="Palm Tracker" isBranch="false" tag="8"/>
				<node label="Address Formatting" isBranch="false" tag="9"/>
			</node>
			<node label="POS">
				<node label="Receipt" isBranch="false" tag="10"/>
				<node label="Cash Drawer" isBranch="false" tag="11"/>
				<node label="Cash Register" isBranch="false" tag="12"/>
				<node label="Pending List" isBranch="false" tag="13"/>
			</node>
			<node label="Estimator">
				<node label="Estimator Behavior" isBranch="false" tag="14"/>
				<node label="Estimator Printing" isBranch="false" tag="15"/>
				<node label="Paper Calculator" isBranch="false" tag="16"/>
				<node label="Job Ticket" isBranch="false" tag="17"/>
				<node label="Quantity Breaks" isBranch="false" tag="18"/>
				<node label="Markups" isBranch="false" tag="19"/>
				<node label="Stocks and Sizes" isBranch="false" tag="20"/>
				<node label="Stock Definitions" isBranch="false" tag="21"/>
				<node label="Pricing Method" isBranch="false" tag="22"/>
			</node>			
			<node label="Accounting">
				<node label="Credit/Defaults" isBranch="false" tag="23"/>
				<node label="Aging Periods" isBranch="false" tag="24"/>
				<node label="Sales Categories" isBranch="false" tag="25"/>
				<node label="GL Profiles" isBranch="false" tag="26"/>
				<node label="Credit Card Info" isBranch="false" tag="27"/>
				<node label="Order Number Format" isBranch="false" tag="28"/>
				<node label="Journal Entries" isBranch="false" tag="29"/>
			</node>
		</root>;
	
	private function fillDaysArray(fillArray:ArrayCollection):void {
		var day:Object=new Object();
		day.name="Sunday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Monday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Tuesday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Wednesday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Thursday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Friday";
		fillArray.addItem(day);
		day=new Object();
		day.name="Saturday";
		fillArray.addItem(day);
		
	}

	private function fillMonthsArray(fillArray:ArrayCollection):void{
		var month:Object=new Object();
		month.name="January";
		fillArray.addItem(month);
		month=new Object();
		month.name="February";
		fillArray.addItem(month);
		month=new Object();
		month.name="March";
		fillArray.addItem(month);
		month=new Object();
		month.name="April";
		fillArray.addItem(month);
		month=new Object();
		month.name="May";
		fillArray.addItem(month);
		month=new Object();
		month.name="June";
		fillArray.addItem(month);
		month=new Object();
		month.name="July";
		fillArray.addItem(month);
		month=new Object();
		month.name="August";
		fillArray.addItem(month);
		month=new Object();
		month.name="September";
		fillArray.addItem(month);
		month=new Object();
		month.name="October";
		fillArray.addItem(month);
		month=new Object();
		month.name="November";
		fillArray.addItem(month);
		month=new Object();
		month.name="December";
		fillArray.addItem(month);
	}
	
	private function fillReceiptPrinterArray(fillArray:ArrayCollection):void{
		var printer:Object=new Object();
		printer.name="Off";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="Modem Port";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="Printer Port";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="USB Serial Port";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="Named Graphics Printer";
		fillArray.addItem(printer);
		printer=new Object();
		printer.name="Names Serial Port";
		fillArray.addItem(printer);

	}
	private function fillModemArray():void{
		var setting:Object = new Object();
		setting.name="300";
		BaudRateArray.addItem(setting);

		setting=new Object();
		setting.name="1 bit";
		StopBitsArray.addItem(setting);

		setting=new Object();
		setting.name="None";
		ParityArray.addItem(setting);

		setting=new Object();
		setting.name="5 Bits";
		DataSizeArray.addItem(setting);

	}
	
	private function fillDefaultDocumentsArray(fillArray:ArrayCollection):void{
		var setting:Object = new Object();
		setting.name="No default specified";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Alternate Currency";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Credit Memo";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Estimate - Long Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Estimate - Short Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Fax Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Invoice - Long Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Invoice - Short Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Quote Form";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Quote Letter";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Standard";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Thank You Letter";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Unit Price / each";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Unit Price / thousand";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="[en]!TaxName !Remarks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="[en]!TaxName +Remarks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="[en]+TaxName !Remarks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="[en]+TaxName +Remarks";
		fillArray.addItem(setting);
	}

	private function fillRunToFinishGrainArray(fillArray:ArrayCollection):void{
		var setting:Object = new Object();
		setting.name="Neither";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Match Grain";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Swing / Combination";
		fillArray.addItem(setting);
	}
	
	private function fillJobTicketStylesArray(fillArray:ArrayCollection):void{
		
	}
	private function fillAccountingPackagesArray(fillArray:ArrayCollection):void{
		var setting:Object = new Object();
		setting.name="MYOB";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Peachtree Accounting";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Quickbooks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="MultiLedger";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="SAGE Accounting";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Simply Accounting";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="BusinessWorks";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Great Plains Import Manager";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="SAGE Line 50";
		fillArray.addItem(setting);
		setting = new Object();
		setting.name="Peachtree CSV";
		fillArray.addItem(setting);
	}
		
	public function init():void {
		consumer.subscribe();
		notification_consumer.subscribe();
		
		fillStaticData();
		
		getPreferencesData();

		checkAlternateCurrency();

		openTree();
		setup();
		
	}
	
	private function setup():void{
		
		for each(var element:Object in CategoryArray) {
//			CashRegisterGridSalesCategoryArray.addItem(element)
		}
	}
	
	private function fillStaticData():void{
		fillDaysArray(DaysArray);
		fillMonthsArray(MonthsArray);
		fillReceiptPrinterArray(ReceiptPrinterArray);	

		dataServiceCountry.getAll("Country");
		dataServiceColumnNames.getAll("ColumnNames");
		dataServiceSizeTable.getAll("SizeTable");
		dataServiceCategory.getAll("SalesCategory");

		fillModemArray();
		fillDefaultDocumentsArray(DefaultInvoiceArray);
		fillDefaultDocumentsArray(DefaultEstimateArray);
		fillDefaultDocumentsArray(JournalDocumentPreferenceArray)
		fillRunToFinishGrainArray(RunToFinishGrainArray);
		fillJobTicketStylesArray(JobTicketStylesArray);
		fillAccountingPackagesArray(AccountingPackagesArray);
	}
	
	private function getPreferencesData():void{
		dataServiceSystem.getAll("PreferencesSystem");
		dataServicePOS.getAll("PreferencesPOS");
		dataServiceEstimator.getAll("PreferencesEstimating");
		dataServiceAccounting.getAll("PreferencesAccounting");
		dataServiceCashRegister.getAll("PreferencesCashRegister");
		dataServiceCashRegister.getAll("PreferencesCashRegister");
		dataServiceCreditCard.getAll("PreferencesCreditCard");
		dataServiceMarkups.getAll("OutsideServices");
		dataServiceMarkupsMerchandise.getAll("Merchandise")
		dataServicePendingList.getAll("PreferencesPendingList");
		dataServicePricingMethod.getAll("PricingMethod");
		dataServiceQuantityBreaks.getAll("PreferencesQuantityBreaks");
		dataServiceSalesCategory.getAll("PreferencesSalesCategory");
		dataServiceStockDefinition.getAll("PreferencesStockDefinition");
		dataServiceStocks.getAll("PreferencesStocks");

	}

	private function updatePreferencesData():void{
		dataServiceSystem.addUpdate(preferencesSystem);
		dataServicePOS.addUpdate(preferencesPOS);
		dataServiceEstimator.addUpdate(preferencesEstimating);
		dataServiceAccounting.addUpdate(preferencesAccounting);

		//remove and or delete items from table
		for each(var deleteitem1:PreferencesCashRegister in PreferencesCashRegisterDeleteArray) {
			dataServiceCashRegister.deleteItem(deleteitem1, deleteitem1.id);
		}
		PreferencesCashRegisterDeleteArray.removeAll();
		for each(var deleteitem2:OutsideService in PreferencesMarkupsDeleteArray) {
			dataServiceMarkups.deleteItem(deleteitem2, deleteitem2.id);
		}
		PreferencesMarkupsDeleteArray.removeAll()
		for each(var deleteitem3:Merchandise in PreferencesMarkupsMerchandiseDeleteArray) {
			dataServiceMarkupsMerchandise.deleteItem(deleteitem3, deleteitem3.id);
		}
		PreferencesMarkupsMerchandiseDeleteArray.removeAll()
		for each(var deleteitem4:PricingMethod in PreferencesPricingMethodDeleteArray) {
			dataServicePricingMethod.deleteItem(deleteitem4, deleteitem4.id);
		}
		PreferencesPricingMethodDeleteArray.removeAll()
		for each(var deleteitem5:PreferencesSalesCategory in PreferencesSalesCategoryDeleteArray) {
			dataServiceSalesCategory.deleteItem(deleteitem5, deleteitem5.id);
		}
		PreferencesSalesCategoryDeleteArray.removeAll()
		for each(var deleteitem6:PreferencesCreditCard in PreferencesCreditCardDeleteArray) {
			dataServiceCreditCard.deleteItem(deleteitem6, deleteitem6.id);
		}
		PreferencesCreditCardDeleteArray.removeAll();

		// commit changes add or updates to table
		for each(var item1:PreferencesCashRegister in PreferencesCashRegisterArray) {
			dataServiceCashRegister.addUpdate(item1);
		}
		for each(var item2:PreferencesPendingList in PreferencesPendingListArray) {
			dataServicePendingList.addUpdate(item2);
		}
		for each(var item3:OutsideService in PreferencesMarkupsArray) {
			dataServiceMarkups.addUpdate(item3);
		}
		for each(var item4:Merchandise in PreferencesMarkupsMerchandiseArray) {
			dataServiceMarkupsMerchandise.addUpdate(item4);
		}
		for each(var item5:PreferencesStockDefinition in PreferencesStockDefinitionArray) {
			dataServiceStockDefinition.addUpdate(item5);
		}
		for each(var item6:PricingMethod in PreferencesPricingMethodArray) {
			dataServicePricingMethod.addUpdate(item6);
		}
		for each(var item7:PreferencesSalesCategory in PreferencesSalesCategoryArray) {
			dataServiceSalesCategory.addUpdate(item7);
		}
		for each(var item8:PreferencesCreditCard in PreferencesCreditCardArray) {
			dataServiceCreditCard.addUpdate(item8);
		}

	}

	private function mapFromPreferencesSystemData():void {
		this.chkActivateUserEventLogging.selected = preferencesSystem.activateUserEventLogging
		this.chkAlwaysRoundDown.selected = preferencesSystem.alwaysRoundDown
		this.chkAlwaysRoundDownAlternateCurrency.selected = preferencesSystem.alternateAlwaysRoundDown
		this.chkDisableNonTaxableOptions.selected = preferencesSystem.disableNonTaxableOptions
		this.chkDisableTextStyles.selected = preferencesSystem.disableTextStyles
		this.chkEliminateSomeWarningMessages.selected = preferencesSystem.eliminateWarningMessages
		this.chkEnableAutomaticLogOut.selected = preferencesSystem.enableAutoLogOut
		this.chkEnableAutomaticQuit.selected = preferencesSystem.automaticQuit
		this.chkEnableLineItemTaxes.selected = preferencesSystem.lineItemTaxes
		this.chkEnablePricingSystem.selected = preferencesSystem.enablePricingSystem
		this.chkFutureDateExcludeClosed.selected = preferencesSystem.futureDatesExcludeClosed
		this.chkJDFConnectorIsVersion45orLater.selected = preferencesSystem.jDFConnector45orLater
		this.chkJDFConnectorSupportsNonAsciiCharacters.selected = preferencesSystem.supportsNonAsciiCharacters
		this.chkOnlyPostInvoicesMarkedReady.selected = preferencesSystem.onlyPostMarkedReadyInvoices
		this.chkPNIIsVersion45orLater.selected = preferencesSystem.pNI45orLater
		this.chkSecondsOfInactivity.selected = preferencesSystem.secondsOfInactivity
		this.chkShowInvoices.selected = preferencesSystem.showInvoicesWithToday
		this.chkTaxRoundUp.selected = preferencesSystem.roundTaxUp
		this.chkTriggerAfterPosting.selected = preferencesSystem.triggerAfterPosting
		this.chkUseAlternateCurrency.selected = preferencesSystem.useAlternateCurrency
		this.chkUseAustralianInvoiceRounding.selected = preferencesSystem.austrailianInvoiceRounding
		this.chkUseChileTaxIdVerification.selected = preferencesSystem.chileTaxIdVerification
		this.chkUseInternationalTextSorting.selected = preferencesSystem.internationalTextSorting
		
		//comboboxs
		if (preferencesSystem.fiscalYearStartMonth != "")
			cboFiscalYearStartMonth.selectedIndex = findItem(preferencesSystem.fiscalYearStartMonth, MonthsArray);

		//radio buttons
		opgFirstDayOfWorkWeekValue = preferencesSystem.workFirstDayOfWeek
		
	}
	private function mapFromPreferencesAccountingData():void {
		this.chkActivateCCAprovalProcess.selected = preferencesAccounting.activateCreditCardApproval 
		this.chkAllowEstimatePrefixModification.selected = preferencesAccounting.estimateAllowPrefixMod
		this.chkAllowEstimateSuffixModification.selected = preferencesAccounting.estimateAllowSuffixMod
		this.chkAllowInvoicePrefixModification.selected = preferencesAccounting.invoiceAllowPrefixMod
		this.chkAllowInvoiceSuffixModification.selected = preferencesAccounting.invoiceAllowSuffixMod
		this.chkPrintDocument.selected = preferencesAccounting.printDocument
		this.chkPromptUserForValidationInformation.selected = preferencesAccounting.promptUserForValidation
		this.chkRemoveDraftFromDeposit.selected = preferencesAccounting.removeDraftsFromDeposit
		this.chkUseAddressValidation.selected = preferencesAccounting.useAddressValidation

		if (preferencesAccounting.journalDocumentPreference != "")
			cboJournalDocumentPreference.selectedIndex = findItem(preferencesAccounting.journalDocumentPreference, JournalDocumentPreferenceArray);
		
		if (preferencesAccounting.accountingLinkTo != "")
			cboAccountingPackages.selectedIndex = findItem(preferencesAccounting.accountingLinkTo, AccountingPackagesArray);
		
	}
	private function mapFromPreferencesEstimatingData():void {
		this.chkAddFixedWasteForEachColor.selected = preferencesEstimating.addFixedWasteForEachColor
		this.chkAddFixedWasteForEachPass.selected = preferencesEstimating.addFixedWasteForEachPass
		this.chkAddTrackingBarCodes.selected = preferencesEstimating.addTrackingBarCode
		this.chkAlwaysUseStockParentSize.selected = preferencesEstimating.useStockParentSize
		this.chkAttachToJobTicket.selected = preferencesEstimating.attachToJobTicket
		this.chkAutoShowCharges.selected = preferencesEstimating.autoShowCharges
		this.chkAutoShowPaperCalculator.selected = preferencesEstimating.showPaperCalculator
		this.chkBackTrimParent.selected = preferencesEstimating.backTrimParent
		this.chkBleed.selected = preferencesEstimating.useBleed
		this.chkCalculateInkByImpressions.selected = preferencesEstimating.calculateInkbyImpressions
		this.chkCalculateReOrderDate.selected = preferencesEstimating.calculateReOrderDate
		this.chkCanChangeAddress.selected = preferencesEstimating.canChangeAddress
		this.chkCloseInvoiceAfterPrinting.selected = preferencesEstimating.closeInvoiceAfterPrintingTicket
		this.chkCloseInvoiceAndEstimatesAfterPrinting.selected = preferencesEstimating.closeInvoicesAndEstimateAfterPrinting
		this.chkCloseSourceAfterCopying.selected = preferencesEstimating.closeAfterCopy
		this.chkColorBar.selected = preferencesEstimating.useColorBar
		this.chkDoNotCostDuringPost.selected = preferencesEstimating.doNotCostDuringPost
		this.chkEnterStockCost.selected = preferencesEstimating.stockCostInEstimator
		this.chkFolioEdge.selected = preferencesEstimating.useFolioEdge
		this.chkGripEdge.selected = preferencesEstimating.useGripEdgeGap
		this.chkGutter.selected = preferencesEstimating.useGutter
		this.chkLeaveFoldedSizeEmpty.selected = preferencesEstimating.leaveFoldedSizeEmpty
		this.chkNeverUsePresetPress.selected = preferencesEstimating.neverUsePresetPressOnStockChanges
		this.chkPrintParentToFinish.selected = preferencesEstimating.printParentToFinishSection
		this.chkPrintParentToRun.selected = preferencesEstimating.printParentToRunSection
		this.chkPrintRunToFinish.selected = preferencesEstimating.printRunToFinishSection
		this.chkShowAmountsOnTicket.selected = preferencesEstimating.showAmountOnTicket
		this.chkShowReferenceNumber.selected = preferencesEstimating.showCustomerReferenceNumber
		this.chkShowSinglePassWorkAndTurnOptions.selected = preferencesEstimating.showSinglePassWorkTurnOptions
		this.chkTrimFourSides.selected = preferencesEstimating.trimFourSides
		this.chkUseHistoryTitle.selected = preferencesEstimating.useHistoryTitleforNewTitle
		this.chkValidateSalesRep.selected = preferencesEstimating.validateSalesRep
		this.chkWhiteSpace.selected = preferencesEstimating.useWhiteSpace
		this.chkWorkAndTumble.selected = preferencesEstimating.workandTumble
//		Following code doesn't compile...		
//		if (preferencesEstimating.defaultEstimate != null)
//			cboDefaultEstimate.selectedIndex = findItem(preferencesEstimating.defaultEstimate, DefaultEstimateArray);
//
//		if (preferencesEstimating.defaultInvoice != null)
//			cboDefaultInvoice.selectedIndex = findItem(preferencesEstimating.defaultInvoice, DefaultInvoiceArray);
//
//		optPaymentDueDaysValue = preferencesEstimating.dueFrom;

		if (preferencesEstimating.runToFinishGrain != "")
			cboRunToFinishGrain.selectedIndex = findItem(preferencesEstimating.runToFinishGrain, RunToFinishGrainArray);

		if (preferencesEstimating.customJobTicket != "")
			cboCustomStyle.selectedIndex = findItem(preferencesEstimating.customJobTicket, JobTicketStylesArray);
			
		opgChargeDescriptionValue = preferencesEstimating.chargeDescription;

	}
	private function mapFromPreferencesPOSData():void {
		this.chkEnableCashDrawer.selected = preferencesPOS.enableCashDrawer
		this.chkHideTaxLineItems.selected = preferencesPOS.hideTaxLines
		this.chkKeepSettingsLocal.selected = preferencesPOS.keepLocalSettings
		this.chkLockSettings.selected = preferencesPOS.lockSettings
		this.chkPrint2forCash.selected = preferencesPOS.print2forCash
		this.chkPrint2forCredit.selected = preferencesPOS.print2forCreditCards
		this.chkPrintInvoices.selected = preferencesPOS.printInvoices
		this.chkPrintReceipts.selected = preferencesPOS.printReceipts
		this.chkSerialNumberReceiptsStart.selected = preferencesPOS.receiptStartNumber
		this.chkUseMasterDrawer.selected = preferencesPOS.useMasterDrawer

		if (preferencesPOS.receiptPrinterStatus != "")
			cboReceiptPrinter.selectedIndex = findItem(preferencesPOS.receiptPrinterStatus, ReceiptPrinterArray);

		if (preferencesPOS.baudRate != "")
			cboBaudRate.selectedIndex = findItem(preferencesPOS.baudRate, BaudRateArray);
		if (preferencesPOS.stopBits != "")
			cboStopBits.selectedIndex = findItem(preferencesPOS.stopBits, StopBitsArray);
		if (preferencesPOS.parity != "")
			cboParity.selectedIndex = findItem(preferencesPOS.parity, ParityArray);
		if (preferencesPOS.dataSize != "")
			cboDataSize.selectedIndex = findItem(preferencesPOS.dataSize, DataSizeArray);
	}

	private function mapFromPreferencesStocksData():void {
		this.chkMarkupOnly.selected = preferencesStocks.markupOnly;
	}

	private function mapFromPreferencesAllData():void {
		mapFromPreferencesAccountingData();
		mapFromPreferencesEstimatingData();
		mapFromPreferencesPOSData();
		mapFromPreferencesSystemData();
//		this.chkAlwaysIncludePastDue.selected 
//		this.chkColorPastDueEntries.selected 
//		this.chkShowDocumentType.selected
	}

	private function mapToPreferencesAllData():void {
		mapToPreferencesAccountingData();
		mapToPreferencesEstimatingData();
		mapToPreferencesPOSData();
		mapToPreferencesSystem();
//		this.chkAlwaysIncludePastDue.selected 
//		this.chkColorPastDueEntries.selected 
//		this.chkShowDocumentType.selected
		//fix data incorrectly defined as int not bool
		
	}

	private function mapToPreferencesSystem():void {
		preferencesSystem.activateUserEventLogging = this.chkActivateUserEventLogging.selected
		preferencesSystem.alwaysRoundDown = this.chkAlwaysRoundDown.selected
		preferencesSystem.alternateAlwaysRoundDown = this.chkAlwaysRoundDownAlternateCurrency.selected
		preferencesSystem.disableNonTaxableOptions = this.chkDisableNonTaxableOptions.selected
		preferencesSystem.disableTextStyles = this.chkDisableTextStyles.selected
		preferencesSystem.eliminateWarningMessages = this.chkEliminateSomeWarningMessages.selected
		preferencesSystem.enableAutoLogOut = this.chkEnableAutomaticLogOut.selected
		preferencesSystem.automaticQuit = this.chkEnableAutomaticQuit.selected
		preferencesSystem.lineItemTaxes = this.chkEnableLineItemTaxes.selected
		preferencesSystem.enablePricingSystem = this.chkEnablePricingSystem.selected
		preferencesSystem.futureDatesExcludeClosed = this.chkFutureDateExcludeClosed.selected
		preferencesSystem.jDFConnector45orLater = this.chkJDFConnectorIsVersion45orLater.selected
		preferencesSystem.supportsNonAsciiCharacters = this.chkJDFConnectorSupportsNonAsciiCharacters.selected
		preferencesSystem.onlyPostMarkedReadyInvoices = this.chkOnlyPostInvoicesMarkedReady.selected
		preferencesSystem.pNI45orLater = this.chkPNIIsVersion45orLater.selected
		preferencesSystem.secondsOfInactivity = this.chkSecondsOfInactivity.selected
		preferencesSystem.showInvoicesWithToday = this.chkShowInvoices.selected
		preferencesSystem.roundTaxUp = this.chkTaxRoundUp.selected
		preferencesSystem.triggerAfterPosting = this.chkTriggerAfterPosting.selected
		preferencesSystem.useAlternateCurrency = this.chkUseAlternateCurrency.selected
		preferencesSystem.austrailianInvoiceRounding = this.chkUseAustralianInvoiceRounding.selected
		preferencesSystem.chileTaxIdVerification = this.chkUseChileTaxIdVerification.selected
		preferencesSystem.internationalTextSorting = this.chkUseInternationalTextSorting.selected

//comboboxes
		if (cboFiscalYearStartMonth != null && cboFiscalYearStartMonth.selectedItem != null)
	 		preferencesSystem.fiscalYearStartMonth = cboFiscalYearStartMonth.selectedItem.name;

//Radio buttons
		preferencesSystem.workFirstDayOfWeek = opgFirstDayOfWorkWeekValue;
		
	}
	private function mapToPreferencesAccountingData():void {
		preferencesAccounting.activateCreditCardApproval = this.chkActivateCCAprovalProcess.selected 
		preferencesAccounting.estimateAllowPrefixMod = this.chkAllowEstimatePrefixModification.selected
		preferencesAccounting.estimateAllowSuffixMod = this.chkAllowEstimateSuffixModification.selected
		preferencesAccounting.invoiceAllowPrefixMod = this.chkAllowInvoicePrefixModification.selected
		preferencesAccounting.invoiceAllowSuffixMod = this.chkAllowInvoiceSuffixModification.selected
		preferencesAccounting.printDocument = this.chkPrintDocument.selected
		preferencesAccounting.promptUserForValidation = this.chkPromptUserForValidationInformation.selected
		preferencesAccounting.removeDraftsFromDeposit = this.chkRemoveDraftFromDeposit.selected
		preferencesAccounting.useAddressValidation = this.chkUseAddressValidation.selected
		
		if (cboAccountingPackages != null && cboAccountingPackages.selectedItem != null)
	 		preferencesAccounting.accountingLinkTo = cboAccountingPackages.selectedItem.name;
		
		if (cboJournalDocumentPreference != null && cboJournalDocumentPreference.selectedItem != null)
			preferencesAccounting.journalDocumentPreference = cboJournalDocumentPreference.selectedItem.name;
	}
	private function mapToPreferencesEstimatingData():void {
		preferencesEstimating.addFixedWasteForEachColor = this.chkAddFixedWasteForEachColor.selected
		preferencesEstimating.addFixedWasteForEachPass = this.chkAddFixedWasteForEachPass.selected
		preferencesEstimating.addTrackingBarCode = this.chkAddTrackingBarCodes.selected
		preferencesEstimating.useStockParentSize = this.chkAlwaysUseStockParentSize.selected
		preferencesEstimating.attachToJobTicket = this.chkAttachToJobTicket.selected
		preferencesEstimating.autoShowCharges = this.chkAutoShowCharges.selected
		preferencesEstimating.showPaperCalculator = this.chkAutoShowPaperCalculator.selected
		preferencesEstimating.backTrimParent = this.chkBackTrimParent.selected
		preferencesEstimating.useBleed = this.chkBleed.selected
		preferencesEstimating.calculateInkbyImpressions = this.chkCalculateInkByImpressions.selected
		preferencesEstimating.calculateReOrderDate = this.chkCalculateReOrderDate.selected
		preferencesEstimating.canChangeAddress = this.chkCanChangeAddress.selected
		preferencesEstimating.closeInvoiceAfterPrintingTicket = this.chkCloseInvoiceAfterPrinting.selected
		preferencesEstimating.closeInvoicesAndEstimateAfterPrinting = this.chkCloseInvoiceAndEstimatesAfterPrinting.selected
		preferencesEstimating.closeAfterCopy = this.chkCloseSourceAfterCopying.selected
		preferencesEstimating.useColorBar = this.chkColorBar.selected
		preferencesEstimating.doNotCostDuringPost = this.chkDoNotCostDuringPost.selected
		preferencesEstimating.stockCostInEstimator = this.chkEnterStockCost.selected 
		preferencesEstimating.useFolioEdge = this.chkFolioEdge.selected
		preferencesEstimating.useGripEdgeGap = this.chkGripEdge.selected
		preferencesEstimating.useGutter = this.chkGutter.selected
		preferencesEstimating.leaveFoldedSizeEmpty = this.chkLeaveFoldedSizeEmpty.selected
		preferencesEstimating.neverUsePresetPressOnStockChanges = this.chkNeverUsePresetPress.selected
		preferencesEstimating.printParentToFinishSection = this.chkPrintParentToFinish.selected
		preferencesEstimating.printParentToRunSection = this.chkPrintParentToRun.selected
		preferencesEstimating.printRunToFinishSection = this.chkPrintRunToFinish.selected
		preferencesEstimating.showAmountOnTicket = this.chkShowAmountsOnTicket.selected
		preferencesEstimating.showCustomerReferenceNumber = this.chkShowReferenceNumber.selected
		preferencesEstimating.showSinglePassWorkTurnOptions = this.chkShowSinglePassWorkAndTurnOptions.selected
		preferencesEstimating.trimFourSides = this.chkTrimFourSides.selected
		preferencesEstimating.useHistoryTitleforNewTitle = this.chkUseHistoryTitle.selected
		preferencesEstimating.validateSalesRep = this.chkValidateSalesRep.selected
		preferencesEstimating.useWhiteSpace = this.chkWhiteSpace.selected
		preferencesEstimating.workandTumble = this.chkWorkAndTumble.selected

		if (cboDefaultEstimate != null && cboDefaultEstimate.selectedItem != null)
	 		preferencesEstimating.defaultEstimate = cboDefaultEstimate.selectedItem.name;
		if (cboDefaultInvoice != null && cboDefaultInvoice.selectedItem != null)
	 		preferencesEstimating.defaultInvoice = cboDefaultInvoice.selectedItem.name;

//		Following code doesn't compile...
//		preferencesEstimating.dueFrom = optPaymentDueDaysValue;

		if (cboRunToFinishGrain != null && cboRunToFinishGrain.selectedItem != null)
	 		preferencesEstimating.runToFinishGrain = cboRunToFinishGrain.selectedItem.name;
		
		if (cboCustomStyle != null && cboCustomStyle.selectedItem != null)
			preferencesEstimating.customJobTicket = cboCustomStyle.selectedItem.name; 

		preferencesEstimating.chargeDescription = opgChargeDescriptionValue;
		
	}
	private function mapToPreferencesPOSData():void {
		preferencesPOS.enableCashDrawer = this.chkEnableCashDrawer.selected
		preferencesPOS.hideTaxLines = this.chkHideTaxLineItems.selected
		preferencesPOS.keepLocalSettings = this.chkKeepSettingsLocal.selected
		preferencesPOS.lockSettings = this.chkLockSettings.selected
		preferencesPOS.print2forCash = this.chkPrint2forCash.selected
		preferencesPOS.print2forCreditCards = this.chkPrint2forCredit.selected
		preferencesPOS.printInvoices = this.chkPrintInvoices.selected
		preferencesPOS.printReceipts = this.chkPrintReceipts.selected
		preferencesPOS.receiptStartNumber = this.chkSerialNumberReceiptsStart.selected
		preferencesPOS.useMasterDrawer = this.chkUseMasterDrawer.selected

		if (cboReceiptPrinter != null && cboReceiptPrinter.selectedItem != null)
	 		preferencesPOS.receiptPrinterStatus = cboReceiptPrinter.selectedItem.name;

		if (cboBaudRate != null && cboBaudRate.selectedItem != null)
			preferencesPOS.baudRate = cboBaudRate.selectedItem.name;
		if (cboStopBits != null && cboStopBits.selectedItem != null)
			preferencesPOS.stopBits = cboStopBits.selectedItem.name;
		if (cboParity != null && cboParity.selectedItem != null)
			preferencesPOS.parity = cboParity.selectedItem.name;
		if (cboDataSize != null && cboDataSize.selectedItem != null)
			preferencesPOS.dataSize = cboDataSize.selectedItem.name;
		
		
	}
	private function mapToPreferencesStocksData():void {
		preferencesStocks.markupOnly = this.chkMarkupOnly.selected
	}
	
	private function messageHandler(message:IMessage):void{
		var messageBody:Object = message.body;// as com.efi.messaging.MessageBody;
		
		var messageType:String = messageBody.messageType;
		if (messageType == "ADDUPDATE" || messageType == "DELETE") {
			var payloadType:String = messageBody.payloadType as String; // What kind of item was added/deleted
			var payload:Number = messageBody.payload as Number; // ID if item added or deleted
			if (payloadType == "PreferencesSystem") {
				dataServiceSystem.getAll("PreferencesSystem");
			}
			if (payloadType == "PreferencesPOS") {
				dataServicePOS.getAll("PreferencesPOS");
			}
			if (payloadType == "PreferencesEstimating") {
				dataServiceEstimator.getAll("PreferencesEstimating");
			}
			if (payloadType == "PreferencesAccounting") {
				dataServiceAccounting.getAll("PreferencesAccounting");
			}
			if (payloadType == "PreferencesCashRegister") {
				dataServiceCashRegister.getAll("PreferencesCashRegister");
			}
			if (payloadType == "PreferencesCashRegister") {
				dataServiceCashRegister.getAll("PreferencesCashRegister");
			}
			if (payloadType == "PreferencesCreditCard") {
				dataServiceCreditCard.getAll("PreferencesCreditCard");
			}
			if (payloadType == "OutsideServices") {
				dataServiceMarkups.getAll("OutsideServices");
			}
			if (payloadType == "Merchandise") {
				dataServiceMarkupsMerchandise.getAll("Merchandise")
			}
			if (payloadType == "PreferencesPendingList") {
				dataServicePendingList.getAll("PreferencesPendingList");
			}
			if (payloadType == "PricingMethod") {
				dataServicePricingMethod.getAll("PricingMethod");
			}
			if (payloadType == "PreferencesQuantityBreaks") {
				dataServiceQuantityBreaks.getAll("PreferencesQuantityBreaks");
			}
			if (payloadType == "PreferencesSalesCategory") {
				dataServiceSalesCategory.getAll("PreferencesSalesCategory");
			}
			if (payloadType == "PreferencesStockDefinition") {
				dataServiceStockDefinition.getAll("PreferencesStockDefinition");
			}
			if (payloadType == "PreferencesStocks") {
				dataServiceStocks.getAll("PreferencesStocks");
			}
		}
	}
     
	private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error", 0, null, null, null, 4);                                 
	}

	private function doCountryFind(completeTextObject:AutoComplete,lookupArray:ArrayCollection) : void {
		var countries:Country;
		var result:Boolean;
		
		if (completeTextObject.typedText != null && completeTextObject.typedText != "" && completeTextObject.selectedIndex == -1) {
			var item:int = findItem(completeTextObject.typedText, lookupArray);
			if (item == -1) {
				countries = new Country();
				countries.name = completeTextObject.text;
				dataServiceCountry.addUpdate(countries);
				completeTextObject.selectedItem = findItem(countries.name, lookupArray);
			}
			else {
				completeTextObject.selectedItem = item;
			}
		}
	}

	private function findItem(name:String, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (name == element.name) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}

// Data Load Handlers
	private function handleLoadSystemResult(ev:ResultEvent):void {
		PreferencesSystemArray = ev.result as ArrayCollection;
		if (PreferencesSystemArray.length > 0)
   			preferencesSystem = PreferencesSystemArray.getItemAt(0,0) as PreferencesSystem ;
		if (preferencesSystem == null)
		{
			preferencesSystem = new PreferencesSystem();
		}
		mapFromPreferencesSystemData();
	}
	private function handleLoadPOSResult(ev:ResultEvent):void {
		PreferencesPOSArray = ev.result as ArrayCollection;
		if ( PreferencesPOSArray.length >0 )
			preferencesPOS = PreferencesPOSArray.getItemAt(0,0) as PreferencesPOS;
		if (preferencesPOS == null)
		{
			preferencesPOS = new PreferencesPOS();
		}
		mapFromPreferencesPOSData();
	}
	private function handleLoadEstimatorResult(ev:ResultEvent):void {
		PreferencesEstimatingArray = ev.result as ArrayCollection;
		if( PreferencesEstimatingArray.length >0)
			preferencesEstimating = PreferencesEstimatingArray.getItemAt(0,0) as PreferencesEstimating;
		if (preferencesEstimating == null)
		{
			preferencesEstimating = new PreferencesEstimating();
		}
		mapFromPreferencesEstimatingData();
	}
	private function handleLoadAccountingResult(ev:ResultEvent):void {
		PreferencesAccountingArray = ev.result as ArrayCollection;
		if ( PreferencesAccountingArray.length >0)
			preferencesAccounting = PreferencesAccountingArray.getItemAt(0,0) as PreferencesAccounting;
		if (preferencesAccounting == null)
		{
			preferencesAccounting = new PreferencesAccounting();
		} 
		mapFromPreferencesAccountingData();
	}
	
	private function handleLoadCountryResult(ev:ResultEvent):void {
		CountryArray = ev.result as ArrayCollection;
	}
	private function handleLoadCashRegisterResult(ev:ResultEvent):void {
		PreferencesCashRegisterArray = ev.result as ArrayCollection;
		if ( PreferencesCashRegisterArray.length >0)
			preferencesCashRegister = PreferencesCashRegisterArray.getItemAt(0,0) as PreferencesCashRegister;
		if (preferencesCashRegister == null)
		{
			preferencesCashRegister = new PreferencesCashRegister();
		} 
	}
	private function handleLoadCreditCardResult(ev:ResultEvent):void {
		PreferencesCreditCardArray = ev.result as ArrayCollection;
	}
	private function handleLoadMarkupsResult(ev:ResultEvent):void {
		PreferencesMarkupsArray = ev.result as ArrayCollection;
	}
	private function handleLoadMarkupsMerchandiseResult(ev:ResultEvent):void {
		PreferencesMarkupsMerchandiseArray = ev.result as ArrayCollection;
	}
	private function handleLoadPendingListResult(ev:ResultEvent):void {
		PreferencesPendingListArray = ev.result as ArrayCollection;
	}
	private function handleLoadPricingMethodResult(ev:ResultEvent):void {
		PreferencesPricingMethodArray = ev.result as ArrayCollection;
	}
	private function handleLoadQuantityBreaksResult(ev:ResultEvent):void {
		PreferencesQuantityBreaksArray = ev.result as ArrayCollection;
	}
	private function handleLoadSalesCategoryResult(ev:ResultEvent):void {
		PreferencesSalesCategoryArray = ev.result as ArrayCollection;
	}
	private function handleLoadStockDefinitionResult(ev:ResultEvent):void {
		PreferencesStockDefinitionArray = ev.result as ArrayCollection;
	}
	private function handleLoadStocksResult(ev:ResultEvent):void {
		PreferencesStocksArray = ev.result as ArrayCollection;
		if ( PreferencesStocksArray.length >0)
			preferencesStocks = PreferencesStocksArray.getItemAt(0,0) as PreferencesStocks;
		if (preferencesStocks == null)
		{
			preferencesStocks = new PreferencesStocks();
		}
	}
	private function handleLoadColumnNamesResult(ev:ResultEvent):void {
	     ColumnNamesArray = ev.result as ArrayCollection;
	}
	private function handleLoadSizeTableResult(ev:ResultEvent):void {
	     SizeTableArray = ev.result as ArrayCollection;
	}
	private function handleLoadCategoryResult(ev:ResultEvent):void {
	     CategoryArray = ev.result as ArrayCollection;
	}

// Data Save Handlers
	private function handleSaveSystemResult(ev:ResultEvent):void {
    	dataServiceSystem.getAll("PreferencesSystem");
	}
	private function handleSavePOSResult(ev:ResultEvent):void {
    	dataServicePOS.getAll("PreferencesPOS");
	}
	private function handleSaveEstimatorResult(ev:ResultEvent):void {
    	dataServiceEstimator.getAll("preferencesEstimating");
	}
	private function handleSaveAccountingResult(ev:ResultEvent):void {
    	dataServiceAccounting.getAll("PreferencesAccounting");
	}
	private function handleSaveCountryResult(ev:ResultEvent):void {
    	dataServiceCountry.getAll("Country");
		country = ev.result as Country;
	}
	private function handleSaveCashRegisterResult(ev:ResultEvent):void {
    	dataServiceCashRegister.getAll("PreferencesCashRegister");
	}
	private function handleSaveCreditCardResult(ev:ResultEvent):void {
    	dataServiceCreditCard.getAll("PreferencesCreditCard");
	}
	private function handleSaveMarkupsResult(ev:ResultEvent):void {
    	dataServiceMarkups.getAll("OutsideServices");
	}
	private function handleSaveMarkupsMerchandiseResult(ev:ResultEvent):void {
    	dataServiceMarkupsMerchandise.getAll("Merchandise");
	}
	private function handleSavePendingListResult(ev:ResultEvent):void {
    	dataServicePendingList.getAll("PreferencesPendingList");
	}
	private function handleSavePricingMethodResult(ev:ResultEvent):void {
    	dataServicePricingMethod.getAll("PricingMethod");
	}
	private function handleSaveQuantityBreaksResult(ev:ResultEvent):void {
    	dataServiceQuantityBreaks.getAll("PreferencesQuantityBreaks");
	}
	private function handleSaveSalesCategoryResult(ev:ResultEvent):void {
    	dataServiceSalesCategory.getAll("PreferencesSalesCategory");
	}
	private function handleSaveStockDefinitionResult(ev:ResultEvent):void {
    	dataServiceStockDefinition.getAll("PreferencesStockDefinition");
	}
	private function handleSaveStocksResult(ev:ResultEvent):void {
    	dataServiceStocks.getAll("PreferencesStocks");
	}
	private function handleSaveColumnNamesResult(ev:ResultEvent):void {
    	dataServiceColumnNames.getAll("ColumnNames");
	}
	private function handleSaveSizeTableResult(ev:ResultEvent):void {
    	dataServiceSizeTable.getAll("SizeTable");
	}
	private function handleSaveCategoryResult(ev:ResultEvent):void {
    	dataServiceCategory.getAll("SalesCategory");
	}

	private function handleDeleteCashRegisterResult(ev:ResultEvent):void {
    	dataServiceCashRegister.getAll("PreferencesCashRegister");
	}
	private function handleDeleteCreditCardResult(ev:ResultEvent):void {
    	dataServiceCreditCard.getAll("PreferencesCreditCard");
	}
	
	private function handleDeleteMarkupsResult(ev:ResultEvent):void {
    	dataServiceMarkups.getAll("OutsideServices");
	}
	
	private function handleDeleteMarkupsMerchandiseResult(ev:ResultEvent):void {
    	dataServiceMarkupsMerchandise.getAll("Merchandise");
	}
	
	private function handleDeletePricingMethodResult(ev:ResultEvent):void {
    	dataServicePricingMethod.getAll("PricingMethod");
	}
	
	private function handleDeleteSalesCategoryResult(ev:ResultEvent):void {
    	dataServiceSalesCategory.getAll("PreferencesSalesCategory");
	}
	
	private var openSequence:Array = [];

	private function openTree():void {
		var nodeList:XMLListCollection = 
			tvPreference.dataProvider as XMLListCollection;
		var node:XMLList = nodeList.source;
		for(var i:int=0; i < 4; i++) {
			var n:XML = node[i];
			if( n.children() != null ) {
				tvPreference.expandItem(n,true,false);
			}
		}
		tvPreference.selectedIndex = 1;
		preferences_stack.selectedIndex = 0; 
	}

	private function treeSelect(event:Event):void {
		
		var node:XML = XML(event.currentTarget.selectedItem);
		if( node == null ) return;
		
		if( node.@label == "System" ) return;
		if( node.@label == "POS" ) return;
		if( node.@label == "Estimator" ) return;
		if( node.@label == "Accounting" ) return;

		//var message:String;
		//message = node.@label; 
		//Alert.show(message, "Selected Item", 0, null, null, null, 4);                                 
		preferences_stack.selectedIndex = node.@tag; 
	}
	private function setDisplayText(text:TextInput):void{
		txtDisplayArea.text = "";
		txtDisplayDemo.text = text.name;
	}

	private function checkEnableAutoLogOut():void{
		chkSecondsOfInactivity.enabled = chkEnableAutomaticLogOut.selected;
		chkTriggerAfterPosting.enabled = chkEnableAutomaticLogOut.selected;
	}
	
	private function checkAlternateCurrency():void{
		txtFormat.enabled = chkUseAlternateCurrency.selected;
		txtConversionFactor.enabled = chkUseAlternateCurrency.selected;
		txtRoundToAlternateCurrency.enabled = chkUseAlternateCurrency.selected;
		chkAlwaysRoundDownAlternateCurrency.enabled = chkUseAlternateCurrency.selected;
	}
	
	private function doSave():void{
		mapToPreferencesAllData();
		updatePreferencesData();		
	}
	
	private function doRevert():void{
		getPreferencesData();
		mapFromPreferencesAllData();
	}
	
	private function doCheckPNIConnection():void{
		
	}
	private function doBrowsePath():void{
		
	}
	
	private function doCreateLocationFile():void{
		
	}
	
	private function doCheckForPalmData():void{
		
	}
	private function doSelectColor(text:TextInput):void{
		
	}
	private function doSelectFont(text:TextInput):void{
		if (text != null)
		{
			//do something
		}else{
			//do something else
		}
		
	}
	private function doPrintBarCodes():void{
		
	}
	private function doSelectFolder():void{
		
	}

	private function doNewCashRegister():void{
		var newItem:PreferencesCashRegister = new PreferencesCashRegister();
		PreferencesCashRegisterArray.addItem(newItem);
	}
	private function doRemoveCashRegister():void{
		var newItem:PreferencesCashRegister = CashRegisterGrid.selectedItem as PreferencesCashRegister;
		PreferencesCashRegisterDeleteArray.addItem(newItem);
		PreferencesCashRegisterArray.removeItemAt(CashRegisterGrid.selectedIndex);
	}

	private function doNewPriceMethod():void{
		var newItem:PricingMethod = new PricingMethod();
		PreferencesPricingMethodArray.addItem(newItem);
	}
	private function doRemovePriceMethod():void{
		var newItem:PricingMethod = PricingMethodGrid.selectedItem as PricingMethod;
		PreferencesPricingMethodDeleteArray.addItem(newItem);
		PreferencesPricingMethodArray.removeItemAt(PricingMethodGrid.selectedIndex);
	}

	private function doNewMarkup(item:String):void{
		if (item=="outside")
		{
			var newItem1:OutsideService = new OutsideService();
			PreferencesMarkupsArray.addItem(newItem1);
		}else {
			var newItem2:Merchandise = new Merchandise();
			PreferencesMarkupsMerchandiseArray.addItem(newItem2);
		}
	}
	private function doRemoveMarkup(item:String, dg:DataGrid):void{
		if (item=="outside")
		{
			var newItem1:OutsideService = dg.selectedItem as OutsideService;
			PreferencesMarkupsDeleteArray.addItem(newItem1);
			PreferencesMarkupsArray.removeItemAt(dg.selectedIndex);
		}else {
			var newItem2:Merchandise = dg.selectedItem as Merchandise;
			PreferencesMarkupsMerchandiseDeleteArray.addItem(newItem2);
			PreferencesMarkupsMerchandiseArray.removeItemAt(dg.selectedIndex);
		}
	}

	private function doNewSalesCategory():void{
		var newItem:PreferencesSalesCategory = new PreferencesSalesCategory();
		PreferencesSalesCategoryArray.addItem(newItem);
	}
	private function doRemoveSalesCategory():void{
		var newItem:PreferencesSalesCategory = SalesCategoryGrid.selectedItem as PreferencesSalesCategory;
		PreferencesSalesCategoryDeleteArray.addItem(newItem);
		PreferencesSalesCategoryArray.removeItemAt(SalesCategoryGrid.selectedIndex);
	}

	private function doNewCreditCard():void{
		var newItem:PreferencesCreditCard = new PreferencesCreditCard();
		PreferencesCreditCardArray.addItem(newItem);
	}
	private function doRemoveCreditCard():void{
		var newItem:PreferencesCreditCard = CreditCardGrid.selectedItem as PreferencesCreditCard;
		PreferencesCreditCardDeleteArray.addItem(newItem);
		PreferencesCreditCardArray.removeItemAt(CreditCardGrid.selectedIndex);
	}

	private function processSalesCategoryGridData(event:DataGridEvent):void {
        if (event.reason == DataGridEventReason.CANCELLED){
            // Do not update cell.
            return;
        }           

		if(event.dataField == "category")
		{
			// Disable copying data back to the control.
			event.preventDefault();

			// Get new category from editor.
			SalesCategoryGrid.editedItemRenderer.data.category = SalesCategoryEditor(DataGrid(event.target).itemEditorInstance).pickCategory.selectedItem;

			// Close the cell editor.
			SalesCategoryGrid.destroyItemEditor();

			// Notify the list control to update its display.
			SalesCategoryGrid.dataProvider.itemUpdated(event.itemRenderer.data);
		}	
	}	

	private function processPricingMethodGridData(event:DataGridEvent):void {
        if (event.reason == DataGridEventReason.CANCELLED){
            // Do not update cell.
            return;
        }           

		if(event.dataField == "category")
		{
			// Disable copying data back to the control.
			event.preventDefault();

			// Get new category from editor.
			PricingMethodGrid.editedItemRenderer.data.category = SalesCategoryEditor(DataGrid(event.target).itemEditorInstance).pickCategory.selectedItem;

			// Close the cell editor.
			PricingMethodGrid.destroyItemEditor();

			// Notify the list control to update its display.
			PricingMethodGrid.dataProvider.itemUpdated(event.itemRenderer.data);
		}	
	}	
	
	private function processCashRegisterGridData(event:DataGridEvent):void {
        // Check the reason for the event.
        if (event.reason == DataGridEventReason.CANCELLED){
            // Do not update cell.
            return;
        }           

		if(event.dataField == "category")
		{
			// Disable copying data back to the control.
			event.preventDefault();

			// Get new category from editor.
			CashRegisterGrid.editedItemRenderer.data.category = SalesCategoryEditor(DataGrid(event.target).itemEditorInstance).pickCategory.selectedItem;

			// Close the cell editor.
			CashRegisterGrid.destroyItemEditor();

			// Notify the list control to update its display.
			CashRegisterGrid.dataProvider.itemUpdated(event.itemRenderer.data);
		}
		if(event.dataField == "taxCodes")
		{
			// Disable copying data back to the control.
			event.preventDefault();

			// Get new category from editor.
			CashRegisterGrid.editedItemRenderer.data.taxCodes = TaxCodeEditor(DataGrid(event.target).itemEditorInstance).pickTaxCodes.selectedItem;

			// Close the cell editor.
			CashRegisterGrid.destroyItemEditor();

			// Notify the list control to update its display.
			CashRegisterGrid.dataProvider.itemUpdated(event.itemRenderer.data);
		}
		if(event.dataField == "taxTable")
		{
			// Disable copying data back to the control.
			event.preventDefault();

			// Get new category from editor.
			CashRegisterGrid.editedItemRenderer.data.taxTable = TaxTableEditor(DataGrid(event.target).itemEditorInstance).pickTaxTable.selectedItem;

			// Close the cell editor.
			CashRegisterGrid.destroyItemEditor();

			// Notify the list control to update its display.
			CashRegisterGrid.dataProvider.itemUpdated(event.itemRenderer.data);
		}

	}           

]]>
                             
</mx:Script>	
	<mx:Tree x="0" y="0" width="200"  
		id="tvPreference" 
		dataProvider="{treeData.node}"
		labelField="@label"
		height="100%" change="treeSelect(event);"></mx:Tree>

	<mx:Button x="228" y="6" width="38" height="38" click="doSave();" enabled="{enableSave}" id="btnSave">
		<mx:icon>@Embed(source='../../../assets/file.png')</mx:icon>
	</mx:Button>
	<mx:Button x="274" y="6" width="38" height="38" click="doRevert();" enabled="{enableSave}" id="btnRevert">
		<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
	</mx:Button>

	<mx:VBox id="vbox2" left="200" top="50" height="100%" width="100%" creationPolicy="all">
		<mx:ViewStack id="preferences_stack" width="100%" height="100%">
			<mx:Canvas width="100%" height="100%" id="behavior_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" text="Behavior" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				<mx:CheckBox x="50" y="30"  id="chkEliminateSomeWarningMessages" label="Eliminate some warning messages"/>
				<mx:CheckBox x="50" y="60"  id="chkOnlyPostInvoicesMarkedReady" label="Only post invoices marked ready"/>
				<mx:CheckBox x="50" y="90"  id="chkEnablePricingSystem" label="Enable Pricing system Import / Eport features"/>
				<mx:CheckBox x="50" y="120" id="chkActivateUserEventLogging" label="Activate user event logging, all workstatioins."/>
				<mx:CheckBox x="50" y="150" id="chkEnableAutomaticLogOut" label="Enable automatic log out" change="checkEnableAutoLogOut();"/>
				<mx:CheckBox x="80" y="180" id="chkSecondsOfInactivity" label="Seconds of inactivity to trigger:" enabled="false"/>
				<mx:CheckBox x="80" y="210" id="chkTriggerAfterPosting" label="Trigger after posting" enabled="false"/>
				<mx:CheckBox x="50" y="240" id="chkShowInvoices" label="Show invoices with firm due date of &quot;today&quot; at login"/>
				<mx:CheckBox x="50" y="270" id="chkEnableLineItemTaxes" label="Enable line-item taxes"/>
				<mx:CheckBox x="50" y="300" id="chkEnableAutomaticQuit" label="Enable automatic quit"/>
				<mx:TextInput x="277" y="180" width="61" id="txtInactivitySeconds" text="{preferencesSystem.autoLogOutSeconds}"/>
				<mx:Label x="50" y="330" text="Time of day to quit:"/>
				<mx:TextInput x="168" y="328" width="59" id="txtTimeOfDayQuit" text="{preferencesSystem.quitTime}"/>
				<mx:Label x="80" y="367" text="Shut down notification message:"/>
				<mx:TextArea x="80" y="393" width="400" height="72" id="txtShutdownNotificationMessage" text="{preferencesSystem.shutdownMessage}"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="company_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Company" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				<ns1:AddressEditor x="50" y="30" id="address_editor" height="155" width="400"/>

				<mx:Label x="79" y="197" text="Phone:"/>
				<mx:TextInput x="127" y="195" width="148" id="txtPhone" text="{preferencesSystem.companyPhone}"/>
				<mx:Label x="344" y="197" text="Fax:"/>
				<mx:TextInput x="377" y="195" width="148" id="txtFax" text="{preferencesSystem.companyFax}"/>
				<mx:Label x="79" y="227" text="E-Mail:"/>
				<mx:TextInput x="125" y="225" width="400" id="txtEmail" text="{preferencesSystem.companyEmail}"/>
				<mx:Label x="81" y="257" text="Other:"/>
				<mx:TextInput x="125" y="255" width="400" id="txtOther1" text="{preferencesSystem.companyOther1}"/>
				<mx:Label x="81" y="287" text="Other:"/>
				<mx:TextInput x="125" y="285" width="400" id="txtOther2" text="{preferencesSystem.companyOther2}"/>
				<mx:Label x="8" y="317" text="Company ID Label:"/>
				<mx:TextInput x="125" y="315" width="100" id="txtCompanyIdLabel" text="{preferencesSystem.companyIdLabel}"/>
				<mx:Label x="242" y="317" text="Company ID:"/>
				<mx:TextInput x="326" y="315" width="199" id="txtCompanyId" text="{preferencesSystem.companyId}"/>
				
				<mx:Label x="187" y="367" text="Store Number:"/>
				<mx:TextInput x="276" y="365" width="249" id="txtStoreNumber" text="{preferencesSystem.companyStoreNumber}"/>
				<mx:Label x="52" y="392" text="Workstation/Store Location Reference:"/>
				<mx:TextInput x="276" y="390" width="249" id="txtLocationReference" text="{preferencesSystem.companyStoreLocationRef}"/>
				<mx:TextArea x="125" y="420" width="400" height="63">
					<mx:text>The company ID is printed on Invoices and Estimates, the workstation specific Store location information prints on receipts and appears in the Account history transactions, if empy the global Store Number is used for these purposes.</mx:text>
				</mx:TextArea>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="calendar_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Business Calendar" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="50" y="92" text="Fiscal year starts first day of:"/>
				<mx:ComboBox x="220" y="90" id="cboFiscalYearStartMonth" width="260" dataProvider="{MonthsArray}" labelField="name"></mx:ComboBox>
				<mx:Label x="176" y="146" text="Current Range:"/>
				<mx:TextArea x="270" y="145" height="19" width="210"/>
				
				<mx:Label x="50" y="185" text="Work Days:"/>
				<mx:RadioButtonGroup id="opgFirstDayOfWorkWeek" selectedValue="{opgFirstDayOfWorkWeekValue}"/>
				<mx:RadioButton x="53" y="250" id="opgSunday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="93" y="250" id="opgMonday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="133" y="250" id="opgTuesday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="173" y="250" id="opgWednesday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="213" y="250" id="opgThursday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="253" y="250" id="opgFriday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:RadioButton x="293" y="250" id="opgSaturday" groupName="opgFirstDayOfWorkWeek"/>
				<mx:Button x="40" y="211" label="S" width="40"/>
				<mx:Button x="80" y="211" label="M" width="40"/>
				<mx:Button x="120" y="211" label="T" width="40"/>
				<mx:Button x="160" y="211" label="W" width="40"/>
				<mx:Button x="200" y="211" label="T" width="40"/>
				<mx:Button x="240" y="211" label="F" width="40"/>
				<mx:Button x="280" y="211" label="S" width="40"/>
				<mx:Label x="325" y="250" text="First Day of Work Week"/>
				<mx:CheckBox x="40" y="327" id="chkFutureDateExcludeClosed" label="Future dates exclude days that company is Closed"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="numbers_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Numbers" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="67" y="32" text="Integers:"/>
				<mx:Label x="46" y="62" text="Percentages:"/>
				<mx:Label x="71" y="92" text="Amount:"/>
				<mx:Label x="88" y="122" text="Rate:"/>
				<mx:Label x="81" y="152" text="Factor:"/>
				<mx:Label x="74" y="182" text="Invoice:"/>
				<mx:Label x="40" y="212" text="Short Percent:"/>
				<mx:Label x="63" y="242" text="Round to:"/>

				<mx:TextInput x="127" y="30" width="347" name="Integers" id="txtIntegers" focusIn="setDisplayText(txtIntegers);" text="{preferencesSystem.numbersIntegers}"/>
				<mx:TextInput x="127" y="60" width="347" name="Percentages" id="txtPercentages" focusIn="setDisplayText(txtPercentages);" text="{preferencesSystem.numbersPercentages}"/>
				<mx:TextInput x="127" y="90" width="347" name="Amount" id="txtAmount" focusIn="setDisplayText(txtAmount);" text="{preferencesSystem.numbersAmount}"/>
				<mx:TextInput x="127" y="120" width="347" name="Rate" id="txtRate" focusIn="setDisplayText(txtRate);" text="{preferencesSystem.numbersRate}"/>
				<mx:TextInput x="127" y="150" width="347" name="Factor" id="txtFactor" focusIn="setDisplayText(txtFactor);" text="{preferencesSystem.numbersFactor}"/>
				<mx:TextInput x="127" y="180" width="347" name="Invoice" id="txtInvoice" focusIn="setDisplayText(txtInvoice);" text="{preferencesSystem.numbersInvoice}"/>
				<mx:TextInput x="127" y="210" width="347" name="Short Percent" id="txtShortPercent" focusIn="setDisplayText(txtShortPercent);" text="{preferencesSystem.numbersShortPercent}"/>
				<mx:TextInput x="127" y="240" width="75" name="Rounded Integers" id="txtRoundTo" focusIn="setDisplayText(txtRoundTo);" text="{preferencesSystem.numbersRoundto}"/>

				<mx:CheckBox x="216" y="240"  id="chkAlwaysRoundDown" label="Always Round Down"/>
				<mx:CheckBox x="216" y="270"  id="chkTaxRoundUp" label="Tax Round Up"/>

				<mx:Button x="50" y="320" label="Dollar"  width="75"/>
				<mx:Button x="130" y="320" label="Pound"  width="75"/>
				<mx:Button x="210" y="320" label="Yen"  width="75"/>
				<mx:Button x="290" y="320" label="Euro"  width="75"/>
				<mx:Button x="370" y="320" label="Space"  width="75"/>
				<mx:TextArea x="23" y="391" height="131" width="451" id="txtDisplayArea" enabled="false"/>
				<mx:Text x="50" y="374" text="xx" id="txtDisplayDemo"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="alternatecurrency_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Alternate Currency" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30"  id="chkUseAlternateCurrency" label="Use Alternate Currency System." change="checkAlternateCurrency();"/>

				<mx:Label x="84" y="62" text="Format:"/>
				<mx:TextInput x="136" y="60" width="338" id="txtFormat" enabled="false" text="{preferencesSystem.displayFormat}"/>
				<mx:Label x="24" y="92" text="Conversion Factor:"/>
				<mx:TextInput x="136" y="90" width="75" id="txtConversionFactor" enabled="false" text="{preferencesSystem.conversionFactor}"/>
				<mx:Label x="72" y="122" text="Round to:"/>
				<mx:TextInput x="136" y="120" width="75" id="txtRoundToAlternateCurrency" enabled="false" text="{preferencesSystem.alternateRoundto}"/>

				<mx:CheckBox x="221" y="120"  id="chkAlwaysRoundDownAlternateCurrency" label="Always Round Down" enabled="false"/>
				
				
				<mx:TextArea x="23" y="203" height="40%" width="451" id="txtSampleArea" enabled="false"/>
				<mx:Label x="50" y="186" text="Sample Currency" id="txtSampleDemo"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="international_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="International" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30"  id="chkUseInternationalTextSorting" label="Use international (slower) text sorting"/>
				<mx:CheckBox x="50" y="60"  id="chkUseChileTaxIdVerification" label="Use Chile Tax ID verification"/>
				<mx:CheckBox x="50" y="90"  id="chkDisableTextStyles" label="Disable text styles"/>
				<mx:CheckBox x="50" y="120"  id="chkUseAustralianInvoiceRounding" label="Use Australian invoice rounding"/>
				<mx:CheckBox x="50" y="150"  id="chkDisableNonTaxableOptions" label="Disable non-taxable options for invoices, jobs and charges"/>

				<mx:Label x="26" y="182" text="Ink Weight(singular):"/>
				<mx:TextInput x="154" y="180" id="txtInkWeightSingular" text="{preferencesSystem.inkWeightSingular}"/>
				<mx:Label x="39" y="212" text="Ink Weight(plural):"/>
				<mx:TextInput x="154" y="210" id="txtInkWeightPlural" text="{preferencesSystem.inkWeightPlural}"/>

				<mx:Label x="27" y="272" text="Authorize the decrypt of CC to ADMIN users:"/>
				<mx:TextInput x="280" y="270" width="187" id="txtAuthorizeDecrypt" text="{preferencesSystem.authorizeDecrypt}"/>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="activation_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Product Activation" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="208" y="32" text="Credit Card Approval:"/>
				<mx:Label x="194" y="62" text="Tracker Data Collection:"/>
				<mx:Label x="235" y="92" text="Validation Code:"/>

				<mx:TextInput x="335" y="30" id="txtCreditCardApproval" text="{preferencesSystem.creditCardApproval}"/>
				<mx:TextInput x="335" y="60" id="txtTrackerDataCollection" text="{preferencesSystem.trackerDataCollection}"/>
				<mx:TextInput x="335" y="90" id="txtValidationCode" enabled="false" text="{preferencesSystem.validationCode}"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="integration_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Integration" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:Panel x="10" y="27" width="520" height="174" layout="absolute" title="PNI">
					<mx:Label x="20" y="12" text="PrintNet Integrator IP Address:"/>
					<mx:Button x="20" y="35" label="Check Connection" click="doCheckPNIConnection();"/>
					<mx:Label x="20" y="72" text="PNI Status:"/>

					<mx:TextInput x="199" y="10" id="txtPNIAddress" width="291" text="{preferencesSystem.pNIAddress}"/>
					<mx:TextInput x="165" y="37" id="txtPNIConnection" width="325" />
					<mx:TextInput x="87" y="70" id="txtPNIStatus" width="403"/>

					<mx:CheckBox x="20" y="100"  id="chkPNIIsVersion45orLater" label="The PrintNet Integrator is version 4.5 or later"/>
				</mx:Panel>
				<mx:Panel x="10" y="218" width="520" height="160" layout="absolute" title="JDF Connector">
					<mx:Label x="20" y="12" text="Fiery Connector URL:"/>
					<mx:TextInput x="141" y="10" id="txtFieryUrl" width="349" text="{preferencesSystem.fieryConnectorUrl}"/>

					<mx:CheckBox x="20" y="50"  id="chkJDFConnectorIsVersion45orLater" label="The JDF Connector URL from the PNI (PNI 4.5 and later"/>
					<mx:CheckBox x="20" y="80"  id="chkJDFConnectorSupportsNonAsciiCharacters" label="JDF Connector supports non-ASCII characters"/>
				</mx:Panel>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="palmtracking_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Palm Tracking" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30"  id="chkUsePalmPilotTracking" label="Use PalmPilot tracking"/>
				<mx:Label x="50" y="60" text="Palm user path:"/>
				<mx:TextInput x="50" y="78" id="txtPalmPath" width="349" text="{preferencesSystem.palmUserPath}"/>
				<mx:Button x="50" y="110" label="Browse..." click="doBrowsePath();"/>
				<mx:Label x="138" y="112" text="for HotSync application."/>
				
				<mx:Label x="50" y="142" text="Polling Interval:"/>
				<mx:TextInput x="145" y="140" id="txtPalmPilotPollingInterval" width="57" text="{preferencesSystem.palmPollingInterval}"/>
				<mx:Label x="205" y="142" text="seconds."/>

				<mx:Button x="50" y="180" label="Create Location file" click="doCreateLocationFile();" width="141"/>
				<mx:Button x="50" y="210" label="Check for Palm data" click="doCheckForPalmData();" width="141"/>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="addressformatting_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Address Formatting" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:Label x="50" y="32" text="Default Country:"/>
				<fc:AutoComplete  x="148" y="30" width="181" id="cboDefaultCountry" dataProvider="{CountryArray}" lookAhead="true" labelField="name" focusOut="doCountryFind(cboDefaultCountry,CountryArray)"/>
				<mx:TextArea x="23" y="203" height="25%" width="451" id="txtSampleAddressArea" enabled="false"/>
				<mx:Text x="50" y="186" text="Sample Address" id="txtSampleAddress"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="receipt_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Receipt" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="54" y="32" text="Header:"/>
				<mx:Label x="59" y="182" text="Footer:"/>
				<mx:TextArea x="107" y="30" id="txtReceiptHeader" width="390" height="130" text="{preferencesPOS.receiptHeader}"/>
				<mx:TextArea x="107" y="180" id="txtReceiptFooter" width="390" height="100" text="{preferencesPOS.receiptFooter}"/>

				<mx:TextInput x="272" y="300" id="txtSerialNumber" width="70" text="{preferencesPOS.startingNumber}"/>
				<mx:CheckBox x="50" y="300"  id="chkSerialNumberReceiptsStart" label="Serial numbers on receipts start at:"/>
				<mx:CheckBox x="50" y="330"  id="chkHideTaxLineItems" label="Hide tax in line items"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="cashdrawer_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Cash Drawer" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="50" y="32" text="Receipt Printer:"/>
				<mx:ComboBox x="143" y="30" id="cboReceiptPrinter"  dataProvider="{ReceiptPrinterArray}" labelField="name" width="120"/>
				<mx:Label x="95" y="62" text="Printer:"/>
				<mx:TextInput x="143" y="60" id="txtSelectedPrinter" width="200" text="{preferencesPOS.defaultPrinter}"/>

				<mx:CheckBox x="50" y="90" id="chkEnableCashDrawer" label="Enable Cash Drawer"/>
				<mx:CheckBox x="50" y="115" id="chkPrintReceipts" label="Print Receipts"/>
				<mx:CheckBox x="70" y="140" id="chkPrint2forCredit" label="Print (2) for Credit Cards"/>
				<mx:CheckBox x="70" y="165" id="chkPrint2forCash" label="Print (2) for Cash"/>
				<mx:CheckBox x="50" y="190" id="chkPrintInvoices" label="Print Invoices"/>
				<mx:CheckBox x="50" y="215" id="chkLockSettings" label="Lock Settings"/>

				<mx:CheckBox x="290" y="90" id="chkUseMasterDrawer" label="Use Master's Drawer"/>
				<mx:CheckBox x="290" y="115" id="chkKeepSettingsLocal" label="Keep settings local"/>

				<mx:Label x="50" y="273" text="ASCII Code to Open Drawer:"/>
				<mx:Label x="56" y="298" text="Blank Lines Before Receipt:"/>
				<mx:Label x="66" y="323" text="Blank Lines After Receipt:"/>
				<mx:Label x="101" y="348" text="Receipt Start Code:"/>
				<mx:Label x="107" y="373" text="Receipt End Code:"/>

				<mx:TextInput x="216" y="271" id="txtAsciiCodeOpenDrawer" width="47" text="{preferencesPOS.asciiCodeOpenDrawer}"/>
				<mx:TextInput x="216" y="296" id="txtBlankBeforeReceipt" width="47" text="{preferencesPOS.blankLinesBeforeReceipt}"/>
				<mx:TextInput x="216" y="321" id="txtBlankAfterReceipt" width="47" text="{preferencesPOS.blankLinesAfterReceipt}"/>
				<mx:TextInput x="216" y="346" id="txtReceiptStartCode" width="77" text="{preferencesPOS.receiptStartCode}"/>
				<mx:TextInput x="216" y="371" id="txtReceiptEndCode" width="77" text="{preferencesPOS.receiptEndCode}"/>

				<mx:Label x="50" y="420" text="Baud Rate:"/>
				<mx:Label x="220" y="420" text="Stop Bits:"/>
				<mx:Label x="77" y="445" text="Parity:"/>
				<mx:Label x="216" y="445" text="Data Size:"/>

				<mx:ComboBox x="119" y="418" id="cboBaudRate"  dataProvider="{BaudRateArray}" labelField="name" width="90" enabled="false"/>
				<mx:ComboBox x="281" y="418" id="cboStopBits"  dataProvider="{StopBitsArray}" labelField="name" width="90" enabled="false"/>
				<mx:ComboBox x="119" y="443" id="cboParity"  dataProvider="{ParityArray}" labelField="name" width="90" enabled="false"/>
				<mx:ComboBox x="281" y="443" id="cboDataSize"  dataProvider="{DataSizeArray}" labelField="name" width="90" enabled="false"/>

				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="cashregister_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Cash Register" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:DataGrid x="50" y="30" width="508" height="380" id="CashRegisterGrid" 
					dataProvider="{PreferencesCashRegisterArray}" 
					editable="true" 
					itemEditEnd="processCashRegisterGridData(event);">
					<mx:columns>
						<mx:DataGridColumn width="40" headerText="Tax" dataField="tax" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn width="100" headerText="Title" dataField="title"/>
						<mx:DataGridColumn width="140" headerText="Sales Category" dataField="category"
							itemEditor="com.efi.itemRenderers.SalesCategoryEditor" editable="true">
                			<mx:itemRenderer>
                    			<mx:Component>
	                        		<mx:Text selectable="false" text="{data.category.name}"/>
                    			</mx:Component>
                			</mx:itemRenderer>
						</mx:DataGridColumn>
						<mx:DataGridColumn width="50" headerText="Rate" dataField="rate" editable="true"/>
						<mx:DataGridColumn width="140" headerText="Tax Table" dataField="taxTable"
							itemEditor="com.efi.itemRenderers.TaxTableEditor" editable="true">
                			<mx:itemRenderer>
                    			<mx:Component>
	                        		<mx:Text selectable="false" text="{data.taxTable.name}"/>
                    			</mx:Component>
                			</mx:itemRenderer>
						</mx:DataGridColumn>
						<mx:DataGridColumn width="140" headerText="Tax Code" dataField="taxCodes"
							itemEditor="com.efi.itemRenderers.TaxCodeEditor" editable="true">
                			<mx:itemRenderer>
                    			<mx:Component>
	                        		<mx:Text selectable="false" text="{data.taxCodes.name}"/>
                    			</mx:Component>
                			</mx:itemRenderer>
						</mx:DataGridColumn>
					</mx:columns>
				</mx:DataGrid>

				<mx:Button x="50" y="418" width="38" height="38" click="doNewCashRegister();">
					<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
				</mx:Button>
				<mx:Button x="100" y="418" width="38" height="38" click="doRemoveCashRegister();">
					<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
				</mx:Button>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="pendinglist_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Pending List" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="120" id="chkShowDocumentType" label="Show Document Type in Number"/>
				<mx:CheckBox x="50" y="145" id="chkAlwaysIncludePastDue" label="Always Include Past Due Documents in Filter"/>
				<mx:CheckBox x="50" y="170" id="chkColorPastDueEntries" label="Color Past Due Entries"/>

				<mx:Button x="50" y="200" label="Past Due Color..." click="doSelectColor(txtPastDueColor);" width="167"/>
				<mx:Button x="50" y="230" label="Ready for Pickup Color..." click="doSelectColor(txtReadyforPickupColor);" width="167"/>
				<mx:Button x="50" y="260" label="Invoice Color..." click="doSelectColor(txtInvoiceColor);" width="167"/>
				<mx:Button x="50" y="290" label="Estimate Color..." click="doSelectColor(txtEstimateColor);" width="167"/>

				<mx:Button x="50" y="320" label="List Font..." click="doSelectFont(txtListFont);" width="167"/>
				<mx:Button x="50" y="350" label="Header Font..." click="doSelectFont(txtHeaderFont);" width="167"/>

				<mx:TextInput x="225" y="200" id="txtPastDueColor" width="80"/>
				<mx:TextInput x="225" y="230" id="txtReadyforPickupColor" width="80"/>
				<mx:TextInput x="225" y="260" id="txtInvoiceColor" width="80"/>
				<mx:TextInput x="225" y="290" id="txtEstimateColor" width="80"/>
				<mx:TextInput x="225" y="320" id="txtListFont" width="150"/>
				<mx:TextInput x="225" y="350" id="txtHeaderFont" width="150"/>

				<mx:DataGrid x="50" y="27" width="442" height="85" id="PendingListGrid" 
					dataProvider="{PreferencesPendingListArray}" 
					editable="true">
					<mx:columns>
						<mx:DataGridColumn width="40" headerText="Visible" dataField="visible" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn width="200" headerText="Column Title" dataField="columns.name"/>
					</mx:columns>
				</mx:DataGrid>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="estimatorbehavior_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Estimator Behavior" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30" id="chkCloseSourceAfterCopying" label="Close cource document after copying"/>
				<mx:CheckBox x="50" y="55" id="chkEnterStockCost" label="Enter Stock Cost in Estimator"/>
				<mx:CheckBox x="50" y="80" id="chkCanChangeAddress" label="Can Change Address on ALL Documnets"/>
				<mx:CheckBox x="50" y="105" id="chkAutoShowPaperCalculator" label="Auto Show Paper Calculator on New Jobs"/>
				<mx:CheckBox x="50" y="130" id="chkAlwaysUseStockParentSize" label="AlwaysUseStockParentSize"/>
				<mx:CheckBox x="50" y="155" id="chkCalculateReOrderDate" label="Calculate Re-Order Date on Invoice Copy"/>
				<mx:CheckBox x="50" y="180" id="chkValidateSalesRep" label="Validate Sales Rep"/>
				<mx:CheckBox x="50" y="205" id="chkLeaveFoldedSizeEmpty" label="Leave Folded Size empty on new Jobs"/>
				<mx:CheckBox x="50" y="230" id="chkDoNotCostDuringPost" label="Do not perform Costing during invoice POST"/>
				<mx:CheckBox x="50" y="255" id="chkAutoShowCharges" label="Auto Show Charges on new Jobs"/>
				<mx:CheckBox x="50" y="280" id="chkShowSinglePassWorkAndTurnOptions" label="Show Single Pass Work and Turn Options"/>
				<mx:CheckBox x="50" y="305" id="chkNeverUsePresetPress" label="Never Use Preset Press on Stock Changes"/>
				<mx:CheckBox x="50" y="330" id="chkAddFixedWasteForEachPass" label="Add Fixed Waste for Each Pass (Affects historic Documents)"/>
				<mx:CheckBox x="50" y="355" id="chkAddFixedWasteForEachColor" label="Add Fixed Waste for Each Color (Affects historic Documents)"/>
				<mx:CheckBox x="50" y="380" id="chkCalculateInkByImpressions" label="Calculate INK by Impressions, Includes Waste (Affects history)"/>
				<mx:CheckBox x="50" y="405" id="chkUseHistoryTitle" label="Use the History Title for New Document Title"/>

				<mx:Label x="50" y="442" text="Normal Due Date (days):"/>
				<mx:TextInput x="196" y="440" id="txtNormalDueDateDays" width="70" text="{preferencesEstimating.normalDueDateDays}"/>
				
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="estimatorprinting_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Estimator Printing" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:CheckBox x="50" y="30" id="chkCloseInvoiceAfterPrinting" label="Close Invoice after Printing Job Tickets"/>
				<mx:CheckBox x="50" y="55" id="chkCloseInvoiceAndEstimatesAfterPrinting" label="Close Invoices and Estimates after Printing"/>

				<mx:Label x="58" y="92" text="Default Invoice:"/>
				<mx:Label x="50" y="117" text="Default Estimate:"/>

				<mx:ComboBox x="160" y="90" id="cboDefaultInvoice"  dataProvider="{DefaultInvoiceArray}" labelField="name" width="250"/>
				<mx:ComboBox x="160" y="115" id="cboDefaultEstimate"  dataProvider="{DefaultEstimateArray}" labelField="name" width="250"/>


				<mx:Panel x="10" y="159" width="520" height="174" layout="absolute" title="Payment Due Date">
					<mx:Label x="20" y="7" text="Number of Days Before Due:"/>
					<mx:TextInput x="188" y="5" id="txtNumberOfDaysBeforeDue" width="50" text="{preferencesEstimating.numberOfDaysBeforeDue}"/>

					<mx:RadioButtonGroup id="optPaymentDueDays" selectedValue="{optPaymentDueDaysValue}"/>
					<mx:RadioButton x="50" y="25" id="opbFromNotifiedDate" label="From Notified Date" groupName="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="45" id="opbFromCompletedDate" label="From Completed Date" groupName="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="65" id="opbFromPickupDate" label="From Pickup Date" groupName="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="85" id="opbFromOrderedDate" label="From Ordered Date" groupName="optPaymentDueDays"/>
					<mx:RadioButton x="50" y="105" id="opbFromPrintedDate" label="From Printed Date" groupName="optPaymentDueDays"/>
				</mx:Panel>

				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="papercalculator_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Paper Calculator" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="30" y="52" id="chkGripEdge"/>
				<mx:CheckBox x="30" y="102" id="chkFolioEdge"/>
				<mx:CheckBox x="30" y="152" id="chkColorBar"/>
				<mx:CheckBox x="30" y="202" id="chkWhiteSpace"/>
				<mx:CheckBox x="30" y="302" id="chkGutter"/>
				<mx:CheckBox x="30" y="352" id="chkBleed"/>
				
				<mx:Label x="50" y="30" text="Grip Edge / Gap"/>
				<mx:Label x="50" y="80" text="Folio Edge"/>
				<mx:Label x="50" y="130" text="Color Bar"/>
				<mx:Label x="50" y="180" text="White Space"/>
				<mx:Label x="50" y="230" text="Right"/>
				<mx:Label x="50" y="280" text="Gutter"/>
				<mx:Label x="50" y="330" text="Bleed"/>
				<mx:Label x="50" y="380" text="Right"/>

				<mx:TextInput x="50" y="50" id="txtGripEdge" width="93" text="{preferencesEstimating.gripEdgeGap}"/>
				<mx:TextInput x="50" y="100" id="txtFolioEdge" width="93" text="{preferencesEstimating.folioEdge}"/>
				<mx:TextInput x="50" y="150" id="txtColorBar" width="93" text="{preferencesEstimating.colorBar}"/>
				<mx:TextInput x="50" y="200" id="txtWhiteSpace" width="93" text="{preferencesEstimating.whiteSpace}"/>
				<mx:TextInput x="50" y="250" id="txtWhiteSpaceRight" width="93" text="{preferencesEstimating.whiteSpaceRight}"/>
				<mx:TextInput x="50" y="300" id="txtGutter" width="93" text="{preferencesEstimating.gutter}"/>
				<mx:TextInput x="50" y="350" id="txtBleed" width="93" text="{preferencesEstimating.bleed}"/>
				<mx:TextInput x="50" y="400" id="txtBleedRight" width="93" text="{preferencesEstimating.bleedRight}"/>

				<mx:Label x="151" y="180" text="Top"/>
				<mx:Label x="151" y="230" text="Bottom"/>
				<mx:Label x="151" y="280" text="Horizontal"/>
				<mx:Label x="151" y="330" text="Top"/>
				<mx:Label x="151" y="380" text="Bottom"/>

				<mx:TextInput x="151" y="200" id="txtWhiteSpaceTop" width="93" text="{preferencesEstimating.whiteSpaceTop}"/>
				<mx:TextInput x="151" y="250" id="txtWhiteSpaceBottom" width="93" text="{preferencesEstimating.whiteSpaceBottom}"/>
				<mx:TextInput x="151" y="300" id="txtGutterHorizontal" width="93" text="{preferencesEstimating.gutterHorizontal}"/>
				<mx:TextInput x="151" y="350" id="txtBleedTop" width="93" text="{preferencesEstimating.bleedTop}"/>
				<mx:TextInput x="151" y="400" id="txtBleedBottom" width="93" text="{preferencesEstimating.bleedBottom}"/>


				<mx:Label x="27" y="462" text="Default Press Cutoff:"/>
				<mx:TextInput x="151" y="460" id="txtDefaultPressCutoff" width="93" text="{preferencesEstimating.defaultPressCuttOff}"/>


				<mx:CheckBox x="260" y="52" id="chkBackTrimParent" label="Back Trim, Parent"/>
				<mx:CheckBox x="260" y="77" id="chkTrimFourSides" label="Trim Four Sides"/>
				<mx:CheckBox x="260" y="102" id="chkWorkAndTumble" label="Work And Tumble"/>

				<mx:Label x="260" y="152" text="Run to Finish Grain:"/>
				<mx:ComboBox x="377" y="150" id="cboRunToFinishGrain"  dataProvider="{RunToFinishGrainArray}" labelField="name" width="80"/>

				<mx:Panel x="260" y="200" width="270" height="135" layout="absolute" title="Print Options">
					<mx:CheckBox x="10" y="5" id="chkPrintParentToFinish" label="Print Parent to Finish Section"/>
					<mx:CheckBox x="10" y="25" id="chkPrintParentToRun" label="Print Parent to Run Section"/>
					<mx:CheckBox x="10" y="45" id="chkPrintRunToFinish" label="Print Run to Finish Section"/>
					<mx:CheckBox x="10" y="65" id="chkAttachToJobTicket" label="Attach To Job Ticket"/>
				</mx:Panel>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="jobticket_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Job Ticket" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="30" y="30" text="Ticket Format:"/>
				<mx:RadioButtonGroup id="opgTicketFormat"/>
				<mx:RadioButton x="50" y="50" id="opgOldStyle" label="Old Style (pre 5.0)" groupName="opgTicketFormat"/>
				<mx:RadioButton x="50" y="70" id="opgStandardStyle" label="Standard Style" groupName="opgTicketFormat"/>
				<mx:RadioButton x="50" y="90" id="opgCustomStyle" label="Custom Style:" groupName="opgTicketFormat"/>
				<mx:ComboBox x="155" y="90" id="cboCustomStyle" dataProvider="{JobTicketStylesArray}" labelField="name" width="375"/>


				<mx:Label x="30" y="120" text="Options:"/>
				<mx:CheckBox x="50" y="140" id="chkShowAmountsOnTicket" label="Show Amount on Ticket"/>
				<mx:CheckBox x="50" y="160" id="chkAddTrackingBarCodes" label="Add Tracking Bar Codes"/>
				<mx:CheckBox x="50" y="180" id="chkShowReferenceNumber" label="Show Customer ext. Reference Number"/>
				
				<mx:Panel x="50" y="220" width="340" height="110" layout="absolute" title="Charge Description">
					<mx:RadioButtonGroup id="opgChargeDescription" selectedValue="{opgChargeDescriptionValue}"/>
					<mx:RadioButton x="10" y="5" id="opgShowName" label="Show Name" groupName="opgChargeDescription"/>
					<mx:RadioButton x="10" y="25" id="opgShowDescription" label="Show Description" groupName="opgChargeDescription"/>
					<mx:RadioButton x="10" y="45" id="opgShowBothIfDifferent" label="Show Both if Different" groupName="opgChargeDescription"/>
				</mx:Panel>

				<mx:Button x="50" y="345" label="Set Bar Code Font..." click="doSelectFont(null);" width="167"/>
				<mx:Button x="50" y="375" label="Print Bar Codes..." click="doPrintBarCodes();" width="167"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="quantitybreaks_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Quantity Breaks" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="markups_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Markups" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:Text x="50" y="30" text="Markup is stepped and based on COST of job before markup, the first amount covers from zero cost to the specified cost, the last amount includes all above as well." height="38" width="488"/>

				<mx:Label x="50" y="80" text="Outside Services"/>
				<mx:DataGrid x="50" y="100" height="200" id="OutsideServicesGrid" 
					dataProvider="{PreferencesMarkupsArray}" 
					editable="true">
					<mx:columns>
						<mx:DataGridColumn headerText="Total Cost" dataField="totalCost"/>
						<mx:DataGridColumn headerText="Markup" dataField="markup"/>
					</mx:columns>
				</mx:DataGrid>

				<mx:Button x="50" y="318" width="38" height="38" click="doNewMarkup(&quot;outside&quot;);">
					<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
				</mx:Button>
				<mx:Button x="100" y="318" width="38" height="38" click="doRemoveMarkup(&quot;outside&quot;,OutsideServicesGrid);">
					<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
				</mx:Button>

				<mx:Label x="300" y="80" text="Merchandise"/>
				<mx:DataGrid x="300" y="100" height="200" id="MerchandiseGrid" 
					dataProvider="{PreferencesMarkupsMerchandiseArray}" 
					editable="true">
					<mx:columns>
						<mx:DataGridColumn headerText="Total Cost" dataField="totalCost"/>
						<mx:DataGridColumn headerText="Markup" dataField="markup"/>
					</mx:columns>
				</mx:DataGrid>
				<mx:Button x="300" y="318" width="38" height="38" click="doNewMarkup(&quot;merchandise&quot;);">
					<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
				</mx:Button>
				<mx:Button x="350" y="318" width="38" height="38" click="doRemoveMarkup(&quot;merchandise&quot;,MerchandiseGrid);">
					<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
				</mx:Button>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="stocksizes_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Stocks And Sizes" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:Panel x="50" y="27" layout="absolute" title="Standard Stock and Special Order Markup" width="500" height="295">
					<mx:Label x="9" y="5" text="Quantity:"/>
					<mx:Label x="15" y="27" text="Markup:"/>

					<mx:TextInput x="66" y="3" id="txtstdqty1" width="50" text="{preferencesStocks.stdQty1}"/>
					<mx:TextInput x="116" y="3" id="txtstdqty2" width="50" text="{preferencesStocks.stdQty2}"/>
					<mx:TextInput x="166" y="3" id="txtstdqty3" width="50" text="{preferencesStocks.stdQty3}"/>
					<mx:TextInput x="216" y="3" id="txtstdqty4" width="50" text="{preferencesStocks.stdQty4}"/>
					<mx:TextInput x="266" y="3" id="txtstdqty5" width="50" text="{preferencesStocks.stdQty5}"/>
					<mx:TextInput x="316" y="3" id="txtstdqty6" width="50" text="{preferencesStocks.stdQty6}"/>
	
					<mx:TextInput x="66" y="26" id="txtstdmarkup1" width="50" text="{preferencesStocks.stdMarkup1}"/>
					<mx:TextInput x="116" y="26" id="txtstdmarkup2" width="50" text="{preferencesStocks.stdMarkup2}"/>
					<mx:TextInput x="166" y="26" id="txtstdmarkup3" width="50" text="{preferencesStocks.stdMarkup3}"/>
					<mx:TextInput x="216" y="26" id="txtstdmarkup4" width="50" text="{preferencesStocks.stdMarkup4}"/>
					<mx:TextInput x="266" y="26" id="txtstdmarkup5" width="50" text="{preferencesStocks.stdMarkup5}"/>
					<mx:TextInput x="316" y="26" id="txtstdmarkup6" width="50" text="{preferencesStocks.stdMarkup6}"/>

					<mx:Label x="15" y="55" text="Stock weight, name and finish"/>
					<mx:Label x="15" y="95" text="Stock points, name and finish"/>
					<mx:Label x="15" y="135" text="Stock microns, name and finish"/>
					<mx:Label x="15" y="175" text="Stock plies, name and finish"/>
					<mx:Label x="15" y="215" text="Stock millimeters, name and finish"/>

					<mx:TextInput x="15" y="70" id="txtStockWeight" text="{preferencesStocks.weight}" width="172"/>
					<mx:TextInput x="15" y="110" id="txtstockPoints" text="{preferencesStocks.points}" width="172"/>
					<mx:TextInput x="15" y="150" id="txtStockMicrons" text="{preferencesStocks.microns}" width="172"/>
					<mx:TextInput x="15" y="190" id="txtStockPlies" text="{preferencesStocks.plies}" width="172"/>
					<mx:TextInput x="15" y="230" id="txtStockMillimeters" text="" width="172"/>
				</mx:Panel>
				<mx:Panel x="50" y="326" layout="absolute" title="Blank Stock Pricing" width="500" height="92">				
					<mx:Label x="9" y="5" text="Quantity:"/>
					<mx:Label x="15" y="27" text="Markup:"/>

					<mx:TextInput x="66" y="3" id="txtblankqty1" width="50" text="{preferencesStocks.blankQty1}"/>
					<mx:TextInput x="116" y="3" id="txtblankqty2" width="50" text="{preferencesStocks.blankQty2}"/>
					<mx:TextInput x="166" y="3" id="txtblankqty3" width="50" text="{preferencesStocks.blankQty3}"/>
					<mx:TextInput x="216" y="3" id="txtblankqty4" width="50" text="{preferencesStocks.blankQty4}"/>
					<mx:TextInput x="266" y="3" id="txtblankqty5" width="50" text="{preferencesStocks.blankQty5}"/>
					<mx:TextInput x="316" y="3" id="txtblankqty6" width="50" text="{preferencesStocks.blankQty6}"/>
	
					<mx:TextInput x="66" y="26" id="txtblankmarkup1" width="50" text="{preferencesStocks.blankMarkup1}"/>
					<mx:TextInput x="116" y="26" id="txtblankmarkup2" width="50" text="{preferencesStocks.blankMarkup2}"/>
					<mx:TextInput x="166" y="26" id="txtblankmarkup3" width="50" text="{preferencesStocks.blankMarkup3}"/>
					<mx:TextInput x="216" y="26" id="txtblankmarkup4" width="50" text="{preferencesStocks.blankMarkup4}"/>
					<mx:TextInput x="266" y="26" id="txtblankmarkup5" width="50" text="{preferencesStocks.blankMarkup5}"/>
					<mx:TextInput x="316" y="26" id="txtblankmarkup6" width="50" text="{preferencesStocks.blankMarkup6}"/>

				</mx:Panel>
				<mx:Panel x="50" y="422" layout="absolute" title="Customer Stock" width="500" height="134">
					<mx:Label x="37" y="5" text="Stock Cost:"/>
					<mx:Label x="49" y="27" text="Quantity:"/>
					<mx:Label x="55" y="49" text="Markup:"/>

					<mx:TextInput x="109" y="3" id="txtcustomercost" width="50" text="{preferencesStocks.customerCost}"/>
					<mx:TextInput x="109" y="26" id="txtcustomerquantity" width="50" text="{preferencesStocks.customerQuantity}"/>
					<mx:TextInput x="109" y="49" id="txtcustomermarkup" width="50" text="{preferencesStocks.customerMarkup}"/>

					<mx:CheckBox x="10" y="71" id="chkMarkupOnly" label="Markup Only (no stock cost)"/>
								
				</mx:Panel>

				<mx:Label x="50" y="564" text="Size Table to Use:"/>
				<mx:ComboBox x="160" y="562" id="cboSizeTableToUse"/>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="stockdefinitions_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Stock Definitions" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:DataGrid x="50" y="27" width="442" height="300" id="StockDefinitionGrid"
					dataProvider="{PreferencesStockDefinitionArray}" 
					editable="true">
					<mx:columns>
						<mx:DataGridColumn width="40" headerText="Visible" dataField="visible" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn width="200" headerText="Column Title" dataField="columns.name"/>
					</mx:columns>
				</mx:DataGrid>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="pricingmethod_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Pricing Method" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:DataGrid x="50" y="27" width="500" height="475" id="PricingMethodGrid" 
					dataProvider="{PreferencesPricingMethodArray}" 
					editable="true" 
					itemEditEnd="processPricingMethodGridData(event);">
					<mx:columns>
						<mx:DataGridColumn width="40" headerText="Use" dataField="used" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn width="100" headerText="Title" dataField="title"/>
						<mx:DataGridColumn width="100" headerText="Abbreviation" dataField="abbreviation"/>
						<mx:DataGridColumn width="40" headerText="B" dataField="brokered" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn width="40" headerText="T" dataField="taxable" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn width="40" headerText="F" dataField="finished" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn width="40" headerText="N" dataField="showNotes" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn width="140" headerText="Sales Category" dataField="category"
							itemEditor="com.efi.itemRenderers.SalesCategoryEditor" editable="true">
                			<mx:itemRenderer>
                    			<mx:Component>
	                        		<mx:Text selectable="false" text="{data.category.name}"/>
                    			</mx:Component>
                			</mx:itemRenderer>
						</mx:DataGridColumn>
						<mx:DataGridColumn width="100" headerText="Estimator" dataField="estimator" editable="false"/>
					</mx:columns>
				</mx:DataGrid>
				<mx:Button x="50" y="510" width="38" height="38" click="doNewPriceMethod();">
					<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
				</mx:Button>
				<mx:Button x="100" y="510" width="38" height="38" click="doRemovePriceMethod();">
					<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
				</mx:Button>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="creditdefaults_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Credit/Defaults" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				
				<mx:Label x="72" y="32" text="Credit Limit:"/>
				<mx:Label x="50" y="62" text="Finance Charge:"/>
				<mx:Label x="53" y="92" text="Inactive Period:"/>
				<mx:CheckBox x="50" y="120" id="chkRemoveDraftFromDeposit" label="Remove Drafts from Deposit Ticket"/>
				<mx:Label x="50" y="152" text="Default Sales Rep for New Accounts:"/>
				<mx:Label x="58" y="182" text="Default Shipping for New Accounts:"/>

				<mx:TextInput x="151" y="30" id="txtCreditLimit" width="379" text="{preferencesAccounting.creditLimit}"/>
				<mx:TextInput x="151" y="60" id="txtFinanceCharge" width="379" text="{preferencesAccounting.financeChange}"/>
				<mx:TextInput x="151" y="90" id="txtInactivePeriod" width="379" text="{preferencesAccounting.inactivePeriod}"/>
				<mx:TextInput x="255" y="150" id="txtDefaultSalesRep" width="275" text="{preferencesAccounting.defaultSalesRep}"/>
				<mx:TextInput x="255" y="180" id="txtDefaultShippingAddress" width="275" text="{preferencesAccounting.defaultShipping}"/>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="agingperiods_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Aging Periods" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="28" y="32" text="Past Due:"/>
				<mx:Label x="18" y="132" text="Delinquent:"/>
				<mx:Label x="41" y="232" text="Frozen:"/>
				<mx:TextInput x="90" y="30" id="txtPastDue" width="60" text="{preferencesAccounting.pastDue}"/>
				<mx:TextInput x="90" y="130" id="txtDelinquent" width="60" text="{preferencesAccounting.delinquent}"/>
				<mx:TextInput x="90" y="230" id="txtFrozen" width="60" text="{preferencesAccounting.frozen}"/>

				<mx:TextArea x="90" y="60" id="txtPastDueArea" width="390" height="60" text="{preferencesAccounting.pastDueNote}"/>
				<mx:TextArea x="90" y="160" id="txtDelinquentArea" width="390" height="60" text="{preferencesAccounting.delinquentNote}"/>
				<mx:TextArea x="90" y="260" id="txtFrozenArea" width="390" height="60" text="{preferencesAccounting.frozenNote}"/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="salescategories_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Sales Categories" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>
				<mx:DataGrid x="50" y="27" width="200" height="475" id="SalesCategoryGrid"
					dataProvider="{PreferencesSalesCategoryArray}"
					editable="true"
					itemEditEnd="processSalesCategoryGridData(event);">
					<mx:columns>
						<mx:DataGridColumn width="140" headerText="Name" dataField="category"
							itemEditor="com.efi.itemRenderers.SalesCategoryEditor" editable="true">
                			<mx:itemRenderer>
                    			<mx:Component>
	                        		<mx:Text selectable="false" text="{data.category.name}"/>
                    			</mx:Component>
                			</mx:itemRenderer>
						</mx:DataGridColumn>
						<mx:DataGridColumn headerText="GL Account" dataField="accountNumber" width="100"/>
					</mx:columns>
				</mx:DataGrid>
				
				<mx:Button x="50" y="510" width="38" height="38" click="doNewSalesCategory();">
					<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
				</mx:Button>
				<mx:Button x="100" y="510" width="38" height="38" click="doRemoveSalesCategory();">
					<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
				</mx:Button>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="glprofiles_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="GL Profiles" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Label x="50" y="32" text="Link to:"/>
				<mx:ComboBox x="110" y="30" id="cboAccountingPackages"  dataProvider="{AccountingPackagesArray}" labelField="name" width="200"/>

				<mx:Label x="50" y="62" text="Shipping Collected:"/>
				<mx:Label x="42" y="92" text="Actual Bank Deposit:"/>
				<mx:Label x="32" y="122" text="Undeposited Receipts:"/>
				<mx:Label x="100" y="152" text="Discounts:"/>
				<mx:Label x="98" y="182" text="Sales Tax:"/>
				<mx:Label x="55" y="212" text="Total AR Receipts:"/>
				<mx:Label x="37" y="242" text="Deposits on Invoices:"/>
				<mx:Label x="48" y="272" text="New Charges to AR:"/>
				<mx:Label x="61" y="302" text="Cash Over/Short:"/>
				<mx:Label x="105" y="332" text="Paid Out:"/>
				<mx:Label x="69" y="362" text="Refund Checks:"/>

				<mx:TextInput x="166" y="60"  id="txtShippingCollected" width="80" text="{preferencesAccounting.shippingCollected}"/>
				<mx:TextInput x="166" y="90"  id="txtActualBankDeposit" width="80" text="{preferencesAccounting.actualBankDeposit}"/>
				<mx:TextInput x="166" y="120" id="txtUndepositedReceipts" width="80" text="{preferencesAccounting.undepositedReceipts}"/>
				<mx:TextInput x="166" y="150" id="txtDiscounts" width="80" text="{preferencesAccounting.discounts}"/>
				<mx:TextInput x="166" y="180" id="txtSalesTax" width="80" text="{preferencesAccounting.salesTax}"/>
				<mx:TextInput x="166" y="210" id="txtTotalARReceipts" width="80" text="{preferencesAccounting.totalARReceipts}"/>
				<mx:TextInput x="166" y="240" id="txtDepositsOnInvoices" width="80" text="{preferencesAccounting.depositsOnInvoices}"/>
				<mx:TextInput x="166" y="270" id="txtNewChargesToAR" width="80" text="{preferencesAccounting.newChargesToAR}"/>
				<mx:TextInput x="166" y="300" id="txtCashOverShort" width="80" text="{preferencesAccounting.cashOverShort}"/>
				<mx:TextInput x="166" y="330" id="txtPaidOut" width="80" text="{preferencesAccounting.paidOut}"/>
				<mx:TextInput x="166" y="360" id="txtRefundChecks" width="80" text="{preferencesAccounting.refundChecks}"/>

				<mx:Label x="250" y="62" text="(income)"/>
				<mx:Label x="250" y="92" text="(asset)"/>
				<mx:Label x="250" y="122" text="(asset)"/>
				<mx:Label x="250" y="152" text="(expense)"/>
				<mx:Label x="250" y="182" text="(liability)"/>
				<mx:Label x="250" y="212" text="(asset)"/>
				<mx:Label x="250" y="242" text="(liability)"/>
				<mx:Label x="250" y="272" text="(asset)"/>
				<mx:Label x="250" y="302" text="(expense)"/>
				<mx:Label x="250" y="332" text="(expense)"/>
				<mx:Label x="250" y="362" text="(asset)"/>

				<mx:Label x="30" y="392" text="Enter General Ledger control account numbers to use when exporting accounting information."/>
				
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="creditcards_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Credit Card Info" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30" id="chkActivateCCAprovalProcess" label="Activate Credit Card Approval Processing"/>
				<mx:Label x="50" y="62" text="Credit Card processing drop folder"/>
				<mx:TextInput x="50" y="80" id="txtCreditCardDropFolder" width="300" text="{preferencesAccounting.creditCardDropFolder}"/>
				<mx:Button x="358" y="80" label="Browse..." click="doSelectFolder();"/>
				<mx:Label x="50" y="112" text="Polling Interval:"/>
				<mx:TextInput x="144" y="110" id="txtCreditCardPollingInterval" width="62" text="{preferencesAccounting.pollingInterval}"/>
				<mx:CheckBox x="215" y="110" id="chkUseAddressValidation" label="Use Address Validation"/>
				<mx:CheckBox x="215" y="140" id="chkPromptUserForValidationInformation" label="Prompt User for Validation Information"/>
				
				<mx:DataGrid x="50" y="179" width="300" height="323" id="CreditCardGrid"
					dataProvider="{PreferencesCreditCardArray}"
					editable="true">
					<mx:columns>
						<mx:DataGridColumn width="40" headerText="Use" dataField="used" editorDataField="selected"
							itemEditor="mx.controls.CheckBox"
							itemRenderer="com.efi.components.GenericCheckboxRenderer">
						</mx:DataGridColumn>
						<mx:DataGridColumn headerText="Card Title" dataField="cardType"/>
						<mx:DataGridColumn headerText="Abbrev." dataField="abbreviation" width="60"/>
						<mx:DataGridColumn headerText="Code" dataField="code" width="50"/>
					</mx:columns>
				</mx:DataGrid>
				
				<mx:Button x="50" y="510" width="38" height="38" click="doNewCreditCard();">
					<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
				</mx:Button>
				<mx:Button x="100" y="510" width="38" height="38" click="doRemoveCreditCard();">
					<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
				</mx:Button>

			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="ordernumberformat_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Order Number Format" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:Panel x="50" y="27" layout="absolute" title="Invoice" width="500" height="226">
					<mx:Label x="10" y="13" text="Prefix"/>
					<mx:Label x="130" y="13" text="Document #"/>
					<mx:Label x="250" y="13" text="Suffix"/>
					<mx:TextInput x="10" y="30" id="txtInvoicePrefix" width="115" text="{preferencesAccounting.invoicePrefix}"/>
					<mx:TextInput x="130" y="30" id="txtInvoiceDocument" width="115" text="{preferencesAccounting.invoiceDocument}"/>
					<mx:TextInput x="250" y="30" id="txtInvoiceSuffix" width="115" text="{preferencesAccounting.invoiceSuffix}"/>
					<mx:CheckBox x="10" y="100" id="chkAllowInvoicePrefixModification" label="Allow Prefix Modification"/>
					<mx:CheckBox x="10" y="130" id="chkAllowInvoiceSuffixModification" label="Allow Suffix Modification"/>
				</mx:Panel>

				<mx:Panel x="50" y="261" layout="absolute" title="Estimate" width="500" height="226">
					<mx:Label x="10" y="13" text="Prefix"/>
					<mx:Label x="130" y="13" text="Document #"/>
					<mx:Label x="250" y="13" text="Suffix"/>
					<mx:TextInput x="10" y="30" id="txtEstimatePrefix" width="115" text="{preferencesAccounting.estimatePrefix}"/>
					<mx:TextInput x="130" y="30" id="txtEstimateDocument" width="115" text="{preferencesAccounting.estimateDocument}"/>
					<mx:TextInput x="250" y="30" id="txtEstimateSuffix" width="115" text="{preferencesAccounting.estimateSuffix}"/>
					<mx:CheckBox x="10" y="100" id="chkAllowEstimatePrefixModification" label="Allow Prefix Modification"/>
					<mx:CheckBox x="10" y="130" id="chkAllowEstimateSuffixModification" label="Allow Suffix Modification"/>
				</mx:Panel>
			</mx:Canvas>
			<mx:Canvas width="100%" height="100%" id="journalentries_canvas" hideEffect="effect" showEffect="effect">
				<mx:Label x="0" y="0" width="100%" height="20" text="Journal Entries" textAlign="center"/>
				<mx:HRule x="0" y="17" width="100%"/>

				<mx:CheckBox x="50" y="30" id="chkPrintDocument" label="Print Document"/>
				
				<mx:Label x="50" y="92" text="Journal Document Preference:"/>
				<mx:ComboBox x="224" y="90" id="cboJournalDocumentPreference"  dataProvider="{JournalDocumentPreferenceArray}" labelField="name" width="250"/>

			</mx:Canvas>
		</mx:ViewStack>					
	</mx:VBox>
</mx:Panel>
