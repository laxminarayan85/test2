<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="752" height="800" creationComplete="init()" xmlns:vo="com.efi.vo.*" title="Stock Definition">
	<mx:RemoteObject id="saveService" destination="StockDefinitionsService"
	result="handleSaveResult(event)" fault="handleFault(event)"
	showBusyCursor="true" />
	
	<mx:RemoteObject id="loaderService" destination="StockDefinitionsService"
	result="handleLoadResult(event)"  fault="handleFault(event)"
	showBusyCursor="true" />
	                             
	<mx:RemoteObject id="deleteService" destination="StockDefinitionsService"
	result="handleDeleteResult(event)" fault="handleFault(event)" showBusyCursor="true" />
	
	<mx:Producer id="producer" destination="stock"/>
	<mx:Consumer id="consumer" destination="stock" message="messageHandler(event.message)"/>
	<mx:Consumer id="notification_consumer" destination="notifications" message="messageHandler(event.message)"/>
<mx:Script>                                   
<![CDATA[
	import com.efi.vo.Stock;
	import com.efi.vo.StockBlankSheets;
	import com.efi.vo.StockInventory;
	import com.efi.vo.StockQty;
	import com.efi.vo.StockPricing;
	import com.efi.vo.StockQtyBreak;
	import com.efi.vo.StockComments;
	
	import mx.controls.Alert;                                         
	import mx.managers.PopUpManager;                                         
	import mx.containers.TitleWindow;                                         
	import mx.collections.ArrayCollection;                                         
	import mx.rpc.events.ResultEvent;                                         
	import mx.rpc.events.FaultEvent;                                         
	import mx.messaging.messages.AsyncMessage;
	import mx.messaging.messages.IMessage;
                   
    private var enableSave:Boolean = true;
                         
	[Bindable]                                         
	private var stockDefinition:Stock;
	
	[Bindable]                                         
	private var stockQty:StockQty;                              
	private var stockInventory:StockInventory;
                                                                                  	
	[Bindable]                                
	private var StockDefinitionArray:ArrayCollection = new ArrayCollection();
                                                                         
	public function init():void {
		consumer.subscribe();
		notification_consumer.subscribe();     
	    loaderService.getStockDefinitions();
	    stockDefinition = new Stock();
		stockQty = new StockQty();
		stockInventory = new StockInventory();
	}      
	                                                   	
	public function loadStockDefinitions():void {   
	    loaderService.getStockDefinitions();
	}
					
	private function messageHandler(message:IMessage):void
	{
	}
                                  
	private function doSave():void {
	 
		
		saveService.addUpdateStockDefinitions(stockDefinition);                                          		
	}       	          
	private function doAddStock():void {
		saveService.addUpdateStockDefinitions(stockDefinition);                                        		
	}     
	             
	private function doDeleteStock():void {              
		deleteService.deleteStockDefinitions(stockDefinition.id);             
	}

	private function doStockGridClick():void {
		//pressDefinition = dataGrid.selectedItem as StockDefinition;
	}
	
	private function handleSaveResult(ev:ResultEvent):void {
    	loadStockDefinitions();
	}

	private function handleLoadResult(ev:ResultEvent):void {
	     StockDefinitionArray = ev.result as ArrayCollection;
	}
	                                 
	private function handleDeleteResult(ev:ResultEvent):void {
	     loadStockDefinitions();
	}
	      
	private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error", 0, null, null, null,null);                                 
	}
                                   
]]>
                             
</mx:Script>	
<vo:Stock id="stock"  />                           

	<mx:RadioButtonGroup id="PaperStyle"/>
	<mx:ComboBox x="92" y="68" width="116"></mx:ComboBox>
	<mx:Label x="49" y="70" text="Group:"/>
	<mx:Label x="216" y="70" text="Class:"/>
	<!--<mx:TextInput x="264" y="68" width="105" text="{stock.class}"/>-->
	<mx:CheckBox x="393" y="68" label="Metric"/>
	<mx:Label x="49" y="93" text="Name:"/>
	<mx:Label x="71" y="117" text="Color:"/>
	<!--<mx:TextInput x="118" y="115" width="138" text="{stock.color}"/>-->
	<mx:Label x="264" y="91" text="Finish:"/>
	<mx:TextInput x="96" y="91" width="160" text="{stock.name}"/>
	<mx:TextInput x="313.5" y="91" width="105" text="{stock.finish}"/>
	<mx:Label x="71" y="142" text="Generic Color:"/>
	<mx:TextInput x="163" y="140" width="93" text="{stockDefinition.genericColor}"/>
	<mx:Label x="264" y="117" text="Grade:"/>
	<mx:TextInput x="313.5" y="117" width="105" text="{stockDefinition.grade}"/>
	<mx:Label x="426.5" y="97" text="Weight:"/>
	<mx:TextInput x="483.5" y="93" width="55" text="{stockDefinition.weight}"/>
	<mx:Label x="426.5" y="121" text="Coated:"/>
	<mx:TextInput x="483.5" y="117" width="55" text="{stockDefinition.coated}"/>
	<mx:RadioButtonGroup id="stockunit"/>
	<mx:RadioButton x="564" y="68" label="Envelope" groupName="stockunit"/>
	<mx:RadioButton x="564" y="94" label="Sheet Stock" groupName="stockunit"/>
	<mx:RadioButton x="564" y="120" label="Roll Stock" groupName="stockunit"/>
	<mx:RadioButton x="564" y="146" label="Large Format" groupName="stockunit"/>
	<mx:TabNavigator x="48" y="166" width="652" height="585">
		<mx:Canvas label="Specification and Pricing" width="100%" height="100%">
			<mx:Panel x="10" y="0" width="630" height="225" layout="absolute">
				<mx:Label x="56.5" y="6" text="Vendor:"/>
				<mx:TextInput x="113.5" y="4" text="{stock.vendor}"/>
				<mx:Label x="34.5" y="35" text="Stock Type:"/>
				<mx:TextInput x="113.5" y="30" width="128" text="{stockDefinition.type}"/>
				<mx:Label x="281.5" y="6" text="Stock #:"/>
				<mx:TextInput x="341.5" y="4" width="93" text="{stockDefinition.stockNumber}"/>
				<mx:Label x="51" y="59" text="Parent Size:"/>
				<mx:TextInput x="132" y="57" width="132" text="{stock.parentsize}"/>
				<mx:Label x="275" y="57" text="Thickness:"/>
				<mx:Label x="281.5" y="32" text="Basic Size:"/>
				<mx:TextInput x="341.5" y="55" width="64" text="{stock.basicsize"/>
				<mx:Label x="51" y="111" text="Sheets / Carton:"/>
				<mx:TextInput x="157" y="109" width="107" text="{stock.sheetspercarton}"/>
				<mx:Label x="275" y="84" text="M Weight:"/>
				<mx:TextInput x="345" y="82" width="89.5" text="{stock.mweight}"/>
				<mx:Label x="51" y="137" text="Min. Order:"/>
				<mx:TextInput x="127" y="135" width="137" text="{stock.minorder}"/>
				<mx:Label x="272" y="111" text="Carton Weight:"/>
				<mx:TextInput x="370" y="109" width="64.5" text=""/>
				<mx:Text x="354.5" y="32" text="{stock.basicsize}" width="103"/>
				<mx:CheckBox x="272" y="135" label="Charge Customer for Entire Order"/>
				<mx:ComboBox x="413" y="55" width="80"></mx:ComboBox>
			</mx:Panel>
			<mx:Panel x="10" y="233" width="630" height="200" layout="absolute" title="Qty. Adjustments">
				<mx:TextInput x="88" y="28" width="66" text=""/>
				<mx:TextInput x="88" y="48" width="66" text=""/>
				<mx:TextInput x="88" y="68" width="66" text=""/>
				<mx:TextInput x="88" y="89" width="66" text=""/>
				<mx:TextInput x="88" y="110" width="66" text=""/>
				<mx:TextInput x="151" y="28" width="66"/>
				<mx:TextInput x="151" y="48" width="66"/>
				<mx:TextInput x="151" y="68" width="66"/>
				<mx:TextInput x="151" y="89" width="66"/>
				<mx:TextInput x="151" y="110" width="66"/>
				<mx:TextInput x="214" y="28" width="66"/>
				<mx:TextInput x="214" y="48" width="66"/>
				<mx:TextInput x="214" y="68" width="66"/>
				<mx:TextInput x="214" y="89" width="66"/>
				<mx:TextInput x="214" y="110" width="66"/>
				<mx:TextInput x="275.5" y="28" width="66"/>
				<mx:TextInput x="275.5" y="48" width="66"/>
				<mx:TextInput x="275.5" y="68" width="66"/>
				<mx:TextInput x="275.5" y="89" width="66"/>
				<mx:TextInput x="275.5" y="110" width="66"/>
				<mx:Label x="10" y="30" text="Qty. Breaks:"/>
				<mx:Label x="44" y="50" text="Costs:"/>
				<mx:Label x="49" y="70" text="CWT:"/>
				<mx:Label x="34" y="91" text="Markup:"/>
				<mx:Label x="34" y="112" text="List / M:"/>
				<mx:TextInput x="339" y="28" width="66"/>
				<mx:TextInput x="339" y="48" width="66"/>
				<mx:TextInput x="339" y="68" width="66"/>
				<mx:TextInput x="339" y="89" width="66"/>
				<mx:TextInput x="339" y="110" width="66"/>
				<mx:TextInput x="403" y="28" width="66"/>
				<mx:TextInput x="403" y="48" width="66"/>
				<mx:TextInput x="403" y="68" width="66"/>
				<mx:TextInput x="403" y="89" width="66"/>
				<mx:TextInput x="403" y="110" width="66"/>
				<mx:Label x="69" y="2" text="Costing Units:"/>
				<mx:Label x="257" y="2" text="# Sheets / Set:"/>
				<mx:TextInput x="151" y="0" width="87" text="{stockQty.costUnits}"/>
				<mx:TextInput x="352" y="0" width="81" text="{stockQty.sheetsPerSet}"/>
				<mx:CheckBox x="450" y="0" label="Cost is in Sets"/>
				<mx:Label x="74" y="140" text="Price Expires:"/>
				<mx:TextInput x="162" y="138" width="87" text="{stockQty.priceExpires}"/>
			</mx:Panel>
			<mx:Panel x="14.5" y="441" width="621" height="93" layout="absolute" title="Comments">
				<mx:TextArea x="0" y="-6" width="570" height="49" text="{stock.comments}"/>
			</mx:Panel>
		</mx:Canvas>
		<mx:Canvas label="Pricing Options" width="100%" height="100%">
			<mx:Panel x="10" y="51" width="270" height="78" layout="absolute" title="Select Press for Printing">
				<mx:Label x="10" y="12" text="Press:"/>
				<mx:TextInput x="58" y="10" width="182" text=""/>
			</mx:Panel>
			<mx:Panel x="313" y="51" width="290" height="78" layout="absolute" title="Schedule for List Pricing">
				<mx:Button x="10" y="6" label="Select Schedule"/>
				<mx:Text x="133" y="8" text="&lt;Nothing Selected&gt;" width="115"/>
			</mx:Panel>
			<mx:TextInput x="111" y="21" width="85" text=""/>
			<mx:TextInput x="266" y="21" width="50" text=""/>
			<mx:TextInput x="407" y="21" width="50" text=""/>
			<mx:Label x="10" y="23" text="Normal Run Size:"/>
			<mx:Label x="204" y="23" text="Cut / 100:"/>
			<mx:Label x="324" y="23" text="Min. Cut Chg.:"/>
			<mx:Button x="475" y="21" label="Import One Stock"/>
			<mx:Panel x="10" y="137" width="593" height="108" layout="absolute" title="Pricing for Blank Sheets">
				<mx:TextInput x="65" y="2" width="80" text=""/>
				<mx:TextInput x="143" y="2" width="80"/>
				<mx:TextInput x="221" y="2" width="80"/>
				<mx:TextInput x="299" y="2" width="80"/>
				<mx:TextInput x="378" y="2" width="80"/>
				<mx:TextInput x="456" y="2" width="80"/>
				<mx:TextInput x="65" y="23" width="80" text=""/>
				<mx:TextInput x="143" y="23" width="80"/>
				<mx:TextInput x="221" y="23" width="80"/>
				<mx:TextInput x="299" y="23" width="80"/>
				<mx:TextInput x="378" y="23" width="80"/>
				<mx:TextInput x="456" y="23" width="80"/>
				<mx:Label x="0" y="4" text="Quantity:"/>
				<mx:Label x="21" y="25" text="Price:"/>
				<mx:CheckBox x="65" y="47" label="Auto Calculate Blank Stock"/>
			</mx:Panel>
			<mx:Panel x="10" y="253" width="593" height="122" layout="absolute">
				<mx:title>Adjust Copier / Digital Matrix and Select Defaults</mx:title>
				<mx:Panel x="10" y="299" width="593" height="155" layout="absolute">
					<mx:title>Adjust Copier / Digital Matrix and Select Defaults</mx:title>
				</mx:Panel>
				<mx:Panel x="10" y="299" width="593" height="155" layout="absolute">
					<mx:title>Adjust Copier / Digital Matrix and Select Defaults</mx:title>
					<mx:Panel x="10" y="299" width="593" height="155" layout="absolute">
						<mx:title>Adjust Copier / Digital Matrix and Select Defaults</mx:title>
					</mx:Panel>
				</mx:Panel>
				<mx:Label x="82" y="1" text="B&amp;W:"/>
				<mx:Label x="78" y="27" text="Color:"/>
				<mx:Label x="33" y="51" text="Large Format:"/>
				<mx:TextInput x="125" y="-1" width="90"/>
				<mx:TextInput x="125" y="25" width="90"/>
				<mx:TextInput x="125" y="51" width="90"/>
				<mx:TextInput x="223" y="-1" width="201"/>
				<mx:TextInput x="223" y="25" width="201"/>
				<mx:TextInput x="223" y="51" width="201"/>
				<mx:Panel x="52" y="53" width="250" height="200" layout="absolute">
					<mx:Panel x="-58" y="41" width="573" height="128" layout="absolute">
					</mx:Panel>
				</mx:Panel>
			</mx:Panel>
			<mx:Panel x="10" y="383" width="593" height="154" layout="absolute" title="Preset Up to 10 Charges">
				<mx:Button x="10" y="0" label="Add Charges..."/>
				<mx:Text x="128" y="2" text="&lt;Nothing Selected&gt;"/>
			</mx:Panel>
		</mx:Canvas>
		<mx:Canvas label="Inventory" width="100%" height="100%">
			<mx:Panel x="10" y="10" width="630" height="244" layout="absolute" title="Inventory Settings">
				<mx:CheckBox x="39" y="0" label="Stock is Standard Inventory Item"/>
				<mx:Label x="30" y="30" text="Stock On Hand:"/>
				<mx:Label x="51" y="58" text="Committed:"/>
				<mx:TextInput x="131" y="28" width="84" text="{stockInventory.onHand}"/>
				<mx:TextInput x="131" y="56" width="84" text="{stockInventory.committed}"/>
				<mx:Label x="63" y="88" text="Available:"/>
				<mx:Label x="30" y="154" text="Stock Expires:"/>
				<mx:Label x="37" y="176" text="Bin Location:"/>
				<mx:TextInput x="131" y="86" width="84" text="{stockInventory.available}"/>
				<mx:Label x="268" y="30" text="On Order:"/>
				<mx:TextInput x="337" y="28" width="84" text="{stockInventory.onOrder}"/>
				<mx:Label x="250" y="58" text="Target Level:"/>
				<mx:TextInput x="337" y="56" width="84" text="{stockInventory.targetLevel}"/>
				<mx:Label x="243" y="88" text="Reorder Point:"/>
				<mx:TextInput x="337" y="86" width="84" text="{stockInventory.reOrderPoint}"/>
				<mx:Label x="234" y="118" text="Min. Order Qty.:"/>
				<mx:TextInput x="337" y="116" width="84" text="{stockInventory.minOrderQty}"/>
				<mx:Text x="122" y="154" width="81" text="{stockInventory.expires}" />
				<mx:Text x="122" y="176" text="{stockInventory.binLocation}"/>
				<mx:CheckBox x="250" y="154" label="Shell Item"/>
				<mx:Button x="341" y="154" label="Assign Customer Account..."/>
			</mx:Panel>
			<mx:Panel x="10" y="274" width="630" height="268" layout="absolute" title="10 Most Recent Inventory Changes">
				<mx:Button x="10" y="204" label="Show Entire History"/>
				<mx:DataGrid x="10" y="0" width="590" height="199">
					<mx:columns>
						<mx:DataGridColumn headerText="User" dataField="col1"/>
						<mx:DataGridColumn headerText="Date" dataField="col2"/>
						<mx:DataGridColumn headerText="How Changed" dataField="col3"/>
						<mx:DataGridColumn headerText="Quantity" dataField="col4"/>
						<mx:DataGridColumn headerText="Reference" dataField="col5"/>
					</mx:columns>
				</mx:DataGrid>
			</mx:Panel>
		</mx:Canvas>
	</mx:TabNavigator>
	<mx:Button x="10" y="10" width="38" height="38">
		<mx:icon>@Embed(source='../../../assets/previous_page.png')</mx:icon>
	</mx:Button>
	<mx:Button x="56" y="10" width="38" height="38">
		<mx:icon>@Embed(source='../../../assets/next_page.png')</mx:icon>
	</mx:Button>
	<mx:Label x="10" y="46" text="Prev" width="38" textAlign="center"/>
	<mx:Label x="56" y="46" text="Next" width="38" textAlign="center"/>
	<mx:Button x="171" y="10" width="38" height="38" click="doSave();" enabled="{enableSave}">
		<mx:icon>@Embed(source='../../../assets/file.png')</mx:icon>
	</mx:Button>
	<mx:Label x="171" y="46" text="Save" width="38" textAlign="center"/>
	<mx:Button x="217" y="10" width="38" height="38">
		<mx:icon>@Embed(source='../../../assets/get.png')</mx:icon>
	</mx:Button>
	<mx:Label x="217" y="46" text="Get" width="38" textAlign="center"/>
	<mx:Button x="263" y="10" width="38" height="38">
		<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
	</mx:Button>
	<mx:Button x="370" y="10" width="38" height="38">
		<mx:icon>@Embed(source='../../../assets/new.png')</mx:icon>
	</mx:Button>
	<mx:Label x="360" y="46" text="Delete" width="58" textAlign="center"/>
	<mx:Button x="493" y="10" width="38" height="38">
		<mx:icon>@Embed(source='../../../assets/cancel.png')</mx:icon>
	</mx:Button>
	<mx:Label x="483" y="46" text="Revert" width="58" textAlign="center"/>
	<mx:Label x="263" y="46" text="New" width="38" textAlign="center"/>
</mx:Panel>
