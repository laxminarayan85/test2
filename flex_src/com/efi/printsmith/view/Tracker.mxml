<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="100%" height="100%" 
	title="Tracker Console" 
	xmlns:view="com.efi.printsmith.view.*" xmlns:vo="com.efi.printsmith.vo.*" xmlns:ns1="com.hillelcoren.components.*"
	creationComplete="init()" 
	label="Tracker Console" 
	name="Tracker Console">
	<mx:RemoteObject id="dataService" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadResult(event)"/>
	<!--<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveResult(event)"/>
	<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteResult(event)"/>
--></mx:RemoteObject>
<mx:RemoteObject id="dataServiceProductionLocation" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadProductionLocationResult(event)"/>
</mx:RemoteObject>
<mx:RemoteObject id="dataServiceFacilty" destination="dataService">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadFaciltyResult(event)"/>
</mx:RemoteObject>
<mx:RemoteObject id="dataServicePending" destination="dataService">
	<mx:method name="getTracker" fault="handleFault(event)" result="handleLoadPendingResult(event)"/>
</mx:RemoteObject>
<mx:Script> 
                                  
<![CDATA[
	import mx.controls.dataGridClasses.DataGridColumn;
	import com.efi.printsmith.data.Job;
	import com.efi.printsmith.data.Invoice;
	import com.efi.printsmith.data.Employee;  
	import com.efi.printsmith.data.InvoiceBase;                        
	import mx.controls.Alert;                                         
	import mx.managers.PopUpManager;                                         
	import mx.containers.TitleWindow;                                         
	import mx.collections.ArrayCollection;                                         
	import mx.rpc.events.ResultEvent;                                         
	import mx.rpc.events.FaultEvent;             
	
	[Bindable]                                         
	private var employee:Employee;
	
	[Bindable] 
	private var employeesArray:ArrayCollection = new ArrayCollection();
	[Bindable] 
	private var trackerList:ArrayCollection = new ArrayCollection();
	[Bindable] 
	private var productionLocationArray:ArrayCollection = new ArrayCollection();
	 
	[Bindable] 
	private var faciltyArray:ArrayCollection = new ArrayCollection();
	 
	 
	public function init():void {
	dataService.getAll("Employee");	
	dataServiceProductionLocation.getAll("ProductionLocations");
	dataServiceFacilty.getAll("ProductionFacilities");	
	dataServicePending.getTracker("InvoiceBase"); 
	}    
	 
	private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error", 0, null, null, null, 4);                                 
	}


// Data Load Handlers
	private function handleLoadResult(ev:ResultEvent):void {
		employeesArray = ev.result as ArrayCollection;
	}
	private function handleLoadProductionLocationResult(ev:ResultEvent):void {
	     productionLocationArray = ev.result as ArrayCollection;
	}
	private function handleLoadPendingResult(ev:ResultEvent):void{
		trackerList = ev.result as ArrayCollection;
	}
	private function handleLoadFaciltyResult(ev:ResultEvent):void {
	     faciltyArray = ev.result as ArrayCollection;
	}
	private function doName(item:Object):String{
		var temp:Employee =  item as Employee;
		var tempString:String;
		 tempString = temp.firstName as String;
		 tempString += " ";
		 tempString += temp.lastName as String;
		return tempString;
	}
	private function doAccount(item:Object,column:DataGridColumn):String{
		var temp:Invoice = item as Invoice;
		return temp.account.accountId;
	}
	/* private function doMachine(item:Object):String{
		
		
	} */
	private function getEmployee():void {
		employee = employee_edit.selectedItem as Employee;
		
	}
	
]]>
                        
</mx:Script>	
	<mx:TabNavigator width="100%" height="100%">
		<mx:VBox label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.ActiveItems')}" 
			paddingLeft="20" paddingTop="20" width="100%" height="100%">
			
			<mx:HBox width="100%">
				<mx:Label text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Employee')}"/>
				<mx:ComboBox id="employee_edit" dataProvider="{employeesArray}" labelFunction="doName" change="getEmployee"/>		
			</mx:HBox>
			
			<mx:DataGrid width="90%" height="30%" id="invoiceGrid" dataProvider="{trackerList}">
				<mx:columns>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Item')}" dataField="invoiceNumber"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Description')}" dataField="name"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.DeliveryDate')}" dataField="wantedDate"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.ProductionLocation')}" dataField="col4"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.RunDate')}" dataField="col2"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.ActiveLocation')}" dataField="col3"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Estimated')}" dataField="col1"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Priority')}" dataField="col2"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Machine')}" dataField="col2"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Account')}" labelFunction="doAccount"/>
				</mx:columns>
			</mx:DataGrid>
			
			<mx:HBox width="100%" height="60%">
				<mx:VBox width="50%" height="100%">
					<mx:Panel width="100%" height="50%" paddingTop="10" paddingLeft="5" 
						layout="vertical" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.CurrentStation')}">
					
						<mx:HBox width="100%">
							<mx:Label width="15%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Facility')}" textAlign="right"/>
							<mx:ComboBox width="40%" id="facility_edit" dataProvider="{faciltyArray}" labelField="name"/>	
						</mx:HBox>
						
						<mx:HBox width="100%">
							<mx:Label width="15%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.StationName')}" textAlign="right"/>
							<mx:ComboBox width="40%" id="station_edit"/>
						</mx:HBox>
						
						<mx:HBox width="100%">
							<mx:Label width="15%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Location')}" textAlign="right"/>
							<mx:ComboBox id="location_edit" width="40%" dataProvider="{productionLocationArray}" labelField="name"/>
						</mx:HBox>	
						
					</mx:Panel>
					<mx:Panel width="100%" height="50%" paddingTop="10" paddingLeft="5" 
						layout="vertical" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.BarcodeInput')}">
						<mx:HBox width="100%" height="100%">
							<mx:VBox width="40%" height="100%">
								<mx:HBox width="100%">
									<mx:Label width="40%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Doc')}" 
										textAlign="right"/>
									<mx:TextInput width="40%" id="doc_edit"/>	
								</mx:HBox>
								<mx:HBox width="100%">
									<mx:Label width="40%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Job')}"
										textAlign="right"/>
									<mx:TextInput width="40%" id="job_edit"/>
								</mx:HBox>
								<mx:HBox width="100%">
									<mx:Label width="40%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Charge')}"
										textAlign="right"/>
									<mx:TextInput width="40%" id="charge_edit"/>
								</mx:HBox>
							</mx:VBox>
							<mx:VBox width="60%" height="100%">
								<mx:HBox width="100%">
									<mx:Label width="35%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Facility')}"
										textAlign="right"/>
									<mx:TextInput width="55%" id="barcode_facility_edit"/>
								</mx:HBox>
								<mx:HBox width="100%">
									<mx:Label width="35%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Location')}"
										textAlign="right"/>
									<mx:TextInput width="55%" id="barcode_location_edit"/>
								</mx:HBox>
								<mx:HBox width="100%">
									<mx:Label width="35%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Employee')}"
										textAlign="right"/>
									<mx:TextInput width="55%" id="barcode_employee_edit"/>
								</mx:HBox>
							</mx:VBox>
						</mx:HBox>
					</mx:Panel>	
				</mx:VBox>
				<mx:VBox width="40%" height="100%" verticalAlign="middle">
					<mx:HBox width="100%">
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Start')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingStart.png')</mx:icon>
						</mx:Button>
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Setup')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingSetupDone.png')</mx:icon>
						</mx:Button>
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Washup')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingWashupStart.png')</mx:icon>
						</mx:Button>
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Stop')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingStop.png')</mx:icon>
						</mx:Button> 
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Cancel')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingCancel.png')</mx:icon>
						</mx:Button>
					</mx:HBox>
					<mx:HBox width="100%">
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Pause')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingPause.png')</mx:icon>
						</mx:Button>
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Continue')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingContinue.png')</mx:icon>
						</mx:Button>
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Open')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingInvOpen.png')</mx:icon>
						</mx:Button>
						
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.JobTicket')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingTickets.png')</mx:icon>
						</mx:Button>
						<mx:Button label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Layout')}" 
							labelPlacement="bottom" width="20%">
							<mx:icon>@Embed(source='../../../../assets/TrackingCutouts.png')</mx:icon>
						</mx:Button>
					</mx:HBox>
				</mx:VBox>
			</mx:HBox>
			
			
			
			
			<mx:DataGrid width="90%" height="30%" id="employee_jobs_grid">
				<mx:columns>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Item')}" dataField="col1"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Description')}" dataField="col2"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.TimeQty')}" dataField="col3"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Duration')}" dataField="col1"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Who')}" dataField="col2"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Facility')}" dataField="col3"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Station')}" dataField="col1"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Location')}" dataField="col2"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Machine')}" dataField="col3"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'deliveryTicketMgrCmd.Account')}" dataField="col1"/>
				</mx:columns>
			</mx:DataGrid>
			
			<mx:ProgressBar width="90%"/>
			
		</mx:VBox>
		
		<mx:VBox label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Preference')}"
			paddingLeft="20" paddingTop="20" width="100%" height="100%">
			<mx:HBox width="60%" height="60%">
				<mx:VBox width="50%" height="100%">
						<mx:Panel width="100%" height="50%" layout="vertical" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Startnewitemshere')}"
							paddingLeft="20" paddingTop="20">
							<mx:HBox width="100%">
								<mx:Label width="40%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Facility')}"
									textAlign="right"/>
								<mx:TextInput width="55%" id="preference_facility"/>
							</mx:HBox>
							<mx:HBox width="100%">
								<mx:Label width="40%" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.StationName')}"
									textAlign="right"/>
								<mx:TextInput width="55%" id="preference_stationname"/>
							</mx:HBox>
						</mx:Panel>
						<mx:Panel width="100%" height="50%" layout="vertical" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.ShowThesePendingItem')}"
							paddingLeft="20" paddingTop="20">
							<mx:CheckBox label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.HideItemsNotReleased')}"/>
							<mx:CheckBox label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.OnlyShowEmployeesPro')}"/>
						</mx:Panel>
					
				</mx:VBox>
				<mx:VBox width="50%" height="100%">
					<mx:Panel width="100%" height="100%" layout="vertical" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Showtheseactiveitems')}"
						paddingLeft="20" paddingTop="20">
						<mx:CheckBox label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Selectedemployeeonly')}"/>
						<mx:CheckBox label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.ShowAllFacilities')}"/>
						<mx:CheckBox label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.ShowAllStations')}"/>
						<mx:Label text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowDetailsCmd.Station')}"/>
						<mx:List width="90%" id="stations" dataProvider="{stations}"/>
					</mx:Panel>
				</mx:VBox>
				
				
				
			</mx:HBox>
		</mx:VBox>
		<mx:VBox label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.CompletedItems')}"
			paddingLeft="20" paddingTop="20" width="100%" height="85%">
			<mx:DataGrid width="90%" height="100%" id="completed_grid">
				<mx:columns>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.DateCompleted')}" dataField="col1"/>
					<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowStopCmd.Item')}" dataField="col2"/>
				</mx:columns>
			</mx:DataGrid>
		</mx:VBox>
	</mx:TabNavigator>
	
</mx:Panel>
