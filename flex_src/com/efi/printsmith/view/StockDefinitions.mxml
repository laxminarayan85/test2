<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" 
	layout="absolute" width="100%" height="818" creationComplete="init()" 
	xmlns:fc="http://www.adobe.com/2006/fc" xmlns:vo="com.efi.printsmith.data.*" 
	title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.StockDefinitions')}" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.StockDefinitions')}" name="Stock Definition">
	<mx:states>
		<mx:State name="Envelope">
			<mx:RemoveChild target="{MinCutCharge}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{CutsPer100}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{NormalRunSize}"/>
			<mx:RemoveChild target="{label10}"/>
		</mx:State>
		<mx:State name="RollStock">
			<mx:SetProperty target="{label1}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollWeight')}"/>
			<mx:SetProperty target="{label2}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollsOrder')}"/>
			<mx:SetProperty target="{label3}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollWidth')}"/>
			<mx:RemoveChild target="{label4}"/>
			<mx:RemoveChild target="{textinput1}"/>
			<mx:SetProperty target="{label1}" name="x" value="233"/>
			<mx:SetProperty target="{label1}" name="y" value="118"/>
			<mx:SetProperty target="{label7}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrderweight')}"/>
			<mx:RemoveChild target="{MinCutCharge}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{CutsPer100}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{NormalRunSize}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:SetProperty target="{BlankSheetqty1}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice1}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty2}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice2}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty3}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice3}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty4}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice4}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty5}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice5}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice6}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty6}" name="enabled" value="false"/>
			<mx:SetProperty target="{defaultBWCopier}" name="enabled" value="false"/>
			<mx:SetProperty target="{DefaultBW}" name="enabled" value="false"/>
			<mx:SetProperty target="{DefaultColor}" name="enabled" value="false"/>
			<mx:SetProperty target="{defaultColorCopier}" name="enabled" value="false"/>
			<mx:SetProperty target="{defaultLargeCopier}" name="enabled" value="false"/>
			<mx:SetProperty target="{DefaultLargeFormat}" name="enabled" value="false"/>
			<mx:SetProperty target="{chkAutocalcblankstock}" name="enabled" value="false"/>
			<mx:RemoveChild target="{mWeight}"/>
			<mx:SetProperty target="{rollweight}" name="y" value="114"/>
		</mx:State>
		<mx:State name="SheetStock">
			<mx:SetProperty target="{mWeight}" name="enabled" value="false"/>
			<mx:SetProperty target="{textinput1}" name="enabled" value="false"/>
			<mx:SetProperty target="{pcwRecycled}" name="x" value="64"/>
			<mx:SetProperty target="{pcwRecycled}" name="y" value="47"/>
			<mx:RemoveChild target="{rollweight}"/>
		</mx:State>
		<mx:State name="RigidSubstrate">
			<mx:RemoveChild target="{Basicsize}"/>
			<mx:RemoveChild target="{label5}"/>
			<mx:RemoveChild target="{label1}"/>
			<mx:RemoveChild target="{mWeight}"/>
			<mx:RemoveChild target="{textinput1}"/>
			<mx:RemoveChild target="{label4}"/>
			<mx:RemoveChild target="{sheetsPerCarton}"/>
			<mx:RemoveChild target="{label2}"/>
			<mx:SetProperty target="{label7}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrderarea')}"/>
		</mx:State>
		<mx:State name="LargeFormat">
			<mx:SetProperty target="{label3}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollWidth')}"/>
			<mx:RemoveChild target="{label2}"/>
			<mx:RemoveChild target="{sheetsPerCarton}"/>
			<mx:RemoveChild target="{mWeight}"/>
			<mx:RemoveChild target="{label1}"/>
			<mx:RemoveChild target="{label4}"/>
			<mx:RemoveChild target="{textinput1}"/>
			<mx:RemoveChild target="{Basicsize}"/>
			<mx:RemoveChild target="{label5}"/>
			<mx:RemoveChild target="{stkType}"/>
			<mx:RemoveChild target="{label6}"/>
			<mx:SetProperty target="{label7}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrderlength')}"/>
			<mx:RemoveChild target="{MinCutCharge}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{CutsPer100}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{NormalRunSize}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:SetProperty target="{BlankSheetqty1}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice1}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty2}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice2}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty3}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice3}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty4}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice4}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty5}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice5}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice6}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty6}" name="enabled" value="false"/>
			<mx:SetProperty target="{chkAutocalcblankstock}" name="enabled" value="false"/>
			<mx:SetProperty target="{cboDefaultPress}" name="enabled" value="false"/>
			<mx:SetProperty target="{button1}" name="enabled" value="false"/>
		</mx:State>
	</mx:states>
	<mx:RemoteObject id="dataService" destination="dataService">
		<mx:method name="getAllNameIDOnly" fault="handleFault(event)" result="handleLoadResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveResult(event)"/>
		<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteResult(event)"/>
		<mx:method name="getById" fault="handleFault(event)" result="handleGetResult(event)"/>
	</mx:RemoteObject>

	<!--<mx:RemoteObject id="stockChangesDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockChangesResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockChangesResult(event)"/>
	</mx:RemoteObject>
	-->
	<mx:RemoteObject id="pressDefinitionDataService" destination="dataService">
		<mx:method name="getAllNameIDOnly" fault="handleFault(event)" result="handleLoadPressDefinition(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="copierDefinitionDataService" destination="dataService">
		<mx:method name="getAllNameIDOnly" fault="handleFault(event)" result="handleLoadCopierDefinition(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockGroupDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockGroup(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockGroupResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockClassDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockClass(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockClassResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="vendorDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadVendor(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveVendorResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockGradeDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockGrade(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockGradeResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockColorDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockColor(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockColorResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockTypeDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockType(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockTypeResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockGenericColorDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockGenericColor(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockGenericColorResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockFinishDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockFinish(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockFinishResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dimensionDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadDimensionResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dataServiceSystemPreferences" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSystemPreferencesResult(event)"/>
	</mx:RemoteObject>

	<mx:StringValidator id="stockDefinitionNameValidator" source="{stockName}" property="text" minLength="2" required="true"/>

	<mx:Producer id="producer" destination="stockdefinitions"/>
	<mx:Consumer id="consumer" destination="stockdefinitions" message="messageHandler(event.message)"/>
	<mx:Consumer id="notification_consumer" destination="notifications" message="messageHandler(event.message)"/>
<mx:Script>                                   
<![CDATA[
	import com.efi.printsmith.events.commandEvents.StockDefinitions.DeleteStockDefinitionEvent;
	import com.efi.printsmith.data.PressDefinition;
	import com.efi.printsmith.data.StockDefinition;
	import com.efi.printsmith.data.CopierDefinition;
	import com.efi.printsmith.data.StockChanges;
	import com.efi.printsmith.data.Account;
	import com.efi.printsmith.data.PreferencesSystem;

	import com.efi.printsmith.data.StockGroup;
	import com.efi.printsmith.data.StockGrade;
	import com.efi.printsmith.data.StockColors;
	import com.efi.printsmith.data.StockType;
	import com.efi.printsmith.data.GenericColors;
	import com.efi.printsmith.data.StockClass;
	import com.efi.printsmith.data.StockFinish;
	import com.efi.printsmith.data.StockForest;
	import com.efi.printsmith.data.Vendor;
		
	import com.efi.printsmith.data.PriceList;
	import com.efi.printsmith.data.PaperPrice;
	import com.efi.printsmith.data.PriceListBase;

	import com.efi.printsmith.events.StockPickerSelectEvent;
	import com.efi.printsmith.events.AccountPickerSelectEvent;
	import com.efi.printsmith.events.PriceListPickerSelectEvent;
	import com.efi.printsmith.events.ChargeDefinitionSelectEvent;
	
	import mx.controls.Alert;                                         
	import mx.managers.PopUpManager;                                         
	import mx.containers.TitleWindow;                                         
	import mx.collections.ArrayCollection;                                         
	import mx.rpc.events.ResultEvent;                                         
	import mx.rpc.events.FaultEvent;
	import mx.rpc.*;                                         
	import mx.messaging.messages.AsyncMessage;
	import mx.messaging.messages.IMessage;
    import mx.printing.FlexPrintJob;
    import mx.printing.PrintAdvancedDataGrid;
    import mx.printing.PrintDataGrid;
    import mx.core.Application;
    import mx.validators.Validator;
    import mx.events.ValidationResultEvent;
                   
	[Bindable]                                         
    private var enableSave:Boolean = true;

	[Bindable]                                         
    private var priceList:PaperPrice;  
	[Bindable]                                         
    private var systemPreferences:PreferencesSystem;

	[Bindable]                                         
	private var StockDefinitionArray:ArrayCollection = new ArrayCollection();
	[Bindable]                                
	private var systemPreferencesArray:ArrayCollection = new ArrayCollection();
                         
	[Bindable]                                         
	private var stockDefinitions:StockDefinition;
	
	/* [Bindable]                                         
	private var stockChange:StockChanges; */
	[Bindable]                                         
	private var account:Account;
	[Bindable]
		private var charges:ArrayCollection=new ArrayCollection();

	[Bindable]
	private var dimensions:ArrayCollection=new ArrayCollection();

	[Bindable]                                
    private var stockChanges:ArrayCollection = new ArrayCollection();   

	[Bindable]
    private var stockColor:ArrayCollection = new ArrayCollection(); 
    [Bindable]
    private var stockType:ArrayCollection = new ArrayCollection();     
    [Bindable]
    private var stockClass:ArrayCollection = new ArrayCollection();   
	[Bindable]      
    private var stockGroup:ArrayCollection = new ArrayCollection();   
	[Bindable]      
    private var stockGrade:ArrayCollection = new ArrayCollection();   
	[Bindable]                                
    private var stockFinish:ArrayCollection = new ArrayCollection();   
	[Bindable] 
    private var stockForest:ArrayCollection = new ArrayCollection();   
	[Bindable]                                
    private var stockVendor:ArrayCollection = new ArrayCollection();   
	[Bindable]                                
	private var stockGenericColor:ArrayCollection = new ArrayCollection();   

	[Bindable]                                
	private var stockUom:ArrayCollection = new ArrayCollection();   
	
	[Bindable]                                
	private var stockUnits:ArrayCollection = new ArrayCollection();   
	
	[Bindable]
	private var pressDefinitions:ArrayCollection = new ArrayCollection();   
	
	[Bindable]
	private var copierDefinitions:ArrayCollection = new ArrayCollection();   
	private var first:Boolean
    private var formIsValid:Boolean = false;
    
    private var focussedFormControl:DisplayObject;
                                                                         
	public function init():void {
		first = true;
		consumer.subscribe();
		notification_consumer.subscribe();
		stockDefinitions = new StockDefinition;
	    loadUomArray();
	    loadUnitsArray();
	    
		loadStockDefinitions();
	/* 	loadStockChanges(); */
	    loadStockGroup();
	    loadStockClass();
	    loadStockVendor();
	    loadStockGrade();
	    loadStockColor();
	    loadStockType();
	    
	    loadStockGenericColor();
	    loadStockFinish();
	    loadPressDefinition();
	    loadCopierDefinition();
		loadDimensions();
		
		dataServiceSystemPreferences.getAll("PreferencesSystem");

		var event:DeleteStockDefinitionEvent = new DeleteStockDefinitionEvent(button_delete, new mx.rpc.Responder(handleUIButtonEvent, handleUIButtonFault));
		event.dispatch();
		
	}      

	public function handleUIButtonEvent(evt:ResultEvent):void {
		evt.result.button.enabled = evt.result.enabled;
	}		
	private function handleUIButtonFault(ev:FaultEvent):void {  
	}

	private function loadUnitsArray():void {
		
		var Envelope:Object = new Object;
		Envelope.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Envelope');
		stockUnits.addItem(Envelope);

		var Sheet:Object = new Object;
		Sheet.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetStock');
		stockUnits.addItem(Sheet);

		var Roll:Object = new Object;
		Roll.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollStock');
		stockUnits.addItem(Roll);

		var Large:Object = new Object;
		Large.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.LargeFormat');
		stockUnits.addItem(Large);

		var Rigid:Object = new Object;
		Rigid.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RigidSubstrate');
		stockUnits.addItem(Rigid);
	}

	public function setPriceList(price:PriceListBase): void {
	 	this.priceList = price as PaperPrice;
	 	stockDefinitions.defaultPriceList = price as PaperPrice;
	}
	
	private function doPriceList():void {
	    var priceListPickerWindow:PriceListPicker = PriceListPicker(PopUpManager.createPopUp(this, PriceListPicker, true));
	    priceListPickerWindow.setStyle("borderAlpha", 0.9);
	    priceListPickerWindow.itemType = "PaperPrice";
	    priceListPickerWindow.addEventListener(PriceListPickerSelectEvent.CANCELSELECTPRICELIST, handlePriceListPickerCancel);
	    priceListPickerWindow.addEventListener(PriceListPickerSelectEvent.SELECTPRICELIST, handleSelectPriceList);
	}
	
    private function handleSelectPriceList(evt:PriceListPickerSelectEvent):void {
 		if (evt.priceList != null) {
			stockDefinitions.defaultPriceList = evt.priceList as PaperPrice;
		} else {
			stockDefinitions.defaultPriceList = null;
			Alert.show("Price List Picker returned a null price list", "Error");
		}     	
    }
    private function handlePriceListPickerCancel(evt:PriceListPickerSelectEvent):void {
    	
    }

	private function loadUomArray():void {
		
		var Caliper:Object = new Object;
		Caliper.name = "Caliper"
		stockUom.addItem(Caliper);

		var Microns:Object = new Object;
		Microns.name = "Microns"
		stockUom.addItem(Microns);

		var Points:Object = new Object;
		Points.name = "Points"
		stockUom.addItem(Points);

		var Mils:Object = new Object;
		Mils.name = "Mils"
		stockUom.addItem(Mils);

		var Thous:Object = new Object;
		Thous.name = "Thous"
		stockUom.addItem(Thous);

		var Plies:Object = new Object;
		Plies.name = "Plies"
		stockUom.addItem(Plies);

		var Millimeters:Object = new Object;
		Millimeters.name = "Millimeters"
		stockUom.addItem(Millimeters);
		
	}
	
	public function setStockDefinition(stockDefinition:StockDefinition):void
	{
		if (stockDefinition != null)
		{
			stockDefinitions = stockDefinition;
			mapFromStockDefinitionData();
		} else {
	    	stockDefinitions = new StockDefinition();
	    	mapFromStockDefinitionData();
		}
		
	   stockChanges = new ArrayCollection(); 
	    
	    stockChanges = stockDefinitions.stockChanges;
	  /*  loadStockGroup();
	    loadStockVendor();
	    loadStockGrade();
	    loadStockColor();
	    loadStockGenericColor();
	    loadStockFinish();
	    loadPressDefinition(); */
	    
		standardItemCheckEvent();
	}			
	                                                   	
	public function loadStockDefinitions():void {  //cej 
		dataService.getAllNameIDOnly("StockDefinition");
	}
	
/* 	public function loadStockChanges():void {
		stockChangesDataService.getAll("StockChanges");
	} */
	public function loadStockType():void {
		stockTypeDataService.getAll("StockType");
	}
	
	public function loadDimensions():void {
		dimensionDataService.getAll("Dimension");
	}
	
	public function loadPressDefinition():void {   
	    pressDefinitionDataService.getAllNameIDOnly("PressDefinition");
	}
	public function loadCopierDefinition():void {   
	    copierDefinitionDataService.getAllNameIDOnly("CopierDefinition");
	}
	public function loadStockGrade():void {   
	    stockGradeDataService.getAll("StockGrade");
	}

	public function loadStockGroup():void {   
	    stockGroupDataService.getAll("StockGroup");
	}
	public function loadStockClass():void {   
	    stockClassDataService.getAll("StockClass");
	}

	public function loadStockColor():void {   
	    stockColorDataService.getAll("StockColors");
	}

	public function loadStockGenericColor():void {   
	    stockGenericColorDataService.getAll("GenericColors");
	}

	public function loadStockVendor():void {   
	    vendorDataService.getAll("Vendor");
	}

	public function loadStockFinish():void {   
	    stockFinishDataService.getAll("StockFinish");
	}
					
	private function messageHandler(message:IMessage):void
	{
	}

	private function findItem(name:String, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (name == element.name) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}
	private function findItemID(id:int, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (id == element.id) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}

	private function findItemById(name:int, array:ArrayCollection):String {
		var retVal:String;
		retVal = "";
		if (name > -1) {
			retVal = array.getItemAt(name,0).name;
		}
		return retVal;
	}

	private function doGet():void {
		var stockPickerWindow:StockPicker = StockPicker(PopUpManager.createPopUp(this, StockPicker, true));
		stockPickerWindow.setStyle("borderAlpha", 0.9);
	    stockPickerWindow.formIsEmpty = true;
	   	stockPickerWindow.setStockArray(StockDefinitionArray);
	    stockPickerWindow.addEventListener(StockPickerSelectEvent.CANCELSELECTSTOCK, handleStockPickerCancel);
	    stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTSTOCK, handleStockPickerSelect);
	    stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTNEWSTOCK, handleStockPickerNew);		
	}
	
	private function handleStockPickerCancel(evt:StockPickerSelectEvent):void {
		if (this.stockDefinitions == null) {
			this.stockDefinitions = new StockDefinition;
		}
	}
	
	private function handleStockPickerSelect(evt:StockPickerSelectEvent):void {
		if (evt.stockDefinition != null) {
			this.stockDefinitions = evt.stockDefinition ;
			this.mapFromStockDefinitionData();
	     
		} else {
			this.stockDefinitions = new StockDefinition();
			Alert.show("Stock Picker returned a null stock", "Error");
		}
	}
	
	private function handleStockPickerNew(evt:StockPickerSelectEvent):void {
		this.stockDefinitions = new StockDefinition();
	}
	
	private function doNext():void {  
		var itemp:int;
		  var tempStock:StockDefinition;
		itemp =	findItemID(stockDefinitions.id, StockDefinitionArray);
		//itemp = StockDefinitionArray.getItemAt(stockDefinitions); 
		itemp++;
		if (itemp == StockDefinitionArray.length){
			itemp = StockDefinitionArray.length - 1;
		}
		tempStock = StockDefinitionArray.getItemAt(itemp) as StockDefinition;
		dataService.getById("StockDefinition", tempStock.id );               
	}
	
	private function doPrev():void {              
	    var itemp:int;
	    var tempStock:StockDefinition;
	           
	   	itemp =	findItemID(stockDefinitions.id, StockDefinitionArray);
		//itemp = StockDefinitionArray.getItemIndex(stockDefinitions); 
		itemp--;
		if (itemp < 0){
			itemp = 0; 
		}
		tempStock = StockDefinitionArray.getItemAt(itemp) as StockDefinition;
		dataService.getById("StockDefinition", tempStock.id );
		                                       
	}                                           

	private function doSave():void {
		var name:String;
		name = stockName.text; 
		stockDefinitionNameValidator.validate(stockName,false)
		
		if (validate(stockDefinitionNameValidator) == true)
		{
			mapStockDefinitionData();
			dataService.addUpdate(stockDefinitions);
		//	stockChangesDataService.addUpdate(stockChange);
			standardItemCheckEvent();
		}else {
			showMessage("Cannot save Stock Definition with an empty name.","Cannot Save");
		}
	}

	private function doNew():void {
		doSave();
  	    stockDefinitions = new StockDefinition();
  	    setStockDefinition(stockDefinitions);
  	    standardItemCheckEvent();
	}       

	private function doDelete():void {
		dataService.deleteItem("StockDefinition", stockDefinitions.id);
		doPrev();
	}

	private function doRevert():void {
	    stockDefinitions = new StockDefinition();
	    setStockDefinition(stockDefinitions);                                           
	}


	private function doStockGroup() : void {
		var group:StockGroup;
		var result:Boolean;
		
		if (cboStockGroup.text != null && cboStockGroup.text != "" && cboStockGroup.selectedIndex == -1) {
			var item:int = findItem(cboStockGroup.text, stockGroup);
			if (item == -1) {
				group = new StockGroup();
				group.name = cboStockGroup.text;
				stockGroupDataService.addUpdate(group);
				stockDefinitions.stkgroup = group;
			}
			else {
				cboStockGroup.selectedItem = item;
			}
		}
	}
	private function doStockType() : void {
		var type:StockType;
		var result:Boolean;
		
		if (stkType.text != null && stkType.text != "" && stkType.selectedIndex == -1) {
			var item:int = findItem(stkType.text, stockGroup);
			if (item == -1) {
				type = new StockType();
				type.name = stkType.text;
				stockTypeDataService.addUpdate(type);
				stockDefinitions.stktype = type;
			}
			else {
				stkType.selectedItem = item;
			}
		}
	}
	private function doStockClass() : void {
		var stockclass:StockClass;
		var result:Boolean;
		
		if (cbostockClass.text != null && cbostockClass.text != "" && cbostockClass.selectedIndex == -1) {
			var item:int = findItem(cbostockClass.text, stockClass);
			if (item == -1) {
				stockclass = new StockClass();
				stockclass.name = cbostockClass.text;
				stockClassDataService.addUpdate(stockclass);
				stockDefinitions.stkclass = stockclass;
			}
			else {
				cbostockClass.selectedItem = item;
			}
		}
	}


	private function doStockGenericColor() : void {
		var colors:GenericColors;
		var result:Boolean;
		
		if (cboGenericColor.typedText != null && cboGenericColor.typedText != "" && cboGenericColor.selectedIndex == -1) {
			var item:int = findItem(cboGenericColor.typedText, stockGenericColor);
			if (item == -1) {
				colors = new GenericColors();
				colors.name = cboGenericColor.text;
				stockGenericColorDataService.addUpdate(colors);
				stockDefinitions.genericColor = colors;
			}
			else {
				cboGenericColor.selectedItem = item;
				
			}
		}
	}

	private function doStockColor() : void {
		var colors:StockColors;
		var result:Boolean;
		
		if (cbostkcolor.typedText != null && cbostkcolor.typedText != "" && cbostkcolor.selectedIndex == -1) {
			var item:int = findItem(cbostkcolor.typedText, stockColor);
			if (item == -1) {
				colors = new StockColors();
				colors.name = cbostkcolor.text;
				stockColorDataService.addUpdate(colors);
				stockDefinitions.color = colors;
			}
			else {
				cbostkcolor.selectedItem = item;
			}
		}
	}

	private function doStockGrade() : void {
		var grades:StockGrade;
		var result:Boolean;
		
		if (cboStockGrade.typedText != null && cboStockGrade.typedText != "" && cboStockGrade.selectedIndex == -1) {
			var item:int = findItem(cboStockGrade.typedText, stockGrade);
			if (item == -1) {
				grades = new StockGrade();
				grades.name = cboStockGrade.text;
				stockGradeDataService.addUpdate(grades);
				stockDefinitions.grade = grades;
			}
			else {
				cboStockGrade.selectedItem = item;
			}
		}
	}


	private function doStockFinish() : void {
		var finishing:StockFinish;
		var result:Boolean;
		
		if (cboFinish.typedText != null && cboFinish.typedText != "" && cboFinish.selectedIndex == -1) {
			var item:int = findItem(cboFinish.typedText, stockFinish);
			if (item == -1) {
				finishing = new StockFinish();
				finishing.name = this.cboFinish.text;
				
				stockFinishDataService.addUpdate(finishing);
				stockDefinitions.finish = finishing;
			}
			else {
				cboFinish.selectedItem = item;
			}
		}
	}

	private function doStockVendor() : void {
		var stockvendor:Vendor;
		var result:Boolean;
		
		if (cboVendor.typedText != null && cboVendor.typedText != "" && cboVendor.selectedIndex == -1) {
			var item:int = findItem(cboVendor.typedText, stockFinish);
			if (item == -1) {
				stockvendor = new Vendor();
				stockvendor.name = this.cboVendor.text;
				
				vendorDataService.addUpdate(stockvendor);
				stockDefinitions.vendor = stockvendor;
			}
			else {
				cboVendor.selectedItem = item;
			}
		}
	}


	private function doPressDefinition() : void {
		var pressdef:PressDefinition;
		var result:Boolean;
		
		if (cboDefaultPress.typedText != null && cboDefaultPress.typedText != "" && cboDefaultPress.selectedIndex == -1) {
			var item:int = findItem(cboDefaultPress.typedText, pressDefinitions);
			if (item == -1) {
				cboDefaultPress.selectedItem = null;
			}
			else {
				cboDefaultPress.selectedItem = item;
			}
		}
	}
	private function doCopierDefinitionBW() : void {
		var copydef:CopierDefinition;
		var result:Boolean;
		
		if (defaultBWCopier.text != null && defaultBWCopier.text != "" && defaultBWCopier.selectedIndex == -1) {
			var item:int = findItem(defaultBWCopier.text, copierDefinitions);
			if (item == -1) {
				defaultBWCopier.selectedItem = null;
			}
			else {
				defaultBWCopier.selectedItem = item;
			}
		}
	}	
	private function doCopierDefinitionColor() : void {
		var copydef:CopierDefinition;
		var result:Boolean;
		
		if (defaultColorCopier.text != null && defaultColorCopier.text != "" && defaultColorCopier.selectedIndex == -1) {
			var item:int = findItem(defaultColorCopier.text, copierDefinitions);
			if (item == -1) {
				defaultColorCopier.selectedItem = null;
			}
			else {
				defaultColorCopier.selectedItem = item;
			}
		}
	}
	private function doCopierDefinitionLarge() : void {
		var copydef:CopierDefinition;
		var result:Boolean;
		
		if (defaultLargeCopier.text != null && defaultLargeCopier.text != "" && defaultLargeCopier.selectedIndex == -1) {
			var item:int = findItem(defaultLargeCopier.text, copierDefinitions);
			if (item == -1) {
				defaultLargeCopier.selectedItem = null;
			}
			else {
				defaultLargeCopier.selectedItem = item;
			}
		}
	}	
	private function doAddCharges():void {
		
		var chargePicker:ChargeDefinitionPicker=ChargeDefinitionPicker(PopUpManager.createPopUp(this, ChargeDefinitionPicker, true));
		chargePicker.charges = this.charges;
		chargePicker.setStyle("borderAlpha", 0.9);
		chargePicker.addEventListener(ChargeDefinitionSelectEvent.CHARGEDEFINITIONCOMPLETE, handleChargeDefinitionComplete);
		chargePicker.addEventListener(ChargeDefinitionSelectEvent.CHARGEDEFINITIONCANCEL, handleChargeDefinitionCancel);

	}
	private function handleChargeDefinitionComplete(evt:ChargeDefinitionSelectEvent):void
	{
		this.stockDefinitions.charges=evt.chargeArray;
	}
	private function handleChargeDefinitionCancel(evt:ChargeDefinitionSelectEvent):void
	{
		
	}

	private function doShowHistory():void {
		
	}

	private function handleSaveResult(ev:ResultEvent):void {
    	loadStockDefinitions();
	}
	
	/* private function handleSaveStockChangesResult(ev:ResultEvent):void {
    	loadStockChanges();
	} */
	
	private function handleSaveStockGradeResult(ev:ResultEvent):void {
    	loadStockGrade();
	}
	private function handleSaveStockTypeResult(ev:ResultEvent):void {
    	loadStockType();
	}
	private function handleSaveStockGroupResult(ev:ResultEvent):void {
    	loadStockGroup();
	}
	private function handleSaveStockClassResult(ev:ResultEvent):void {
    	loadStockClass();
	}
	private function handleSaveStockColorResult(ev:ResultEvent):void {
    	loadStockColor();
	}
	private function handleSaveStockGenericColorResult(ev:ResultEvent):void {
    	loadStockGenericColor();
	}

	private function handleSaveVendorResult(ev:ResultEvent):void {
    	loadStockVendor();
	}
	private function handleSaveStockFinishResult(ev:ResultEvent):void {
    	loadStockFinish();
	}

	private function handleLoadResult(ev:ResultEvent):void {
	     StockDefinitionArray = ev.result as ArrayCollection;
	     if (first){
	     	first = false;
	     	doGet(); 
	     	
	     }
	}
	
	//cej
	private function handleGetResult(ev:ResultEvent):void {
		this.stockDefinitions = ev.result as StockDefinition;
		this.mapFromStockDefinitionData();
	     
	}
	private function handleLoadSystemPreferencesResult(ev:ResultEvent):void {
		systemPreferencesArray = ev.result as ArrayCollection;
		if (systemPreferencesArray.length > 0)
		{
			systemPreferences = systemPreferencesArray.getItemAt(0) as PreferencesSystem;
			this.btnExport.enabled = systemPreferences.enablePricingSystem;
		}else{
			this.btnExport.enabled = false;

		}
	}	                                 
	                                 
	private function handleDeleteResult(ev:ResultEvent):void {
	     loadStockDefinitions();
	}
	
	private function handleLoadDimensionResult(ev:ResultEvent):void {
		dimensions=ev.result as ArrayCollection;
	}

	/* private function handleLoadStockChangesResult(ev:ResultEvent):void {
		 stockChanges = ev.result as ArrayCollection;
	} */
	
	private function handleLoadPressDefinition(ev:ResultEvent):void {
		 pressDefinitions = ev.result as ArrayCollection;
	}
	private function handleLoadCopierDefinition(ev:ResultEvent):void {
		 copierDefinitions = ev.result as ArrayCollection;
	}
	private function handleLoadStockGroup(ev:ResultEvent):void {
		 stockGroup = ev.result as ArrayCollection;
	}
	private function handleLoadStockClass(ev:ResultEvent):void {
		stockClass = ev.result as ArrayCollection;
	}
	
	private function handleLoadVendor(ev:ResultEvent):void {
		 stockVendor = ev.result as ArrayCollection;
	}

	private function handleLoadStockGrade(ev:ResultEvent):void {
		 stockGrade = ev.result as ArrayCollection;
	}
	private function handleLoadStockType(ev:ResultEvent):void {
		 stockType = ev.result as ArrayCollection;
	}
	
	private function handleLoadStockColor(ev:ResultEvent):void {
		 stockColor = ev.result as ArrayCollection;
	}

	private function handleLoadStockGenericColor(ev:ResultEvent):void {
		 stockGenericColor = ev.result as ArrayCollection;
	}
	
	private function handleLoadStockFinish(ev:ResultEvent):void {
		 stockFinish = ev.result as ArrayCollection;
	}
	     
	private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error");                                 
	}

	private function showMessage(message:String,title:String):void {  
		Alert.show(message, title, 0, null, null, null,4);                                 
	}
	
	private function standardItemCheckEvent():void {
		var checked:Boolean;
		checked = chkstandardItem.selected;
		OnHand.enabled = checked;
		Committed.enabled = checked;
		OnOrder.enabled = checked;
		TargetLevel.enabled = checked;
		ReOrderPoint.enabled = checked;
		MinOrderQty.enabled = checked;
		Expires.enabled = checked;
		BinLocation.enabled = checked;
		ShellItem.enabled = checked;
		chkEvenIncrements.enabled = checked;
	}
	
	private function doAccount():void {
		var accountPickerWindow:AccountPicker = AccountPicker(PopUpManager.createPopUp(this, AccountPicker, true));
	    accountPickerWindow.setStyle("borderAlpha", 0.9);
	    accountPickerWindow.formIsEmpty = true;
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.CANCELSELECTACCOUNT, handleAccountPickerCancel);
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.SELECTACCOUNT, handleAccountPickerSelect);
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.SELECTNEWACCOUNT, handleAccountPickerNew);		
	}

	private function handleAccountPickerCancel(evt:AccountPickerSelectEvent):void {
		this.setAccount(new Account());
	}
	
	private function handleAccountPickerSelect(evt:AccountPickerSelectEvent):void {
		if (evt.account != null) {
			this.setAccount(evt.account);
		} else {
			this.setAccount(new Account());
			Alert.show("Account Picker returned a null account", "Error");
		}
	}
	
	private function handleAccountPickerNew(evt:AccountPickerSelectEvent):void {
		this.account = new Account();
	}

	private function setAccount(account2:Account):void
	{
		this.account = account2;
		stockDefinitions.account = this.account;
		account_name.text  = stockDefinitions.account.title;
	}			
	
	private function mapFromStockDefinitionData():void {
		
		if (stockDefinitions.defaultPress != null)
	 		cboDefaultPress.selectedIndex = findItem(stockDefinitions.defaultPress.name, pressDefinitions);
		
		if (stockDefinitions.defaultBWCopier != null)
	 		defaultBWCopier.selectedIndex = findItem(stockDefinitions.defaultBWCopier.name, copierDefinitions);

		if (stockDefinitions.defaultColorCopier != null)
	 		defaultColorCopier.selectedIndex = findItem(stockDefinitions.defaultColorCopier.name, copierDefinitions);

		if (stockDefinitions.defaultLargeCopier != null)
	 		defaultLargeCopier.selectedIndex = findItem(stockDefinitions.defaultLargeCopier.name, copierDefinitions);

		
		if (stockDefinitions.stkgroup != null)
			cboStockGroup.selectedIndex = findItem(stockDefinitions.stkgroup.name, stockGroup);
		if (stockDefinitions.stkclass != null)
			cbostockClass.selectedIndex = findItem(stockDefinitions.stkclass.name,stockClass);

		if (stockDefinitions.color != null) 
			cbostkcolor.selectedIndex = findItem(stockDefinitions.color.name, stockColor);
		if (stockDefinitions.genericColor != null)
				cboGenericColor.selectedIndex = findItem(stockDefinitions.genericColor.name, stockGenericColor);
		if (stockDefinitions.stktype != null)
			stkType.selectedIndex = findItem(stockDefinitions.stktype.name, stockType);
		if (stockDefinitions.vendor != null)
			cboVendor.selectedIndex = findItem(stockDefinitions.vendor.name, stockVendor);
		
		if (stockDefinitions.grade != null)
			cboStockGrade.selectedIndex = findItem(stockDefinitions.grade.name, stockGrade);

		if (stockDefinitions.finish != null)
			cboFinish.selectedIndex = findItem(stockDefinitions.finish.name, stockFinish);

		if (stockDefinitions.uom != null)
			cboUom.selectedIndex = findItem(stockDefinitions.uom,stockUom)
			
		if (stockDefinitions.stockunit != -1){
			stockUnit.selectedValue = findItemById(stockDefinitions.stockunit,stockUnits);
			doStockUnitChange(stockDefinitions.stockunit.toString())
		}
		if (stockDefinitions.priceExpires != null)
			PriceExpires.selectedDate =stockDefinitions.priceExpires;	
		if (stockDefinitions.expires != null)
			Expires.selectedDate = stockDefinitions.expires;	
			
			//// check box values here
			chkstandardItem.selected = stockDefinitions.standardItem;
			chkIsMetric.selected = stockDefinitions.isMetric;
			chkAutocalcblankstock.selected = stockDefinitions.autoCalculateBlank;
			chkEvenIncrements.selected = stockDefinitions.evenIncrements;
			chkcharge4entiteorder.selected = stockDefinitions.entireOrderCharge;
			chkCostIsInSets.selected = stockDefinitions.isCostInSets;
			chkfscCertified.selected = stockDefinitions.fscCertified;
			chksfiCertified.selected = stockDefinitions.sfiCertified
			chkgreensealCertified.selected = stockDefinitions.greenSealCertified;
			this.charges = stockDefinitions.charges;
			standardItemCheckEvent();
			stockChanges = stockDefinitions.stockChanges;
	}

	private function mapStockDefinitionData():void {
	 //stockDefinition.stockDefID = stockDefID;
	 
	 //combobox and select box values
	 if (cboStockGrade != null && cboStockGrade.selectedItem != null) 
	 	stockDefinitions.grade = cboStockGrade.selectedItem as StockGrade;

	 if (cbostkcolor != null && cbostkcolor.selectedItem != null) 
	 	stockDefinitions.color = cbostkcolor.selectedItem as StockColors;

	 if (cboStockGroup != null && cboStockGroup.selectedItem != null) 
	 	stockDefinitions.stkgroup = cboStockGroup.selectedItem as StockGroup;
	 	
	  if (cbostockClass != null && cbostockClass.selectedItem != null) 
	 	stockDefinitions.stkclass = cbostockClass.selectedItem as StockClass;


	 if (cboFinish != null && cboFinish.selectedItem != null) 
	 	stockDefinitions.finish = cboFinish.selectedItem as StockFinish;

	 if (cboVendor != null && cboVendor.selectedItem != null) 
	 	stockDefinitions.vendor = cboVendor.selectedItem as Vendor;

	 if (cboGenericColor != null && cboGenericColor.selectedItem != null) 
	 	stockDefinitions.genericColor = cboGenericColor.selectedItem as GenericColors;
	 
	 if (cboUom != null && cboUom.selectedItem != null)
	 	stockDefinitions.uom = cboUom.selectedItem.name as String; 
	 
	 if (stockUnit != null && stockUnit.selectedValue != null)
	 	stockDefinitions.stockunit = findItem(stockUnit.selectedValue.toString(),stockUnits);
	 
	 if (cboDefaultPress != null && cboDefaultPress.selectedItem != null) 
	 	stockDefinitions.defaultPress = cboDefaultPress.selectedItem as PressDefinition;
	 	
	 if (defaultBWCopier != null && defaultBWCopier.selectedItem != null) 
	 	stockDefinitions.defaultBWCopier = defaultBWCopier.selectedItem as CopierDefinition;
	 	
	 if (defaultColorCopier != null && defaultColorCopier.selectedItem != null) 
	 	stockDefinitions.defaultColorCopier = cboDefaultPress.selectedItem as CopierDefinition;
	 	
	 if (defaultLargeCopier != null && defaultLargeCopier.selectedItem != null) 
	 	stockDefinitions.defaultLargeCopier = cboDefaultPress.selectedItem as CopierDefinition;	
	 	
	 	
	 //check boxes
	 stockDefinitions.standardItem = chkstandardItem.selected;
	 stockDefinitions.isMetric = chkIsMetric.selected;
	 stockDefinitions.autoCalculateBlank = chkAutocalcblankstock.selected;
	 stockDefinitions.evenIncrements = chkEvenIncrements.selected;
	 stockDefinitions.entireOrderCharge = chkcharge4entiteorder.selected;
	 stockDefinitions.isCostInSets = chkCostIsInSets.selected;
	 stockDefinitions.fscCertified = chkfscCertified.selected;
	 stockDefinitions.sfiCertified = chksfiCertified.selected;
	 stockDefinitions.greenSealCertified = chkgreensealCertified.selected;
	 
	 
	 //text and textboxes
	
	 stockDefinitions.name = stockName.text;
	 stockDefinitions.weight = parseInt(weight.text);
	 stockDefinitions.coated = coated.text;
	 stockDefinitions.stocknumber = stockNumber.text;
	 stockDefinitions.basicsize = Basicsize.text;
	 stockDefinitions.parentsize = parentSize.text;
	 stockDefinitions.thickness = parseFloat(thickNess.text);
	 stockDefinitions.mweight = parseInt(mWeight.text);
	 stockDefinitions.rollWeight = parseInt(rollweight.text);
	 stockDefinitions.sheetspercarton = parseInt(sheetsPerCarton.text);
	 stockDefinitions.minorder = parseInt(minOrder.text);
	 stockDefinitions.comments = Comments.text;

	 stockDefinitions.costunits = parseInt(Costunits.text);
	 stockDefinitions.sheetsPerSet = parseInt(SheetsPerSet.text);
	 stockDefinitions.priceExpires = PriceExpires.selectedDate;
	 stockDefinitions.qtybreak1 = parseInt(Qtybreak1.text);
	 stockDefinitions.qtybreak2 = parseInt(Qtybreak2.text);
	 stockDefinitions.qtybreak3 = parseInt(Qtybreak3.text);
	 stockDefinitions.qtybreak4 = parseInt(Qtybreak4.text);
	 stockDefinitions.qtybreak5 = parseInt(Qtybreak5.text);
	 stockDefinitions.qtybreak6 = parseInt(Qtybreak6.text);
	 stockDefinitions.cost1 = parseFloat(Cost1.text);
	 stockDefinitions.cost2 = parseFloat(Cost2.text);
	 stockDefinitions.cost3 = parseFloat(Cost3.text);
	 stockDefinitions.cost4 = parseFloat(Cost4.text);
	 stockDefinitions.cost5 = parseFloat(Cost5.text);
	 stockDefinitions.cost6 = parseFloat(Cost6.text);
	 stockDefinitions.cwt1 = parseFloat(Cwt1.text);
	 stockDefinitions.cwt2 = parseFloat(Cwt2.text);
	 stockDefinitions.cwt3 = parseFloat(Cwt3.text);
	 stockDefinitions.cwt4 = parseFloat(Cwt4.text);
	 stockDefinitions.cwt5 = parseFloat(Cwt5.text);
	 stockDefinitions.cwt6 = parseFloat(Cwt6.text);
	 stockDefinitions.markup1 = parseFloat(Markup1.text);
	 stockDefinitions.markup2 = parseFloat(Markup2.text);
	 stockDefinitions.markup3 = parseFloat(Markup3.text);
	 stockDefinitions.markup4 = parseFloat(Markup4.text);
	 stockDefinitions.markup5 = parseFloat(Markup5.text);
	 stockDefinitions.markup6 = parseFloat(Markup6.text);
	 stockDefinitions.listPerM1 = parseFloat(ListPerM1.text);
	 stockDefinitions.listPerM2 = parseFloat(ListPerM2.text);
	 stockDefinitions.listPerM3 = parseFloat(ListPerM3.text);
	 stockDefinitions.listPerM4 = parseFloat(ListPerM4.text);
	 stockDefinitions.listPerM5 = parseFloat(ListPerM5.text);
	 stockDefinitions.listPerM6 = parseFloat(ListPerM6.text);
	 
	 stockDefinitions.forestManagement = forestMgmt.text;
	 stockDefinitions.pcwRecycledPercent = pcwRecycled.text as Number;
	 
	 stockDefinitions.normalRunSize = NormalRunSize.text;
	 stockDefinitions.cutsPer100 = parseInt(CutsPer100.text);
	 stockDefinitions.minCutCharge = parseInt(MinCutCharge.text);
	// stockDefinitions.defaultPress = DefaultPress.text;
	 stockDefinitions.blankSheetqty1 = parseInt(BlankSheetqty1.text);
	 stockDefinitions.blankSheetqty2 = parseInt(BlankSheetqty2.text);
	 stockDefinitions.blankSheetqty3 = parseInt(BlankSheetqty3.text);
	 stockDefinitions.blankSheetqty4 = parseInt(BlankSheetqty4.text);
	 stockDefinitions.blankSheetqty5 = parseInt(BlankSheetqty5.text);
	 stockDefinitions.blankSheetqty6 = parseInt(BlankSheetqty6.text);
	 stockDefinitions.blankSheetPrice1 = parseFloat(BlankSheetPrice1.text);
	 stockDefinitions.blankSheetPrice2 = parseFloat(BlankSheetPrice2.text);
	 stockDefinitions.blankSheetPrice3 = parseFloat(BlankSheetPrice3.text);
	 stockDefinitions.blankSheetPrice4 = parseFloat(BlankSheetPrice4.text);
	 stockDefinitions.blankSheetPrice5 = parseFloat(BlankSheetPrice5.text);
	 stockDefinitions.blankSheetPrice6 = parseFloat(BlankSheetPrice6.text);
	 
	 stockDefinitions.copier1PricePerSheet = parseFloat(DefaultBW.text);
	 stockDefinitions.copier2PricePerSheet = parseFloat(DefaultColor.text);
	 stockDefinitions.copier3PricePerSheet = parseFloat(DefaultLargeFormat.text);
	 stockDefinitions.onHand = parseInt(OnHand.text);
	 stockDefinitions.committed = parseInt(Committed.text);
	 stockDefinitions.available = parseInt(Available.text);
	 stockDefinitions.onOrder = parseInt(OnOrder.text);
	 stockDefinitions.targetLevel = parseInt(TargetLevel.text);
	 stockDefinitions.reOrderPoint = parseInt(ReOrderPoint.text);
	 stockDefinitions.minOrderQty = parseInt(MinOrderQty.text);
	 stockDefinitions.expires = Expires.selectedDate;
	 stockDefinitions.binLocation = BinLocation.text;
	 if (stockDefinitions.account != null)
	 	stockDefinitions.account.title = account_name.text;

	}
	private function doShell():void{
		if (ShellItem.selected == true) 
			btnAssignCustomerAccount.enabled = true;
		else
			btnAssignCustomerAccount.enabled = false;
	}
	
	private function validateStockName(event:Event):void{
        focussedFormControl = event.target as DisplayObject;    
        formIsValid = true;            
        validate(stockDefinitionNameValidator);
	}   
	
	private function validate(validator:Validator):Boolean
	{                
        var validatorSource:DisplayObject = validator.source as DisplayObject;
     	var suppressEvents:Boolean = (validatorSource != focussedFormControl);
        var event:ValidationResultEvent = validator.validate(null, suppressEvents); 
        var currentControlIsValid:Boolean = (event.type == ValidationResultEvent.VALID);
		formIsValid = formIsValid && currentControlIsValid;
        return currentControlIsValid;
	}
	
	private function handleFocusOutEvent(evt:FocusEvent):void
	{
		if (evt.target == parentSize) {
			stockDefinitions.parentsize = parentSize.text;
		} else if (evt.target == NormalRunSize) {
			stockDefinitions.normalRunSize = NormalRunSize.text;
		}
		super.focusOutHandler(evt);
	}
	private function doStockUnitChange(item:String):void{
		
		if (item == "0"){
			this.currentState="Envelope"
		}
		if (item == "1"){
			this.currentState="SheetStock"
		}
		if (item == "2"){
			this.currentState="RollStock"
		}
		if (item == "3"){
			this.currentState="LargeFormat"			
		}
		if (item == "4"){
			this.currentState="RigidSubstrate"			
		}
		
	}
	private function doStockUnitChangeEvent(event:Event):void{
		var item:String = findItem(event.currentTarget.selectedValue,stockUnits).toString();
		
		if (item == "0"){
			this.currentState="Envelope"
		}
		if (item == "1"){
			this.currentState="SheetStock"
		}
		if (item == "2"){
			this.currentState="RollStock"
		}
		if (item == "3"){
			this.currentState="LargeFormat"			
		}
		if (item == "4"){
			this.currentState="RigidSubstrate"			
		}
		
	}
	private function UpdateAvailable():void {
		stockDefinitions.available = stockDefinitions.onHand - stockDefinitions.committed;
	}

]]>
                             
</mx:Script>	
<vo:StockDefinition id="stock"/>                           

	<mx:RadioButtonGroup id="PaperStyle"/>
	<mx:Label x="10" y="63" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Group')}" width="108" textAlign="right"/>
	<mx:Label x="250" y="63" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Class')}" width="86" textAlign="right"/>
	<mx:ComboBox id="cboStockGroup" x="126" y="61" dataProvider="{stockGroup}"  labelField="name" focusOut="doStockGroup()" width="116"/>
	<mx:ComboBox x="344" y="61" width="105" id="cbostockClass" dataProvider="{stockClass}"  labelField="name" focusOut="doStockClass()"/>
	<mx:CheckBox x="457" y="62" id="chkIsMetric" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Metric')}" width="116"/>
	<mx:Label x="10" y="87" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Name')}" width="108" textAlign="right"/>
	<mx:Label x="10" y="111" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Color')}" width="108" textAlign="right"/>
	<fc:AutoComplete  x="126" y="109" width="138" id="cbostkcolor" dataProvider="{stockColor}" lookAhead="true" labelField="name" focusOut="doStockColor()"/>
	<mx:TextInput x="126" y="85" width="160" id="stockName" text="{stockDefinitions.name}" change="validateStockName(event);"/>
	<fc:AutoComplete  x="344" y="85" width="105" id ="cboFinish" dataProvider="{stockFinish}" lookAhead="true" labelField="name" focusOut="doStockFinish()"/>

	<mx:Label x="290" y="87" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Finish')}" width="46" textAlign="right"/>
	<mx:Label x="10" y="135" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.GenericColor')}" width="108" textAlign="right"/>
	<mx:Label x="263" y="111" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Grade')}" width="73" textAlign="right"/>
	<mx:Label x="457" y="87" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Weight')}" width="48.5" textAlign="right"/>
	<mx:Label x="457" y="111" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Coated')}" width="48.5" textAlign="right"/>

	<fc:AutoComplete  x="126" y="133" width="93" id="cboGenericColor" dataProvider="{stockGenericColor}" lookAhead="true" labelField="name" focusOut="doStockGenericColor()"/>
	<fc:AutoComplete  x="344" y="109" width="105" id="cboStockGrade" dataProvider="{stockGrade}" lookAhead="true" labelField="name" focusOut="doStockGrade()"/>
	<mx:TextInput x="513.5" y="85" width="55" id="weight" text="{stockDefinitions.weight}"/>
	<mx:TextInput x="513.5" y="109" width="55" id="coated" text="{stockDefinitions.coated}"/>

	<mx:RadioButtonGroup id="stockUnit" change="doStockUnitChangeEvent(event)"/>
	<mx:RadioButton x="581" y="62" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Envelope')}" groupName="stockUnit" width="138"/>
	<mx:RadioButton x="581" y="82" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetStock')}" groupName="stockUnit" width="138"/>
	<mx:RadioButton x="581" y="103" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollStock')}" groupName="stockUnit"/>
	<mx:RadioButton x="581" y="124" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.LargeFormat')}" groupName="stockUnit"/>
	<mx:RadioButton x="581" y="145" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RigidSubstrate')}" groupName="stockUnit" width="138"/>

	<mx:TabNavigator x="10" y="166" width="712" height="585" id="tab_pages" selectedIndex="0" creationPolicy="all">
		<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SpecificationandPric')}" id="page_specification_and_pricing" width="100%" height="100%">
			<mx:Panel x="14.5" y="0" width="690" height="225" layout="absolute" dropShadowEnabled="false">
				<mx:Label x="0" y="7" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Vendor')}" textAlign="right" width="98.5"/>
				<mx:Label x="1" y="35" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.StockType')}" textAlign="right" width="97.5" id="label6"/>
				<mx:Label x="264.5" y="7" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Stock')}" textAlign="right" width="50.5"/>
				<mx:Label x="0" y="62" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ParentSize')}" textAlign="right" width="98.5" id="label3"/>
				<mx:Label x="246.5" y="62" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Thickness')}" textAlign="right" width="68.5"/>
				<mx:Label x="242.5" y="33" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.BasicSize')}" textAlign="right" width="72.5" id="label5"/>
				<mx:Label x="0" y="118" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetsCarton')}" textAlign="right" width="98.5" id="label2"/>
				<mx:Label x="229.5" y="91" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MWeight')}" textAlign="right" width="85.5" id="label1"/>
				<mx:Label x="0" y="146" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrder')}" textAlign="right" width="98.5" id="label7"/>
				<mx:Label x="229.5" y="118" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.CartonWeight')}" textAlign="right" width="85.5" id="label4"/>
				<mx:CheckBox x="248.5" y="144" id="chkcharge4entiteorder" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ChargeCustomerforEnt')}" width="214"/>

				<fc:AutoComplete x="106.5" y="5" width="150.5" id="cboVendor" dataProvider="{stockVendor}" lookAhead="true" labelField="name" focusOut="doStockVendor()"/>
				<mx:ComboBox x="106.5" y="33" id="stkType" width="128" dataProvider="{stockType}" labelField="name" focusOut="doStockType()" />
				<mx:TextInput x="323" y="5" width="93" id="stockNumber" text="{stockDefinitions.stocknumber}" height="22"/>
				<fc:AutoComplete x="106.5" y="60" width="132" 
					  id="parentSize"
					  dataProvider="{dimensions}"
					  labelField="name"
					  text="{stockDefinitions.parentsize}"
					  focusOut="handleFocusOutEvent(event)"
				/>
				<mx:TextInput x="323" y="60" width="103" id="thickNess" text="{stockDefinitions.thickness}"/>
				<mx:TextInput x="106.5" y="116" width="107" id="sheetsPerCarton" text="{stockDefinitions.sheetspercarton}"/>
				<mx:TextInput x="323" y="89" width="89.5" id="mWeight" text="{stockDefinitions.mweight}"/>
				<mx:TextInput x="323" y="89" width="89.5" id="rollweight" text="{stockDefinitions.rollWeight}"/>
				<mx:TextInput x="106.5" y="144" width="137" id="minOrder" text="{stockDefinitions.minorder}"/>
				<mx:TextInput x="323" y="116" width="64.5" id="textinput1" text="{stockDefinitions.cartonWeight}"/>
				<mx:Text x="323" y="33" id="Basicsize" text="{stockDefinitions.basicsize}" width="103" height="22"/>
				<mx:ComboBox x="106.5" y="89" id="cboUom"  dataProvider="{stockUom}" width="93" labelField="name"/>
				<mx:Panel x="470.5" y="10" width="193.5" height="168" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ChainofCustody')}" dropShadowEnabled="false">
					<mx:Label x="26.25" y="1" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ForestManagement')}"/>
					<mx:Label x="10" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PCWRecycled')}" width="97.75" textAlign="right"/>
					<mx:CheckBox x="10" y="65" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.FSCCertified')}" id="chkfscCertified" selected="{stockDefinitions.fscCertified}"/>
					<mx:CheckBox x="10" y="84" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SFICertified')}" id="chksfiCertified" selected="{stockDefinitions.sfiCertified}"/>
					<mx:CheckBox x="10" y="104" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.GreenSealCertified')}" id="chkgreensealCertified" selected="{stockDefinitions.greenSealCertified}"/>

					<mx:TextInput x="10" y="20" width="153.5" id="forestMgmt" text="{stockDefinitions.forestManagement}"/>
					<mx:TextInput x="115.75" y="44" width="47.75" id="pcwRecycled" text="{stockDefinitions.pcwRecycledPercent}"/>

				</mx:Panel>
				<mx:Label x="57.5" y="91" text="UOM:" textAlign="right" width="41"/>
			</mx:Panel>
			<mx:Panel x="14.5" y="233" width="690" height="200" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.QtyAdjustments')}" dropShadowEnabled="false">
				<mx:Label x="0" y="30" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.QtyBreaks')}" width="80" textAlign="right"/>
				<mx:Label x="0" y="50" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Cost')}" width="80" textAlign="right"/>
				<mx:Label x="0" y="70" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.CWT')}" width="80" textAlign="right"/>
				<mx:Label x="0" y="91" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Markup')}" width="80" textAlign="right"/>
				<mx:Label x="0" y="112" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ListM')}" width="80" textAlign="right"/>
				<mx:Label x="54" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.CostingUnits')}" width="95" textAlign="right"/>
				<mx:Label x="252" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetsSet')}" width="92" textAlign="right"/>
				<mx:Label x="19" y="137" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PriceExpires')}" width="127" textAlign="right"/>
				<mx:CheckBox x="450" y="2" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.CostisinSets')}" id="chkCostIsInSets" width="194"/>

				<mx:TextInput x="88" y="28" width="66" id="Qtybreak1" text="{stockDefinitions.qtybreak1}"/>
				<mx:TextInput x="88" y="48" width="66" id="Cost1" text="{stockDefinitions.cost1}"/>
				<mx:TextInput x="88" y="68" width="66" id="Cwt1" text="{stockDefinitions.cwt1}"/>
				<mx:TextInput x="88" y="89" width="66" id="Markup1" text="{stockDefinitions.markup1}"/>
				<mx:TextInput x="88" y="110" width="66" id="ListPerM1" text="{stockDefinitions.listPerM1}"/>
				<mx:TextInput x="151" y="28" width="66" id="Qtybreak2" text="{stockDefinitions.qtybreak2}"/>
				<mx:TextInput x="151" y="48" width="66" id="Cost2" text="{stockDefinitions.cost2}"/>
				<mx:TextInput x="151" y="68" width="66" id="Cwt2" text="{stockDefinitions.cwt2}"/>
				<mx:TextInput x="151" y="89" width="66" id="Markup2" text="{stockDefinitions.markup2}"/>
				<mx:TextInput x="151" y="110" width="66" id="ListPerM2" text="{stockDefinitions.listPerM2}"/>
				<mx:TextInput x="214" y="28" width="66" id="Qtybreak3" text="{stockDefinitions.qtybreak3}"/>
				<mx:TextInput x="214" y="48" width="66" id="Cost3" text="{stockDefinitions.cost3}"/>
				<mx:TextInput x="214" y="68" width="66" id="Cwt3" text="{stockDefinitions.cwt3}"/>
				<mx:TextInput x="214" y="89" width="66" id="Markup3" text="{stockDefinitions.markup3}"/>
				<mx:TextInput x="214" y="110" width="66" id="ListPerM3" text="{stockDefinitions.listPerM3}"/>
				<mx:TextInput x="275.5" y="28" width="66" id="Qtybreak4" text="{stockDefinitions.qtybreak4}"/>
				<mx:TextInput x="275.5" y="48" width="66" id="Cost4" text="{stockDefinitions.cost4}"/>
				<mx:TextInput x="275.5" y="68" width="66" id="Cwt4" text="{stockDefinitions.cwt4}"/>
				<mx:TextInput x="275.5" y="89" width="66" id="Markup4" text="{stockDefinitions.markup4}"/>
				<mx:TextInput x="275.5" y="110" width="66" id="ListPerM4" text="{stockDefinitions.listPerM4}"/>
				<mx:TextInput x="339" y="28" width="66" id="Qtybreak5" text="{stockDefinitions.qtybreak5}"/>
				<mx:TextInput x="339" y="48" width="66" id="Cost5" text="{stockDefinitions.cost5}"/>
				<mx:TextInput x="339" y="68" width="66" id="Cwt5" text="{stockDefinitions.cwt5}"/>
				<mx:TextInput x="339" y="89" width="66" id="Markup5" text="{stockDefinitions.markup5}"/>
				<mx:TextInput x="339" y="110" width="66" id="ListPerM5" text="{stockDefinitions.listPerM5}"/>
				<mx:TextInput x="403" y="28" width="66" id="Qtybreak6" text="{stockDefinitions.qtybreak6}"/>
				<mx:TextInput x="403" y="48" width="66" id="Cost6" text="{stockDefinitions.cost6}"/>
				<mx:TextInput x="403" y="68" width="66" id="Cwt6" text="{stockDefinitions.cwt6}"/>
				<mx:TextInput x="403" y="89" width="66" id="Markup6" text="{stockDefinitions.markup6}"/>
				<mx:TextInput x="403" y="110" width="66" id="ListPerM6" text="{stockDefinitions.listPerM6}"/>
				<mx:TextInput x="157" y="2" width="87" id="Costunits" text="{stockDefinitions.costunits}"/>
				<mx:TextInput x="352" y="2" width="81" id="SheetsPerSet" text="{stockDefinitions.sheetsPerSet}"/>
				<mx:DateField x="154" y="135" id="PriceExpires"/>
			</mx:Panel>
			<mx:Panel x="14.5" y="441" width="685.5" height="93" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Comment')}" dropShadowEnabled="false">
				<mx:TextArea x="0" y="0" width="665.5" height="53" id="Comments" text="{stockDefinitions.comments}"/>
			</mx:Panel>
		</mx:Canvas>
		<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PricingOptions')}" id="page_pricingoptions" width="100%" height="100%">
			<mx:Panel x="10" y="38" width="295" height="78" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SelectPressforPrinti')}" dropShadowEnabled="false">
				<mx:Label x="0" y="11" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Press')}" textAlign="right" width="44"/>
				<fc:AutoComplete  x="52" y="7" width="182" id="cboDefaultPress" dataProvider="{pressDefinitions}" lookAhead="true" labelField="name" focusOut="doPressDefinition()"/>
			</mx:Panel>
			<mx:Panel x="313" y="38" width="387" height="78" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ScheduleforListPrici')}" dropShadowEnabled="false">
				<mx:Button x="10" y="7" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SelectSchedule')}" click="doPriceList();" width="126" id="button1"/>
				<mx:Text x="144" y="9" text="{stockDefinitions.defaultPriceList.name}" width="213" id="defaultPriceList" height="20"/>
			</mx:Panel>
			<fc:AutoComplete x="113" y="9" width="85" 
				  id="NormalRunSize"
				  dataProvider="{dimensions}"
				  labelField="name"
				  text="{stockDefinitions.normalRunSize}"
				  focusOut="handleFocusOutEvent(event)"
			/>
			<mx:TextInput x="270" y="9" width="50" id="CutsPer100" text="{stockDefinitions.cutsPer100}"/>
			<mx:TextInput x="418" y="9" width="50" id="MinCutCharge" text="{stockDefinitions.minCutCharge}"/>

			<mx:Label x="10" y="11" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.NormalRunSize')}" width="95" textAlign="right" id="label10"/>
			<mx:Label x="206" y="11" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Cut100')}" width="56" textAlign="right" id="label9"/>
			<mx:Label x="328" y="11" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinCutChg')}" width="82" textAlign="right" id="label8"/>

			<mx:Panel x="10" y="125" width="690" height="108" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PricingforBlankSheet')}" dropShadowEnabled="false">
				<mx:TextInput x="68" y="2" width="80" id="BlankSheetqty1" text="{stockDefinitions.blankSheetqty1}"/>
				<mx:TextInput x="146" y="2" width="80" id="BlankSheetqty2" text="{stockDefinitions.blankSheetqty2}"/>
				<mx:TextInput x="224" y="2" width="80" id="BlankSheetqty3" text="{stockDefinitions.blankSheetqty3}"/>
				<mx:TextInput x="302" y="2" width="80" id="BlankSheetqty4" text="{stockDefinitions.blankSheetqty4}"/>
				<mx:TextInput x="381" y="2" width="80" id="BlankSheetqty5" text="{stockDefinitions.blankSheetqty5}"/>
				<mx:TextInput x="459" y="2" width="80" id="BlankSheetqty6" text="{stockDefinitions.blankSheetqty6}"/>
				<mx:TextInput x="68" y="23" width="80" id="BlankSheetPrice1" text="{stockDefinitions.blankSheetPrice1}"/>
				<mx:TextInput x="146" y="23" width="80" id="BlankSheetPrice2" text="{stockDefinitions.blankSheetPrice2}"/>
				<mx:TextInput x="224" y="23" width="80" id="BlankSheetPrice3" text="{stockDefinitions.blankSheetPrice3}"/>
				<mx:TextInput x="302" y="23" width="80" id="BlankSheetPrice4" text="{stockDefinitions.blankSheetPrice4}"/>
				<mx:TextInput x="381" y="23" width="80" id="BlankSheetPrice5" text="{stockDefinitions.blankSheetPrice5}"/>
				<mx:TextInput x="459" y="23" width="80" id="BlankSheetPrice6" text="{stockDefinitions.blankSheetPrice6}"/>

				<mx:Label x="3" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Quantity')}" textAlign="right" width="57"/>
				<mx:Label x="0" y="25" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Price')}" textAlign="right" width="60"/>
				<mx:CheckBox x="65" y="45" id="chkAutocalcblankstock" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AutoCalculateBlankSt')}" width="295"/>

			</mx:Panel>
			<mx:Panel x="10" y="241" width="690" height="124" layout="absolute" dropShadowEnabled="false" title ="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AdjustCopierDigitalM')}">
				<mx:Label x="82" y="5" text="B&amp;W:" textAlign="right"/>
				<mx:Label x="24" y="30" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Color')}" textAlign="right" width="93"/>
				<mx:Label x="31" y="56" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.LargeFormat')}" textAlign="right"/>

				<mx:TextInput x="125" y="3" width="90" id="DefaultBW" text="{stockDefinitions.copier1PricePerSheet}"/>
				<mx:TextInput x="125" y="28" width="90" id="DefaultColor" text="{stockDefinitions.copier2PricePerSheet}"/>
				<mx:TextInput x="125" y="53" width="90" id="DefaultLargeFormat" text="{stockDefinitions.copier3PricePerSheet}"/>
				<mx:ComboBox x="223" y="3" width="201" id="defaultBWCopier" focusOut="doCopierDefinitionBW();" dataProvider="{copierDefinitions}" labelField="name"/>
				<mx:ComboBox x="223" y="28" width="201" id="defaultColorCopier" focusOut="doCopierDefinitionColor();" dataProvider="{copierDefinitions}" labelField="name"/>
				<mx:ComboBox x="223" y="53" width="201" id="defaultLargeCopier" focusOut="doCopierDefinitionLarge();" dataProvider="{copierDefinitions}" labelField="name"/>
			</mx:Panel>
			<mx:Panel x="10" y="373" width="690" height="154" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PresetuptoCharges')}" dropShadowEnabled="false">
				<mx:Button x="10" y="4" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AddCharges')}" click="doAddCharges();" width="110"/>
				<mx:List x="128" y="6" id="Additional1" dataProvider="{stockDefinitions.charges}"  labelField="name" width="238" height="98"/>
			</mx:Panel>
		</mx:Canvas>
		<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Inventory')}" id="page_inventory" width="100%" height="100%">
			<mx:Panel x="10" y="10" width="690" height="244" layout="absolute" title="Inventory Settings" dropShadowEnabled="false">

				<mx:CheckBox x="39" y="0" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.StockisStandardInven')}" change="standardItemCheckEvent();" id="chkstandardItem"/>
				<mx:Label x="10" y="30" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.StockOnHand')}" textAlign="right" width="104"/>
				<mx:Label x="10" y="58" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Committed')}" textAlign="right" width="104"/>
				<mx:Label x="10" y="88" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Available')}" textAlign="right" width="104"/>
				<mx:Label x="23" y="150" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.StockExpires')}" width="91" textAlign="right"/>
				<mx:Label x="23" y="176" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.BinLocation')}" width="91" textAlign="right"/>
				<mx:Label x="224" y="30" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.OnOrder')}" textAlign="right" width="104"/>
				<mx:Label x="224" y="58" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.TargetLevel')}" textAlign="right" width="104"/>
				<mx:Label x="224" y="88" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ReorderPoint')}" textAlign="right" width="104"/>
				<mx:Label x="224" y="118" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrderQty')}" textAlign="right" width="104"/>
				<mx:CheckBox x="220" y="148" id="ShellItem" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ShellItem')}" enabled="false"  change="doShell();" width="113"/>
				<mx:Button x="341" y="148" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AssignCustomerAccoun')}" enabled="false" id="btnAssignCustomerAccount" click="doAccount();"/>
				<mx:CheckBox x="429" y="116" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Evenincrementslikere')}" enabled="false" id="chkEvenIncrements" width="203"/>

				<mx:TextInput x="122" y="28" width="84" id="OnHand" text="{stockDefinitions.onHand}" enabled="false" focusOut="UpdateAvailable();"/>
				<mx:TextInput x="122" y="56" width="84" id="Committed" text="{stockDefinitions.committed}" enabled="false" focusOut="UpdateAvailable();"/>
				<mx:TextInput x="122" y="86" width="84" id="Available" text="{stockDefinitions.available}" height="22" enabled="false"/>
				<mx:TextInput x="337" y="28" width="84" id="OnOrder" text="{stockDefinitions.onOrder}" enabled="false"/>
				<mx:TextInput x="337" y="56" width="84" id="TargetLevel" text="{stockDefinitions.targetLevel}" enabled="false"/>
				<mx:TextInput x="337" y="86" width="84" id="ReOrderPoint" text="{stockDefinitions.reOrderPoint}" enabled="false"/>
				<mx:TextInput x="337" y="116" width="84" id="MinOrderQty" text="{stockDefinitions.minOrderQty}" enabled="false"/>
				<mx:TextInput x="122" y="176" id="BinLocation" text="{stockDefinitions.binLocation}" height="22" enabled="false"/>
				<mx:Text x="341" y="176" width="291" id="account_name" text="{stockDefinitions.account.title}" />
				<mx:DateField x="122" y="148" id="Expires"/>
			</mx:Panel>
			<mx:Panel x="10" y="274" width="690" height="268" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MostRecentInventoryC')}" dropShadowEnabled="false">
				<mx:Button x="10" y="204" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'kInventoryHistoryCmd.ShowEntireHistory')}" click="doShowHistory();"/>
				<mx:DataGrid dataProvider="{stockChanges}" left="5" right="5" top="5" bottom="30" id="stockchangeGrid">
					<mx:columns>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.User')}" dataField="PSUser"/>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Date')}" dataField="stockChangeDate"/>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.HowChanged')}" dataField="howChanged"/>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Quantity')}" dataField="quantity"/>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Reference')}" dataField="reference"/>
					</mx:columns>
				</mx:DataGrid>
			</mx:Panel>
		</mx:Canvas>
	</mx:TabNavigator>
	<mx:Button x="10" y="5" width="38" height="38" click="doPrev();">
		<mx:icon>@Embed(source='../../../../assets/previous_page.png')</mx:icon>
	</mx:Button>
	<mx:Button x="56" y="5" width="38" height="38" click="doNext();">
		<mx:icon>@Embed(source='../../../../assets/next_page.png')</mx:icon>
	</mx:Button>
	<mx:Label x="10" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'invoiceDeliveryTicketCmd.Previous')}" width="38" textAlign="center"/>
	<mx:Label x="56" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Next')}" width="38" textAlign="center"/>
	<mx:Button x="171" y="5" width="38" height="38" click="doSave();" enabled="{enableSave}">
		<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
	</mx:Button>
	<mx:Label x="171" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Save')}" width="38" textAlign="center"/>
	<mx:Button x="217" y="5" width="38" height="38" click="doGet();">
		<mx:icon>@Embed(source='../../../../assets/get.png')</mx:icon>
	</mx:Button>
	<mx:Label x="217" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Get')}" width="38" textAlign="center"/>
	<mx:Button x="263" y="5" width="38" height="38" click="doNew();">
		<mx:icon>@Embed(source='../../../../assets/new.png')</mx:icon>
	</mx:Button>
	<mx:Button id="button_delete" x="370" y="5" width="38" height="38" click="doDelete();">
		<mx:icon>@Embed(source='../../../../assets/delete.png')</mx:icon>
	</mx:Button>
	<mx:Label x="360" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Delete')}" width="58" textAlign="center"/>
	<mx:Button x="436" y="5" width="38" height="38" id="btnExport" enabled="false">
		<mx:icon>@Embed(source='../../../../assets/export.png')</mx:icon>
	</mx:Button>
	<mx:Label x="426" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Export')}" width="58" textAlign="center"/>
	<mx:Button x="493" y="5" width="38" height="38" click="doRevert();">
		<mx:icon>@Embed(source='../../../../assets/cancel.png')</mx:icon>
	</mx:Button>
	<mx:Label x="483" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Revert')}" width="58" textAlign="center"/>
	<mx:Label x="263" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.New')}" width="38" textAlign="center"/>
</mx:Panel>
