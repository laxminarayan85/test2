<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" 
	layout="absolute" width="100%" height="100%" creationComplete="init()"  
	xmlns:fc="http://www.adobe.com/2006/fc" xmlns:vo="com.efi.printsmith.data.*" 
	xmlns:comp="com.efi.printsmith.common.components.*" headerHeight="0"
	title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.StockDefinitions')}" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.StockDefinitions')}" name="Stock Definition"
	implements="com.efi.mdi.IMDIWindowAware" xmlns:components="com.efi.printsmith.common.components.*">
	
	<mx:Script source="../common/scripts/CommonUtils.as"/>
	<mx:states>
		<mx:State name="Envelope">
			<mx:RemoveChild target="{MinCutCharge}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{CutsPer100}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{NormalRunSize}"/>
			<mx:SetProperty target="{label11}" name="x" value="246.5"/>
			<mx:SetProperty target="{minOrder}" name="width" value="107"/>
			<mx:SetProperty target="{qtybreaklabel}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.QtyBreaks')}"/>
			<mx:SetProperty target="{tab_pages}" name="x" value="0"/>
			<mx:SetProperty target="{tab_pages}" name="y" value="175"/>
		</mx:State>
		<mx:State name="RollStock">
			<mx:SetProperty target="{label1}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollWeight')}"/>
			<mx:SetProperty target="{label2}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollsOrder')}"/>
			<mx:SetProperty target="{label3}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollWidth')}"/>
			<mx:RemoveChild target="{label4}"/>
			<mx:RemoveChild target="{textinput1}"/>
			<mx:SetProperty target="{label1}" name="x" value="306"/>
			<mx:SetProperty target="{label1}" name="y" value="118"/>
			<mx:SetProperty target="{label7}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrderweight')}"/>
			<mx:RemoveChild target="{MinCutCharge}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{CutsPer100}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{NormalRunSize}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:SetProperty target="{BlankSheetqty1}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice1}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty2}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice2}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty3}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice3}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty4}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice4}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty5}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice5}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice6}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty6}" name="enabled" value="false"/>
			<mx:SetProperty target="{defaultBWCopier}" name="enabled" value="false"/>
			<mx:SetProperty target="{DefaultBW}" name="enabled" value="false"/>
			<mx:SetProperty target="{DefaultColor}" name="enabled" value="false"/>
			<mx:SetProperty target="{defaultColorCopier}" name="enabled" value="false"/>
			<mx:SetProperty target="{defaultLargeCopier}" name="enabled" value="false"/>
			<mx:SetProperty target="{DefaultLargeFormat}" name="enabled" value="false"/>
			<mx:SetProperty target="{chkAutocalcblankstock}" name="enabled" value="false"/>
			<mx:RemoveChild target="{mWeight}"/>
			<mx:SetProperty target="{rollweight}" name="y" value="116"/>
			<mx:SetProperty target="{rollweight}" name="width" value="139.5"/>
			<mx:SetProperty target="{label7}" name="x" value="10"/>
			<mx:SetProperty target="{label7}" name="width" value="118.5"/>
			<mx:SetProperty target="{label11}" name="x" value="246.5"/>
			<mx:SetProperty target="{minOrder}" name="width" value="107"/>
			<mx:SetProperty target="{minOrder}" name="x" value="131.5"/>
			<mx:SetProperty target="{rollweight}" name="x" value="420.5"/>
			<mx:SetProperty target="{sheetsPerCarton}" name="x" value="131.5"/>
			<mx:SetProperty target="{label2}" name="x" value="25"/>
			<mx:SetProperty target="{sheetsPerCarton}" name="enabled" value="false"/>
			<mx:SetProperty target="{qtybreaklabel}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.WeightBreaks')}"/>
			<mx:SetProperty target="{Cost1}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cost2}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cost3}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cost4}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cost5}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cost6}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM1}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM2}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM3}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM4}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM6}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM5}" name="enabled" value="false"/>
			<mx:SetProperty target="{Costunits}" name="enabled" value="false"/>
			<mx:RemoveChild target="{chkCostIsInSets}"/>
			<mx:RemoveChild target="{SheetsPerSet}"/>
			<mx:RemoveChild target="{label13}"/>
			<mx:AddChild relativeTo="{panel2}" position="lastChild">
				<mx:Label x="256" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.weight')}"/>
			</mx:AddChild>
			<mx:SetProperty target="{tab_pages}" name="y" value="175"/>
			<mx:SetProperty target="{tab_pages}" name="x" value="0"/>
		</mx:State>
		<mx:State name="SheetStock">
			<mx:SetProperty target="{mWeight}" name="enabled" value="false"/>
			<mx:SetProperty target="{textinput1}" name="enabled" value="false"/>
			<mx:RemoveChild target="{rollweight}"/>
			<mx:SetProperty target="{label7}" name="x" value="-23"/>
			<mx:SetProperty target="{label7}" name="width" value="121.5"/>
			<mx:SetProperty target="{label11}" name="x" value="246.5"/>
			<mx:SetProperty target="{minOrder}" name="width" value="107"/>
			<mx:SetProperty target="{pcwRecycled}" name="x" value="152"/>
			<mx:SetProperty target="{label12}" name="width" value="134"/>
			<mx:SetProperty target="{pcwRecycled}" name="width" value="32.5"/>
			<mx:SetProperty target="{PriceExpires}" name="width" value="137"/>
			<mx:SetProperty target="{tab_pages}" name="y" value="175"/>
			<mx:SetProperty target="{qtybreaklabel}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.QtyBreaks')}"/>
			<mx:SetProperty target="{button2}" name="x" value="73"/>
			<mx:SetProperty target="{label15}" name="width" value="55"/>
			<mx:SetProperty target="{tab_pages}" name="x" value="0"/>
			<mx:SetProperty target="{radiobutton1}" name="y" value="85"/>
			<mx:SetProperty target="{MinOrderQty}" name="x" value="425"/>
		</mx:State>
		<mx:State name="RigidSubstrate">
			<mx:RemoveChild target="{Basicsize}"/>
			<mx:RemoveChild target="{label5}"/>
			<mx:RemoveChild target="{label1}"/>
			<mx:RemoveChild target="{mWeight}"/>
			<mx:RemoveChild target="{textinput1}"/>
			<mx:RemoveChild target="{label4}"/>
			<mx:RemoveChild target="{sheetsPerCarton}"/>
			<mx:RemoveChild target="{label2}"/>
			<mx:SetProperty target="{label7}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrderarea')}"/>
			<mx:RemoveChild target="{rollweight}"/>
			<mx:SetProperty target="{label7}" name="x" value="1"/>
			<mx:SetProperty target="{label7}" name="width" value="122.5"/>
			<mx:SetProperty target="{label11}" name="x" value="246.5"/>
			<mx:SetProperty target="{minOrder}" name="width" value="107"/>
			<mx:SetProperty target="{minOrder}" name="x" value="131.5"/>
			<mx:SetProperty target="{minOrder}" name="y" value="153"/>
			<mx:SetProperty target="{label7}" name="y" value="157"/>
			<mx:SetProperty target="{qtybreaklabel}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.QtyBreaks')}"/>
			<mx:RemoveChild target="{label13}"/>
			<mx:RemoveChild target="{SheetsPerSet}"/>
			<mx:RemoveChild target="{chkCostIsInSets}"/>
			<mx:SetProperty target="{Cwt1}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt2}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt3}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt4}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt5}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM1}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM2}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM3}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM4}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM5}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt6}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM6}" name="enabled" value="false"/>
			<mx:AddChild relativeTo="{panel2}" position="lastChild">
				<mx:Label x="256" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.squarearea')}"/>
			</mx:AddChild>
			<mx:SetProperty target="{tab_pages}" name="x" value="0"/>
			<mx:SetProperty target="{tab_pages}" name="y" value="175"/>
		</mx:State>
		<mx:State name="LargeFormat">
			<mx:SetProperty target="{label3}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollWidth')}"/>
			<mx:RemoveChild target="{label2}"/>
			<mx:RemoveChild target="{sheetsPerCarton}"/>
			<mx:RemoveChild target="{mWeight}"/>
			<mx:RemoveChild target="{label1}"/>
			<mx:RemoveChild target="{label4}"/>
			<mx:RemoveChild target="{textinput1}"/>
			<mx:RemoveChild target="{Basicsize}"/>
			<mx:RemoveChild target="{label5}"/>
			<mx:RemoveChild target="{stkType}"/>
			<mx:RemoveChild target="{label6}"/>
			<mx:SetProperty target="{label7}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrderlength')}"/>
			<mx:RemoveChild target="{MinCutCharge}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{CutsPer100}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{NormalRunSize}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:SetProperty target="{BlankSheetqty1}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice1}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty2}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice2}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty3}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice3}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty4}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice4}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty5}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice5}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetPrice6}" name="enabled" value="false"/>
			<mx:SetProperty target="{BlankSheetqty6}" name="enabled" value="false"/>
			<mx:SetProperty target="{chkAutocalcblankstock}" name="enabled" value="false"/>
			<mx:SetProperty target="{cboDefaultPress}" name="enabled" value="false"/>
			<mx:SetProperty target="{button1}" name="enabled" value="false"/>
			<mx:RemoveChild target="{rollweight}"/>
			<mx:SetProperty target="{label7}" name="x" value="10"/>
			<mx:SetProperty target="{label7}" name="width" value="120.5"/>
			<mx:SetProperty target="{minOrder}" name="width" value="107"/>
			<mx:SetProperty target="{label11}" name="x" value="246.5"/>
			<mx:SetProperty target="{minOrder}" name="x" value="131.5"/>
			<mx:SetProperty target="{qtybreaklabel}" name="text" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AreaBreaks')}"/>
			<mx:RemoveChild target="{label13}"/>
			<mx:RemoveChild target="{SheetsPerSet}"/>
			<mx:RemoveChild target="{chkCostIsInSets}"/>
			<mx:SetProperty target="{Cwt1}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt2}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt3}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt4}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt5}" name="enabled" value="false"/>
			<mx:SetProperty target="{Cwt6}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM1}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM2}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM3}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM4}" name="enabled" value="false"/>
			<mx:SetProperty target="{ListPerM6}" name="enabled" value="false"/>
			<mx:AddChild relativeTo="{panel2}" position="lastChild">
				<mx:Label x="256" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.squarearea')}"/>
			</mx:AddChild>
			<mx:SetProperty target="{ListPerM5}" name="enabled" value="false"/>
			<mx:SetProperty target="{tab_pages}" name="x" value="0"/>
			<mx:SetProperty target="{tab_pages}" name="y" value="175"/>
		</mx:State>
	</mx:states>
	<mx:RemoteObject id="dataService" destination="dataService">
		<!--<mx:method name="getAllNameIDOnly" fault="handleFault(event)" result="handleLoadResult(event)"/>
		-->
		<mx:method name="getStockPicker" fault="handleFault(event)" result="handleLoadResult(event)"/>
		<mx:method name="getAccountPicker" fault="handleFault(event)" result="handleLoadAccountResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveResult(event)"/>
		<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteResult(event)"/>
		<mx:method name="getStockDefinition" fault="handleFault(event)" result="handleGetResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dataServicePreferencesStockDefinition" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPreferencesStockDefinitionResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dataServicePreferencesDefaultPress" destination="dataService">
		<mx:method name="getSingle" fault="handleFault(event)" result="handleLoadPreferencesDefaultPressResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dataServicePressDefinition" destination="dataService">
		<mx:method name="getById" fault="handleFault(event)" result="handleLoadPressDefinitionResult(event)"/>
	</mx:RemoteObject>
	<!--<mx:RemoteObject id="stockChangesDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockChangesResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockChangesResult(event)"/>
	</mx:RemoteObject>
	-->
	<mx:RemoteObject id="pressDefinitionDataService" destination="dataService">
		<mx:method name="getAllNameIDOnly" fault="handleFault(event)" result="handleLoadPressDefinition(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="copierDefinitionDataService" destination="dataService">
		<mx:method name="getAllNameIDOnly" fault="handleFault(event)" result="handleLoadCopierDefinition(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockGroupDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockGroup(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockGroupResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockClassDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockClass(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockClassResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="vendorDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadVendor(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveVendorResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockGradeDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockGrade(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockGradeResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockForestDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockForest(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockColorDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockColor(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockColorResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockTypeDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockType(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockTypeResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockGenericColorDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockGenericColor(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockGenericColorResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="stockFinishDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadStockFinish(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveStockFinishResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dimensionDataService" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadDimensionResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dataServiceSystemPreferences" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSystemPreferencesResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dataServicePreferencesStocks" destination="dataService">
		<mx:method name="getSingle" fault="handleFault(event)" result="handleLoadPreferencesStocks(event)"/>
	</mx:RemoteObject>

	<mx:StringValidator id="stockDefinitionNameValidator" source="{stockName}" property="text" minLength="2" required="true"/>

	<mx:Producer id="producer" destination="stockdefinitions"/>
	<mx:Consumer id="consumer" destination="stockdefinitions" message="messageHandler(event.message)"/>
	<mx:Consumer id="notification_consumer" destination="notifications" message="messageHandler(event.message)"/>
<mx:Script>                                   
<![CDATA[
	import com.efi.mdi.event.compare.MDICompareObjectEvent;
	import com.efi.mdi.event.window.WindowConfirmStatusEvent;
	import com.efi.mdi.view.window.MDIConfirmComponent;
	import com.efi.mdi.event.window.WindowSaveSuccessEvent;
	import mx.utils.ObjectUtil;
	import flash.net.registerClassAlias;
	import com.efi.mdi.view.window.MDIWindow;
	import com.efi.printsmith.common.components.CommonLoadComponent;
	import com.efi.printsmith.data.CommonInterest;
	import mx.resources.ResourceManager;
	import mx.collections.Sort;
	import mx.collections.SortField;
	import com.efi.printsmith.events.commandEvents.StockDefinitions.DeleteStockDefinitionEvent;
	import com.efi.printsmith.data.PressDefinition;
	import com.efi.printsmith.data.StockDefinition;
	import com.efi.printsmith.data.CopierDefinition;
	import com.efi.printsmith.data.StockChanges;
	import com.efi.printsmith.data.Account;
	import com.efi.printsmith.data.PreferencesSystem;
	import com.efi.printsmith.data.PreferencesDefaultPresses;

	import com.efi.printsmith.data.StockGroup;
	import com.efi.printsmith.data.StockGrade;
	import com.efi.printsmith.data.StockColors;
	import com.efi.printsmith.data.StockType;
	import com.efi.printsmith.data.GenericColors;
	import com.efi.printsmith.data.StockClass;
	import com.efi.printsmith.data.StockFinish;
	import com.efi.printsmith.data.StockForest;
	import com.efi.printsmith.data.Vendor;
	import com.efi.printsmith.data.Dimension;
		
	import com.efi.printsmith.data.PriceList;
	import com.efi.printsmith.data.PaperPrice;
	import com.efi.printsmith.data.PriceListBase;
	import com.efi.printsmith.data.PreferencesStocks;

	import com.efi.printsmith.events.StockPickerSelectEvent;
	import com.efi.printsmith.events.AccountPickerSelectEvent;
	import com.efi.printsmith.events.PriceListPickerSelectEvent;
	import com.efi.printsmith.events.ChargeDefinitionSelectEvent;
	
	import mx.controls.Alert;          
	import mx.controls.DateField;                               
	import mx.managers.PopUpManager;                                         
	import mx.containers.TitleWindow;                                         
	import mx.collections.ArrayCollection;                                         
	import mx.rpc.events.ResultEvent;                                         
	import mx.rpc.events.FaultEvent;
	import mx.rpc.*;  
	import mx.utils.StringUtil;                                       
	import mx.messaging.messages.AsyncMessage;
	import mx.messaging.messages.IMessage;
    import mx.printing.FlexPrintJob;
    import mx.printing.PrintAdvancedDataGrid;
    import mx.printing.PrintDataGrid;
    import mx.core.Application;
    import mx.validators.Validator;
    import mx.events.ValidationResultEvent;
    import mx.formatters.NumberBaseRoundType;
                   
	[Bindable]                                         
    private var enableSave:Boolean = true;

	[Bindable]                                         
    private var priceList:PaperPrice;  
	[Bindable]                                         
    private var systemPreferences:PreferencesSystem;
    [Bindable]
    private var preferencesStocks:PreferencesStocks;

	[Bindable]                                         
	private var StockDefinitionArray:ArrayCollection = new ArrayCollection();
	[Bindable]                                
	private var systemPreferencesArray:ArrayCollection = new ArrayCollection();
                         
	[Bindable]                                         
	private var stockDefinitions:StockDefinition;
	[Bindable] private var originalStockDefinitions:StockDefinition;
	[Bindable] private var loadComponent:CommonLoadComponent;
	
	/* [Bindable]                                         
	private var stockChange:StockChanges; */
	[Bindable]                                         
	private var account:Account;
	[Bindable]                                         
	private var accounts:ArrayCollection=new ArrayCollection();;
	[Bindable]
		private var charges:ArrayCollection=new ArrayCollection();

	[Bindable]
	private var dimensions:ArrayCollection=new ArrayCollection();

	[Bindable]                                
    private var stockChanges:ArrayCollection = new ArrayCollection();   

	[Bindable]
    private var stockColor:ArrayCollection = new ArrayCollection(); 
    [Bindable]
    private var stockType:ArrayCollection = new ArrayCollection();     
    [Bindable]
    private var stockClass:ArrayCollection = new ArrayCollection();   
	[Bindable]      
    private var stockGroup:ArrayCollection = new ArrayCollection();   
	[Bindable]      
    private var stockGrade:ArrayCollection = new ArrayCollection();   
	[Bindable]                                
    private var stockFinish:ArrayCollection = new ArrayCollection();   
	[Bindable] 
    private var stockForests:ArrayCollection = new ArrayCollection();   
	[Bindable]                                
    private var stockVendor:ArrayCollection = new ArrayCollection();   
	[Bindable]                                
	private var stockGenericColor:ArrayCollection = new ArrayCollection();   
	
	[Bindable]                                
	private var stockCoated:ArrayCollection = new ArrayCollection();   

	[Bindable]                                
	private var stockUom:ArrayCollection = new ArrayCollection();   
	
	[Bindable]                                
	private var stockUnits:ArrayCollection = new ArrayCollection();   
	
	[Bindable]
	private var pressDefinitions:ArrayCollection = new ArrayCollection();   
	[Bindable]
    private var preferencesStockDefinitions:ArrayCollection = new ArrayCollection();
    [Bindable]
    private var preferencesDefaultPress:PreferencesDefaultPresses = new PreferencesDefaultPresses();
	[Bindable]
	private var copierDefinitions:ArrayCollection = new ArrayCollection();  
	[Bindable]
	private var pressDefinition:PressDefinition = new PressDefinition(); 
	private var first:Boolean
    private var formIsValid:Boolean = false;
    
    private var focussedFormControl:DisplayObject;
                                                                         
	public function init():void {
		first = true;
		consumer.subscribe();
		notification_consumer.subscribe();
		
		var mdiWin:MDIWindow = Snowmass.getInstance().containerManager.getWindowWithChild(this);
		mdiWin.title = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.StockDefinitions');

		dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
		dataServiceSystemPreferences.getAll("PreferencesSystem");
		dataServicePreferencesDefaultPress.getSingle("PreferencesDefaultPresses");
		dataServicePreferencesStocks.getSingle("PreferencesStocks");
		stockDefinitions = new StockDefinition;
		stockDefinitions.charges = new ArrayCollection;
		stockDefinitions.stockChanges = new ArrayCollection;
		
		loadComponent = PopUpManager.createPopUp(this,CommonLoadComponent,true) as CommonLoadComponent;

	    loadUomArray();
	    loadUnitsArray();
	    
	    loadStockGroup();
	    loadStockClass();
	    loadStockVendor();
	    loadStockGrade();
	    loadStockColor();
	    loadStockType();
	    loadStockForest()
	    
	    loadStockGenericColor();
	    loadStockFinish();
	    loadPressDefinition();
	    loadCopierDefinition();
		loadDimensions();
		loadCoatedArray()
		
		
		var event:DeleteStockDefinitionEvent = new DeleteStockDefinitionEvent(button_delete, new mx.rpc.Responder(handleUIButtonEvent, handleUIButtonFault));
		event.dispatch();
		PanelCharges.title = StringUtil.substitute(PanelCharges.title,"10");
		registerClassAlias("com.efi.printsmith.data.StockDefinition",StockDefinition);
		originalStockDefinitions = ObjectUtil.copy(stockDefinitions) as StockDefinition;
	}      

	public function handleUIButtonEvent(evt:ResultEvent):void {
		evt.result.button.enabled = evt.result.enabled;
	}		
	private function handleUIButtonFault(ev:FaultEvent):void {  
	}
	
	public static function getCoatedArray():ArrayCollection	{
		var ac:ArrayCollection = new ArrayCollection();
		var none:Object = new Object;
		none.name = " ";
		ac.addItem(none);
		var one:Object = new Object;
		 one.name = "1";
		 ac.addItem(one);
		 var two:Object = new Object;
		 two.name = "2";
		 ac.addItem(two);
		 return ac;
	}
	private function loadCoatedArray():void{
		stockCoated = getCoatedArray();
		coated.selectedIndex = -1;
	}
	private function loadUnitsArray():void {
		
		var Envelope:Object = new Object;
		Envelope.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Envelope');
		stockUnits.addItem(Envelope);

		var Sheet:Object = new Object;
		Sheet.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetStock');
		stockUnits.addItem(Sheet);

		var Roll:Object = new Object;
		Roll.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollStock');
		stockUnits.addItem(Roll);

		var Large:Object = new Object;
		Large.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.LargeFormat');
		stockUnits.addItem(Large);

		var Rigid:Object = new Object;
		Rigid.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RigidSubstrate');
		stockUnits.addItem(Rigid);
	}

//	public function setPriceList(price:PriceListBase): void {
//	 	this.priceList = price as PaperPrice;
//	 	stockDefinitions.defaultPriceList = price as PaperPrice;
//	}
//	
	private function doPriceList():void {
	    var priceListPickerWindow:PriceListPicker = PriceListPicker(PopUpManager.createPopUp(this, PriceListPicker, true));
	    priceListPickerWindow.setStyle("borderAlpha", 0.9);
	    priceListPickerWindow.itemType = "PaperPrice";
	    priceListPickerWindow.addEventListener(PriceListPickerSelectEvent.CANCELSELECTPRICELIST, handlePriceListPickerCancel);
	    priceListPickerWindow.addEventListener(PriceListPickerSelectEvent.SELECTPRICELIST, handleSelectPriceList);

	    priceListPickerWindow.addEventListener(PriceListPickerSelectEvent.CLEARPRICELIST, handleClearPriceList);

	}
	
	private function handleClearPriceList(evt:PriceListPickerSelectEvent):void {
		stockDefinitions.defaultPriceList = null;
	}
	
    private function handleSelectPriceList(evt:PriceListPickerSelectEvent):void {
 		if (evt.priceList != null) {
			stockDefinitions.defaultPriceList = evt.priceList as PaperPrice;
		} else {
			stockDefinitions.defaultPriceList = null;
			Alert.show("Price List Picker returned a null price list", "Error");
		}     	
    }
    private function handlePriceListPickerCancel(evt:PriceListPickerSelectEvent):void {
    	
    }
	
	public static function getUomArray():ArrayCollection	{
		var ac:ArrayCollection = new ArrayCollection();
		
		var Caliper:Object = new Object;
		Caliper.name = ResourceManager.getInstance().getString(Snowmass.RESOURCE_BUNDLE, 'stockPickerCmd.Caliper')
		ac.addItem(Caliper);

		var Microns:Object = new Object;
		Microns.name = ResourceManager.getInstance().getString(Snowmass.RESOURCE_BUNDLE, 'stockPickerCmd.Microns')
		ac.addItem(Microns);

		var Points:Object = new Object;
		Points.name = ResourceManager.getInstance().getString(Snowmass.RESOURCE_BUNDLE, 'stockPickerCmd.Points')
		ac.addItem(Points);

		var Mils:Object = new Object;
		Mils.name = ResourceManager.getInstance().getString(Snowmass.RESOURCE_BUNDLE, 'stockPickerCmd.Mils')
		ac.addItem(Mils);

		var Thous:Object = new Object;
		Thous.name = ResourceManager.getInstance().getString(Snowmass.RESOURCE_BUNDLE, 'stockPickerCmd.Thous')
		ac.addItem(Thous);

		var Plies:Object = new Object;
		Plies.name = ResourceManager.getInstance().getString(Snowmass.RESOURCE_BUNDLE, 'stockPickerCmd.Plies')
		ac.addItem(Plies);

		var Millimeters:Object = new Object;
		Millimeters.name = ResourceManager.getInstance().getString(Snowmass.RESOURCE_BUNDLE, 'stockPickerCmd.Millimeters')
		ac.addItem(Millimeters);
		
		return ac;
	}
	private function loadUomArray():void {
		stockUom = getUomArray();
	}
	
	public function setStockDefinition(stockDefinition:StockDefinition):void
	{
		if (stockDefinition != null)
		{
			stockDefinitions = stockDefinition;
	    	stockDefinitions.charges = new ArrayCollection;
	    	stockDefinitions.stockChanges = new ArrayCollection;
			mapFromStockDefinitionData();
		} else {
	    	stockDefinitions = new StockDefinition();
	    	stockDefinitions.charges = new ArrayCollection;
	    	stockDefinitions.stockChanges = new ArrayCollection;
	    	mapFromStockDefinitionData();
		}
		
	   stockChanges = new ArrayCollection(); 
	    
	    stockChanges = stockDefinitions.stockChanges;
	  /*  loadStockGroup();
	    loadStockVendor();
	    loadStockGrade();
	    loadStockColor();
	    loadStockGenericColor();
	    loadStockFinish();
	    loadPressDefinition(); */
	    
		standardItemCheckEvent();
		doStockUnitChange(stockDefinitions.stockunit.toString());
		registerClassAlias("com.efi.printsmith.data.StockDefinition",StockDefinition);
		originalStockDefinitions = ObjectUtil.copy(stockDefinitions) as StockDefinition;
	}			
	                                                   	
	public function loadStockDefinitions():void { 
		dataService.getStockPicker();
	}
	
/* 	public function loadStockChanges():void {
		stockChangesDataService.getAll("StockChanges");
	} */
	public function loadStockType():void {
		stockTypeDataService.getAll("StockType");
	}
	private function loadStockForest():void{
		stockForestDataService.getAll("StockForest");
	}
	public function loadDimensions():void {
		dimensionDataService.getAll("Dimension");
	}
	
	public function loadPressDefinition():void {   
	    pressDefinitionDataService.getAllNameIDOnly("PressDefinition");
	}
	public function loadCopierDefinition():void {   
	    copierDefinitionDataService.getAllNameIDOnly("CopierDefinition");
	}
	public function loadStockGrade():void {   
	    stockGradeDataService.getAll("StockGrade");
	}

	public function loadStockGroup():void {   
	    stockGroupDataService.getAll("StockGroup");
	}
	public function loadStockClass():void {   
	    stockClassDataService.getAll("StockClass");
	}

	public function loadStockColor():void {   
	    stockColorDataService.getAll("StockColors");
	}

	public function loadStockGenericColor():void {   
	    stockGenericColorDataService.getAll("GenericColors");
	}

	public function loadStockVendor():void {   
	    vendorDataService.getAll("Vendor");
	}

	public function loadStockFinish():void {   
	    stockFinishDataService.getAll("StockFinish");
	}
					
	private function messageHandler(message:IMessage):void
	{
	}

	private function findItem(name:String, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (element != "")
				if (name == element.name) {
					return array.getItemIndex(element);
				}
		}
		return -1;
	}
	private function findItemID(id:int, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (id == element.id) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}

	private function findItemById(name:int, array:ArrayCollection):String {
		var retVal:String;
		retVal = "";
		if (name > -1) {
			retVal = array.getItemAt(name,0).name;
		}
		return retVal;
	}

	private function doGet():void {
		var stockPickerWindow:StockPicker = StockPicker(PopUpManager.createPopUp(this, StockPicker, true));
		stockPickerWindow.setStyle("borderAlpha", 0.9);
	    stockPickerWindow.formIsEmpty = true;
	   	stockPickerWindow.setStocksData(StockDefinitionArray,cloneAC(stockGroup), cloneAC(stockType), cloneAC(stockFinish), cloneAC(stockColor), cloneAC(stockGenericColor), cloneAC(stockGrade), cloneAC(stockVendor), cloneAC(stockUom), cloneAC(stockCoated));
	   	stockPickerWindow.setStockPref(preferencesStockDefinitions);
	    stockPickerWindow.addEventListener(StockPickerSelectEvent.CANCELSELECTSTOCK, handleStockPickerCancel);
	    stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTSTOCK, handleStockPickerSelect);
	    stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTNEWSTOCK, handleStockPickerNew);		
	}
	
	private function handleStockPickerCancel(evt:StockPickerSelectEvent):void {
		if (this.stockDefinitions == null) {
			this.stockDefinitions = new StockDefinition;
	    	stockDefinitions.charges = new ArrayCollection;
	    	stockDefinitions.stockChanges = new ArrayCollection;
	    	registerClassAlias("com.efi.printsmith.data.StockDefinition",StockDefinition);
			originalStockDefinitions = ObjectUtil.copy(stockDefinitions) as StockDefinition;
		}
	}
	
	private function handleStockPickerSelect(evt:StockPickerSelectEvent):void {
		/*var inputArguments:Array = new Array();
		inputArguments.push(evt.stockDefinition);
		var mDICompareObjectEvent:MDICompareObjectEvent = new MDICompareObjectEvent(MDICompareObjectEvent.MDI_COMPAREOBJECT,this,doSelectOperation,inputArguments);
		dispatchEvent(mDICompareObjectEvent); */
		doSelectOperation(evt.stockDefinition);
	}
	
	private function doSelectOperation(evtStockDefinition:StockDefinition):void {
		if (evtStockDefinition != null) {
			setStockDefinition(evtStockDefinition);
		} else {
			this.stockDefinitions = new StockDefinition();
	    	stockDefinitions.charges = new ArrayCollection;
	    	stockDefinitions.stockChanges = new ArrayCollection;
	    	registerClassAlias("com.efi.printsmith.data.StockDefinition",StockDefinition);
			originalStockDefinitions = ObjectUtil.copy(stockDefinitions) as StockDefinition;
			Alert.show("Stock Picker returned a null stock", "Error");
		}
	}
	
	private function handleStockPickerNew(evt:StockPickerSelectEvent):void {
		/* stockDefinitions = new StockDefinition();
	    stockDefinitions.charges = new ArrayCollection();
	   	stockDefinitions.stockChanges = new ArrayCollection();
	   	stockDefinitions.parentsize = new Dimension();
	   	stockDefinitions.normalRunSize = new Dimension(); */
	   	doNew();
	}
	
	private function doNext():void {
		var mDICompareObjectEvent:MDICompareObjectEvent = new MDICompareObjectEvent(MDICompareObjectEvent.MDI_COMPAREOBJECT,this,doNextOperation);
		dispatchEvent(mDICompareObjectEvent);
	}
	
	private function doNextOperation():void {
		var itemp:int;
		var tempStock:StockDefinition;
		itemp =	findItemID(stockDefinitions.id, StockDefinitionArray);
		//itemp = StockDefinitionArray.getItemAt(stockDefinitions); 
		itemp++;
		if (itemp == StockDefinitionArray.length){
			itemp = StockDefinitionArray.length - 1;
		}
		tempStock = StockDefinitionArray.getItemAt(itemp) as StockDefinition;
		dataService.getStockDefinition(tempStock.id );           
	}
	
	private function doPrev():void {
		var mDICompareObjectEvent:MDICompareObjectEvent = new MDICompareObjectEvent(MDICompareObjectEvent.MDI_COMPAREOBJECT,this,doPrevOperation);
		dispatchEvent(mDICompareObjectEvent);
	}
	
	private function doPrevOperation():void {              
	    var itemp:int;
	    var tempStock:StockDefinition;
	           
	   	itemp =	findItemID(stockDefinitions.id, StockDefinitionArray);
		//itemp = StockDefinitionArray.getItemIndex(stockDefinitions); 
		itemp--;
		if (itemp < 0){
			itemp = 0; 
		}
		tempStock = StockDefinitionArray.getItemAt(itemp) as StockDefinition;
		dataService.getStockDefinition(tempStock.id );
		                                       
	}                                           

	private function doSave():void {
		var name:String;
		name = stockName.text; 
		stockDefinitionNameValidator.validate(stockName,false)
		
		if (validate(stockDefinitionNameValidator) == true)
		{
			mapStockDefinitionData();
			
			if(stockDefinitions.pcwRecycledPercent>1){
				Alert.show("PCW Recycled value cannot be greater than 100");
				return;
			}
		//	this.enabled = false;
			dataService.addUpdate(stockDefinitions);
		//	stockChangesDataService.addUpdate(stockChange);
			standardItemCheckEvent();
			
		}else {
			showMessage(resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Unabletosavestockdef'), resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'importCmd.Save')  );
		}
	}
	
	private function doNew():void {
		var mDICompareObjectEvent:MDICompareObjectEvent = new MDICompareObjectEvent(MDICompareObjectEvent.MDI_COMPAREOBJECT,this,doNewOperation);
		dispatchEvent(mDICompareObjectEvent);
	}

	private function doNewOperation():void {
		
  	    stockDefinitions = new StockDefinition();
  	    Expires.text = "";
  	    stockDefinitions.parentsize = new Dimension();
    	stockDefinitions.charges = new ArrayCollection;
    	stockDefinitions.stockChanges = new ArrayCollection;
    	stockDefinitions.normalRunSize = new Dimension();
  	    doStockType();
  	    standardItemCheckEvent();
  	    registerClassAlias("com.efi.printsmith.data.StockDefinition",StockDefinition);
		originalStockDefinitions = ObjectUtil.copy(stockDefinitions) as StockDefinition;
  	    
  	 //     setStockDefinition(stockDefinitions);
  	    
	}       

	private function doDelete():void {
		dataService.deleteItem("StockDefinition", stockDefinitions.id);
		
	}

	private function doRevert():void {
	    dataService.getStockDefinition(stockDefinitions.id );
	                                              
	}


	private function doStockGroup() : void {
		var group:StockGroup;
		var result:Boolean;
		
		if (cboStockGroup.text != null && cboStockGroup.text != "" && cboStockGroup.selectedIndex == -1) {
			var item:int = findItem(cboStockGroup.text, stockGroup);
			if (item == -1) {
				group = new StockGroup();
				group.name = cboStockGroup.text;
				stockGroupDataService.addUpdate(group);
				stockDefinitions.stkgroup = group;
			}
			else {
				cboStockGroup.selectedItem = item;
			}
		}
	}
	private function doStockType() : void {
		var type:StockType;
		var result:Boolean;
		var dimSize:Dimension
	
		
		if (stkType.text != null && stkType.text != "" ) {
			var item:int = findItem(stkType.text, stockType);
			if (item == -1) {
				type = new StockType();
				type.name = stkType.text;
				stockTypeDataService.addUpdate(type);
				stockDefinitions.stktype = type;
				dimSize = type.size;
				Basicsize.text = dimSize.name
			}
			else {
				stkType.selectedIndex = item;
				type = stkType.selectedItem as StockType;
				dimSize = type.size;
				if(dimSize!=null){
					Basicsize.text = dimSize.name
				}
			
			}
			if(dimSize!=null){
				Basicsize.text = dimSize.name;
			}
		}
		calstockMWeight(null);
		
	}
	private function doStockClass() : void {
		var stockclass:StockClass;
		var result:Boolean;
		
		if (cbostockClass.text != null && cbostockClass.text != "" && cbostockClass.selectedIndex == -1) {
			var item:Object = cbostockClass.lastSelectedObj; //findItem(cbostockClass.text, stockClass);
			if ((item == null) || (item == "")) {
				stockclass = new StockClass();
			}
			else {
				stockclass = item as StockClass;
			}
			stockclass.name = cbostockClass.text;
			stockClassDataService.addUpdate(stockclass);
			stockDefinitions.stkclass = stockclass;
		}
	}


	private function doStockGenericColor() : void {
		var colors:GenericColors;
		var result:Boolean;
		
		if (cboGenericColor.text != null && cboGenericColor.text != "" && cboGenericColor.selectedIndex == -1) {
			var item:int = findItem(cboGenericColor.text, stockGenericColor);
			if (item == -1) {
				colors = new GenericColors();
				colors.name = cboGenericColor.text;
				stockGenericColorDataService.addUpdate(colors);
				stockDefinitions.genericColor = colors;
			}
			else {
				cboGenericColor.selectedItem = item;
				
			}
		}
	}

	private function doStockColor() : void {
		var colors:StockColors;
		var result:Boolean;
		
		if (cbostkcolor.text != null && cbostkcolor.text != "" && cbostkcolor.selectedIndex == -1) {
			var item:int = findItem(cbostkcolor.text, stockColor);
			if (item == -1) {
				colors = new StockColors();
				colors.name = cbostkcolor.text;
				stockColorDataService.addUpdate(colors);
				stockDefinitions.color = colors;
			}
			else {
				cbostkcolor.selectedItem = item;
			}
		}
	}

	private function doStockGrade() : void {
		var grades:StockGrade;
		var result:Boolean;
		
		if (cboStockGrade.text != null && cboStockGrade.text != "" && cboStockGrade.selectedIndex == -1) {
			var item:int = findItem(cboStockGrade.text, stockGrade);
			if (item == -1) {
				grades = new StockGrade();
				grades.name = cboStockGrade.text;
				stockGradeDataService.addUpdate(grades);
				stockDefinitions.grade = grades;
				cboStockGrade.text = grades.name;
				
			}
			else {
				cboStockGrade.selectedItem = item;
			}
		stockDefinitions.grade.name = cboStockGrade.text	
		}
	}


	private function doStockFinish() : void {
		var finishing:StockFinish;
		var result:Boolean;
		
		if (cboFinish.text != null && cboFinish.text != "" && cboFinish.selectedIndex == -1) {
			var item:int = findItem(cboFinish.text, stockFinish);
			if (item == -1) {
				finishing = new StockFinish();
				finishing.name = this.cboFinish.text;
				
				stockFinishDataService.addUpdate(finishing);
				stockDefinitions.finish = finishing;
			}
			else {
				cboFinish.selectedItem = item;
			}
		}
	}

	private function doStockVendor() : void {
		var stockvendor:Vendor;
		var result:Boolean;
		
		if (cboVendor.text != null && cboVendor.text != "" && cboVendor.selectedIndex == -1) {
			var item:int = findItem(cboVendor.text, stockFinish);
			if (item == -1) {
				stockvendor = new Vendor();
				stockvendor.name = this.cboVendor.text;
				
				vendorDataService.addUpdate(stockvendor);
				stockDefinitions.vendor = stockvendor;
			}
			else {
				cboVendor.selectedItem = item;
			}
		}
	}


	private function doPressDefinition() : void {
		var pressdef:PressDefinition;
		var result:Boolean;
		
		if (cboDefaultPress.text != null && cboDefaultPress.text != "" && cboDefaultPress.selectedIndex == -1) {
			var item:int = findItem(cboDefaultPress.text, pressDefinitions);
			if (item == -1) {
				cboDefaultPress.selectedItem = null;
			}
			else {
				cboDefaultPress.selectedItem = item;
			}
		}
	}
	private function doCopierDefinitionBW() : void {
		var copydef:CopierDefinition;
		var result:Boolean;
		
		if (defaultBWCopier.text != null && defaultBWCopier.text != "" && defaultBWCopier.selectedIndex == -1) {
			var item:int = findItem(defaultBWCopier.text, copierDefinitions);
			if (item == -1) {
				defaultBWCopier.selectedItem = null;
			}
			else {
				defaultBWCopier.selectedItem = item;
			}
		}
	}	
	private function doCopierDefinitionColor() : void {
		var copydef:CopierDefinition;
		var result:Boolean;
		
		if (defaultColorCopier.text != null && defaultColorCopier.text != "" && defaultColorCopier.selectedIndex == -1) {
			var item:int = findItem(defaultColorCopier.text, copierDefinitions);
			if (item == -1) {
				defaultColorCopier.selectedItem = null;
			}
			else {
				defaultColorCopier.selectedItem = item;
			}
		}
	}
	private function doCopierDefinitionLarge() : void {
		var copydef:CopierDefinition;
		var result:Boolean;
		
		if (defaultLargeCopier.text != null && defaultLargeCopier.text != "" && defaultLargeCopier.selectedIndex == -1) {
			var item:int = findItem(defaultLargeCopier.text, copierDefinitions);
			if (item == -1) {
				defaultLargeCopier.selectedItem = null;
			}
			else {
				defaultLargeCopier.selectedItem = item;
			}
		}
	}	
	private function doAddCharges():void {
		
		var chargePicker:ChargeDefinitionPicker=ChargeDefinitionPicker(PopUpManager.createPopUp(this, ChargeDefinitionPicker, true));
		chargePicker.charges = this.charges;
		chargePicker.setStyle("borderAlpha", 0.9);
		chargePicker.setTitle(resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'chargeListCmd.ChargeSelector'));
		chargePicker.addEventListener(ChargeDefinitionSelectEvent.CHARGEDEFINITIONCOMPLETE, handleChargeDefinitionComplete);
		chargePicker.addEventListener(ChargeDefinitionSelectEvent.CHARGEDEFINITIONCANCEL, handleChargeDefinitionCancel);

	}
	private function handleChargeDefinitionComplete(evt:ChargeDefinitionSelectEvent):void
	{
		this.stockDefinitions.charges=evt.chargeArray;
	}
	private function handleChargeDefinitionCancel(evt:ChargeDefinitionSelectEvent):void
	{
		
	}

	private function doShowHistory():void {
		
	}

	private function handleSaveResult(ev:ResultEvent):void {
		openConfirmationComponent(StringUtil.substitute(resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'CommonConfirmation.SAVE'),resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'genericPrefCmd.StockDefinitions')));
		openConfirmationComponent("The StockDefinition has been successfully saved");
		setStockDefinition(ev.result as StockDefinition);
		var windowSaveSuccessEvent:WindowSaveSuccessEvent = new WindowSaveSuccessEvent(WindowSaveSuccessEvent.WINDOW_SAVESUCCESS_STATUS,true);
		dispatchEvent(windowSaveSuccessEvent);
		/* doNew();
    	dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition"); */
    	
	}
	
	/* private function handleSaveStockChangesResult(ev:ResultEvent):void {
    	loadStockChanges();
	} */
	private function handleLoadStockForest(ev:ResultEvent):void{
		stockForests  = ev.result as ArrayCollection;
		forestMgmt.selectedIndex = -1;
	}
	private function handleLoadPreferencesStocks(ev:ResultEvent):void {
		preferencesStocks = ev.result as PreferencesStocks;
	}
	private function handleSaveStockGradeResult(ev:ResultEvent):void {
		stockDefinitions.grade = ev.result as StockGrade
    	loadStockGrade();
	}
	private function handleLoadPreferencesDefaultPressResult(ev:ResultEvent):void {
		this.preferencesDefaultPress = ev.result as PreferencesDefaultPresses;
	}
	private function handleSaveStockTypeResult(ev:ResultEvent):void {
    	loadStockType();
	}
	private function handleSaveStockGroupResult(ev:ResultEvent):void {
    	loadStockGroup();
	}
	private function handleSaveStockClassResult(ev:ResultEvent):void {
    	loadStockClass();
	}
	private function handleSaveStockColorResult(ev:ResultEvent):void {
    	loadStockColor();
	}
	private function handleSaveStockGenericColorResult(ev:ResultEvent):void {
    	loadStockGenericColor();
	}

	private function handleSaveVendorResult(ev:ResultEvent):void {
    	loadStockVendor();
	}
	private function handleSaveStockFinishResult(ev:ResultEvent):void {
    	loadStockFinish();
	}

	private function handleLoadResult(ev:ResultEvent):void {
	     StockDefinitionArray = ev.result as ArrayCollection;
	     if (first){
	     	first = false;
	     	doGet(); 
	     	
	     }
  		if(loadComponent) {
			loadComponent.close();
		}	

	}
	

	private function handleGetResult(ev:ResultEvent):void {
	
		//this.stockDefinitions = ev.result as StockDefinition;
		setStockDefinition(ev.result as StockDefinition)
	     
	}
	private function handleLoadPreferencesStockDefinitionResult(event:ResultEvent):void {
		preferencesStockDefinitions = event.result as ArrayCollection;
		loadStockDefinitions();
		
	}

	private function handleLoadSystemPreferencesResult(ev:ResultEvent):void {
		systemPreferencesArray = ev.result as ArrayCollection;
		if (systemPreferencesArray.length > 0)
		{
			systemPreferences = systemPreferencesArray.getItemAt(0) as PreferencesSystem;
			this.btnExport.enabled = systemPreferences.enablePricingSystem;
		}else{
			this.btnExport.enabled = false;

		}
	}	                                 
	                                 
	private function handleDeleteResult(ev:ResultEvent):void {
		openConfirmationComponent(StringUtil.substitute(resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'CommonConfirmation.DELETE'),resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'genericPrefCmd.StockDefinitions')));
		doNew();
	    loadStockDefinitions();
	}
	
	private function handleLoadDimensionResult(ev:ResultEvent):void {
		dimensions=ev.result as ArrayCollection;
		parentSize.selectedIndex = -1;
		NormalRunSize.selectedIndex = -1;
		
	}

	/* private function handleLoadStockChangesResult(ev:ResultEvent):void {
		 stockChanges = ev.result as ArrayCollection;
	} */
	
	private function handleLoadPressDefinition(ev:ResultEvent):void {
		 pressDefinitions = ev.result as ArrayCollection;
	}
	private function handleLoadCopierDefinition(ev:ResultEvent):void {
		 copierDefinitions = new ArrayCollection();
		 var copier:CopierDefinition = new CopierDefinition();
		 copierDefinitions.addItem(copier);
		 var resultArray:ArrayCollection = ev.result as ArrayCollection;
		 for (var i:int;i<resultArray.length;i++) {
		 	copier = resultArray.getItemAt(i) as CopierDefinition;
		 	copierDefinitions.addItem(copier);
		 }
	}
	private function handleLoadStockGroup(ev:ResultEvent):void {
		 stockGroup = ev.result as ArrayCollection;
	}
	private function handleLoadStockClass(ev:ResultEvent):void {
		stockClass = ev.result as ArrayCollection;
		 if ( stockDefinitions.stkclass != null){
		 	cbostockClass.selectedIndex = findItem(stockDefinitions.stkclass.name, stockClass);
		 } 
	}
	
	private function handleLoadVendor(ev:ResultEvent):void {
		 stockVendor = ev.result as ArrayCollection;
		 sortArray(stockVendor, "name");
		 if ( stockDefinitions.vendor != null){
		 	cboVendor.selectedIndex = findItem(stockDefinitions.vendor.name, stockVendor);
		 }
	}

	private function handleLoadStockGrade(ev:ResultEvent):void {
		 stockGrade = ev.result as ArrayCollection;
		 if ( stockDefinitions.grade != null){
		 	cboStockGrade.selectedIndex = findItem(stockDefinitions.grade.name, stockGrade);
		 }
	}
	
	private function handleLoadStockType(ev:ResultEvent):void {
		var type:StockType = new StockType;
		 stockType = ev.result as ArrayCollection;
		 type = stockType.getItemAt(0) as StockType;
		 if (type.size == null)
		 	Basicsize.text = "";
		 else
		 	Basicsize.text = type.size.name;	 
	}
	
	private function handleLoadStockColor(ev:ResultEvent):void {
		 stockColor = ev.result as ArrayCollection;
		 sortArray(stockColor, "name");
		 if ( stockDefinitions.color != null){
		 	cbostkcolor.selectedIndex = findItem(stockDefinitions.color.name, stockColor);
		 }
		 
	}
	
	
	private function handleLoadStockGenericColor(ev:ResultEvent):void {
		 stockGenericColor = ev.result as ArrayCollection;
		 sortArray(stockGenericColor, "name");
		 if ( stockDefinitions.genericColor != null){
		 	cboGenericColor.selectedIndex = findItem(stockDefinitions.genericColor.name, stockGenericColor);
		 }
	}
	
	private function handleLoadStockFinish(ev:ResultEvent):void {
		 stockFinish = ev.result as ArrayCollection;
		 sortArray(stockFinish, "name"); 
		  if ( stockDefinitions.finish != null){
		 	cboFinish.selectedIndex = findItem(stockDefinitions.finish.name, stockFinish);
		 }
	}
	     
	private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error");            

		if(loadComponent) {
			loadComponent.close();
		}	
                     
	}

	private function showMessage(message:String,title:String):void {  
		Alert.show(message, title, 0, null, null, null,4);                                 
	}
	
	private function standardItemCheckEvent():void {
		var checked:Boolean;
		checked = chkstandardItem.selected;
		OnHand.enabled = checked;
		Committed.enabled = checked;
		OnOrder.enabled = checked;
		TargetLevel.enabled = checked;
		ReOrderPoint.enabled = checked;
		MinOrderQty.enabled = checked;
		Expires.enabled = checked;
		BinLocation.enabled = checked;
		ShellItem.enabled = checked;
		chkEvenIncrements.enabled = checked;
		if (stockDefinitions.priceExpires == null) {
			stockDefinitions.priceExpires = new Date();
			PriceExpires.selectedDate = stockDefinitions.priceExpires;
		}
	}
	
	private function doAccount():void {
		
		dataService.getAccountPicker();
			
	}
	private function handleLoadAccountResult(event:ResultEvent):void {
		accounts = event.result as ArrayCollection;
		var accountPickerWindow:AccountPicker = AccountPicker(PopUpManager.createPopUp(this, AccountPicker, true));
	    accountPickerWindow.setStyle("borderAlpha", 0.9);
	    accountPickerWindow.formIsEmpty = true;
	    accountPickerWindow.setAccounts(accounts)
	    accountPickerWindow.prospect_boolean = false;
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.CANCELSELECTACCOUNT, handleAccountPickerCancel);
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.SELECTACCOUNT, handleAccountPickerSelect);
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.SELECTNEWACCOUNT, handleAccountPickerNew);	
		
	}
	private function handleAccountPickerCancel(evt:AccountPickerSelectEvent):void {
		this.setAccount(new Account());
	}
	
	private function handleAccountPickerSelect(evt:AccountPickerSelectEvent):void {
		if (evt.account != null) {
			this.setAccount(evt.account);
		} else {
			this.setAccount(new Account());
			Alert.show("Account Picker returned a null account", "Error");
		}
	}
	
	private function handleAccountPickerNew(evt:AccountPickerSelectEvent):void {
		this.account = new Account();
		
	}

	private function setAccount(account2:Account):void
	{
		this.account = account2;
		stockDefinitions.account = this.account;
		account_name.text  = stockDefinitions.account.title;
	}			
	
	private function mapFromStockDefinitionData():void {
		
		if (stockDefinitions.defaultPress != null)
	 		cboDefaultPress.selectedIndex = findItem(stockDefinitions.defaultPress.name, pressDefinitions);
	 	else
			cboDefaultPress.selectedIndex =-1 ;
		if (stockDefinitions.defaultBWCopier != null)
	 		defaultBWCopier.selectedIndex = findItem(stockDefinitions.defaultBWCopier.name, copierDefinitions);
	 	else
	 		defaultBWCopier.selectedIndex =-1;

		if (stockDefinitions.defaultColorCopier != null)
	 		defaultColorCopier.selectedIndex = findItem(stockDefinitions.defaultColorCopier.name, copierDefinitions);
	 	else
	 		defaultColorCopier.selectedIndex = -1;

		if (stockDefinitions.defaultLargeCopier != null)
	 		defaultLargeCopier.selectedIndex = findItem(stockDefinitions.defaultLargeCopier.name, copierDefinitions);
	 	else
	 		defaultLargeCopier.selectedIndex= -1;
		if ( stockDefinitions.coated != null)
			coated.selectedIndex = findItem(stockDefinitions.coated, stockCoated);
		else
			coated.selectedIndex = -1;
		
		if (stockDefinitions.stkgroup != null)
			cboStockGroup.selectedIndex = findItem(stockDefinitions.stkgroup.name, stockGroup);
		if (stockDefinitions.stkclass != null)
			cbostockClass.selectedIndex = findItem(stockDefinitions.stkclass.name,stockClass);

		if (stockDefinitions.color != null) 
			cbostkcolor.selectedIndex = findItem(stockDefinitions.color.name, stockColor);
		if (stockDefinitions.genericColor != null){
			cboGenericColor.selectedIndex = findItem(stockDefinitions.genericColor.name, stockGenericColor);
		}
				
		if (stockDefinitions.stktype != null)
			stkType.selectedIndex = findItem(stockDefinitions.stktype.name, stockType);
		if (stockDefinitions.vendor != null)
			cboVendor.selectedIndex = findItem(stockDefinitions.vendor.name, stockVendor);
		
		if (stockDefinitions.grade != null)
			cboStockGrade.selectedIndex = findItem(stockDefinitions.grade.name, stockGrade);
		if (stockDefinitions.forestManagement != null)
			forestMgmt.selectedIndex = findItem(stockDefinitions.forestManagement, stockForests);
		if (stockDefinitions.finish != null)
			cboFinish.selectedIndex = findItem(stockDefinitions.finish.name, stockFinish);
		//thickNess.text= Snowmass.getCurrencyFormatter(false,4).format(stockDefinitions.thickness);
		if (stockDefinitions.uom != null)
			cboUom.selectedIndex = findItem(stockDefinitions.uom,stockUom)
			if (cboUom.selectedIndex == -1)
				cboUom.selectedIndex = 0;
			
		if (stockDefinitions.stockunit != -1){
			stockUnit.selectedValue = findItemById(stockDefinitions.stockunit,stockUnits);
			doStockUnitChange(stockDefinitions.stockunit.toString())
			
		}
		if ( stockDefinitions.parentsize != null)
			parentSize.selectedIndex = findItem(stockDefinitions.parentsize.name, dimensions);
		if ( stockDefinitions.normalRunSize != null)
			NormalRunSize.selectedIndex = findItem(stockDefinitions.normalRunSize.name, dimensions);	
		if (stockDefinitions.priceExpires != null)
			PriceExpires.selectedDate =stockDefinitions.priceExpires;	
		if (stockDefinitions.expires != null)
			Expires.selectedDate = stockDefinitions.expires;	
			
			//// check box values here
			chkstandardItem.selected = stockDefinitions.standardItem;
			chkIsMetric.selected = stockDefinitions.isMetric;
			doMetric();
			chkAutocalcblankstock.selected = stockDefinitions.autoCalculateBlank;
			chkEvenIncrements.selected = stockDefinitions.evenIncrements;
			chkcharge4entiteorder.selected = stockDefinitions.noBrokenCarton;
			chkCostIsInSets.selected = stockDefinitions.isCostInSets;
			chkfscCertified.selected = stockDefinitions.fscCertified;
			chksfiCertified.selected = stockDefinitions.sfiCertified
			chkgreensealCertified.selected = stockDefinitions.greenSealCertified;
			chkExcludeFromWebUpdate.selected = stockDefinitions.excludeFromWeb;
			ShellItem.selected = stockDefinitions.shellItem;
			
			this.charges = stockDefinitions.charges;
			standardItemCheckEvent();
			stockChanges = stockDefinitions.stockChanges;
			
	}

	private function mapStockDefinitionData():void {
	 //stockDefinition.stockDefID = stockDefID;
	 	var percentvalue:String;
	 	var index:int;
	 //combobox and select box values
	 
	 if (stkType != null && stkType.selectedItem != null)
	 	stockDefinitions.stktype = stkType.selectedItem as StockType;
	 if (cboStockGrade != null && cboStockGrade.selectedItem != null) 
	 	stockDefinitions.grade = cboStockGrade.selectedItem as StockGrade;

	 if (cbostkcolor != null && cbostkcolor.selectedItem != null) 
	 	stockDefinitions.color = cbostkcolor.selectedItem as StockColors;

	 if (cboStockGroup != null && cboStockGroup.selectedItem != null) 
	 	stockDefinitions.stkgroup = cboStockGroup.selectedItem as StockGroup;
	 	
	  if (cbostockClass != null && cbostockClass.selectedItem != null) 
	 	stockDefinitions.stkclass = cbostockClass.selectedItem as StockClass;


	 if (cboFinish != null && cboFinish.selectedItem != null) 
	 	stockDefinitions.finish = cboFinish.selectedItem as StockFinish;

	 if (cboVendor != null && cboVendor.selectedItem != null) 
	 	stockDefinitions.vendor = cboVendor.selectedItem as Vendor;

	 if (cboGenericColor != null && cboGenericColor.selectedItem != null) 
	 	stockDefinitions.genericColor = cboGenericColor.selectedItem as GenericColors;
	 
	 if (cboUom != null && cboUom.selectedItem != null)
	 	stockDefinitions.uom = cboUom.selectedItem.name as String; 
	 
	 if (stockUnit != null && stockUnit.selectedValue != null)
	 	stockDefinitions.stockunit = findItem(stockUnit.selectedValue.toString(),stockUnits);
	 
	 if (cboDefaultPress != null && cboDefaultPress.selectedItem != null) 
	 	stockDefinitions.defaultPress = cboDefaultPress.selectedItem as PressDefinition;
	 	
	 if (defaultBWCopier != null && defaultBWCopier.selectedItem != null)
	    var copier:CopierDefinition = defaultBWCopier.selectedItem as CopierDefinition;
	    if (copier != null && copier.name == "")
	    	copier = null;
	 	stockDefinitions.defaultBWCopier = copier;
	 	
	 if (defaultColorCopier != null && defaultColorCopier.selectedItem != null)
		var copierDefinition:CopierDefinition = defaultColorCopier.selectedItem as CopierDefinition;
	    if (copierDefinition != null && copierDefinition.name == "")
	    	copierDefinition = null;
	 	stockDefinitions.defaultColorCopier = copierDefinition;
	 if (coated != null && coated.selectedItem != null)
	 	stockDefinitions.coated = coated.text	
	 if (defaultLargeCopier != null && defaultLargeCopier.selectedItem != null) 
	 	var copierDefinition:CopierDefinition = defaultLargeCopier.selectedItem as CopierDefinition;
	    if (copierDefinition != null && copierDefinition.name == "")
	    	copierDefinition = null;
	 	stockDefinitions.defaultLargeCopier = copierDefinition;	
	  if (forestMgmt != null && forestMgmt.selectedItem != null) 
	 	stockDefinitions.forestManagement = forestMgmt.text;
	 
	 index = pcwRecycled.text.indexOf('%',0);
	 if ( index == -1){
		pcwRecycled.text = pcwRecycled.text + '%';
		index = pcwRecycled.text.indexOf('%',0);
		}
	 percentvalue = pcwRecycled.text.substr(0,index);	
	 //check boxes
	 stockDefinitions.standardItem = chkstandardItem.selected;
	 stockDefinitions.isMetric = chkIsMetric.selected;
	 stockDefinitions.autoCalculateBlank = chkAutocalcblankstock.selected;
	 stockDefinitions.evenIncrements = chkEvenIncrements.selected;
	 stockDefinitions.noBrokenCarton = chkcharge4entiteorder.selected;
	 stockDefinitions.isCostInSets = chkCostIsInSets.selected;
	 stockDefinitions.fscCertified = chkfscCertified.selected;
	 stockDefinitions.sfiCertified = chksfiCertified.selected;
	 stockDefinitions.greenSealCertified = chkgreensealCertified.selected;
	 stockDefinitions.excludeFromWeb = chkExcludeFromWebUpdate.selected;
	 stockDefinitions.shellItem = ShellItem.selected;
	 stockDefinitions.priceExpires = PriceExpires.selectedDate;
	 stockDefinitions.expires = Expires.selectedDate;
	//text and textboxes
	 stockDefinitions.name = stockName.text;
	 if ( weight_edit.text == "")
	 	stockDefinitions.weight = 0;
	 else
	 	stockDefinitions.weight = parseFloat(weight_edit.text.replace(",",""));
	 //stockDefinitions.coated = coated.text; 
	 stockDefinitions.stocknumber = stockNumber.text;
	//stockDefinitions.basicsize = Basicsize.text;
	stockDefinitions.parentsize = parentSize.selectedItem as Dimension;
	// stockDefinitions.thickness = parseFloat(thickNess.text);
	 if ( mWeight.text == "")
	 	stockDefinitions.mweight = 0;
	 else
	 	stockDefinitions.mweight = parseFloat(mWeight.text.replace(",",""));
	 if ( rollweight.text == "")
	 	stockDefinitions.rollWeight = 0;
	 else
		 stockDefinitions.rollWeight = parseFloat(rollweight.text.replace(",",""));
	 stockDefinitions.sheetspercarton = parseInt(sheetsPerCarton.text.replace(",",""));
	 stockDefinitions.lotcount = parseInt(minOrder.text.replace(",",""));
	 stockDefinitions.cartonWeight = parseFloat(textinput1.text.replace(",",""));
	 stockDefinitions.comments = Comments.text;

	 stockDefinitions.costunits = parseInt(Costunits.text);
	 stockDefinitions.sheetsPerSet = parseInt(SheetsPerSet.text);
	 stockDefinitions.qtybreak1 = parseInt(Qtybreak1.text);
	 stockDefinitions.qtybreak2 = parseInt(Qtybreak2.text);
	 stockDefinitions.qtybreak3 = parseInt(Qtybreak3.text);
	 stockDefinitions.qtybreak4 = parseInt(Qtybreak4.text);
	 stockDefinitions.qtybreak5 = parseInt(Qtybreak5.text);
	 stockDefinitions.qtybreak6 = parseInt(Qtybreak6.text);	
	 stockDefinitions.cost1 = parseFloat(removeSymbols(Cost1.text,"$"));
	 stockDefinitions.cost2 = parseFloat(removeSymbols(Cost2.text,"$"));
	 stockDefinitions.cost3 = parseFloat(removeSymbols(Cost3.text,"$"));
	 stockDefinitions.cost4 = parseFloat(removeSymbols(Cost4.text,"$"));
	 stockDefinitions.cost5 = parseFloat(removeSymbols(Cost5.text,"$"));
	 stockDefinitions.cost6 = parseFloat(removeSymbols(Cost6.text,"$"));
	 stockDefinitions.cwt1 = parseFloat(Cwt1.text);
	 stockDefinitions.cwt2 = parseFloat(Cwt2.text);
	 stockDefinitions.cwt3 = parseFloat(Cwt3.text);
	 stockDefinitions.cwt4 = parseFloat(Cwt4.text);
	 stockDefinitions.cwt5 = parseFloat(Cwt5.text);
	 stockDefinitions.cwt6 = parseFloat(Cwt6.text);
	 stockDefinitions.markup1 = parseFloat(Markup1.text);
	 stockDefinitions.markup2 = parseFloat(Markup2.text);
	 stockDefinitions.markup3 = parseFloat(Markup3.text);
	 stockDefinitions.markup4 = parseFloat(Markup4.text);
	 stockDefinitions.markup5 = parseFloat(Markup5.text);
	 stockDefinitions.markup6 = parseFloat(Markup6.text);
	 stockDefinitions.listPerM1 = parseFloat(removeSymbols(ListPerM1.text,"$"));
	 stockDefinitions.listPerM2 = parseFloat(removeSymbols(ListPerM2.text,"$"));
	 stockDefinitions.listPerM3 = parseFloat(removeSymbols(ListPerM3.text,"$"));
	 stockDefinitions.listPerM4 = parseFloat(removeSymbols(ListPerM4.text,"$"));
	 stockDefinitions.listPerM5 = parseFloat(removeSymbols(ListPerM5.text,"$"));
	 stockDefinitions.listPerM6 = parseFloat(removeSymbols(ListPerM6.text,"$"));
	 stockDefinitions.pcwRecycledPercent = parseFloat(percentvalue) * .01 ;
	 stockDefinitions.normalRunSize = NormalRunSize.selectedItem as Dimension;
	 stockDefinitions.cutsPer100 = parseFloat(CutsPer100.text);
	 stockDefinitions.minCutCharge = parseFloat(MinCutCharge.text);
	// stockDefinitions.defaultPress = DefaultPress.text;
	 stockDefinitions.blankSheetqty1 = parseInt(removeSymbols(BlankSheetqty1.text,","));
	 stockDefinitions.blankSheetqty2 = parseInt(removeSymbols(BlankSheetqty2.text,","));
	 stockDefinitions.blankSheetqty3 = parseInt(removeSymbols(BlankSheetqty3.text,","));
	 stockDefinitions.blankSheetqty4 = parseInt(removeSymbols(BlankSheetqty4.text,","));
	 stockDefinitions.blankSheetqty5 = parseInt(removeSymbols(BlankSheetqty5.text,","));
	 stockDefinitions.blankSheetqty6 = parseInt(removeSymbols(BlankSheetqty6.text,","));
	 stockDefinitions.blankSheetPrice1 = parseFloat(removeSymbols(BlankSheetPrice1.text,"$"));
	 stockDefinitions.blankSheetPrice2 = parseFloat(removeSymbols(BlankSheetPrice2.text,"$"));
	 stockDefinitions.blankSheetPrice3 = parseFloat(removeSymbols(BlankSheetPrice3.text,"$"));
	 stockDefinitions.blankSheetPrice4 = parseFloat(removeSymbols(BlankSheetPrice4.text,"$"));
	 stockDefinitions.blankSheetPrice5 = parseFloat(removeSymbols(BlankSheetPrice5.text,"$"));
	 stockDefinitions.blankSheetPrice6 = parseFloat(removeSymbols(BlankSheetPrice6.text,"$"));
	 stockDefinitions.copier1PricePerSheet = parseFloat(removeSymbols(DefaultBW.text,"$"));
	 stockDefinitions.copier2PricePerSheet = parseFloat(removeSymbols(DefaultColor.text,"$"));
	 stockDefinitions.copier3PricePerSheet = parseFloat(removeSymbols(DefaultLargeFormat.text,"$"));
	 stockDefinitions.onHand = parseInt(OnHand.text);
	 stockDefinitions.committed = parseInt(Committed.text);
	 stockDefinitions.available = parseInt(Available.text);
	 stockDefinitions.onOrder = parseInt(OnOrder.text);
	 stockDefinitions.targetLevel = parseInt(TargetLevel.text);
	 stockDefinitions.reOrderPoint = parseInt(ReOrderPoint.text);
	 stockDefinitions.minOrderQty = parseInt(MinOrderQty.text.replace(",",""));
	 
	 stockDefinitions.binLocation = BinLocation.text;
	 if (stockDefinitions.account != null)
	 	stockDefinitions.account.title = account_name.text;
	}
	private function doShell():void{
		if (ShellItem.selected == true) 
			btnAssignCustomerAccount.enabled = true;
		else
			btnAssignCustomerAccount.enabled = false;
	}
	
	private function validateStockName(event:Event):void{
        focussedFormControl = event.target as DisplayObject;    
        formIsValid = true;            
        validate(stockDefinitionNameValidator);
	}   
	
	private function validate(validator:Validator):Boolean
	{                
        var validatorSource:DisplayObject = validator.source as DisplayObject;
     	var suppressEvents:Boolean = (validatorSource != focussedFormControl);
        var event:ValidationResultEvent = validator.validate(null, suppressEvents); 
        var currentControlIsValid:Boolean = (event.type == ValidationResultEvent.VALID);
		formIsValid = formIsValid && currentControlIsValid;
        return currentControlIsValid;
	}
	
	private function handleFocusOutEvent(evt:FocusEvent):void
	{
		if (evt.currentTarget == this.parentSize) {
			var text:String = Snowmass.formatSizeString(this.parentSize.text);
			this.parentSize.selectedItem = findItem(text, this.dimensions);
			this.parentSize.text = text;
			stockDefinitions.parentsize.name = parentSize.text;
			calstockMWeight(evt);
		} else if (evt.currentTarget == this.NormalRunSize) {
			var text:String = Snowmass.formatSizeString(this.NormalRunSize.text);
			this.NormalRunSize.selectedItem = findItem(text, this.dimensions);
			this.NormalRunSize.text = text;
			stockDefinitions.normalRunSize.name = NormalRunSize.text;
		}
		super.focusOutHandler(evt);
	}
	private function doStockUnitChange(item:String):void{
		
		if (item == "0"){
			this.currentState="Envelope"
			stockUnit.selectedValue="Envelope";
		}
		if (item == "1"){
			this.currentState="SheetStock"
			stockUnit.selectedValue="SheetStock";
		}
		if (item == "2"){
			this.currentState="RollStock"
			stockUnit.selectedValue="RollStock";
		}
		if (item == "3"){
			this.currentState="LargeFormat"	
			stockUnit.selectedValue="LargeFormat";			
		}
		if (item == "4"){
			this.currentState="RigidSubstrate"	
			stockUnit.selectedValue="RigidSubstrate";		
		}
		
	}

	
	
	private function doMetric():void{
	
		if ( chkIsMetric.selected){
			Basicsize.text = ""
			label5.visible = false;
			weight_label.text = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.GSM');
			cboUom.selectedIndex = findItem(resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Microns'), stockUom);
			cboUom.enabled = false;
			if (this.currentState =="SheetStock")
				calstockMWeight(null);
			if (this.currentState =="RigidSubstrate")
				calstockMWeight(null);
			if (this.currentState=="RollStock")
				Costunits.enabled = true;
			else
				Costunits.enabled = true;
			
			 
		}
		else{
			label5.visible =true;
			weight_label.text = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Weight');
			if ( stockDefinitions.stktype != null && stockDefinitions.stktype.size!=null)
				Basicsize.text = stockDefinitions.stktype.size.name
			cboUom.selectedIndex = findItem(stockDefinitions.uom,stockUom)
			cboUom.enabled = true;
			if (this.currentState=="RollStock")
				Costunits.enabled = false;
			else
				Costunits.enabled = true;
		}

	}
	private function doStockUnitChangeEvent(event:Event):void{
		var item:String = findItem(event.currentTarget.selectedValue,stockUnits).toString();
		
		if (item == "0"){
			this.currentState="Envelope"
			Costunits.text = '1000';
			
		}
		if (item == "1"){
			this.currentState="SheetStock"
			Costunits.text = '1000';
			
		}
		if (item == "2"){
			this.currentState="RollStock"
			Costunits.text = '100';
			
		}
		if (item == "3"){
			this.currentState="LargeFormat"	
			Costunits.text = '1';
				
		}
		if (item == "4"){
			this.currentState="RigidSubstrate"	
			Costunits.text = '1';
					
		}
		
	}
	private function UpdateAvailable(evt:FocusEvent):void {
		doRound(evt);
		Available.text = (parseInt(OnHand.text)-parseInt(Committed.text)).toString(); 
		 
	 	//stockDefinitions.available = stockDefinitions.onHand - stockDefinitions.committed;
	}
	public function getParentsizename(item:Object):String{
		var tmpItem:Dimension ;
		tmpItem = item as Dimension;
		
		if (tmpItem != null && tmpItem.name != null && tmpItem.name != "") {
			return tmpItem.name;
		} else {
			return "None";
		}
	}  
	private function addSymbol():void{
		var index:int;
	
		index = pcwRecycled.text.indexOf('%',0);
		if ( index == -1){
			pcwRecycled.text = pcwRecycled.text + '%';
		}
	} 
	
	private function calRollOrder(event:FocusEvent):void{
		doRound(event);
		var order:Number
		var weight:Number =0.0
		if (this.currentState=="RollStock"){
			order = parseInt(minOrder.text.replace(",",""));
			weight = parseFloat(rollweight.text.replace(",",""));
			if ( weight > 0){
				var temp:String;
				sheetsPerCarton.text = numberFormatter2.format(order /weight );
				
			}
		}
	}
	private function calCartonWeight(evnet:FocusEvent):void{
		var sheetsPer:Number;
		var carton_weight:Number;
		sheetsPer = parseFloat(sheetsPerCarton.text.replace(',',''));
		
		carton_weight = (sheetsPer/1000)* parseFloat(mWeight.text.replace(',',''));
		textinput1.text = Snowmass.getCurrencyFormatter(false,2).format(carton_weight);
		
	}
	private function calBasic():Number{
		var temp:Dimension;
		var metDim:Dimension;
		var stckType:StockType;
		var index:int;
		stckType = stkType.selectedItem  as StockType;
		if ( chkIsMetric.selected){
				temp = parentSize.selectedItem as Dimension;
				index= findItem('A0',dimensions)
			if( index != -1){
				metDim = dimensions.getItemAt(index) as Dimension;
				return (metDim.height * metDim.width);
			}
			else
				return(1000000.0)
		}else{
		
		 return (stckType.size.height * stckType.size.width);
		}
	
	}
	
	private function calstockMWeight(event:FocusEvent):void{
		var parent: Number;
		var basic:Number;
		var weight: Number;
		var pDim:Dimension;
		var tempFloat:Number;
		var stckType:StockType;
		pDim = parentSize.selectedItem as Dimension;
		if (pDim != null) {
			parent = pDim.width * pDim.height;
			stckType = stkType.selectedItem  as StockType;
			basic = calBasic();
			if (parent == 0 || basic == 0 || weight_edit.text == '0')
			{	// not enough data to calculate
				mWeight.text = '0';
			}
			else{
				if (chkIsMetric.selected){
					tempFloat = parseFloat(weight_edit.text.replace(',',''))
					weight = (( parent * tempFloat ) / basic);
					mWeight.text = Snowmass.getCurrencyFormatter(false, 4).format(weight);
				}else{
			
					weight = ((parent / basic)* parseFloat(weight_edit.text.replace(",",""))*2);
					mWeight.text =  Snowmass.getCurrencyFormatter(false, 2).format(weight);
				}
				calCartonWeight(event);
			}
 		}
	}
	
private function doRound(evt:FocusEvent):void{
		var temp:String;
		if (evt.currentTarget == sheetsPerCarton) {
			temp = numberFormatter.format(sheetsPerCarton.text)
			sheetsPerCarton.text = temp;
			calCartonWeight(evt);
		} else if (evt.currentTarget == minOrder) {
			temp = numberFormatter.format(minOrder.text)
			minOrder.text = temp;
		}else if (evt.currentTarget == SheetsPerSet) {
			temp = numberFormatter.format(SheetsPerSet.text)
			SheetsPerSet.text = temp;
		}else if (evt.currentTarget == Qtybreak6) {
			temp = numberFormatter.format(Qtybreak6.text)
			Qtybreak6.text = temp;
		}else if (evt.currentTarget == Qtybreak5) {
			temp = numberFormatter.format(Qtybreak5.text)
			Qtybreak5.text = temp;
		}else if (evt.currentTarget == Qtybreak4) {
			temp = numberFormatter.format(Qtybreak4.text)
			Qtybreak4.text = temp;
		}else if (evt.currentTarget == Qtybreak3) {
			temp = numberFormatter.format(Qtybreak3.text)
			Qtybreak3.text = temp;
		}else if (evt.currentTarget == Qtybreak2) {
			temp = numberFormatter.format(Qtybreak2.text)
			Qtybreak2.text = temp;
		}else if (evt.currentTarget == Qtybreak1) {
			temp = numberFormatter.format(Qtybreak1.text)
			Qtybreak1.text = temp;
		}else if (evt.currentTarget == BlankSheetqty6) {
			temp = numberFormatter.format(BlankSheetqty6.text)
			BlankSheetqty6.text = temp;
		}else if (evt.currentTarget == BlankSheetqty5) {
			temp = numberFormatter.format(BlankSheetqty5.text)
			BlankSheetqty5.text = temp;
		}else if (evt.currentTarget == BlankSheetqty4) {
			temp = numberFormatter.format(BlankSheetqty4.text)
			BlankSheetqty4.text = temp;
		}else if (evt.currentTarget == BlankSheetqty3) {
			temp = numberFormatter.format(BlankSheetqty3.text)
			BlankSheetqty3.text = temp;
		}else if (evt.currentTarget == BlankSheetqty2) {
			temp = numberFormatter.format(BlankSheetqty2.text)
			BlankSheetqty2.text = temp;
		}else if (evt.currentTarget == BlankSheetqty1) {
			temp = numberFormatter.format(BlankSheetqty1.text)
			BlankSheetqty1.text = temp;
		}else if (evt.currentTarget == OnOrder) {
			temp = numberFormatter.format(OnOrder.text)
			OnOrder.text = temp;
		}else if (evt.currentTarget == TargetLevel) {
			temp = numberFormatter.format(TargetLevel.text)
			TargetLevel.text = temp;
		}else if (evt.currentTarget == ReOrderPoint) {
			temp = numberFormatter.format(ReOrderPoint.text)
			ReOrderPoint.text = temp;
		}else if (evt.currentTarget == MinOrderQty) {
			temp = numberFormatter.format(MinOrderQty.text)
			MinOrderQty.text = temp;
		}else if (evt.currentTarget == OnHand) {
			temp = numberFormatter.format(OnHand.text)
			OnHand.text = temp;
		}
		
		super.focusOutHandler(evt);
		
		
	}
	
	private function autoCalculateBlankStock():void {
		if (this.chkAutocalcblankstock.selected == true) {
			if (this.Cost1.text.substr(0,1) == "$")
				var cost:Number = parseFloat(this.Cost1.text.substr(1));
			else
				var cost:Number = parseFloat(this.Cost1.text)
	
			this.BlankSheetPrice1.text = Snowmass.getCurrencyFormatter(true,3).format(((cost * preferencesStocks.blankMarkup1) / parseInt(this.Costunits.text)));
			this.BlankSheetPrice2.text = Snowmass.getCurrencyFormatter(true,3).format(((cost * preferencesStocks.blankMarkup2) / parseInt(this.Costunits.text)));
			this.BlankSheetPrice3.text = Snowmass.getCurrencyFormatter(true,3).format(((cost * preferencesStocks.blankMarkup3) / parseInt(this.Costunits.text)));
			this.BlankSheetPrice4.text = Snowmass.getCurrencyFormatter(true,3).format(((cost * preferencesStocks.blankMarkup4) / parseInt(this.Costunits.text)));
			this.BlankSheetPrice5.text = Snowmass.getCurrencyFormatter(true,3).format(((cost * preferencesStocks.blankMarkup5) / parseInt(this.Costunits.text)));
			this.BlankSheetPrice6.text = Snowmass.getCurrencyFormatter(true,3).format(((cost * preferencesStocks.blankMarkup6) / parseInt(this.Costunits.text)));
		}
	}
	
	private function convertoCaliper():void{
		var temp:Object;
		temp = cboUom.selectedItem;
		var tempFloat:Number = 0.0;
		tempFloat = parseFloat(thickNess.text)
		switch (temp.name){
			case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Points'):
			case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Mils'):
			case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Thous'):{
				 stockDefinitions.thickness = tempFloat / 1000;
				
				break;
			}
			case  resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Microns'):{
				stockDefinitions.thickness = ((tempFloat / 1000.0) / 25.4)
				break;
				
			}
			case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Plies'):{
				stockDefinitions.thickness  = (((tempFloat /1000.0) + 6.0)* 3.0); 
					break;
			}
			case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Millimeters'):{
				stockDefinitions.thickness  =(tempFloat / 25.4)
				break;
			}
			case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Caliper'):{
				stockDefinitions.thickness =tempFloat;
				break;
		}
	}
	}
	
	
	
	
	private function ConvertThickness():void{
		var temp:Object;
		if (cboUom.selectedItem != ""){
		
		
			temp = cboUom.selectedItem;
			var tempFloat:Number = 0.0;
			if ( stockDefinitions.thickness == 0){
				tempFloat = parseFloat(thickNess.text)
				
			}	
			else
				tempFloat= stockDefinitions.thickness;
			switch(temp.name){
				case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Caliper'):{
					thickNess.text = Snowmass.getCurrencyFormatter(false,4).format(stockDefinitions.thickness)
					break;
				}
				case  resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Microns'):{
					
					thickNess.text = Snowmass.getCurrencyFormatter(false,4).format(((tempFloat * 1000.0) * 25.4))
					
					break;
					
				}
				case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Points'):{
					thickNess.text = Snowmass.getCurrencyFormatter(false,4).format((tempFloat * 1000.0));
					break;
				}
				case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Mils'):{
					thickNess.text = Snowmass.getCurrencyFormatter(false,4).format((tempFloat * 1000.0));
					break;
				}
				case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Thous'):{
					thickNess.text = Snowmass.getCurrencyFormatter(false,4).format((tempFloat * 1000.0));
					break;
				}
				case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Plies'):{
					if ( tempFloat < .009){
						tempFloat = .009
					}
					thickNess.text  = Snowmass.getCurrencyFormatter(false,4).format((((tempFloat * 1000.0) - 6.0) / 3.0));  
					break;
				}
				case resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'menu_303.Millimeters'):{
					thickNess.text  = Snowmass.getCurrencyFormatter(false,4).format((tempFloat * 25.4))
					break;
				}
					
			}
		}
	}
	private function doPriceListButton():void {
	    var pressDefinition:PressDefinition = cboDefaultPress.selectedItem as PressDefinition;
	    if (pressDefinition == null)
	    	pressDefinition = this.preferencesDefaultPress.defaultSheetFedPress;
	    dataServicePressDefinition.getById("PressDefinition", pressDefinition.id);
	}
	private function handleLoadPressDefinitionResult(ev:ResultEvent):void {
		this.pressDefinition = ev.result as PressDefinition;
		var titleWindow:ViewPriceList = ViewPriceList(PopUpManager.createPopUp(this, ViewPriceList, true));
	    titleWindow.setPressStockDefinition(this.stockDefinitions as StockDefinition,this.pressDefinition as PressDefinition);
	}
	
	public function getOriginalObject():ArrayCollection {
		var originalList:ArrayCollection = new ArrayCollection();
		if(originalStockDefinitions!=null){
			if(originalStockDefinitions.priceExpires!=null){
				originalStockDefinitions.priceExpires = scrubTimeValue(originalStockDefinitions.priceExpires);
			}
			if(originalStockDefinitions.expires!=null){
				originalStockDefinitions.expires = scrubTimeValue(originalStockDefinitions.expires);
			}
			
			
		}
		originalList.addItem(originalStockDefinitions);
		return originalList;
	}
		
	public function getUpdatedObject():ArrayCollection {
		var updatedList:ArrayCollection = new ArrayCollection();
		updatedList.addItem(stockDefinitions);
		return updatedList;
	}
	
	public function getConfirmationText():String {
		return "\n"+resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'changePriceCmd.StockDefinitions');
	}
	
	public function onClose():void {
		if(stockDefinitions!=null){
			mapStockDefinitionData();
		}	
	}
	
	public function onSave():void {
		doSave()
	}
	
	public function onDontSave():void {
		
	}
	
	public function onCancel():void {
		
	}

]]>
                             
</mx:Script>	
<vo:StockDefinition id="stock"/>                           
<mx:NumberFormatter id="numberFormatter" rounding="nearest" precision="0" />
<mx:NumberFormatter id="numberFormatter2" rounding="nearest" precision="1" />
	<mx:RadioButtonGroup id="PaperStyle"/>
	<mx:Label x="10" y="63" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Group')}" width="108" textAlign="right"/>
	<mx:Label x="263" y="66" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Class')}" width="109" textAlign="right"/>
	<mx:ComboBox id="cboStockGroup" x="126" y="61" dataProvider="{stockGroup}"  labelField="name" focusOut="doStockGroup()" width="116"/>
	<comp:EditableComboBox x="380" y="64" width="105" id="cbostockClass" dataProvider="{stockClass}"  labelField="name" focusOut="doStockClass()" />
	<mx:CheckBox x="493" y="67" id="chkIsMetric" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Metric')}" width="135" change="doMetric();"/>
	<mx:Label x="10" y="87" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Name')}" width="108" textAlign="right"/>
	<mx:Label x="10" y="111" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Color')}" width="108" textAlign="right"/>
	<mx:ComboBox  x="126" y="109" width="138" id="cbostkcolor" dataProvider="{stockColor}" labelField="name" focusOut="doStockColor()"/>
	<mx:TextInput x="126" y="85" width="160" id="stockName" text="{stockDefinitions.name}" change="validateStockName(event);"/>
	<mx:ComboBox  x="380" y="88" width="105" id ="cboFinish" dataProvider="{stockFinish}" labelField="name" focusOut="doStockFinish()"/>

	<mx:Label x="310" y="90" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Finish')}" width="62" textAlign="right"/>
	<mx:Label x="10" y="135" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.GenericColor')}" width="108" textAlign="right"/>
	<mx:Label x="272" y="114" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Grade')}" width="100" textAlign="right"/>
	<mx:Label x="493" y="92" id="weight_label" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Weight')}" width="67.5" textAlign="right"/>
	<mx:Label x="493" y="116" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Coated')}" width="67.5" textAlign="right"/>

	<mx:ComboBox  x="126" y="133" width="93" id="cboGenericColor" dataProvider="{stockGenericColor}" labelField="name" focusOut="doStockGenericColor()"/>
	<mx:ComboBox  x="380" y="112" width="105" id="cboStockGrade" dataProvider="{stockGrade}"  labelField="name" focusOut="doStockGrade()"/>
	<mx:TextInput x="568.5" y="90" width="55" id="weight_edit" text="{stockDefinitions.weight}" focusOut="calstockMWeight(event);"/>
	<mx:ComboBox x="568.5" y="114" width="55" id="coated" dataProvider="{stockCoated}" labelField="name"/>

	<mx:RadioButtonGroup id="stockUnit" change="doStockUnitChangeEvent(event)"/>
	<mx:RadioButton x="636" y="67" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Envelope')}" groupName="stockUnit" width="138" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Envelope')}"/>
	<mx:RadioButton x="636" y="85" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetStock')}" groupName="stockUnit" width="138" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetStock')}" id="radiobutton1"/>
	<mx:RadioButton x="636" y="103" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollStock')}" groupName="stockUnit"  value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RollStock')}"/>
	<mx:RadioButton x="636" y="122" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.LargeFormat')}" groupName="stockUnit" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.LargeFormat')}" id="radiobutton2"/>
	<mx:RadioButton x="636" y="140" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RigidSubstrate')}" groupName="stockUnit" width="138" value="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.RigidSubstrate')}"/>

	<mx:TabNavigator x="0" y="175" width="953" height="585" id="tab_pages" selectedIndex="0" creationPolicy="all">
		<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SpecificationandPric')}" id="page_specification_and_pricing" width="100%" height="100%">
			<mx:Panel x="14.5" y="0" width="926.5" height="225" layout="absolute" dropShadowEnabled="false">
				<mx:Label x="0" y="7" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Vendor')}" textAlign="right" width="98.5"/>
				<mx:Label x="1" y="35" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.StockType')}" textAlign="right" width="97.5" id="label6"/>
				<mx:Label x="276" y="7" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Stock')}" textAlign="right" width="72.5"/>
				<mx:Label x="0" y="62" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ParentSize')}" textAlign="right" width="98.5" id="label3"/>
				<mx:Label x="246.5" y="62" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Thickness')}" textAlign="right" width="85.5" id="label11"/>
				<mx:Label x="263" y="33" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.BasicSize')}" textAlign="right" width="85.5" id="label5"/>
				<mx:Label x="0" y="118" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetsCarton')}" textAlign="right" width="98.5" id="label2"/>
				<mx:Label x="261" y="91" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MWeight')}" textAlign="right" width="106.5" id="label1"/>
				<mx:Label x="0" y="146" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrder')}" textAlign="right" width="98.5" id="label7"/>
				<mx:Label x="261" y="118" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.CartonWeight')}" textAlign="right" width="106.5" id="label4"/>
				<mx:CheckBox x="301" y="144" id="chkcharge4entiteorder" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ChargeCustomerforEnt')}" width="214"/>

				<mx:ComboBox x="106.5" y="5" width="150.5" id="cboVendor" dataProvider="{stockVendor}" labelField="name" focusOut="doStockVendor()"/>
				<mx:ComboBox x="106.5" y="33" id="stkType" width="150.5" dataProvider="{stockType}" labelField="name" change="doStockType()" />
				<mx:TextInput x="356.5" y="5" width="93" id="stockNumber" text="{stockDefinitions.stocknumber}" height="22"/>
				<fc:AutoComplete x="106.5" y="60" width="132" 
					  id="parentSize"
					  dataProvider="{dimensions}"
					  labelFunction="getParentsizename"
					   focusOut="handleFocusOutEvent(event)"
				/>
				<mx:TextInput  restrict="0-9\." x="337" y="60" width="122.5" id="thickNess" focusOut="convertoCaliper();"/>
				<mx:TextInput  restrict="0-9\." x="106.5" y="116" width="107" id="sheetsPerCarton" text="{stockDefinitions.sheetspercarton}" focusOut="doRound(event)"/>
				<mx:TextInput  restrict="0-9\." x="375.5" y="89" width="89.5" id="mWeight" text="{stockDefinitions.mweight}"/>
				<mx:TextInput  restrict="0-9\." x="375.5" y="89" width="89.5" id="rollweight" focusOut="calRollOrder(event);" text="{stockDefinitions.rollWeight}" />
				<mx:TextInput restrict="0-9\." x="106.5" y="144" width="137" id="minOrder" text="{stockDefinitions.lotcount}" focusOut="calRollOrder(event);" />
				<mx:TextInput x="375.5" y="116" width="64.5" id="textinput1" text="{stockDefinitions.cartonWeight}"/>
				<mx:Text x="356.5" y="33" id="Basicsize" text="{stockDefinitions.stktype.size.name}" width="134" height="22"/>
				<mx:ComboBox x="475" y="60" id="cboUom"  change="ConvertThickness()"  dataProvider="{stockUom}" width="125.5" labelField="name"/>
				<mx:Panel x="667" y="-2" width="229.5" height="168" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ChainofCustody')}" dropShadowEnabled="false" id="panel1">
					<mx:Label x="26.25" y="1" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ForestManagement')}"/>
					<mx:Label x="10" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PCWRecycled')}" width="97.75" textAlign="right" id="label12"/>
					<mx:CheckBox x="10" y="65" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.FSCCertified')}" id="chkfscCertified" selected="{stockDefinitions.fscCertified}"/>
					<mx:CheckBox x="10" y="84" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SFICertified')}" id="chksfiCertified" selected="{stockDefinitions.sfiCertified}"/>
					<mx:CheckBox x="10" y="104" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.GreenSealCertified')}" id="chkgreensealCertified" selected="{stockDefinitions.greenSealCertified}"/>

					<mx:ComboBox x="10" y="20" width="153.5" labelField="name" id="forestMgmt" dataProvider="{stockForests}"/>
					
					<mx:TextInput restrict="0-9" x="115.75" y="44" width="70" focusOut="addSymbol()" id="pcwRecycled" text="{stockDefinitions.pcwRecycledPercent * 100}%"/>

				</mx:Panel>
				<mx:CheckBox x="457.5" y="5" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Excludefromwebupdate')}" id="chkExcludeFromWebUpdate"/>
			</mx:Panel>
			<mx:Panel x="14.5" y="233" width="746.5" height="200" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.QtyAdjustments')}" dropShadowEnabled="false" id="panel2">
				<mx:Label x="105" y="32" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.QtyBreaks')}" width="112" textAlign="right" id="qtybreaklabel"/>
				<mx:Label x="105" y="52" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Cost')}" width="112" textAlign="right"/>
				<mx:Label x="105" y="72" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.CWT')}" width="112" textAlign="right"/>
				<mx:Label x="105" y="93" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Markup')}" width="112" textAlign="right"/>
				<mx:Label x="105" y="114" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ListM')}" width="112" textAlign="right"/>
				<mx:Label x="54" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.CostingUnits')}" width="95" textAlign="right"/>
				<mx:Label x="252" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SheetsSet')}" width="92" textAlign="right" id="label13"/>
				<mx:Label x="19" y="137" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PriceExpires')}" width="127" textAlign="right"/>
				<mx:CheckBox x="450" y="2" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.CostisinSets')}" id="chkCostIsInSets" width="194" enabled="{parseInt(SheetsPerSet.text) > 1}"/>

				<mx:TextInput restrict="0-9\." x="225" y="30" width="66" id="Qtybreak1" text="{stockDefinitions.qtybreak1}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="225" y="50" width="66" id="Cost1" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.cost1)}"/>
				<mx:TextInput restrict="0-9\." x="225" y="70" width="66" id="Cwt1" text="{Snowmass.getCurrencyFormatter(false, 2).format(stockDefinitions.cwt1)}"/>
				<mx:TextInput restrict="0-9\." x="225" y="91" width="66" id="Markup1" text="{stockDefinitions.markup1}"/>
				<mx:TextInput restrict="0-9\." x="225" y="112" width="66" id="ListPerM1" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.listPerM1)}"/>
				<mx:TextInput restrict="0-9\." x="288" y="30" width="66" id="Qtybreak2" text="{stockDefinitions.qtybreak2}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\."  x="288" y="50" width="66" id="Cost2" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.cost2)}"/>
				<mx:TextInput restrict="0-9\." x="288" y="70" width="66" id="Cwt2" text="{Snowmass.getCurrencyFormatter(false, 2).format(stockDefinitions.cwt2)}"/>
				<mx:TextInput restrict="0-9\." x="288" y="91" width="66" id="Markup2" text="{stockDefinitions.markup2}"/>
				<mx:TextInput restrict="0-9\." x="288" y="112" width="66" id="ListPerM2" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.listPerM2)}"/>
				<mx:TextInput restrict="0-9\." x="351" y="30" width="66" id="Qtybreak3" text="{stockDefinitions.qtybreak3}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="351" y="50" width="66" id="Cost3" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.cost3)}"/>
				<mx:TextInput restrict="0-9\." x="351" y="70" width="66" id="Cwt3" text="{Snowmass.getCurrencyFormatter(false, 2).format(stockDefinitions.cwt3)}"/>
				<mx:TextInput restrict="0-9\." x="351" y="91" width="66" id="Markup3" text="{stockDefinitions.markup3}"/>
				<mx:TextInput restrict="0-9\." x="351" y="112" width="66" id="ListPerM3" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.listPerM3)}"/>
				<mx:TextInput restrict="0-9\." x="412.5" y="30" width="66" id="Qtybreak4" text="{stockDefinitions.qtybreak4}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="412.5" y="50" width="66" id="Cost4" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.cost4)}"/>
				<mx:TextInput restrict="0-9\." x="412.5" y="70" width="66" id="Cwt4" text="{Snowmass.getCurrencyFormatter(false, 2).format(stockDefinitions.cwt4)}"/>
				<mx:TextInput restrict="0-9\." x="412.5" y="91" width="66" id="Markup4" text="{stockDefinitions.markup4}"/>
				<mx:TextInput restrict="0-9\." x="412.5" y="112" width="66" id="ListPerM4" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.listPerM4)}"/>
				<mx:TextInput restrict="0-9\." x="476" y="30" width="66" id="Qtybreak5" text="{stockDefinitions.qtybreak5}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="476" y="50" width="66" id="Cost5" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.cost5)}"/>
				<mx:TextInput restrict="0-9\." x="476" y="70" width="66" id="Cwt5" text="{Snowmass.getCurrencyFormatter(false, 2).format(stockDefinitions.cwt5)}"/>
				<mx:TextInput restrict="0-9\." x="476" y="91" width="66" id="Markup5" text="{stockDefinitions.markup5}"/>
				<mx:TextInput restrict="0-9\." x="476" y="112" width="66" id="ListPerM5" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.listPerM5)}"/>
				<mx:TextInput restrict="0-9\." x="540" y="30" width="66" id="Qtybreak6" text="{stockDefinitions.qtybreak6}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="540" y="50" width="66" id="Cost6" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.cost6)}"/>
				<mx:TextInput restrict="0-9\." x="540" y="70" width="66" id="Cwt6" text="{Snowmass.getCurrencyFormatter(false, 2).format(stockDefinitions.cwt6)}"/>
				<mx:TextInput restrict="0-9\." x="540" y="91" width="66" id="Markup6" text="{stockDefinitions.markup6}"/>
				<mx:TextInput restrict="0-9\." x="540" y="112" width="66" id="ListPerM6" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.listPerM6)}"/>
				<mx:TextInput restrict="0-9\." x="157" y="2" width="87" id="Costunits" text="{stockDefinitions.costunits}"/>
				<mx:TextInput restrict="0-9\." x="352" y="2" width="81" id="SheetsPerSet" text="{stockDefinitions.sheetsPerSet}" focusOut="doRound(event);"/>
				<mx:DateField restrict="0-9\." x="154" y="135" id="PriceExpires" editable="true" text="{stockDefinitions.priceExpires}"/>
			</mx:Panel>
			<mx:Panel x="14.5" y="441" width="746.5" height="93" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Comment')}" dropShadowEnabled="false">
				<mx:TextArea x="0" y="0" width="665.5" height="53" id="Comments" text="{stockDefinitions.comments}"/>
			</mx:Panel>
		</mx:Canvas>
		<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PricingOptions')}" id="page_pricingoptions" width="100%" height="100%">
			<mx:Panel x="10" y="38" width="295" height="78" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SelectPressforPrinti')}" dropShadowEnabled="false">
				<mx:Label x="0" y="11" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Press')}" textAlign="right" width="44"/>
				<mx:ComboBox  x="52" y="7" width="182" id="cboDefaultPress" dataProvider="{pressDefinitions}" labelField="name" change="doPressDefinition()"/>
			</mx:Panel>
			<mx:Panel x="313" y="38" width="387" height="78" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ScheduleforListPrici')}" dropShadowEnabled="false">
				<mx:Button x="10" y="7" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.SelectSchedule')}" click="doPriceList();" width="126" id="button1"/>
				<mx:Text x="144" y="9" text="{stockDefinitions.defaultPriceList.name}" width="213" id="defaultPriceList" height="20"/>
			</mx:Panel>
			<fc:AutoComplete x="133" y="9" width="85" 
				  id="NormalRunSize"
				  dataProvider="{dimensions}"
				  labelFunction="getParentsizename"
				 focusOut="handleFocusOutEvent(event)"
			/>
			<mx:TextInput restrict="0-9\." x="313" y="9" width="50" id="CutsPer100" text="{stockDefinitions.cutsPer100}"/>
			<mx:TextInput restrict="0-9\." x="508" y="9" width="50" id="MinCutCharge" text="{stockDefinitions.minCutCharge}"/>

			<mx:Label x="10" y="11" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.NormalRunSize')}" width="115" textAlign="right" id="label10"/>
			<mx:Label x="226" y="11" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Cut100')}" width="79" textAlign="right" id="label9"/>
			<mx:Label x="387" y="11" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinCutChg')}" width="113" textAlign="right" id="label8"/>

			<mx:Panel x="10" y="125" width="690" height="108" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.PricingforBlankSheet')}" dropShadowEnabled="false">
				<mx:TextInput restrict="0-9\."  x="68" y="2" width="80" id="BlankSheetqty1" text="{stockDefinitions.blankSheetqty1}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="146" y="2" width="80" id="BlankSheetqty2" text="{stockDefinitions.blankSheetqty2}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\."  x="224" y="2" width="80" id="BlankSheetqty3" text="{stockDefinitions.blankSheetqty3}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="302" y="2" width="80" id="BlankSheetqty4" text="{stockDefinitions.blankSheetqty4}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="381" y="2" width="80" id="BlankSheetqty5" text="{stockDefinitions.blankSheetqty5}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="459" y="2" width="80" id="BlankSheetqty6" text="{stockDefinitions.blankSheetqty6}" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="68" y="23" width="80" id="BlankSheetPrice1" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.blankSheetPrice1)}"/>
				<mx:TextInput restrict="0-9\." x="146" y="23" width="80" id="BlankSheetPrice2" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.blankSheetPrice2)}"/>
				<mx:TextInput restrict="0-9\." x="224" y="23" width="80" id="BlankSheetPrice3" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.blankSheetPrice3)}"/>
				<mx:TextInput restrict="0-9\." x="302" y="23" width="80" id="BlankSheetPrice4" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.blankSheetPrice4)}"/>
				<mx:TextInput restrict="0-9\." x="381" y="23" width="80" id="BlankSheetPrice5" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.blankSheetPrice5)}"/>
				<mx:TextInput restrict="0-9\." x="459" y="23" width="80" id="BlankSheetPrice6" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.blankSheetPrice6)}"/>

				<mx:Label x="3" y="4" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Quantity')}" textAlign="right" width="57"/>
				<mx:Label x="0" y="25" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Price')}" textAlign="right" width="60"/>
				<mx:CheckBox x="65" y="45" id="chkAutocalcblankstock" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AutoCalculateBlankSt')}" width="295" click="autoCalculateBlankStock();"/>

			</mx:Panel>
			<mx:Panel x="10" y="241" width="690" height="124" layout="absolute" dropShadowEnabled="false" title ="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AdjustCopierDigitalM')}">
				<mx:Label x="82" y="5" text="B&amp;W:" textAlign="right"/>
				<mx:Label x="24" y="30" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Color')}" textAlign="right" width="93"/>
				<mx:Label x="31" y="56" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.LargeFormat')}" textAlign="right"/>

				<mx:TextInput restrict="0-9\." x="125" y="3" width="90" id="DefaultBW" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.copier1PricePerSheet)}"/>
				<mx:TextInput restrict="0-9\." x="125" y="28" width="90" id="DefaultColor" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.copier2PricePerSheet)}"/>
				<mx:TextInput restrict="0-9\." x="125" y="53" width="90" id="DefaultLargeFormat" text="{Snowmass.getCurrencyFormatter(true, 3).format(stockDefinitions.copier3PricePerSheet)}"/>
				<mx:ComboBox x="223" y="3" width="201" id="defaultBWCopier" focusOut="doCopierDefinitionBW();" dataProvider="{copierDefinitions}" labelField="name"/>
				<mx:ComboBox x="223" y="28" width="201" id="defaultColorCopier" focusOut="doCopierDefinitionColor();" dataProvider="{copierDefinitions}" labelField="name"/>
				<mx:ComboBox x="223" y="53" width="201" id="defaultLargeCopier" focusOut="doCopierDefinitionLarge();" dataProvider="{copierDefinitions}" labelField="name"/>
			</mx:Panel>
			<mx:Panel x="10" y="373" width="690" height="154" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'changePriceCmd.PresetCharges')}" dropShadowEnabled="false" id="PanelCharges">
				<mx:Button x="10" y="4" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AddCharges')}" click="doAddCharges();" width="110"/>
				<mx:List x="128" y="6" id="Additional1" dataProvider="{stockDefinitions.charges}"  labelField="name" width="238" height="98"/>
			</mx:Panel>
		</mx:Canvas>
		<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Inventory')}" id="page_inventory" width="100%" height="100%">
			<mx:Panel x="10" y="10" width="751" height="244" layout="absolute" title="Inventory Settings" dropShadowEnabled="false" creationPolicy="all">

				<mx:CheckBox x="39" y="0" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.StockisStandardInven')}" change="standardItemCheckEvent();" id="chkstandardItem"/>
				<mx:Label x="10" y="30" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.StockOnHand')}" textAlign="right" width="104"/>
				<mx:Label x="10" y="58" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Committed')}" textAlign="right" width="104"/>
				<mx:Label x="10" y="88" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Available')}" textAlign="right" width="104"/>
				<mx:Label x="10" y="150" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.StockExpires')}" width="104" textAlign="right"/>
				<mx:Label x="23" y="176" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.BinLocation')}" width="91" textAlign="right"/>
				<mx:Label x="313" y="30" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.OnOrder')}" textAlign="right" width="104"/>
				<mx:Label x="313" y="58" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.TargetLevel')}" textAlign="right" width="104"/>
				<mx:Label x="313" y="88" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ReorderPoint')}" textAlign="right" width="104"/>
				<mx:Label x="313" y="118" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MinOrderQty')}" textAlign="right" width="104"/>
				<mx:CheckBox x="309" y="148" id="ShellItem" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.ShellItem')}" enabled="false"  change="doShell();" width="113"/>
				<mx:Button x="430" y="148" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.AssignCustomerAccoun')}" enabled="false" id="btnAssignCustomerAccount" click="doAccount();"/>
				<mx:CheckBox x="518" y="116" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Evenincrementslikere')}" enabled="false" id="chkEvenIncrements" width="203"/>

				<mx:TextInput restrict="0-9\." x="122" y="28" width="84" id="OnHand" text="{stockDefinitions.onHand}" enabled="false" focusOut="UpdateAvailable(event);"/>
				<mx:TextInput restrict="0-9\." x="122" y="56" width="84" id="Committed" text="{stockDefinitions.committed}" enabled="false" focusOut="UpdateAvailable(event);"/>
				<mx:TextInput restrict="0-9\." x="122" y="86" width="84" id="Available" text="{stockDefinitions.available}" height="22" enabled="false"/>
				<mx:TextInput restrict="0-9\." x="426" y="28" width="84" id="OnOrder" text="{stockDefinitions.onOrder}" enabled="false" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="426" y="56" width="84" id="TargetLevel" text="{stockDefinitions.targetLevel}" enabled="false" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="426" y="86" width="84" id="ReOrderPoint" text="{stockDefinitions.reOrderPoint}" enabled="false" focusOut="doRound(event)"/>
				<mx:TextInput restrict="0-9\." x="426" y="116" width="84" id="MinOrderQty" text="{stockDefinitions.minorder}" enabled="false" focusOut="doRound(event)"/>
				<mx:TextInput x="122" y="176" id="BinLocation" text="{stockDefinitions.binLocation}" height="22" enabled="false"/>
				<mx:Text x="430" y="176" width="291" id="account_name" text="{stockDefinitions.account.title}" />
				<mx:DateField x="122" y="148" id="Expires" width="159" text="{stockDefinitions.priceExpires}"  editable="true"/>
			</mx:Panel>
			<mx:Panel x="10" y="274" width="690" height="268" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.MostRecentInventoryC')}" dropShadowEnabled="false">
				<mx:DataGrid dataProvider="{stockChanges}" left="5" right="5" top="5" bottom="30" id="stockchangeGrid">
					<mx:columns>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.User')}" dataField="PSUser"/>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Date')}" dataField="stockChangeDate"/>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.HowChanged')}" dataField="howChanged"/>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Quantity')}" dataField="quantity"/>
						<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'stockDefCmd.Reference')}" dataField="reference"/>
					</mx:columns>
				</mx:DataGrid>
			</mx:Panel>
		</mx:Canvas>
	</mx:TabNavigator>
	<mx:Button x="20" y="5" width="45" height="38" click="doPrev();">
		<mx:icon>@Embed(source='../../../../assets/previous_page.png')</mx:icon>
	</mx:Button>
	<mx:Button x="73" y="5" width="45" height="38" click="doNext();" id="button2">
		<mx:icon>@Embed(source='../../../../assets/next_page.png')</mx:icon>
	</mx:Button>
	<mx:Label x="10" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'invoiceDeliveryTicketCmd.Previous')}" width="55" textAlign="center" id="label15"/>
	<mx:Label x="80" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Next')}" width="38" textAlign="center" id="label14"/>
	<mx:Button x="229" y="0" width="38" height="38" click="doSave();" enabled="{enableSave}">
		<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
	</mx:Button>
	<mx:Label x="229" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Save')}" width="38" textAlign="center"/>
	<mx:Button x="275" y="0" width="38" height="38" click="doGet();">
		<mx:icon>@Embed(source='../../../../assets/get.png')</mx:icon>
	</mx:Button>
	<mx:Label x="275" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Get')}" width="38" textAlign="center"/>
	<mx:Button x="321" y="0" width="38" height="38" click="doNew();">
		<mx:icon>@Embed(source='../../../../assets/new.png')</mx:icon>
	</mx:Button>
	<mx:Button id="button_delete" x="469" y="0" width="38" height="38" click="doDelete();">
		<mx:icon>@Embed(source='../../../../assets/delete.png')</mx:icon>
	</mx:Button>
	<mx:Label x="459" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Delete')}" width="58" textAlign="center"/>
	<mx:Button x="535" y="0" width="38" height="38" id="btnExport" enabled="false">
		<mx:icon>@Embed(source='../../../../assets/export.png')</mx:icon>
	</mx:Button>
	<mx:Label x="525" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Export')}" width="58" textAlign="center"/>
	<mx:Button x="592" y="0" width="38" height="38" click="doRevert();">
		<mx:icon>@Embed(source='../../../../assets/cancel.png')</mx:icon>
	</mx:Button>
	<mx:Label x="582" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Revert')}" width="58" textAlign="center"/>
	<mx:Label x="321" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.New')}" width="38" textAlign="center"/>
	<mx:Button x="170" y="0" width = "38" height="38"  click="doPriceListButton();">
		<mx:icon>@Embed(source='../../../../assets/price_list.png')</mx:icon>
	</mx:Button>
	<mx:Label x="157" y="41" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'chargeDefRpt.PriceList')}" width="64"/>
</mx:Panel>
