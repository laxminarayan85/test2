<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml"
				xmlns:view="com.efi.printsmith.view.*"
				xmlns:vo="com.efi.printsmith.vo.*"
				xmlns:fc="http://www.adobe.com/2006/fc"
				xmlns:comp="com.efi.printsmith.components.*"
				title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Jobs')}"
				creationComplete="init()"
				label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Jobs')}"
				name="Job Editor"
				horizontalScrollPolicy="off"
				verticalScrollPolicy="auto"
				showCloseButton="true"
				close="doDelete()" width="966" height="684" xmlns:ns1="com.efi.printsmith.components.*" xmlns:ns2="com.adobe.flex.extras.controls.*">
	<mx:states>
		<mx:State name="PrintMethod">
			<mx:SetProperty target="{total_imp}" name="text" value="{job.totalImpositions}"/>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
		</mx:State>
		<mx:State name="CopyMethod">
			<mx:SetProperty target="{job_total}" name="y" value="444"/>
			<mx:SetProperty target="{hrule1}" name="y" value="437"/>
			<mx:SetProperty target="{hrule2}" name="y" value="433"/>
			<mx:SetProperty target="{job_other}" name="y" value="409"/>
			<mx:SetProperty target="{job_bind}" name="y" value="388"/>
			<mx:SetProperty target="{job_prep}" name="y" value="367"/>
			<mx:SetProperty target="{label2}" name="y" value="409"/>
			<mx:SetProperty target="{label3}" name="y" value="367"/>
			<mx:SetProperty target="{label4}" name="y" value="444"/>
			<mx:SetProperty target="{label5}" name="y" value="388"/>
			<mx:SetProperty target="{overs_total_price}" name="y" value="345"/>
			<mx:SetProperty target="{label1}" name="y" value="347"/>
			<mx:SetProperty target="{overs_unit_price}" name="y" value="323"/>
			<mx:SetProperty target="{label6}" name="y" value="325"/>
			<mx:SetProperty target="{label7}" name="y" value="303"/>
			<mx:SetProperty target="{refresh_price_btn}" name="y" value="300"/>
			<mx:SetProperty target="{price_info_btn}" name="y" value="300"/>
			<mx:SetProperty target="{job_price}" name="y" value="301"/>
			<mx:AddChild relativeTo="{label7}" position="before">
				<mx:TextInput x="496"
							  y="279"
							  id="job_unitPrice"
							  height="20"
							  width="98" textAlign="right" text="{Snowmass.getCurrencyFormatter(true,4).format(job.pricingRecord.unitPrice)}"
							  focusOut="editUnitPrice(event)"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label7}" position="before">
				<mx:Label x="385"
						  y="281"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}" textAlign="right" width="108" id="label0"/>
			</mx:AddChild>
			<mx:SetProperty target="{copy_single_radio}" name="width" value="230"/>
			<mx:SetProperty target="{copy_double_radio}" name="width" value="230"/>
			<mx:SetProperty target="{pricing_throbber}" name="y" value="301"/>
			<mx:SetProperty target="{pricing_throbber}" name="visible" value="false"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:AddChild relativeTo="{job_weight}" position="before">
				<mx:Label x="496"
						  y="185"
						  width="98"
						  id="num_of_sig"
						  text="{job.signatures}"
						  height="20" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{job_weight}" position="before">
				<mx:Label x="385"
						  y="185"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OfSignatures')}" textAlign="right" width="108"/>
			</mx:AddChild>
			<mx:SetProperty target="{total_copies}" name="y" value="207"/>
			<mx:SetProperty target="{label10}" name="x" value="384"/>
			<mx:SetProperty target="{label10}" name="y" value="207"/>
			<mx:SetProperty target="{total_copies}" name="text" value="{job.totalCopies}"/>
			<mx:SetProperty target="{label10}" name="text">
				<mx:value>{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.TotCopy')}</mx:value>
			</mx:SetProperty>
			<mx:SetProperty target="{job_weight}" name="y" value="229"/>
			<mx:SetProperty target="{label11}" name="x" value="384"/>
			<mx:SetProperty target="{label11}" name="y" value="229"/>
			<mx:SetProperty target="{job_weight}" name="text" value="{job.weight}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:AddChild relativeTo="{est_waste}" position="before">
				<mx:TextInput x="496"
							  y="115"
							  id="num_copies"
							  text="{job.numCopies}"
							  height="20"
							  width="98" textAlign="right" focusOut="fieldChanged(event)"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{est_waste}" position="before">
				<mx:Label x="385"
						  y="117"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Copies')}" textAlign="right" width="108"/>
			</mx:AddChild>
			<mx:SetProperty target="{job_price}" name="text">
				<mx:value>{Snowmass.getCurrencyFormatter(true,2).format(job.pricingRecord.totalPrice)}</mx:value>
			</mx:SetProperty>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
		</mx:State>
		<mx:State name="LargeFormat">
			<mx:RemoveChild target="{runsize_label}"/>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:Label x="14" y="83" width="86" id="rollWidth_label" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RollWidth')}" textAlign="right"/>
			</mx:AddChild>
			<mx:RemoveChild target="{label13}"/>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:Label x="10" y="111" width="91" id="cutoff_label" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Cutoff')}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:TextInput x="107" y="110" width="100" height="20" id="cutOff_edit"  text="{job.cutOff}"/>
			</mx:AddChild>
			<mx:SetProperty target="{label16}" name="x" value="5"/>
			<mx:SetProperty target="{label16}" name="y" value="164"/>
			<mx:SetProperty target="{label17}" name="x" value="5"/>
			<mx:SetProperty target="{label17}" name="y" value="139"/>
			<mx:SetProperty target="{job_fold_size}" name="y" value="162"/>
			<mx:SetProperty target="{job_finish_size}" name="y" value="135"/>
			<mx:RemoveChild target="{job_parent}"/>
			<mx:RemoveChild target="{job_size}"/>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:TextInput x="108" y="81" width="100" height="20" id="roll_width"  text="{job.rollWidth}"/>
			</mx:AddChild>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:SetProperty target="{job_weight}" name="y" value="227"/>
			<mx:SetProperty target="{label11}" name="y" value="227"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput
							  id="num_copies1"
							  text="{job.numCopies}"
							  height="20"
							  width="98" textAlign="right" focusOut="fieldChanged(event)" x="496" y="116"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Copies')}" textAlign="right" width="108" x="384" y="118"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label
						  textAlign="right" width="108" id="label39" x="384" y="207">
					<mx:text>{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.TotCopy')}</mx:text>
				</mx:Label>
			</mx:AddChild>
			<mx:RemoveChild target="{total_copies}"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="496"
						  y="207"
						  width="98"
						  id="total_copies0"
						  text="{job.totalCopies}"
						  height="20" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="496"
						  y="185"
						  width="98"
						  id="num_of_sig0"
						  text="{job.signatures}"
						  height="20" textAlign="right"/>
			</mx:AddChild>
			<mx:SetProperty target="{label4}" name="y" value="449"/>
			<mx:SetProperty target="{hrule2}" name="y" value="438"/>
			<mx:SetProperty target="{hrule1}" name="y" value="442"/>
			<mx:SetProperty target="{label2}" name="y" value="414"/>
			<mx:SetProperty target="{job_other}" name="y" value="414"/>
			<mx:SetProperty target="{job_bind}" name="y" value="393"/>
			<mx:SetProperty target="{job_prep}" name="y" value="372"/>
			<mx:SetProperty target="{overs_total_price}" name="y" value="350"/>
			<mx:SetProperty target="{overs_unit_price}" name="y" value="328"/>
			<mx:SetProperty target="{job_price}" name="y" value="306"/>
			<mx:SetProperty target="{refresh_price_btn}" name="y" value="305"/>
			<mx:SetProperty target="{price_info_btn}" name="y" value="305"/>
			<mx:SetProperty target="{label7}" name="y" value="308"/>
			<mx:SetProperty target="{label6}" name="y" value="330"/>
			<mx:SetProperty target="{label1}" name="y" value="352"/>
			<mx:SetProperty target="{label3}" name="y" value="372"/>
			<mx:SetProperty target="{label5}" name="y" value="393"/>
			<mx:SetProperty target="{label4}" name="x" value="390"/>
			<mx:SetStyle target="{hrule2}" name="left" value="385"/>
			<mx:SetStyle target="{hrule2}" name="right" value="0"/>
			<mx:SetStyle target="{hrule1}" name="left" value="385"/>
			<mx:SetStyle target="{hrule1}" name="right" value="0"/>
			<mx:SetProperty target="{label2}" name="x" value="390"/>
			<mx:SetProperty target="{job_other}" name="x" value="501"/>
			<mx:SetProperty target="{job_bind}" name="x" value="501"/>
			<mx:SetProperty target="{job_prep}" name="x" value="501"/>
			<mx:SetProperty target="{overs_total_price}" name="x" value="501"/>
			<mx:SetProperty target="{overs_unit_price}" name="x" value="501"/>
			<mx:SetProperty target="{job_price}" name="x" value="501"/>
			<mx:SetProperty target="{refresh_price_btn}" name="x" value="601"/>
			<mx:SetProperty target="{price_info_btn}" name="x" value="623"/>
			<mx:SetProperty target="{label7}" name="x" value="390"/>
			<mx:SetProperty target="{label6}" name="x" value="390"/>
			<mx:SetProperty target="{label1}" name="x" value="390"/>
			<mx:SetProperty target="{label3}" name="x" value="390"/>
			<mx:SetProperty target="{label5}" name="x" value="390"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="501"
							  y="287"
							  id="job_LFUnitPrice"
							  height="20"
							  width="98" textAlign="right" text="{Snowmass.getCurrencyFormatter(true,4).format(job.pricingRecord.unitPrice)}"
							  focusOut="editUnitPrice(event)"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="390"
						  y="289"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}" textAlign="right" width="108" id="label40"/>
			</mx:AddChild>
			<mx:SetProperty target="{job_total}" name="y" value="448"/>
			<mx:SetProperty target="{job_total}" name="x" value="501"/>
		</mx:State>
		<mx:State name="Mailing">
			<mx:RemoveChild target="{customer_suppliled_stock}"/>
			<mx:RemoveChild target="{specialOrder}"/>
			<mx:RemoveChild target="{special_order_button}"/>
			<mx:RemoveChild target="{chage_stock_button}"/>
			<mx:RemoveChild target="{job_stock}"/>
			<mx:RemoveChild target="{label18}"/>
			<mx:RemoveChild target="{label19}"/>
			<mx:RemoveChild target="{job_color}"/>
			<mx:RemoveChild target="{label13}"/>
			<mx:RemoveChild target="{runsize_label}"/>
			<mx:RemoveChild target="{label17}"/>
			<mx:RemoveChild target="{label16}"/>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{canvas3}"/>
			<mx:RemoveChild target="{viewstack4}"/>
			<mx:RemoveChild target="{label20}"/>
			<mx:RemoveChild target="{label21}"/>
			<mx:RemoveChild target="{job_pricing_press}"/>
			<mx:RemoveChild target="{job_costing_press}"/>
			<mx:RemoveChild target="{label22}"/>
			<mx:RemoveChild target="{label23}"/>
			<mx:RemoveChild target="{label24}"/>
			<mx:RemoveChild target="{front_colors_text}"/>
			<mx:RemoveChild target="{front_passes_text}"/>
			<mx:RemoveChild target="{label25}"/>
			<mx:RemoveChild target="{front_washes_text}"/>
			<mx:RemoveChild target="{label26}"/>
			<mx:RemoveChild target="{back_passes_text}"/>
			<mx:RemoveChild target="{back_washes_text}"/>
			<mx:RemoveChild target="{back_colors_text}"/>
			<mx:RemoveChild target="{label27}"/>
			<mx:RemoveChild target="{front_inks_text}"/>
			<mx:RemoveChild target="{back_inks_text}"/>
			<mx:RemoveChild target="{radiobutton1}"/>
			<mx:RemoveChild target="{radiobutton2}"/>
			<mx:RemoveChild target="{radiobutton3}"/>
			<mx:RemoveChild target="{printing_estimator_canvas}"/>
			<mx:RemoveChild target="{estimator_viewstack}"/>
			<mx:SetProperty target="{hrule3}" name="y" value="86"/>
			<mx:SetProperty target="{job_description}" name="height" value="77"/>
			<mx:RemoveChild target="{sets_of}"/>
			<mx:RemoveChild target="{label28}"/>
			<mx:RemoveChild target="{label29}"/>
			<mx:RemoveChild target="{job_sheets}"/>
			<mx:RemoveChild target="{label30}"/>
			<mx:RemoveChild target="{job_up}"/>
			<mx:RemoveChild target="{job_on}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:RemoveChild target="{label31}"/>
			<mx:RemoveChild target="{est_waste}"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:RemoveChild target="{total_copies}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{label11}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{job_weight}"/>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:TextArea x="85"
							 y="96"
							 width="281"
							 id="job_mailingnotes"
							 text="{job.notes}"
							 height="77"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="97"
						  text="Notes" width="67" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<ns1:CheckBoxRenderer x="85" y="181" id="job_shownotes" selected="false"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="181"
						  text="Show Notes" width="67" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="209"
						  text="Vendor" width="67" textAlign="right" id="label35"/>
			</mx:AddChild>
			<mx:SetProperty target="{label33}" name="y" value="60"/>
			<mx:SetProperty target="{job_over_under}" name="y" value="58"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="29" width="98" focusOut="fieldChanged(event)" id="job_unitCost" text="{job.unitCost}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="31"
						  text="Unit Cost" width="67" textAlign="right" id="label36"/>
			</mx:AddChild>
			<mx:SetProperty target="{label34}" name="x" value="384"/>
			<mx:SetProperty target="{label34}" name="y" value="88"/>
			<mx:SetProperty target="{bindery_waste}" name="y" value="86"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="114" width="98" focusOut="fieldChanged(event)" id="job_totalCost" text="{job.totalCost}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="116"
						  text="Total Cost" width="67" textAlign="right" id="label37"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="144" width="98" focusOut="fieldChanged(event)" id="job_markup" text="{job.markup}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="146"
						  text="Markup" width="67" textAlign="right" id="label38"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:ComboBox x="85" y="207" id="job_vendor" labelField="name" dataProvider="{vendors}" width="183"></mx:ComboBox>
			</mx:AddChild>
		</mx:State>
		<mx:State name="ChargesOnly" basedOn="Mailing">
			<mx:RemoveChild target="{label35}"/>
			<mx:RemoveChild target="{label36}"/>
			<mx:RemoveChild target="{job_over_under}"/>
			<mx:RemoveChild target="{job_unitCost}"/>
			<mx:RemoveChild target="{label33}"/>
			<mx:RemoveChild target="{label34}"/>
			<mx:RemoveChild target="{bindery_waste}"/>
			<mx:RemoveChild target="{job_totalCost}"/>
			<mx:RemoveChild target="{label37}"/>
			<mx:RemoveChild target="{label38}"/>
			<mx:RemoveChild target="{job_markup}"/>
			<mx:RemoveChild target="{overs_unit_price}"/>
			<mx:RemoveChild target="{label6}"/>
			<mx:RemoveChild target="{label1}"/>
			<mx:RemoveChild target="{overs_total_price}"/>
			<mx:SetProperty target="{label3}" name="y" value="300"/>
			<mx:SetProperty target="{job_prep}" name="y" value="300"/>
			<mx:SetProperty target="{label5}" name="y" value="321"/>
			<mx:SetProperty target="{job_bind}" name="y" value="321"/>
			<mx:SetProperty target="{label2}" name="y" value="342"/>
			<mx:SetProperty target="{job_other}" name="y" value="342"/>
			<mx:SetProperty target="{hrule2}" name="y" value="366"/>
			<mx:SetProperty target="{hrule1}" name="y" value="370"/>
			<mx:SetProperty target="{job_total}" name="y" value="377"/>
			<mx:SetProperty target="{label4}" name="y" value="377"/>
			<mx:RemoveChild target="{job_vendor}"/>
		</mx:State>
		<mx:State name="LinesAndInches" basedOn="Mailing">
			<mx:AddChild relativeTo="{pricing_throbber}" position="before">
				<mx:HRule x="10"
						  y="235"
						  width="356"
						  height="2" id="hrule0"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="10" y="257" text="Number Of Lines"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="2" y="281" text="Number Of Inches"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="107" y="255" id="job_number_of_lines" text="{job.numberOfLines}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="107" y="279" id="job_number_of_inches" text="{job.numberOfInches}" textAlign="right"/>
			</mx:AddChild>
			<mx:RemoveChild target="{job_unitCost}"/>
			<mx:RemoveChild target="{label36}"/>
			<mx:RemoveChild target="{label38}"/>
			<mx:RemoveChild target="{job_markup}"/>
			<mx:SetProperty target="{job_totalCost}" name="y" value="84"/>
			<mx:SetProperty target="{bindery_waste}" name="y" value="56"/>
			<mx:SetProperty target="{job_over_under}" name="y" value="28"/>
			<mx:SetProperty target="{label33}" name="y" value="30"/>
			<mx:SetProperty target="{label34}" name="y" value="58"/>
			<mx:SetProperty target="{label37}" name="y" value="86"/>
			<mx:SetProperty target="{job_vendor}" name="width" value="182"/>
		</mx:State>
		<mx:State name="Blank">
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:RemoveChild target="{label28}"/>
			<mx:RemoveChild target="{sets_of}"/>
			<mx:RemoveChild target="{label29}"/>
			<mx:RemoveChild target="{job_sheets}"/>
			<mx:RemoveChild target="{label30}"/>
			<mx:RemoveChild target="{job_up}"/>
			<mx:RemoveChild target="{job_on}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:RemoveChild target="{label31}"/>
			<mx:RemoveChild target="{est_waste}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:RemoveChild target="{total_copies}"/>
			<mx:SetProperty target="{label34}" name="y" value="49"/>
			<mx:SetProperty target="{bindery_waste}" name="y" value="47"/>
			<mx:SetProperty target="{label11}" name="y" value="69"/>
			<mx:SetProperty target="{job_weight}" name="y" value="69"/>
			<mx:RemoveChild target="{copy_estimator_canvas}"/>
			<mx:RemoveChild target="{estimator_viewstack}"/>
		</mx:State>
	</mx:states>
	<mx:RemoteObject id="dataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadResult(event)"/>
		<mx:method name="addUpdate"
				   fault="handleFault(event)"
				   result="handleSaveResult(event)"/>
		<mx:method name="deleteItem"
				   fault="handleFault(event)"
				   result="handleDeleteResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="copierDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadCopierResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="pressDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadPressResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dimensionDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadDimensionResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="pricingMethodDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadPricingMethodResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="locationDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadLocationResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="productDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadProductResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="chargeDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadChargeResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="chargeCommandDataService"
					 destination="dataService">
		<mx:method name="getChargeList"
				   fault="handleFault(event)"
				   result="handleLoadChargeCommandResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServicePreferencesStockDefinition" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPreferencesStockDefinitionResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="stockDataService" destination="dataService">
		<mx:method name="getStockPicker" fault="handleFault(event)" result="handleStockLoadResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServiceSystemPreferences" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSystemPreferencesResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServicePreferencesDefaultPresses" destination="dataService">
		<mx:method name="getSingle" fault="handleFault(event)" result="handleLoadPreferencesDefaultPressesResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServiceEstimatingPreferences" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadEstimatingPreferencesResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="jobService" destination="jobService">
		<mx:method name="assignPricingCopierToJob" fault="handleFault(event)" result="handleAssignPricingCopierResult(event)"/>
		<mx:method name="assignStockToJob" fault="handleFault(event)" result="handleAssignStockResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="jdfIntegrationService"
				destination="jdfIntegrationService">
		<mx:method name="sendJobToFiery"
				fault="handleFault(event)"
				result="sendJobToFieryResult(event)"/>
	</mx:RemoteObject>		
	<mx:RemoteObject id="paperCalculatorService"
					 destination="paperCalculatorService">
		<mx:method name="CalcOut"
				   fault="handleFault(event)"
				   result="handleCalcOutResult(event)"/>
		<mx:method name="GeneratePaperCalculatorImage"
					fault="handleFault(event)"
					result="handleGenerateImage(event)"/>
		<mx:method name="CalculateCutCounts"
					fault="handleFault(event)"
					result="handleCalculateCuts(event)"/>
	</mx:RemoteObject>
	
	<mx:Script>
		<![CDATA[
			import com.efi.printsmith.data.Users;
			import com.efi.printsmith.data.Dimension;
			import com.efi.printsmith.data.DigitalAsset;
			import com.efi.printsmith.pages.JobDigitalAssets;
			import com.efi.printsmith.data.JobTemplate;
			import com.efi.printsmith.data.JobBase;
			import com.efi.printsmith.data.PricingRecord;
			import com.efi.printsmith.pages.JobPricingInfo;
			import com.efi.printsmith.data.PreferencesPricingMethod;
			import com.efi.printsmith.events.PriceJobEvent;
			import com.efi.printsmith.data.Invoice;
			import com.efi.printsmith.data.InvoiceBase;
			import com.efi.printsmith.data.Job;
			import com.efi.printsmith.data.PressDefinition;
			import com.efi.printsmith.data.CopierDefinition;
			import com.efi.printsmith.data.ProductionLocations;
			import com.efi.printsmith.data.Account;
			import com.efi.printsmith.data.ProductCode;
			import com.efi.printsmith.data.Charge;
			import com.efi.printsmith.data.ChargeCategory;
			import com.efi.printsmith.data.ChargeCommand;
			import com.efi.printsmith.data.StockDefinition;
			import com.efi.printsmith.data.PreferencesSystem;
			import com.efi.printsmith.data.PreferencesEstimating;
			import com.efi.printsmith.data.PreferencesDefaultPresses;
	
			
			import com.efi.printsmith.events.JobEditCompleteEvent;
			import com.efi.printsmith.events.StockPickerSelectEvent;
			import com.efi.printsmith.events.JobEditCompleteEvent;
			import com.efi.printsmith.events.ChargeDefinitionSelectEvent;
			import com.efi.printsmith.events.JobMethodSelectEvent;
			import com.efi.printsmith.events.InkColorEvent;
		    import com.efi.printsmith.events.DigitalAssetEvent;
			import com.efi.printsmith.events.commandEvents.Jobs.*;
			
			import com.efi.printsmith.pages.JobMethodPicker;
			import com.efi.printsmith.view.StockPicker;
			import com.efi.printsmith.pages.InkColorPicker;

			import com.efi.printsmith.Constants;
			
			import mx.controls.Image;
			import mx.controls.Alert;
			import mx.managers.PopUpManager;
			import mx.containers.TitleWindow;
			import mx.collections.ArrayCollection;
			import mx.rpc.events.ResultEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.IResponder;
			import mx.messaging.messages.AsyncMessage;
			import mx.messaging.messages.IMessage;
			import mx.printing.FlexPrintJob;
			import mx.printing.PrintAdvancedDataGrid;
			import mx.printing.PrintDataGrid;
			import mx.core.Application;
			import mx.validators.Validator;
			import mx.events.ValidationResultEvent;
			import mx.collections.ICollectionView;
			import mx.core.UIComponent;
		    
		    [Bindable]
		    private var preferencesDefaultPresses:PreferencesDefaultPresses;
		    
			[Bindable]                                         
		    private var systemPreferences:PreferencesSystem;
		    
		    [Bindable]                                         
		    private var estimatingPreferences:PreferencesEstimating;
		
			[Bindable]                                
			private var systemPreferencesArray:ArrayCollection = new ArrayCollection();
			
			[Bindable]                                
			private var estimatingPreferencesArray:ArrayCollection = new ArrayCollection();

			[Bindable]
			private var dimensionsArray:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var accounts:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var presses:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var copiers:ArrayCollection=new ArrayCollection();
			
			[Bindable]
			private var locations:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var productCodes:ArrayCollection=new ArrayCollection();
			
			[Bindable]
			private var vendors:ArrayCollection=new ArrayCollection();

			[Bindable]
			public var job:Job=null;

			[Bindable]
			public var invoice:InvoiceBase;
			
			[Bindable]
			private var chargeCommands:ArrayCollection=new ArrayCollection();

			[Bindable]
			public var tempOpen:Object=new Object();

			[Bindable]
			public var refreshSO:Boolean=false;
			[Bindable]
			public var front:Boolean=false;


			[Bindable]
			private var setPaperCalculatorData:Boolean=false;

			[Bindable]
			private var charges:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var pricingMethods:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var stocks:ArrayCollection=new ArrayCollection();
			
    		private var preferencesStockDefinitions:ArrayCollection = new ArrayCollection();

			private var focussedFormControl:DisplayObject;

			private function handleLoadSystemPreferencesResult(ev:ResultEvent):void {
				systemPreferencesArray = ev.result as ArrayCollection;
				if (systemPreferencesArray.length > 0)
				{
					systemPreferences = systemPreferencesArray.getItemAt(0) as PreferencesSystem;
					check_taxtable.visible = systemPreferences.disableNonTaxableOptions
				}else {
					check_taxtable.visible = true;
				}
		
			}
			
			private function handleLoadPreferencesDefaultPressesResult(ev:ResultEvent):void {
				preferencesDefaultPresses = ev.result as PreferencesDefaultPresses;
			}
			
			private function sendJobToFieryResult(ev:ResultEvent):void {
				
			}
			
			private function handleLoadEstimatingPreferencesResult(ev:ResultEvent):void {
				throbber.stop();
				throbber.visible = false;

				estimatingPreferencesArray = ev.result as ArrayCollection;
				if (estimatingPreferencesArray.length > 0) {
					estimatingPreferences = estimatingPreferencesArray.getItemAt(0) as PreferencesEstimating;
				}
				if (job.paperCal != null)
				{
					setPreferenceDataforPaperCal();
					setPaperCalculatorData = false;
				}
			}	                                  

			public function init():void
			{
				this.height = parent.height - 80;
				PopUpManager.centerPopUp(this);
				
				
				pricingMethodDataService.getAll("PreferencesPricingMethod");
				dataServiceEstimatingPreferences.getAll("PreferencesEstimating");
				dataServicePreferencesDefaultPresses.getSingle("PreferencesDefaultPresses");
				
				if (job == null) {
					doNew();
					if (job.parentSize != null)
						job.parentSize.name = "";
					
					if (job.runSize != null)
						job.runSize.name = "";
					if (job.finishSize != null)
						job.finishSize.name = "";
					if (job.foldedSize != null)
						job.foldedSize.name = "";
					job.frontColors = 1;
					job.frontPasses = 1;
					job.inSetsOf = 1;
					job.sheets = 1;
					job.numOn = 1;
					job.numUp = 1;	
					job.singleSided = true;
					job.doubleSided = false;	
					job.pricingRecord = new PricingRecord;			
					job.pricingRecord.unitPriceOverride = false;
					job.pricingRecord.totalPriceOverride = false;	
					job.markup = 2.0;
					job.totalCost = 0.0;
					job.unitCost = 0.0;
					job.parentInvoice = this.invoice as InvoiceBase;
					job.paperCal = new com.efi.printsmith.data.PaperCalculator();
					setPaperCalculatorData = true;
					
					job.paperCal.whichStartSize = Constants.PAPER_CALCULATOR_WHICH_START_RUN_TO_FINISH;
					job.paperCal.runToFinishGrain = Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_NEITHER;
					job.paperCal.gripLocation = Constants.PAPER_CALCULATOR_GRIPPER_TOP;
					job.paperCal.folioLocation = Constants.PAPER_CALCULATOR_FOLIO_TOP;
					
					job.paperCal.dAcross = 0;
					job.paperCal.dDown = 0;
				}
				
				this.copy_single_radio.selected = this.job.singleSided;

				var eventPriceMethod:JobsChangePricingMethodEvent = new JobsChangePricingMethodEvent(job_type, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPriceMethod.dispatch();
		
				var eventPricingCopier:JobsChangeCopierEvent = new JobsChangeCopierEvent(job_pricing_copier, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPricingCopier.dispatch();
				var eventCostingCopier:JobsChangeCopierEvent = new JobsChangeCopierEvent(job_costing_copier, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventCostingCopier.dispatch();
		
				var eventPricingPress:JobsChangePressEvent = new JobsChangePressEvent(job_pricing_press, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPricingPress.dispatch();
				var eventCostingPress:JobsChangePressEvent = new JobsChangePressEvent(job_costing_press, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventCostingPress.dispatch();
		
				var eventStock:JobsChangeStockEvent = new JobsChangeStockEvent(chage_stock_button, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventStock.dispatch(); 
				
				if (isNaN(job.id)) {
					this.enabled=false;
				}
			}
			public function handleUIControlEvent(evt:ResultEvent):void {
				evt.result.control.enabled = evt.result.enabled;
			}		
			private function handleUIControlFault(ev:FaultEvent):void {  
			
			}
			
			private function loadData():void {
				throbber.play();
				pressDataService.getAll("PressDefinition");
				copierDataService.getAll("CopierDefinition");
				locationDataService.getAll("ProductionLocations");
				productDataService.getAll("ProductCode");
//				chargeDataService.getAll("Charge");
				dimensionDataService.getAll("Dimension");
				dataServiceSystemPreferences.getAll("PreferencesSystem");		
				//if (stocks.length == 0)		
				// 	dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
				dataServiceEstimatingPreferences.getAll("PreferencesEstimating");
			}
			
			private function handleJobMethodPickerSelect(evt:JobMethodSelectEvent):void {
				if (evt.pricingMethod != null  && evt.pricingMethod.title != "Mailing" && evt.pricingMethod.title != "Merchandise" && evt.pricingMethod.title != "Charges Only" && evt.pricingMethod.title != "Outside Services" && evt.pricingMethod.title != "Lines & Inches") {
					this.setPricingMethod(evt.pricingMethod as PreferencesPricingMethod);
					dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
					job.runSize = new Dimension();
					job.foldedSize = new Dimension();
					job.parentSize = new Dimension();
					job.finishSize = new Dimension();
					
				} else if (evt.pricingMethod == null) {
					Alert.show("Job Method Picker returned a null array", "Error");
				} else {
					this.setPricingMethod(evt.pricingMethod as PreferencesPricingMethod);
					this.enabled = true;
				}
			}
			
			private function handleJobMethodPickerCancel(evt:JobMethodSelectEvent):void {
				PopUpManager.removePopUp(this);
			}

			private function findItem(name:String, array:ArrayCollection):int
			{
				for each (var element:Object in array)
				{
					if (name == element.name)
					{ 
						return array.getItemIndex(element);
					}
				}
				return -1;
			}
			
			private function findItemById(id:int, array:ArrayCollection):int
			{
				for each (var element:Object in array)
				{
					if (id == element.id)
					{ 
						return array.getItemIndex(element);
					}
				}
				return -1;
			}

			private function doNew():void
			{
				job=new Job();
				job.parentInvoice = invoice as InvoiceBase;
				setJob(job);
			}
			
			private function setPreferenceDataforPaperCal():void {
				if (estimatingPreferences != null)
				{
					job.paperCal.useGripEdgeGap = estimatingPreferences.useGripEdgeGap;
					job.paperCal.gripEdgeGap = estimatingPreferences.gripEdgeGap;
					job.paperCal.gripLocation = estimatingPreferences.gripLocation;
					job.paperCal.useFolioEdge = estimatingPreferences.useFolioEdge;
					job.paperCal.folioLocation = estimatingPreferences.folioLocation;
					job.paperCal.folioEdge = estimatingPreferences.folioEdge;
					job.paperCal.useColorBar = estimatingPreferences.useColorBar;
					job.paperCal.colorBar = estimatingPreferences.colorBar;
					job.paperCal.useWhiteSpace = estimatingPreferences.useWhiteSpace;
					job.paperCal.whiteSpaceLeft = estimatingPreferences.whiteSpace;
					job.paperCal.whiteSpaceBottom= estimatingPreferences.whiteSpaceBottom;
					job.paperCal.whiteSpaceRight = estimatingPreferences.whiteSpaceRight;
					job.paperCal.whiteSpaceTop = estimatingPreferences.whiteSpaceTop;
					job.paperCal.useGutter = estimatingPreferences.useGutter;
					job.paperCal.gutter = estimatingPreferences.gutter;
					job.paperCal.gutterHorizontal = estimatingPreferences.gutterHorizontal;
					job.paperCal.useBleed = estimatingPreferences.useBleed;
					job.paperCal.bleedLeft = estimatingPreferences.bleed;
					job.paperCal.bleedBottom = estimatingPreferences.bleedBottom;
					job.paperCal.bleedRight = estimatingPreferences.bleedRight;
					job.paperCal.bleedTop = estimatingPreferences.bleedTop;
					job.paperCal.backTrimParent = estimatingPreferences.backTrimParent;
					job.paperCal.trimFourSides = estimatingPreferences.trimFourSides;
					job.paperCal.workandTumble = estimatingPreferences.workandTumble;
					job.paperCal.runToFinishGrain =  estimatingPreferences.runToFinishGrain;
					job.paperCal.printParentToFinishSection = estimatingPreferences.printParentToFinishSection;
					job.paperCal.printParentToRunSection = estimatingPreferences.printParentToRunSection;
					job.paperCal.printRunToFinishSection = estimatingPreferences.printRunToFinishSection;
					job.paperCal.attachToJobTicket=  estimatingPreferences.attachToJobTicket;
				}
			}
			
			private function doDelete():void
			{
				PopUpManager.removePopUp(this);
			}
			
			private function doProductionData():void
			{
				var productionDataWindow:ProductionData=ProductionData(PopUpManager.createPopUp(this, ProductionData, true));
				productionDataWindow.setStyle("borderAlpha", 0.9);
				productionDataWindow.setJob(this.job);	
			}
			
			public function getInvoice():InvoiceBase
			{
				return this.invoice;
			}

			public function setInvoice(invoice:Invoice):void
			{
				this.invoice=invoice;
				this.job.parentInvoice = invoice as InvoiceBase;
			}

			private function doGet():void
			{

			}

			public function setJob(job2:Job):void
			{
				this.job=job2;
				loadData();
				mapFromJobData();
				
				
			}

			private function mapToJobData():void
			{
				job.binderyWaste=parseInt(bindery_waste.text);
				job.brokered=check_brokered.selected;
				job.comment=job_comment.text;
				job.costingPress=job_costing_press.selectedItem as PressDefinition;
				job.pricingPress=job_pricing_press.selectedItem as PressDefinition;
				job.pricingCopier=job_pricing_copier.selectedItem as CopierDefinition;
				job.costingCopier=job_costing_copier.selectedItem as CopierDefinition;
				job.productCode=product.selectedItem as ProductCode;
				job.pricingMethod = job_type.selectedItem as PreferencesPricingMethod;
				
				if (job_description.text != "") {
					job.description=job_description.text;
				} else {
					job.description = this.job_type.selectedLabel;
				}
				
				job.estWaste=parseInt(est_waste.text);
				job.finished=checked_finished.selected;
				job.inSetsOf=parseInt(sets_of.text);
				job.numOn=parseInt(job_on.text);
				job.oversUnders=parseInt(job_over_under.text);
				job.qtyOrdered=parseInt(job_ordered.text);
				job.sheets=parseInt(job_sheets.text);
				if (num_of_sig != null)
					job.signatures=parseInt(num_of_sig.text);
				job.taxable=check_taxtable.selected;
				job.numUp=parseInt(job_up.text);
				job.jobNotes=job_notes.text;
				job.jobTicketNotes=check_job_notes.selected;
				job.frontColors=parseInt(this.front_colors_text.text);
				//job.frontInks=this.front_inks_text.text;
				job.frontPasses=parseInt(this.front_passes_text.text);
				job.frontWashes=parseInt(this.front_washes_text.text);
				job.backColors=parseInt(this.back_colors_text.text);
				//job.backInks=this.back_inks_text;
				job.backPasses=parseInt(this.back_passes_text.text);
				job.backWashes=parseInt(this.back_washes_text.text);
				job.location=job_location.selectedItem as ProductionLocations;
				if (run_method_radiogroup.selectedValue != null) {
					job.runMethod=run_method_radiogroup.selectedValue.toString();
				}
				if (this.job_type.text == "Large Format" || job_type.text == "Roll-Fed")
					job.parentSize.name = this.roll_width.text;
				else
					if ( job.parentSize != null)
						job.parentSize = job_parent.selectedItem as Dimension;
				if ( job.runSize != null)
					job.runSize = job_size.selectedItem as Dimension;
				if ( job.foldedSize != null)
					job.foldedSize = job_fold_size.selectedItem as Dimension;
				if ( job.finishSize != null && job_finish_size.selectedItem != null)
					job.finishSize = job_finish_size.selectedItem as Dimension;
		

				if (cutOff_edit != null)
					job.cutOff= parseInt(cutOff_edit.text);
				if (job_imp != null)
					job.impositionsPerRun = parseInt(job_imp.text);
				if (total_imp != null)
					job.totalImpositions = parseInt(total_imp.text);
				if (job_unitCost != null)
					job.unitCost = parseFloat(job_unitCost.text);
				if (job_totalCost != null)
					job.totalCost = parseFloat(job_totalCost.text);
				if (job_markup != null)
					job.markup = parseFloat(job_markup.text);
				job.specialOrderStock = specialOrder.selected;
				job.customerSuppliedStock = customer_suppliled_stock.selected;
				job.parentInvoice = this.invoice;
			}

			private function mapFromJobData():void
			{
				if (presses != null) {
					if (job.pricingPress != null)
						job_pricing_press.selectedIndex=findItem(job.pricingPress.name, presses);
					if (job.costingPress != null)
						job_costing_press.selectedIndex=findItem(job.costingPress.name, presses);
				}
				if (copiers != null) {
					if (job.pricingCopier != null)
						job_pricing_copier.selectedIndex=findItem(job.pricingCopier.name, copiers);
					if (job.costingCopier != null)
						job_costing_copier.selectedIndex=findItem(job.costingCopier.name, copiers);
				}
				if (locations != null) { 	
					if (job.location != null)
						job_location.selectedIndex=findItem(job.location.name, locations);
				}
				if (productCodes != null) { 	
					if (job.productCode != null)
						product.selectedIndex=findItem(job.productCode.name, productCodes);
				}
				this.copy_single_radio.selected = this.job.singleSided;
				this.copy_double_radio.selected = this.job.doubleSided;
				run_method_radiogroup.selectedValue=job.runMethod;
				
				

			}

			private function doSave():void
			{
				mapToJobData();
				var jobEditCompleteEvent:JobEditCompleteEvent=new JobEditCompleteEvent(JobEditCompleteEvent.SAVE, this.job);
				dispatchEvent(jobEditCompleteEvent);

				PopUpManager.removePopUp(this);
			}
			private function doSaveTemplate():void
			{
				mapToJobData();
				
				var tmpJob:Job = job;
				var template:JobTemplate = new JobTemplate();
				template.user = Snowmass.getInstance().currentUser;

				template.backColors = tmpJob.backColors
				template.backInks = tmpJob.backInks
				template.backPasses = tmpJob.backPasses
				template.backWashes = tmpJob.backWashes
				template.binderyWaste = tmpJob.binderyWaste
				template.binderyWasteOverride = tmpJob.binderyWasteOverride
				template.brokered = tmpJob.brokered
				template.charges = tmpJob.charges;
				template.children = tmpJob.children
				template.comment = tmpJob.comment
				template.costingCopier = tmpJob.costingCopier
				template.costingPress = tmpJob.costingPress
				template.costingRecord = tmpJob.costingRecord
				template.cutOff = tmpJob.cutOff
				template.description = tmpJob.description
				template.doubleSided = tmpJob.doubleSided
				template.estWaste = tmpJob.estWaste
				template.estWasteOverride = tmpJob.estWasteOverride
				template.finished = tmpJob.finished
				template.finishSize = tmpJob.finishSize
				template.foldedSize = tmpJob.foldedSize
				template.frontColors = tmpJob.frontColors
				template.frontInks = tmpJob.frontInks
				template.frontPasses = tmpJob.frontPasses
				template.frontWashes = tmpJob.frontWashes
				template.inSetsOf = tmpJob.inSetsOf
				template.inSetsOfOverride = tmpJob.inSetsOfOverride
				template.jobIndex = tmpJob.jobIndex
				template.jobNotes = tmpJob.jobNotes
				template.jobNumber = tmpJob.jobNumber
				template.jobTicketNotes = tmpJob.jobTicketNotes
				template.location = tmpJob.location
				template.numCopies = tmpJob.numCopies
				template.numCopiesOverride = tmpJob.numCopiesOverride
				template.numOn = tmpJob.numOn
				template.numUp = tmpJob.numUp
				template.oversUnders = tmpJob.oversUnders
				template.parentSize = tmpJob.parentSize
				template.press = tmpJob.press
				template.pressQty = tmpJob.pressQty
				template.pricingCopier = tmpJob.pricingCopier
				template.pricingMethod = tmpJob.pricingMethod
				template.pricingPress = tmpJob.pricingPress
				template.pricingRecord = tmpJob.pricingRecord
				template.productCode = tmpJob.productCode
				template.qtyOrdered = tmpJob.qtyOrdered
				template.runMethod = tmpJob.runMethod
				template.runSize = tmpJob.runSize
				template.salesCategory = tmpJob.salesCategory
				template.sheets = tmpJob.sheets
				template.signatures = tmpJob.signatures
				template.singleSided = tmpJob.singleSided
				template.stock = tmpJob.stock
				template.stockQty = tmpJob.stockQty
				template.taxable = tmpJob.taxable
				template.totalCopies = tmpJob.totalCopies
				template.weight = tmpJob.weight

				setJob(template);

				var jobEditCompleteEvent:JobEditCompleteEvent=new JobEditCompleteEvent(JobEditCompleteEvent.SAVE, this.job);
				dispatchEvent(jobEditCompleteEvent);

				PopUpManager.removePopUp(this);
			}
			
			private function handleAssignPricingCopierResult(ev:ResultEvent):void
			{
				this.job = ev.result as Job;
				updatePrice();
			}
			
			private function handleAssignStockResult(ev:ResultEvent):void
			{
				this.job = ev.result as Job;
				updatePrice();
				
				refreshCalcAndImage();		// new cut diagram to match existing values
			}
			
			private function handleLoadResult(ev:ResultEvent):void
			{
				//jobs = ev.result as ArrayCollection;
			}

			private function handleLoadDimensionResult(ev:ResultEvent):void
			{
				dimensionsArray=ev.result as ArrayCollection;
				if (job.parentSize != null)
					this.job_parent.selectedIndex = findItem(job.parentSize.name, dimensionsArray);
				if (job.runSize != null)
					this.job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
				if (job.foldedSize != null)
					this.job_fold_size.selectedIndex = findItem(job.foldedSize.name, dimensionsArray);
				if ( job.finishSize != null)
					this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);

			}
			
			private function handleLoadCopierResult(ev:ResultEvent):void
			{
				copiers=ev.result as ArrayCollection;
				if (!isNaN(job.id)) {
					if (job.pricingCopier != null)
						this.job_pricing_copier.selectedIndex =findItem(job.pricingCopier.name, copiers);
					if ( job.costingCopier != null)
						this.job_costing_copier.selectedIndex = findItem(job.costingCopier.name, copiers);
				}
			}
			private function handleLoadPressResult(ev:ResultEvent):void
			{
				presses=ev.result as ArrayCollection;
				if (!isNaN(job.id)) {
					if ( job.pricingPress != null)
						this.job_pricing_press.selectedIndex =findItem(job.pricingPress.name, presses);
					if (job.costingPress != null)
						this.job_costing_press.selectedIndex = findItem(job.costingPress.name, presses);
				}
			}
		
			private function handleLoadPreferencesStockDefinitionResult(event:ResultEvent):void {
				preferencesStockDefinitions = event.result as ArrayCollection;
				stockDataService.getStockPicker("StockDefinition", preferencesStockDefinitions);
			}

			private function handleLoadLocationResult(ev:ResultEvent):void
			{
				locations=ev.result as ArrayCollection;
				if (job.location != null)
					job_location.selectedIndex=findItem(job.location.name, locations); 
				
			}

			private function handleLoadProductResult(ev:ResultEvent):void
			{
				productCodes=ev.result as ArrayCollection;
				if (productCodes != null && job.productCode != null)
					product.selectedIndex=findItem(job.productCode.name, productCodes);
			}
			
			private function handleLoadVendorResult(ev:ResultEvent):void
			{
				vendors=ev.result as ArrayCollection;
			}

			private function handleDeleteResult(ev:ResultEvent):void
			{
			}

			private function handleLoadChargeResult(ev:ResultEvent):void
			{
				charges=ev.result as ArrayCollection;
			}

			private function handleStockLoadResult(ev:ResultEvent):void {
		    	stocks = ev.result as ArrayCollection;
		    	
				this.enabled=true;

				chargeCommandDataService.getChargeList();				
				initialStockPicker();
			}
			
			private function handleLoadChargeCommandResult(ev:ResultEvent):void
			{
				chargeCommands=ev.result as ArrayCollection;
				add_charge_button.enabled=true;
				
			}

			private function handleLoadPricingMethodResult(ev:ResultEvent):void
			{
				pricingMethods=ev.result as ArrayCollection;
				if (isNaN (job.id)) {
					var jobMethodPicker:JobMethodPicker=JobMethodPicker(PopUpManager.createPopUp(this, JobMethodPicker, true));
					jobMethodPicker.setStyle("borderAlpha", 0.9);
					jobMethodPicker.pricingMethods = this.pricingMethods;
				    jobMethodPicker.addEventListener(JobMethodSelectEvent.CANCELSELECTJOBMETHOD, handleJobMethodPickerCancel);
	 			   	jobMethodPicker.addEventListener(JobMethodSelectEvent.SELECTJOBMETHOD, handleJobMethodPickerSelect);
	 			} else {
	 				if (job.pricingMethod != null) {
						var i:int = 0;
						for (i=0; i< this.pricingMethods.length; i++) {
							var tmpPricingMethod:PreferencesPricingMethod = pricingMethods.getItemAt(i) as PreferencesPricingMethod;
							
							if (tmpPricingMethod.id == job.pricingMethod.id) {
								this.setPricingMethod(tmpPricingMethod);
								//cej
								dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
								break;
							}
						}
		 			}
	 			}
				
			}

			private function handleSaveResult(ev:ResultEvent):void
			{

			}


			private function handleFault(ev:FaultEvent):void
			{
				var message:String;

				message="Error: " + ev.fault.faultCode + " - " + ev.fault.faultDetail + " - " + ev.fault.faultString;
				Alert.show(message, "Error", 0, null);
			}



			private function validateForm(event:Event):void
			{
				focussedFormControl=event.target as DisplayObject;

				//formIsValid = true;                    

			}

			private function validate(validator:Validator):Boolean
			{
//        var validatorSource:DisplayObject = validator.source as DisplayObject;
//     	var suppressEvents:Boolean = (validatorSource != focussedFormControl);
//        var event:ValidationResultEvent = validator.validate(null, suppressEvents); 
//        var currentControlIsValid:Boolean = (event.type == ValidationResultEvent.VALID);
//		formIsValid = formIsValid && currentControlIsValid;
//         
//		return currentControlIsValid;
				return true;
			}


			private function doAddCharge():void
			{
				this.mapToJobData();
				var chargePicker:ChargePicker=ChargePicker(PopUpManager.createPopUp(this, ChargePicker, true));
				chargePicker.charges = this.job.charges;
				chargePicker.chargeCommands = chargeCommands;
				chargePicker.job = this.job;
				chargePicker.setStyle("borderAlpha", 0.9);
				chargePicker.addEventListener(ChargeDefinitionSelectEvent.CHARGEDEFINITIONCOMPLETE, handleChargeDefinitionComplete);
			}

			private function handleChargeDefinitionComplete(evt:ChargeDefinitionSelectEvent):void
			{
				this.job.charges=evt.chargeArray;
				this.updatePrice();
			}

			private function doDeleteCharge():void
			{
				if (invoice_charge_datagrid.selectedItem != null)
				{
					var charge:Charge=invoice_charge_datagrid.selectedItem as Charge;
					var index:int=this.job.charges.getItemIndex(charge);
					this.job.charges.removeItemAt(index);
				}
			}

			private function initialStockPicker():void {
				if (isNaN (job.id)) {
					changeStockDefinition();
				}
			}
			
			private function changeStockDefinition():void
			{
				var stockPickerWindow:StockPicker=StockPicker(PopUpManager.createPopUp(this, StockPicker, true));
				stockPickerWindow.setStyle("borderAlpha", 0.9);
			   	stockPickerWindow.setStockArray(stocks);
				stockPickerWindow.formIsEmpty=true;
				stockPickerWindow.addEventListener(StockPickerSelectEvent.CANCELSELECTSTOCK, handleStockPickerCancel);
				stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTSTOCK, handleStockPickerSelect);
				stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTNEWSTOCK, handleStockPickerNew);
			}

			private function handleStockPickerCancel(evt:StockPickerSelectEvent):void
			{
				if (this.job.stock == null)
				{
					this.job.stock=new StockDefinition();
				}
			}
			private function doCustomerSupplied():void{
				if  (customer_suppliled_stock.selected)
					specialOrder.selected = false;
								
				
			}
			private function doSpecialOrder():void{
				 if (specialOrder.selected)
				 	customer_suppliled_stock.selected = false;
			}
			private function handleStockPickerSelect(evt:StockPickerSelectEvent):void
			{
				if (evt.stockDefinition != null)
				{
//					this.job.stock=evt.stockDefinition;
					if (this.job_type.text == "Large Format" || job_type.text == "Roll-Fed") {
						var cutoff:Number;
						if (estimatingPreferences != null)
							cutoff = estimatingPreferences.defaultPressCuttOff;
						else
							cutoff = 0;
						this.job.rollWidth = evt.stockDefinition.parentsize.width;
						this.roll_width.text = job.rollWidth.toString();
						this.job.cutOff = cutoff;
						this.cutOff_edit.text = cutoff.toString();
						if (job.finishSize == null)
							job.finishSize = new Dimension();
						this.job.finishSize.name = evt.stockDefinition.parentsize.name + " x " + cutoff.toString();
						this.job.finishSize.width = evt.stockDefinition.parentsize.width;
						this.job.finishSize.height = cutoff;
						this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
						if (this.job_finish_size.selectedIndex == -1)
							this.job_finish_size.text = job.finishSize.name;
						this.job.foldedSize.name = "";
						job_fold_size.text = "";
					}
					else if (this.job_type.text == "Printing" || this.job_type.text == "B&W" || this.job_type.text == "Color" || this.job_type.text == "Blank" || this.job_type.text == "List") {
						this.job.parentSize = evt.stockDefinition.parentsize;
						this.job_parent.selectedIndex = findItem(job.parentSize.name, dimensionsArray);
						this.job.runSize = evt.stockDefinition.parentsize;
						this.job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
						this.job.finishSize = evt.stockDefinition.parentsize;
						this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
						this.job_fold_size.selectedIndex = findItem(job.foldedSize.name, dimensionsArray);
					}
					else {
						this.job.parentSize = evt.stockDefinition.normalRunSize;
						this.job_parent.selectedIndex = findItem(job.parentSize.name, dimensionsArray);
						this.job.runSize = evt.stockDefinition.normalRunSize;
						this.job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
						this.job.finishSize = evt.stockDefinition.normalRunSize;
						this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
					}
					this.mapToJobData();
					jobService.assignStockToJob(this.job, evt.stockDefinition);
//					var i:int;
//					if (this.job.charges == null) this.job.charges = new ArrayCollection();
//					for(i = 0; i < this.job.stock.charges.length; i++) {
////						this.job.charges.addItem(this.job.stock.charges.getItemAt(i));
//						
//					}
//					updatePrice();
				}
				else
				{
					this.job.stock=new StockDefinition();
					Alert.show("Stock Picker returned a null stock", "Error");
				}
			}

			private function handleStockPickerNew(evt:StockPickerSelectEvent):void
			{
				/* TODO */
				this.job.stock=new StockDefinition();
			}
			
			private function handleFocusOutEvent(evt:FocusEvent):void
			{
				if (evt.target == job_parent) {
					job.parentSize.name = job_parent.text;
				} else if (evt.target == job_size) {
					job.runSize.name = job_size.text;
				} else if (evt.target == job_finish_size) {
					job.finishSize.name = job_finish_size.text;
				} else if (evt.target == job_fold_size) {
					job.foldedSize.name = job_fold_size.text;
				}
				super.focusOutHandler(evt);
			}
			
			private function changePricingCopier():void
			{
				var copierDefinition:CopierDefinition = job_pricing_copier.selectedItem as CopierDefinition;
				jobService.assignPricingCopierToJob(this.job, copierDefinition);
				this.updatePrice();			
			}
			
			private function updatePrice():void
			{
				mapToJobData();
				var priceJobEvent:PriceJobEvent = new PriceJobEvent(this.job, new mx.rpc.Responder(handlePriceJobComplete, handlePriceJobFault));
				priceJobEvent.dispatch();
				refresh_price_btn.visible = false;
				refresh_price_btn.enabled = false;
				pricing_throbber.visible = true;
				pricing_throbber.play();
			}
			
			private function handlePriceJobComplete(ev:ResultEvent):void
			{
				pricing_throbber.stop();
				pricing_throbber.visible = false;
				var localJob:Job = ev.result as Job;
				refresh_price_btn.visible = true;
				refresh_price_btn.enabled = true;		
				job.pricingRecord.totalPrice = localJob.pricingRecord.totalPrice;	
				job.pricingRecord = localJob.pricingRecord;
				charges = localJob.charges;
				job.impositionsPerRun = localJob.impositionsPerRun;
				job.totalImpositions = localJob.totalImpositions;
				job.estWaste = localJob.estWaste;
				job.totalCost = localJob.totalCost;
				job.totalCopies = localJob.totalCopies;
				job.numCopies = localJob.numCopies;
				if (job != null) { 
					job_imp.text = job.impositionsPerRun.toString();
					total_imp.text = job.totalImpositions.toString();
					est_waste.text = job.estWaste.toString();
					if (this.total_copies != null)
						this.total_copies.text = job.totalCopies.toString();
					if (this.num_copies != null)
						this.num_copies.text = job.numCopies.toString();
					if (this.total_copies0 != null)
						this.total_copies0.text = job.totalCopies.toString();
					if (this.num_copies1 != null)
						this.num_copies1.text = job.numCopies.toString();
					if (job_totalCost != null) {
						job_totalCost.text = job.totalCost.toString();
					}
					
					if (job.pricingRecord != null) {
						overs_unit_price.text = Snowmass.getCurrencyFormatter(true,4).format(job.pricingRecord.oversUnitPrice.toString());
						overs_total_price.text = Snowmass.getCurrencyFormatter(true,4).format(job.pricingRecord.oversTotalPrice.toString());
						job_prep.text = Snowmass.getCurrencyFormatter(true,2).format(job.pricingRecord.prepPrice.toString());
						job_bind.text = Snowmass.getCurrencyFormatter(true,2).format(job.pricingRecord.bindPrice.toString());
						job_other.text = Snowmass.getCurrencyFormatter(true,2).format(job.pricingRecord.otherChargePrice.toString());
						job_total.text = Snowmass.getCurrencyFormatter(true,2).format((job.pricingRecord.totalPrice + job.pricingRecord.prepPrice + job.pricingRecord.bindPrice + job.pricingRecord.otherChargePrice).toString());
					}
				}
			}
			
			private function handlePriceJobFault(ev:FaultEvent):void
			{
				pricing_throbber.stop();
				pricing_throbber.visible = false;
				if (ev != null && ev.fault != null && ev.fault.faultString != null) {				
					Alert.show(ev.fault.faultString, "Error in Pricing", 0, null);
				} else {
					Alert.show("Unknown error when pricing job", "Error in Pricing", 0, null);
				}
			}
			
			
			private function handleCalculateCuts(ev:ResultEvent):void
			{
				if (ev.result != null) {
					var results:ArrayCollection = ev.result as ArrayCollection;
					var intValue:Number;

					intValue = results.getItemAt(0) as Number;
					this.job.paperCal.cutstoRun = intValue;
					intValue = results.getItemAt(1) as Number;
					this.job.paperCal.cutstoFinish = intValue;
				}
			}
			
			private function handleCalcOutResult(ev:ResultEvent):void
			{
				if (ev.result != null) {
					var results:ArrayCollection = ev.result as ArrayCollection;
					var intValue:Number;
					
	// maintain same order in PaperCalcualtorService.java
	/*
		results.add(out);
		results.add(runCuts);
		results.add(finishCuts);
		
		results.add(job.getPaperCal().getDAcross());
		results.add(job.getPaperCal().getDDown());
		results.add(job.getPaperCal().getAcross());
		results.add(job.getPaperCal().getDown());
		results.add(job.getPaperCal().getDutchBottom());
		results.add(job.getPaperCal().getUsedSqrArea());
		results.add(job.getPaperCal().getParentSqrArea());
		results.add(job.getPaperCal().getRMargin());
		results.add(job.getPaperCal().getBMargin());
		results.add(job.getPaperCal().getSwap());
		results.add(runOut);
		results.add(finishOut);
	*/
					
					// paper image numbers
					
			//		this.job.paperCal.sheetsOut = intValue;
			//		this.job.paperCal.runout = intValue;
	
					if (job.orRunOut == 0)						// run out was not over-ridden in job production window
					{
						intValue = results.getItemAt(13) as Number;		// runOut
						job.paperCal.runout = intValue;
					}
					
					intValue = results.getItemAt(14) as Number;		// finishOut
			//		job.pa finishOut = intValue;
					if (job.orUp == 0)
						job.numUp = intValue;
					
					job.paperCal.runout = job.numUp;		// TEMP
					job.paperCal.sheetsOut = job.paperCal.runout;
					
					// cut counts, the override logic is handled in JAVA
					intValue = results.getItemAt(1) as Number;
					job.paperCal.cutstoRun = intValue;
					intValue = results.getItemAt(2) as Number;
					job.paperCal.cutstoFinish = intValue;
					
					intValue = results.getItemAt(3) as Number;
					job.paperCal.dAcross = intValue;
					intValue = results.getItemAt(4) as Number;
					job.paperCal.dDown = intValue;
					intValue = results.getItemAt(5) as Number;
					job.paperCal.across = intValue;
					intValue = results.getItemAt(6) as Number;
					job.paperCal.down = intValue;
					intValue = results.getItemAt(7) as Number;
					job.paperCal.dutchBottom = intValue;
					
					// floating point numbers
					job.paperCal.usedSqrArea = results.getItemAt(8) as Number;
					job.paperCal.parentSqrArea = results.getItemAt(9) as Number;
					job.paperCal.rMargin = results.getItemAt(10) as Number;
					job.paperCal.bMargin = results.getItemAt(11) as Number;
					
					// does the image render with swapped sheet values
					job.paperCal.swap = results.getItemAt(12) as Boolean;
										
					// the values are back, now request the image to be generated
					//
					paperCalculatorService.GeneratePaperCalculatorImage(job, job.paperCal.whichStartSize, cutDiagram.width-15, cutDiagram.height-15);
				}
			}

			private function handleGenerateImage(evt:ResultEvent):void {
				var imageByteArray:ByteArray = evt.result as ByteArray;
				
				var loader:Loader = new Loader();
				loader.loadBytes(imageByteArray);				 
				loader.contentLoaderInfo.addEventListener(Event.COMPLETE,loaderCompleteHandler);
			}
			
			private function loaderCompleteHandler(evt:Event):void {
				var loader:LoaderInfo = evt.target as LoaderInfo;
				var bmp:Bitmap = Bitmap(loader.content);
				
				var myImage:Image = new Image();
				myImage.source = bmp;
				this.cutDiagram.removeAllChildren();
				this.cutDiagram.addChild(myImage);
			}			
						
			private function refreshCalcAndImage():void
			{				
				mapToJobData();

				paperCalculatorService.CalcOut(job, job.paperCal.whichStartSize);
			}

			private function refreshImageAndWeight():void
			{
				refreshCalcAndImage();
				updateWeight();
			}


			private function fieldChanged(evt:FocusEvent):void
			{	
				var doUpdatePrice:Boolean = false;
				mapToJobData();
				switch (evt.currentTarget) {
				case this.job_ordered:
					doUpdatePrice = true;
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					updateWeight();
					break;
				case this.job_over_under:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.sets_of:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					updateWeight();
					break;
				case this.job_sheets:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					updateWeight();
					break;
				case this.job_up:
					doUpdatePrice = true;
					break;
				case this.job_on:
					doUpdatePrice = true;
					break;
				case this.job_press:
					doUpdatePrice = true;
					break;
				case this.bindery_waste:
					doUpdatePrice = true;
					break;
				case this.est_waste:
					doUpdatePrice = true;
					break;
				case this.front_colors_text:
					this.front_passes_text.text = this.front_colors_text.text;
					doUpdatePrice = true;
					break;
				case this.back_colors_text:
					this.back_passes_text.text = this.back_colors_text.text;
					doUpdatePrice = true;
					break;	
				case this.job_unitCost:
					doUpdatePrice = true;
					break;
				case this.job_markup:
					doUpdatePrice = true;
					break;
				case this.job_number_of_inches:
					doUpdatePrice = true;
					break;
				case this.job_number_of_lines:
					break;
				}
				if (doUpdatePrice) updatePrice();
				
				paperCalculatorService.CalcOut(job, job.paperCal.whichStartSize);
			}
			
			public function changeJobSides(evt:Event):void {
				if (this.copy_single_radio.selected == true) {
					this.job.singleSided = true;
					this.job.doubleSided = false;
				} else {
					this.job.singleSided = false;
					this.job.doubleSided = true;
				}
				updatePrice();
			}
			
			public function updatePricingMethod():void {
				// TODO: The pricing method needs to be based on the ESTIMATOR used NOT the title - each estimator may have multiple titles...
				var pricingMethod:PreferencesPricingMethod = job_type.selectedItem as PreferencesPricingMethod;
				
				if (pricingMethod.title == "Printing") {
					this.currentState = "PrintMethod";
					estimator_viewstack.selectedChild = printing_estimator_canvas;
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultSheetFedPress != null) {
						this.job_pricing_press.selectedIndex = findItemById(preferencesDefaultPresses.defaultSheetFedPress.id, presses);
						this.job_costing_press.selectedIndex = findItemById(preferencesDefaultPresses.defaultSheetFedPress.id, presses);
					}
				} else if (pricingMethod.title == "Roll-Fed") {
					this.currentState = "LargeFormat";
					estimator_viewstack.selectedChild = printing_estimator_canvas;
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultRollFedPress != null) {
						if (preferencesDefaultPresses.defaultRollFedPress != null) {
							this.job_pricing_press.selectedIndex = findItemById(preferencesDefaultPresses.defaultRollFedPress.id, presses);
							this.job_costing_press.selectedIndex = findItemById(preferencesDefaultPresses.defaultRollFedPress.id, presses);
						}
					}
				} else if (pricingMethod.title == "B&W") {
					this.currentState = "CopyMethod";
					estimator_viewstack.selectedChild = copy_estimator_canvas;	
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultBWCopier != null) {
						this.job_pricing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultBWCopier.id, copiers);	
						this.job_costing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultBWCopier.id, copiers);
					}			
				} else if (pricingMethod.title == "Color") {
					this.currentState = "CopyMethod";
					estimator_viewstack.selectedChild = copy_estimator_canvas;				
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultColorCopier != null) {
						this.job_pricing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultColorCopier.id, copiers);	
						this.job_costing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultColorCopier.id, copiers);
					}	
				} else if (pricingMethod.title == "Large Format") {
					this.currentState = "LargeFormat";
					estimator_viewstack.selectedChild = copy_estimator_canvas;	
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultLargeFormat != null) {
						this.job_pricing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultLargeFormat.id, copiers);
						this.job_costing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultLargeFormat.id, copiers);
					}				
				} else if (pricingMethod.title == "Charges Only") {
					this.currentState = "ChargesOnly";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Outside Services") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Merchandise") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Lines & Inches") {
					this.currentState = "LinesAndInches";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Mailing") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Blank") {
					this.currentState = "Blank";
				}

			}
			private function updateWeight():void{
				var tempweight:Number;
				var finish:Number;
				var parent:Number;
				var basic:Number;
				if ( job.parentSize != null)
						job.parentSize = job_parent.selectedItem as Dimension;
				if ( job.finishSize != null && job_finish_size.selectedIndex > -1)
					job.finishSize = job_finish_size.selectedItem as Dimension;
				
				if ( job.stock != null)
				 if( this.currentState != "LargeFormat"){
				   finish = job.finishSize.width * job.finishSize.height;
				   parent = job.parentSize.width * job.parentSize.height;
				   if (parent > 0.0){
						tempweight = ((finish / parent )* job.stock.mweight) / 1000;
						job.weight= (job.qtyOrdered * job.inSetsOf * job.sheets)* tempweight;
				  	 }
				}else{
					parent = job.stock.parentsize.width * job.cutOff;
					//basic = job.stock.stktype.size
				}
					
			}
			public function setPricingMethod(pricingMethod:PreferencesPricingMethod):void {
				if (pricingMethod != null)  {
					this.job_type.selectedItem = pricingMethod;
					this.job.pricingMethod = pricingMethod;
					updatePricingMethod();
				}
			}
			
			public function showJobPricingInfo():void {
	    		var jobPricingInfoWindow:JobPricingInfo = JobPricingInfo(PopUpManager.createPopUp(this, JobPricingInfo, true));
	    		jobPricingInfoWindow.setStyle("borderAlpha", 0.9);
	    		jobPricingInfoWindow.setPriceLogEntry(this.job.pricingRecord.priceLogEntry);		
	    	}
	    	
	    	private function editUnitPrice(evt:Event):void {
	    		if (job_unitPrice.text == "") {
	    			job.pricingRecord.unitPriceOverride = false;
	    			job.pricingRecord.unitPrice = 0;
	    		} else {
	    			job.pricingRecord.unitPriceOverride = true;
	    			job.pricingRecord.unitPrice = parseFloat(job_unitPrice.text); 
	    		}
	    	}
	    	private function doPaperCal():void{
	    		mapToJobData();
	    		
	    		var paperCalWindow:PaperCalculator = PaperCalculator(PopUpManager.createPopUp(this, PaperCalculator, true));
				paperCalWindow.setStyle("borderAlpha", 0.9);
				if (job.paperCal.colorBar == 0 && estimatingPreferences != null)
					job.paperCal.colorBar = estimatingPreferences.colorBar;
				paperCalWindow.setdimension(dimensionsArray)
			 	paperCalWindow.setJob(job);
			 	
			   
			//    paperCalWindow.addEventListener(StockPickerSelectEvent.CANCELSELECTSTOCK, handleStockPickerCancel);
			    paperCalWindow.addEventListener(JobEditCompleteEvent.SAVE, handleJobEditSave);
			 }
	    	private function doDigitalAssets():void {
	    		var digitalAssetsWindow:JobDigitalAssets = JobDigitalAssets(PopUpManager.createPopUp(this, JobDigitalAssets, true));
	    		digitalAssetsWindow.addEventListener(DigitalAssetEvent.OK, handleDigitalAssetComplete);
				digitalAssetsWindow.setStyle("borderAlpha", 0.9);
	    		digitalAssetsWindow.job = this.job;
	    	}
	    	
	    	private function handleDigitalAssetComplete(event:DigitalAssetEvent):void {
	    		if (event.assetArray != null) {
	    			this.job.digitalAssets = event.assetArray;
	    		}
	    	}
	    	
	    	private function handleJobEditSave(event:JobEditCompleteEvent):void {
	    		var localJob:Job = event.job as Job;
	    		
				job.parentSize = localJob.parentSize;
				job.runSize = localJob.runSize;
				job.finishSize = localJob.finishSize;
				
				if (job.parentSize != null)
					this.job_parent.selectedIndex = findItem(job.parentSize.name, dimensionsArray);
				if (job.runSize != null)
					this.job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
				if (job.foldedSize != null)
					this.job_fold_size.selectedIndex = findItem(job.foldedSize.name, dimensionsArray);
				if ( job.finishSize != null)
					this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
	    		
	    		refreshCalcAndImage();
	    	}
	    	
	    	
	    	private function doXpedxStockStatus():void{
				var statusWindow:XpdexStockAvailability = XpdexStockAvailability(PopUpManager.createPopUp(this,XpdexStockAvailability,true));
				statusWindow.setStyle("borderAlpha", 0.9);
				var temp:StockDefinition
				temp = job.stock as StockDefinition;
			 	statusWindow.setStock(temp);
			 }
	    	
	    	private function doInkEditorFront():void{
	    		var inkWindow:InkColorPicker = InkColorPicker(PopUpManager.createPopUp(this, InkColorPicker, true));
				inkWindow.setStyle("borderAlpha", 0.9);
				inkWindow.setSide("front");
			 	inkWindow.setInks(job);
			 	front = true;
			 	inkWindow.addEventListener(InkColorEvent.Close, handleInkColorClose);
			 	
			 }
			 private function doInkEditorBack():void{
	    		var inkWindow:InkColorPicker = InkColorPicker(PopUpManager.createPopUp(this, InkColorPicker, true));
				inkWindow.setStyle("borderAlpha", 0.9);
				inkWindow.setSide("back");			 	
			 	inkWindow.setInks(job);
			 	front = false;
			 	inkWindow.addEventListener(InkColorEvent.Close, handleInkColorClose);
			 	
			 }
			 private function handleInkColorClose(event:InkColorEvent):void
			 {
			 	if (front)
			 		job.frontInks = event.tempArray;
			 	else
			 		job.backInks = event.tempArray;
			 }
	    	private function submitToFiery():void {
				if (invoice != null && !isNaN(invoice.id)) { // Only allow submission if invoice & job have been saved
					if (job != null && !isNaN(job.id)) {
						jdfIntegrationService.sendJobToFiery(job.id, invoice.id);	
					}
				} else {
					Alert.show("You may only submit jobs that have been saved to a valid invoice.", "Error", 0, null);
				}
	    	}
		]]>

	</mx:Script>

	<mx:VBox width="100%"
			 height="625"
			 creationPolicy="all" id="vbox1" verticalScrollPolicy="off">
		<mx:Canvas width="939"
				   height="624"
				   verticalScrollPolicy="off"
				   fontSize="9" id="canvas1">
			<mx:LinkButton x="10"
					   y="10"
					   width="38"
					   height="38"
					   click="doSave();"
					   id="file_button">
				<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="10"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Save')}"
					  width="38"
					  textAlign="center"/>
			<mx:LinkButton x="150.5"
					   y="10"
					   width="38"
					   height="38"
					   click="doGet();"
					   id="note_pad_button">
				<mx:icon>@Embed(source='../../../../assets/notes.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="139"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.JobNotes')}"
					  width="61"
					  textAlign="center"/>
			<mx:LinkButton x="253"
					   y="10"
					   width="38"
					   height="38"
					   click="doNew();"
					   id="new_job_button">
				<mx:icon>@Embed(source='../../../../assets/preview.png')</mx:icon>
			</mx:LinkButton>
			<mx:LinkButton x="67"
					   y="10"
					   width="38"
					   height="38"
					   click="doDelete();"
					   id="cancel_button">
				<mx:icon>@Embed(source='../../../../assets/delete.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="56"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Cancel')}"
					  width="58"
					  textAlign="center"/>
			<mx:LinkButton x="396.5"
					   y="10"
					   width="38"
					   height="38"
					   id="tickets_button">
				<mx:icon>@Embed(source='../../../../assets/print_carton_labels.png')</mx:icon>
			</mx:LinkButton>
			<mx:LinkButton x="503"
					   y="10"
					   width="38"
					   height="38"
					   id="print_button"
					   click="doProductionData();">
				<mx:icon>@Embed(source='../../../../assets/production.png')</mx:icon>
			</mx:LinkButton>
			<mx:LinkButton x="564"
					   y="10"
					   width="38"
					   height="38"
					   id="preview_button"
					   click="submitToFiery()">
				<mx:icon>@Embed(source='../../../../assets/submit.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="554"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Submit')}"
					  width="58"
					  textAlign="center"/>
			<mx:Label x="488"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Production')}"
					  width="68"
					  textAlign="center"/>
			<mx:Label x="371"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.CartonLabels')}"
					  width="89"
					  textAlign="center"/>
			<mx:Label x="243"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'newInvCmd.Preview')}"
					  width="58"
					  textAlign="center"/>
			<mx:LinkButton x="319.5"
					   y="10"
					   width="38"
					   height="38"
					   click="doNew();"
					   id="change_account_button">
				<mx:icon>@Embed(source='../../../../assets/print.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="299"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.JobTicket')}"
					  width="79"
					  textAlign="center"/>
			<mx:CheckBox x="10"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Brokered')}"
						 id="check_brokered"
						 selected="{job.brokered}" width="75"/>
			<mx:CheckBox x="93"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Taxable')}"
						 id="check_taxtable"
						 selected="{job.taxable}" width="70"/>
			<mx:CheckBox x="171"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Finished')}"
						 id="checked_finished"
						 selected="{job.finished}" width="64"/>
			<fc:AutoComplete x="309"
							 y="68"
							 width="125.5"
							 id="product"
							 dataProvider="{productCodes}"
							 labelField="name"
							 height="20"/>
			<mx:TextInput
						  y="94"
						  width="797"
						  id="job_comment"
						  text="{job.comment}"
						  height="20"
						  right="10"/>
			<mx:Label x="10"
					  y="96"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Comment')}" textAlign="right" width="98"/>
			<fc:AutoComplete x="506.5"
							 y="68"
							 width="124"
							 id="job_location"
							 dataProvider="{locations}"
							 labelField="name"
							 height="20"/>
			<mx:Label x="243"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Product')}" textAlign="right" width="58"/>
			<mx:Label x="442.5"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Location')}" textAlign="right" width="56"/>
			<mx:Label x="638.5"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'posRegisterCmd.Type')}" textAlign="right" width="63.5"/>
			<mx:ComboBox
						 y="65"
						 id="job_type"
						 dataProvider="{pricingMethods}"
						 change="updatePricingMethod();"
						 labelField="title"
						 right="10"
						 left="710">
			</mx:ComboBox>
			<mx:Canvas x="0" y="119" width="939" height="512" verticalScrollPolicy="auto" id="canvas2">
				<mx:HDividedBox x="0"
								width="939"
								height="502" verticalScrollPolicy="off" id="hdividedbox1" bottom="10">
					<!--			<mx:Tree width="200"
						 height="100%">
						 </mx:Tree>
					-->
					<mx:Accordion width="250"
								  height="502"
								  fontSize="9" headerHeight="18">
						<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Charges')}"
								   width="100%"
								   height="100%"
								   fontSize="9"
								   verticalScrollPolicy="off"
								   horizontalScrollPolicy="off">
							<mx:LinkButton x="188"
										   id="delete_charge_button"
										   click="doDeleteCharge()"
										   icon="@Embed(source='../../../../assets/delete16.png')"
										   width="24"
										   bottom="2"/>
							<mx:LinkButton x="219"
										   id="add_charge_button"
										   click="doAddCharge()"
										   icon="@Embed(source='../../../../assets/add16.png')"
										   width="24"
										   bottom="2" enabled="false"/>
							<mx:DataGrid
										 id="invoice_charge_datagrid"
										 dataProvider="{job.charges}"
										 left="0"
										 bottom="25"
										 top="0"
										 right="0"
										 showHeaders="false" alternatingItemColors="[#FFFFFF,#FFFFFF]">
								<mx:columns>
									<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Description')}"
													   dataField="description"/>
									<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Price')}"
													   width="90"
													   dataField="price"
													    textAlign="right"/>
								</mx:columns>
							</mx:DataGrid>
						</mx:Canvas>
						<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Commands')}"
								   width="100%"
								   height="100%">
							<mx:LinkButton x="10"
										   y="10"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.PrintJobTicket')}"/>
							<mx:LinkButton x="10"
										   y="30"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.PreviewJobTicket')}"/>
							<mx:LinkButton x="10"
										   y="50"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.JobTicketNotes')}"/>
							<mx:LinkButton x="10"
										   y="70"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.WebWorkSheet')}"/>
							<mx:LinkButton x="10"
										   y="90"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.DigitalAssets')}"
										   click="doDigitalAssets()"/>
							<mx:LinkButton x="10"
										   y="110"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.MultiQty')}"/>
							<mx:LinkButton x="22" y="129" label="Current xpedx Stock Status" click="doXpedxStockStatus()"/>
						</mx:Canvas>
					</mx:Accordion>
					<mx:ViewStack id="viewstack3"
								  width="640"
								  height="504">
						<mx:Canvas label="View 1"
								   width="100%"
								   height="100%"
								   fontSize="9" id="canvas4">
							<mx:TextArea x="85"
										 y="1"
										 width="281"
										 id="job_description"
										 text="{job.description}"
										 height="40"/>
							<mx:Label x="10"
									  y="2"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Description')}" width="67" textAlign="right" id="label32"/>
							<mx:TextInput x="496"
										  y="24"
										  id="job_over_under"
										  text="{job.oversUnders}"
										  height="20"
										  width="98" focusOut="fieldChanged(event)" textAlign="right"/>
							<mx:TextInput x="496"
										  y="47"
										  id="sets_of"
										  text="{job.inSetsOf}"
										  height="20"
										  width="98" focusOut="fieldChanged(event)" textAlign="right"/>
							<mx:TextInput x="496"
										  y="301"
										  id="overs_unit_price"
										  height="20"
										  width="98" textAlign="right"/>
							<mx:TextInput x="496"
										  y="323"
										  id="overs_total_price"
										  height="20"
										  width="98" textAlign="right"/>
							<mx:Label x="385"
									  y="325"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversTotalPrice')}" textAlign="right" width="108" id="label1"/>
							<mx:Label x="385"
									  y="387"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Other')}" textAlign="right" width="108" id="label2"/>
							<mx:Label x="385"
									  y="345"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Prep')}" textAlign="right" width="108" id="label3"/>
							<mx:Label x="496"
									  y="345"
									  width="98"
									  id="job_prep"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="366"
									  width="98"
									  id="job_bind"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="387"
									  width="98"
									  id="job_other"
									  height="20" textAlign="right"/>
							<mx:Label x="385"
									  y="422"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Total')}" textAlign="right" width="108" id="label4"/>
							<mx:Label x="496.95"
									  y="422"
									  width="97.05"
									  id="job_total"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="185"
									  width="98"
									  id="total_copies"
									  text="{job.signatures}"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="206"
									  width="98"
									  id="job_imp"
									  height="20" textAlign="right" text="{job.impositionsPerRun}"/>
							<mx:Label x="496"
									  y="227"
									  width="98"
									  id="total_imp"
									  height="20" textAlign="right" text="{job.totalImpositions}"/>
							<mx:Label x="496"
									  y="248"
									  width="98"
									  id="job_weight"
									  height="20" textAlign="right" text="{job.weight}"/>
							<mx:Label x="385"
									  y="366"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Bind')}" textAlign="right" width="108" id="label5"/>
							<mx:TextInput x="496"
										  y="279"
										  id="job_price"
										  height="20"
										  width="98" textAlign="right" text="{job.pricingRecord.totalPrice}"/>
							<mx:Label x="385"
									  y="281"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Price')}" textAlign="right" width="108" id="label7"/>
							<mx:Label x="385"
									  y="303"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversUnitPrice')}" textAlign="right" width="108" id="label6"/>
							<mx:TextInput x="496"
										  y="70"
										  id="job_sheets"
										  text="{job.sheets}"
										  height="20"
										  width="98" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="93"
										  width="45.300003"
										  id="job_up"
										  text="{job.numUp}"
										  height="20" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="548.3"
										  y="93"
										  width="45.700005"
										  id="job_on"
										  text="{job.numOn}"
										  height="20" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="115"
										  id="job_press"
										  height="20"
										  width="98"
										  text="{job.pressQty}" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="138"
										  id="bindery_waste"
										  text="{job.binderyWaste}"
										  height="20"
										  width="98" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="161"
										  id="est_waste"
										  text="{job.estWaste}"
										  height="20"
										  width="98" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:Label x="385"
									  y="248"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Weight')}" textAlign="right" width="108" id="label11"/>
							<mx:Label x="385"
									  y="227"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.TotImp')}" textAlign="right" width="108" id="label8"/>
							<mx:Label x="385"
									  y="206"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.ImpRun')}" textAlign="right" width="108" id="label9"/>
							<mx:Label x="385"
									  y="185"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OfSignatures')}" textAlign="right" width="108" id="label10"/>
							<mx:Label x="385"
									  y="163"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.EstWaste')}" textAlign="right" width="108" id="label31"/>
							<mx:Label x="385"
									  y="140"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.BinderyWaste')}" textAlign="right" width="108" id="label34"/>
							<mx:Label x="385"
									  y="117"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Press')}" textAlign="right" width="108" id="label12"/>
							<mx:Label x="385"
									  y="95"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UpOn')}" textAlign="right" width="108" id="label30"/>
							<mx:Label x="385"
									  y="72"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Sheets')}" textAlign="right" width="108" id="label29"/>
							<mx:Label x="385"
									  y="49"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.InSetsOf')}" textAlign="right" width="108" id="label28"/>
							<mx:TextInput x="496"
										  y="1"
										  id="job_ordered"
										  text="{job.qtyOrdered}"
										  height="20"
										  width="98" focusOut="fieldChanged(event)" textAlign="right"/>
							<mx:Label x="385"
									  y="3"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Ordered')}" textAlign="right" width="108"/>
							<mx:Label x="385"
									  y="26"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversUnders')}" textAlign="right" width="108" id="label33"/>
							<mx:VRule x="374"
									  bottom="5"
									  top="5"/>
							<mx:HRule y="273"
									  height="2.0054946"
									  right="5"
									  left="380"/>
							<mx:HRule y="411"
									  height="2.0054946"
									  right="5"
									  left="380" id="hrule2"/>
							<mx:HRule y="415"
									  height="2.0054946"
									  right="5"
									  left="380" id="hrule1"/>
							<mx:HRule x="10"
									  y="46"
									  width="356"
									  height="2" id="hrule3"/>
							<mx:ViewStack x="10"
										  y="46"
										  id="viewstack4"
										  width="358"
										  height="218">
								<mx:Canvas label="View 1"
										   width="100%"
										   height="100%" id="canvas3">
									<mx:Text x="107"
											 y="57"
											 width="247"
											 height="20"
											 id="job_color"
											 text="{job.stock.color.name}"
											 fontSize="9"/>
									<mx:TextInput x="107"
												  y="167"
												  width="100"
												  height="20"
												  id="number_lines"
												  fontSize="9"/>
									<mx:Label x="6"
											  y="147"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.FoldedSize')}"
											  fontSize="9" textAlign="right" width="94" id="label16"/>
									<mx:Label x="6"
											  y="125"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Finish')}"
											  fontSize="9" textAlign="right" width="94" id="label17"/>
									<mx:Label x="6"
											  y="190"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}"
											  fontSize="9" textAlign="right" width="94" id="label15"/>
									<mx:TextInput x="107"
												  y="189"
												  width="100"
												  height="20"
												  id="job_unit_price"
												  fontSize="9"/>
									<mx:Label x="6"
											  y="103"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RunSize')}"
											  fontSize="9" textAlign="right" width="94" id="runsize_label"/>
									<mx:Label x="11"
											  y="81"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Parent')}"
											  fontSize="9" textAlign="right" width="89" id="label13"/>
									<mx:Label x="6"
											  y="169"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.NumberofLines')}"
											  fontSize="9" textAlign="right" width="94" id="label14"/>
									<mx:TextInput x="107"
												  y="35"
												  width="171"
												  height="20"
												  id="job_stock"
												  text="{job.stock.name}"
												  fontSize="9"/>
									<mx:Label x="6"
											  y="37"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Stock')}"
											  fontSize="9" width="94" textAlign="right" id="label18"/>
									<mx:Label x="10"
											  y="57"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Color')}"
											  fontSize="9" textAlign="right" width="90" id="label19"/>
									<mx:CheckBox x="10"
												 y="6"
												 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CustomerSuppliedStoc')}"
												 id="customer_suppliled_stock"
												 fontSize="9"
												  selected="{job.customerSuppliedStock}"
												   change="doCustomerSupplied()"/>
									<mx:CheckBox x="218"
												 y="7"
												 fontSize="9" id="specialOrder"
												  selected="{job.specialOrderStock}"
												   change="doSpecialOrder()"/>
									<mx:Button x="240"
											   y="7"
											   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.SpecialOrder')}"
											   fontSize="9"
											   height="18"
											   id="special_order_button" width="108"/>
							<!--		<mx:Image x="215"
											  y="81"
											  width="139"
											  id="cutDiagram"
											  height="124" click="doPaperCal();" source="assets/Original PS Icons/380.png"/>
								-->	
									<mx:Canvas x="215"
											   y="81"
											   width="140"
											   height="127"
											   borderStyle="inset"
											   click="doPaperCal();"
											   id="cutDiagram">
									</mx:Canvas>
									<mx:HRule x="2"
											  y="215"
											  width="356"
											  height="2"/>
									<mx:Button x="286"
											   y="35"
											   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'usecCmd.Change')}"
											   fontSize="9"
											   height="18"
											   id="chage_stock_button"
											   click="changeStockDefinition()" width="62"/>
									<mx:ComboBox x="108" y="79" width="99" id="job_parent" labelField = "name" dataProvider="{dimensionsArray}" editable="true" change="refreshImageAndWeight()"></mx:ComboBox>
									<mx:ComboBox x="108" y="101" width="99" id="job_size" labelField="name" dataProvider="{dimensionsArray}" editable="true" change="refreshCalcAndImage()"></mx:ComboBox>
									<mx:ComboBox x="108" y="123" width="99" id="job_finish_size" labelField="name" dataProvider="{dimensionsArray}"  change="refreshImageAndWeight()" editable="true"></mx:ComboBox>
									<mx:ComboBox x="108" y="145" width="99" id="job_fold_size"  labelField="name" dataProvider="{dimensionsArray}" editable="true"></mx:ComboBox>
								</mx:Canvas>
								<mx:Canvas label="merchandise_canvas"
										   width="100%"
										   height="100%">
									<mx:TextArea x="79"
												 y="10"
												 width="277"
												 id="job_notes"
												 text="{job.jobNotes}"/>
									<mx:Label x="-36"
											  y="11"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Notes')}"/>
									<mx:CheckBox x="79"
												 y="62"
												 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.ShowNotes')}"
												 id="check_job_notes"
												 selected="{job.jobTicketNotes}"/>
									<mx:TextInput x="79"
												  y="92"
												  width="277"
												  height="22"
												  id="vendor_edit"/>
									<mx:Label x="-36"
											  y="94"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Vendor')}"/>
								</mx:Canvas>
							</mx:ViewStack>
							<mx:ViewStack x="10"
										  y="263"
										  id="estimator_viewstack"
										  width="358"
										  height="239">
								<mx:Canvas id="printing_estimator_canvas"
										   width="100%"
										   height="100%">
									<mx:ComboBox x="107"
													 y="5"
													 width="241"
													 height="20"
													 id="job_pricing_press"
													 dataProvider="{presses}"
													 labelField="name"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="7"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.PricingPress')}"
											  fontSize="9" textAlign="right" width="91" id="label20"/>
									<mx:ComboBox x="107"
													 y="28"
													 width="241"
													 height="20"
													 id="job_costing_press"
													 dataProvider="{presses}"
													 labelField="name"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="30"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CostingPress')}"
											  fontSize="9" textAlign="right" width="91" id="label21"/>
									<mx:Label x="6"
											  y="96"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Back')}"
											  fontSize="9" textAlign="right" width="34" id="label26"/>
									<mx:Label x="5"
											  y="73"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Front')}"
											  fontSize="9" textAlign="right" width="35" id="label24"/>
									<mx:Panel x="48"
											  y="122"
											  width="203"
											  height="94"
											  layout="absolute"
											  title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RunMethod')}"
											  dropShadowEnabled="false"
											  fontSize="9" headerHeight="20" borderThicknessBottom="3" borderThicknessLeft="3" borderThicknessRight="3">
										<mx:RadioButtonGroup id="run_method_radiogroup"/>
										<mx:RadioButton x="10"
														y="27"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.WorkandTurn')}"
														groupName="run_method_radiogroup"
														height="18"
														value="{Constants.JOB_RUN_METHOD_WORK_TURN}" width="179" id="radiobutton1"/>
										<mx:RadioButton x="10"
														y="6"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Sheetwise')}"
														groupName="run_method_radiogroup"
														height="18"
														value="{Constants.JOB_RUN_METHOD_SHEETWISE}" width="177" id="radiobutton2"/>
										<mx:RadioButton x="10"
														y="48"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.WorkandTumble')}"
														groupName="run_method_radiogroup"
														height="18"
														value="{Constants.JOB_RUN_METHOD_WORK_TUMBLE" width="169" id="radiobutton3"/>
									</mx:Panel>
									<mx:Label x="48"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Colors')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label22"/>
									<mx:Label x="96"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Passes')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label23"/>
									<mx:Label x="144"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Washes')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label25"/>
									<mx:Label x="192"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Ink')}"
											  width="156"
											  textAlign="center"
											  fontSize="9" id="label27"/>
									<mx:TextInput x="48"
												  y="71"
												  width="46"
												  height="20"
												  id="front_colors_text"
												  fontSize="9" textAlign="center"
												  text="{job.frontColors}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="96"
												  y="71"
												  width="46"
												  height="20"
												  id="front_passes_text"
												  fontSize="9" textAlign="center"
												  text="{job.frontPasses}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="96"
												  y="94"
												  width="46"
												  height="20"
												  id="back_passes_text"
												  fontSize="9" textAlign="center"
												  text="{job.backPasses}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="144"
												  y="71"
												  width="46"
												  height="20"
												  id="front_washes_text"
												  fontSize="9" textAlign="center"
												  text="{job.frontWashes}" focusOut="fieldChanged(event)"/>
									<mx:List x="192"
												  y="71"
												  width="156"
												  height="20"
												  id="front_inks_text"
												  fontSize="9" textAlign="center"
												   dataProvider="{job.frontInks}"
												    labelField="name" click="doInkEditorFront();" wordWrap="true"/>
									<mx:List x="192"
												  y="94"
												  width="156"
												  height="20"
												  id="back_inks_text"
												  fontSize="9" textAlign="center"
												   dataProvider="{job.backInks}"
												    labelField="name" click="doInkEditorBack();"/>
									<mx:TextInput x="144"
												  y="94"
												  width="46"
												  height="20"
												  id="back_washes_text"
												  fontSize="9" textAlign="center"
												  text="{job.backWashes}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="48"
												  y="94"
												  width="46"
												  height="20"
												  id="back_colors_text"
												  fontSize="9" textAlign="center"
												  text="{job.backColors}" focusOut="fieldChanged(event)"/>
								</mx:Canvas>
								<mx:Canvas id="copy_estimator_canvas" label="Copiers" width="100%" height="100%">
									<mx:ComboBox x="107"
													 y="5"
													 width="241"
													 height="20"
													 id="job_pricing_copier"
													 dataProvider="{copiers}"
													 labelField="name"
													 change="changePricingCopier()"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="7"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.PricingCopier')}"
											  fontSize="9" width="90" textAlign="right"/>
									<mx:ComboBox x="107"
													 y="28"
													 width="241"
													 height="20"
													 id="job_costing_copier"
													 dataProvider="{copiers}"
													 labelField="name"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="30"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CostingCopier')}"
											  fontSize="9" width="90" textAlign="right"/>
									<mx:RadioButtonGroup id="copierSides"/>
									<mx:RadioButton x="107" y="58" click="changeJobSides(event)" id="copy_single_radio" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.SingleSided')}" groupName="copierSides" fontSize="9"/>
									<mx:RadioButton x="107" y="78" click="changeJobSides(event)" id="copy_double_radio" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.DoubleSided')}" groupName="copierSides" fontSize="9"/>
								</mx:Canvas>
							</mx:ViewStack>
							<ns1:SmallThrobber visible="false" id="pricing_throbber" x="599" y="278" height="20" width="20"/>
							<mx:LinkButton x="596" y="278" width="20" id="refresh_price_btn" height="20" click="updatePrice()">
								<mx:icon>@Embed(source='../../../../assets/refresh_small.png')</mx:icon>
							</mx:LinkButton>
							<mx:LinkButton x="618" y="278" width="20" id="price_info_btn" height="20" click="showJobPricingInfo()">
								<mx:icon>@Embed(source='../../../../assets/help_small.png')</mx:icon>
							</mx:LinkButton>
						
						</mx:Canvas>
					</mx:ViewStack>
				</mx:HDividedBox>
			</mx:Canvas>
			<mx:LinkButton x="629"
					   y="10"
					   width="38"
					   height="38"
					   click="doSaveTemplate();"
					   id="template_button">
				<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="620"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Savetemplateas')}"
					  width="64"
					  textAlign="center"/>
		
		</mx:Canvas>
		<comp:SmallThrobber id="throbber" height="20" width="20" visible="true" horizontalCenter="0" verticalCenter="0"/>
	</mx:VBox>
</mx:TitleWindow>
