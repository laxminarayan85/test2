<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml"
				xmlns:view="com.efi.printsmith.view.*"
				xmlns:vo="com.efi.printsmith.vo.*"
				xmlns:fc="http://www.adobe.com/2006/fc"
				title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Jobs')}"
				creationComplete="init()"
				label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Jobs')}"
				name="Job Editor"
				horizontalScrollPolicy="off"
				verticalScrollPolicy="auto"
				showCloseButton="true"
				close="doDelete()" width="966" height="660" xmlns:ns1="com.efi.printsmith.components.*" xmlns:ns2="com.adobe.flex.extras.controls.*">
	<mx:states>
		<mx:State name="PrintMethod">
			<mx:SetProperty target="{job_imp}" name="text" value="{job.impositionsPerRun}"/>
			<mx:SetProperty target="{total_imp}" name="text" value="{job.totalImpositions}"/>
		</mx:State>
		<mx:State name="CopyMethod">
			<mx:SetProperty target="{job_total}" name="y" value="444"/>
			<mx:SetProperty target="{hrule1}" name="y" value="437"/>
			<mx:SetProperty target="{hrule2}" name="y" value="433"/>
			<mx:SetProperty target="{job_other}" name="y" value="409"/>
			<mx:SetProperty target="{job_bind}" name="y" value="388"/>
			<mx:SetProperty target="{job_prep}" name="y" value="367"/>
			<mx:SetProperty target="{label2}" name="y" value="409"/>
			<mx:SetProperty target="{label3}" name="y" value="367"/>
			<mx:SetProperty target="{label4}" name="y" value="444"/>
			<mx:SetProperty target="{label5}" name="y" value="388"/>
			<mx:SetProperty target="{overs_total_price}" name="y" value="345"/>
			<mx:SetProperty target="{label1}" name="y" value="347"/>
			<mx:SetProperty target="{overs_unit_price}" name="y" value="323"/>
			<mx:SetProperty target="{label6}" name="y" value="325"/>
			<mx:SetProperty target="{label7}" name="y" value="303"/>
			<mx:SetProperty target="{refresh_price_btn}" name="y" value="300"/>
			<mx:SetProperty target="{price_info_btn}" name="y" value="300"/>
			<mx:SetProperty target="{job_price}" name="y" value="301"/>
			<mx:AddChild relativeTo="{label7}" position="before">
				<mx:TextInput x="496"
							  y="279"
							  id="job_unitPrice"
							  height="20"
							  width="98" textAlign="right" text="{job.pricingRecord.unitPrice}"
							  focusOut="editUnitPrice(event)"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label7}" position="before">
				<mx:Label x="385"
						  y="281"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}" textAlign="right" width="108" id="label0"/>
			</mx:AddChild>
			<mx:SetProperty target="{copy_single_radio}" name="width" value="230"/>
			<mx:SetProperty target="{copy_double_radio}" name="width" value="230"/>
			<mx:SetProperty target="{pricing_throbber}" name="y" value="301"/>
			<mx:SetProperty target="{pricing_throbber}" name="visible" value="false"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:AddChild relativeTo="{job_weight}" position="before">
				<mx:Label x="496"
						  y="185"
						  width="98"
						  id="num_of_sig0"
						  text="{job.signatures}"
						  height="20" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{job_weight}" position="before">
				<mx:Label x="385"
						  y="185"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OfSignatures')}" textAlign="right" width="108"/>
			</mx:AddChild>
			<mx:SetProperty target="{num_of_sig}" name="y" value="207"/>
			<mx:SetProperty target="{label10}" name="x" value="384"/>
			<mx:SetProperty target="{label10}" name="y" value="207"/>
			<mx:SetProperty target="{num_of_sig}" name="text" value="{job.totalCopies}"/>
			<mx:SetProperty target="{label10}" name="text">
				<mx:value>{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.TotCopy')}</mx:value>
			</mx:SetProperty>
			<mx:SetProperty target="{job_weight}" name="y" value="229"/>
			<mx:SetProperty target="{label11}" name="x" value="384"/>
			<mx:SetProperty target="{label11}" name="y" value="229"/>
			<mx:SetProperty target="{job_weight}" name="text" value="{job.weight}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:AddChild relativeTo="{est_waste}" position="before">
				<mx:TextInput x="496"
							  y="115"
							  id="bindery_waste0"
							  text="{job.numCopies}"
							  height="20"
							  width="98" textAlign="right" focusOut="fieldChanged(event)"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{est_waste}" position="before">
				<mx:Label x="385"
						  y="117"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Copies')}" textAlign="right" width="108"/>
			</mx:AddChild>
		</mx:State>
		<mx:State name="LargeFormat">
			<mx:RemoveChild target="{runsize_label}"/>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:Label x="14" y="83" width="86" id="rollWidth_label" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RollWidth')}" textAlign="right"/>
			</mx:AddChild>
			<mx:RemoveChild target="{label13}"/>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:Label x="10" y="111" width="91" id="cutoff_label" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Cutoff')}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:TextInput x="107" y="109" width="100" height="20" id="cutOff_edit"  text="{job.cutOff}"/>
			</mx:AddChild>
			<mx:SetProperty target="{job_fold_size}" name="y" value="162"/>
			<mx:SetProperty target="{job_finish_size}" name="y" value="137"/>
			<mx:SetProperty target="{label16}" name="x" value="5"/>
			<mx:SetProperty target="{label16}" name="y" value="164"/>
			<mx:SetProperty target="{label17}" name="x" value="5"/>
			<mx:SetProperty target="{label17}" name="y" value="139"/>
			<mx:RemoveChild target="{job_size}"/>
		</mx:State>
		<mx:State name="Mailing">
			<mx:RemoveChild target="{customer_suppliled_stock}"/>
			<mx:RemoveChild target="{checkbox1}"/>
			<mx:RemoveChild target="{special_order_button}"/>
			<mx:RemoveChild target="{chage_stock_button}"/>
			<mx:RemoveChild target="{job_stock}"/>
			<mx:RemoveChild target="{label18}"/>
			<mx:RemoveChild target="{label19}"/>
			<mx:RemoveChild target="{job_color}"/>
			<mx:RemoveChild target="{job_parent}"/>
			<mx:RemoveChild target="{label13}"/>
			<mx:RemoveChild target="{runsize_label}"/>
			<mx:RemoveChild target="{label17}"/>
			<mx:RemoveChild target="{label16}"/>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_fold_size}"/>
			<mx:RemoveChild target="{job_finish_size}"/>
			<mx:RemoveChild target="{job_size}"/>
			<mx:RemoveChild target="{canvas3}"/>
			<mx:RemoveChild target="{viewstack4}"/>
			<mx:RemoveChild target="{label20}"/>
			<mx:RemoveChild target="{label21}"/>
			<mx:RemoveChild target="{job_pricing_press}"/>
			<mx:RemoveChild target="{job_costing_press}"/>
			<mx:RemoveChild target="{label22}"/>
			<mx:RemoveChild target="{label23}"/>
			<mx:RemoveChild target="{label24}"/>
			<mx:RemoveChild target="{front_colors_text}"/>
			<mx:RemoveChild target="{front_passes_text}"/>
			<mx:RemoveChild target="{label25}"/>
			<mx:RemoveChild target="{front_washes_text}"/>
			<mx:RemoveChild target="{label26}"/>
			<mx:RemoveChild target="{back_passes_text}"/>
			<mx:RemoveChild target="{back_washes_text}"/>
			<mx:RemoveChild target="{back_colors_text}"/>
			<mx:RemoveChild target="{label27}"/>
			<mx:RemoveChild target="{front_inks_text}"/>
			<mx:RemoveChild target="{back_inks_text}"/>
			<mx:RemoveChild target="{radiobutton1}"/>
			<mx:RemoveChild target="{radiobutton2}"/>
			<mx:RemoveChild target="{radiobutton3}"/>
			<mx:RemoveChild target="{printing_estimator_canvas}"/>
			<mx:RemoveChild target="{estimator_viewstack}"/>
			<mx:SetProperty target="{hrule3}" name="y" value="86"/>
			<mx:SetProperty target="{job_description}" name="height" value="77"/>
			<mx:RemoveChild target="{sets_of}"/>
			<mx:RemoveChild target="{label28}"/>
			<mx:RemoveChild target="{label29}"/>
			<mx:RemoveChild target="{job_sheets}"/>
			<mx:RemoveChild target="{label30}"/>
			<mx:RemoveChild target="{job_up}"/>
			<mx:RemoveChild target="{job_on}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:RemoveChild target="{label31}"/>
			<mx:RemoveChild target="{est_waste}"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:RemoveChild target="{num_of_sig}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{label11}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{job_weight}"/>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:TextArea x="85"
							 y="96"
							 width="281"
							 id="job_mailingnotes"
							 text="{job.notes}"
							 height="77"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="97"
						  text="Notes" width="67" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<ns1:CheckBoxRenderer x="85" y="181" id="job_shownotes" selected="false"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="181"
						  text="Show Notes" width="67" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<ns2:AutoComplete x="85" y="207" id="job_vendor" dataProvider="{vendors}"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="209"
						  text="Vendor" width="67" textAlign="right" id="label35"/>
			</mx:AddChild>
			<mx:SetProperty target="{label33}" name="y" value="60"/>
			<mx:SetProperty target="{job_over_under}" name="y" value="58"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="29" width="98" focusOut="fieldChanged(event)" id="job_unitCost" text="{job.unitCost}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="31"
						  text="Unit Cost" width="67" textAlign="right" id="label36"/>
			</mx:AddChild>
			<mx:SetProperty target="{label34}" name="x" value="384"/>
			<mx:SetProperty target="{label34}" name="y" value="88"/>
			<mx:SetProperty target="{bindery_waste}" name="y" value="86"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="114" width="98" focusOut="fieldChanged(event)" id="job_totalCost" text="{job.totalCost}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="116"
						  text="Total Cost" width="67" textAlign="right" id="label37"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="144" width="98" focusOut="fieldChanged(event)" id="job_markup" text="{job.markup}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="146"
						  text="Markup" width="67" textAlign="right" id="label38"/>
			</mx:AddChild>
		</mx:State>
		<mx:State name="ChargesOnly" basedOn="Mailing">
			<mx:RemoveChild target="{label35}"/>
			<mx:RemoveChild target="{job_vendor}"/>
			<mx:RemoveChild target="{label36}"/>
			<mx:RemoveChild target="{job_over_under}"/>
			<mx:RemoveChild target="{job_unitCost}"/>
			<mx:RemoveChild target="{label33}"/>
			<mx:RemoveChild target="{label34}"/>
			<mx:RemoveChild target="{bindery_waste}"/>
			<mx:RemoveChild target="{job_totalCost}"/>
			<mx:RemoveChild target="{label37}"/>
			<mx:RemoveChild target="{label38}"/>
			<mx:RemoveChild target="{job_markup}"/>
			<mx:RemoveChild target="{overs_unit_price}"/>
			<mx:RemoveChild target="{label6}"/>
			<mx:RemoveChild target="{label1}"/>
			<mx:RemoveChild target="{overs_total_price}"/>
			<mx:SetProperty target="{label3}" name="y" value="300"/>
			<mx:SetProperty target="{job_prep}" name="y" value="300"/>
			<mx:SetProperty target="{label5}" name="y" value="321"/>
			<mx:SetProperty target="{job_bind}" name="y" value="321"/>
			<mx:SetProperty target="{label2}" name="y" value="342"/>
			<mx:SetProperty target="{job_other}" name="y" value="342"/>
			<mx:SetProperty target="{hrule2}" name="y" value="366"/>
			<mx:SetProperty target="{hrule1}" name="y" value="370"/>
			<mx:SetProperty target="{job_total}" name="y" value="377"/>
			<mx:SetProperty target="{label4}" name="y" value="377"/>
		</mx:State>
		<mx:State name="LinesAndInches" basedOn="Mailing">
			<mx:AddChild relativeTo="{pricing_throbber}" position="before">
				<mx:HRule x="10"
						  y="235"
						  width="356"
						  height="2" id="hrule0"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="10" y="257" text="Number Of Lines"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="2" y="281" text="Number Of Inches"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="107" y="255" id="job_number_of_lines" text="{job.numberOfLines}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="107" y="279" id="job_number_of_inches" text="{job.numberOfInches}" textAlign="right"/>
			</mx:AddChild>
			<mx:RemoveChild target="{job_unitCost}"/>
			<mx:RemoveChild target="{label36}"/>
			<mx:RemoveChild target="{label38}"/>
			<mx:RemoveChild target="{job_markup}"/>
			<mx:SetProperty target="{job_totalCost}" name="y" value="84"/>
			<mx:SetProperty target="{bindery_waste}" name="y" value="56"/>
			<mx:SetProperty target="{job_over_under}" name="y" value="28"/>
			<mx:SetProperty target="{label33}" name="y" value="30"/>
			<mx:SetProperty target="{label34}" name="y" value="58"/>
			<mx:SetProperty target="{label37}" name="y" value="86"/>
		</mx:State>
	</mx:states>
	<mx:RemoteObject id="dataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadResult(event)"/>
		<mx:method name="addUpdate"
				   fault="handleFault(event)"
				   result="handleSaveResult(event)"/>
		<mx:method name="deleteItem"
				   fault="handleFault(event)"
				   result="handleDeleteResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="copierDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadCopierResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="pressDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadPressResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dimensionDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadDimensionResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="pricingMethodDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadPricingMethodResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="locationDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadLocationResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="productDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadProductResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="chargeDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadChargeResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="chargeCommandDataService"
					 destination="dataService">
		<mx:method name="getChargeList"
				   fault="handleFault(event)"
				   result="handleLoadChargeCommandResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServicePreferencesStockDefinition" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPreferencesStockDefinitionResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="stockDataService" destination="dataService">
		<mx:method name="getStockPicker" fault="handleFault(event)" result="handleStockLoadResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServiceSystemPreferences" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSystemPreferencesResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServiceEstimatingPreferences" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadEstimatingPreferencesResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="jobService" destination="jobService">
		<mx:method name="assignPricingCopierToJob" fault="handleFault(event)" result="handleAssignPricingCopierResult(event)"/>
		<mx:method name="assignStockToJob" fault="handleFault(event)" result="handleAssignStockResult(event)"/>
	</mx:RemoteObject>
	
	<mx:Script>
		<![CDATA[
			import com.efi.printsmith.data.JobTemplate;
			import com.efi.printsmith.data.JobBase;
			import com.efi.printsmith.data.PricingRecord;
			import com.efi.printsmith.pages.JobPricingInfo;
			import com.efi.printsmith.data.PreferencesPricingMethod;
			import com.efi.printsmith.events.PriceJobEvent;
			import com.efi.printsmith.data.Invoice;
			import com.efi.printsmith.data.Job;
			import com.efi.printsmith.data.PressDefinition;
			import com.efi.printsmith.data.CopierDefinition;
			import com.efi.printsmith.data.Location;
			import com.efi.printsmith.data.Account;
			import com.efi.printsmith.data.ProductCode;
			import com.efi.printsmith.data.Charge;
			import com.efi.printsmith.data.ChargeCategory;
			import com.efi.printsmith.data.ChargeCommand;
			import com.efi.printsmith.data.StockDefinition;
			import com.efi.printsmith.data.PreferencesSystem;
			import com.efi.printsmith.data.PreferencesEstimating;

			import com.efi.printsmith.events.JobEditCompleteEvent;
			import com.efi.printsmith.events.StockPickerSelectEvent;
			import com.efi.printsmith.events.JobEditCompleteEvent;
			import com.efi.printsmith.events.ChargeDefinitionSelectEvent;
			import com.efi.printsmith.events.JobMethodSelectEvent;
			
			import com.efi.printsmith.pages.JobMethodPicker;
			import com.efi.printsmith.view.StockPicker;

			import mx.controls.Alert;
			import mx.managers.PopUpManager;
			import mx.containers.TitleWindow;
			import mx.collections.ArrayCollection;
			import mx.rpc.events.ResultEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.IResponder;
			import mx.messaging.messages.AsyncMessage;
			import mx.messaging.messages.IMessage;
			import mx.printing.FlexPrintJob;
			import mx.printing.PrintAdvancedDataGrid;
			import mx.printing.PrintDataGrid;
			import mx.core.Application;
			import mx.validators.Validator;
			import mx.events.ValidationResultEvent;
			import mx.collections.ICollectionView;
			import mx.core.UIComponent;
		    import com.efi.printsmith.events.commandEvents.Jobs.*;
		    
			[Bindable]                                         
		    private var systemPreferences:PreferencesSystem;
		    
		    [Bindable]                                         
		    private var estimatingPreferences:PreferencesEstimating;
		
			[Bindable]                                
			private var systemPreferencesArray:ArrayCollection = new ArrayCollection();
			
			[Bindable]                                
			private var estimatingPreferencesArray:ArrayCollection = new ArrayCollection();

			[Bindable]
			private var dimensions:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var accounts:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var presses:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var copiers:ArrayCollection=new ArrayCollection();
			
			[Bindable]
			private var locations:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var productCodes:ArrayCollection=new ArrayCollection();
			
			[Bindable]
			private var vendors:ArrayCollection=new ArrayCollection();

			[Bindable]
			public var job:Job=null;

			[Bindable]
			private var invoice:Invoice;

			[Bindable]
			private var chargeCommands:ArrayCollection=new ArrayCollection();

			[Bindable]
			public var tempOpen:Object=new Object();

			[Bindable]
			public var refreshSO:Boolean=false;

			[Bindable]
			private var charges:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var pricingMethods:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var stocks:ArrayCollection=new ArrayCollection();
			
    		private var preferencesStockDefinitions:ArrayCollection = new ArrayCollection();

			private var focussedFormControl:DisplayObject;

			private function handleLoadSystemPreferencesResult(ev:ResultEvent):void {
				systemPreferencesArray = ev.result as ArrayCollection;
				if (systemPreferencesArray.length > 0)
				{
					systemPreferences = systemPreferencesArray.getItemAt(0) as PreferencesSystem;
					check_taxtable.visible = systemPreferences.disableNonTaxableOptions
				}else {
					check_taxtable.visible = true;
				}
		
			}
			
			private function handleLoadEstimatingPreferencesResult(ev:ResultEvent):void {
				estimatingPreferencesArray = ev.result as ArrayCollection;
				if (estimatingPreferencesArray.length > 0) {
					estimatingPreferences = estimatingPreferencesArray.getItemAt(0) as PreferencesEstimating;
				}
			}	                                  

			public function init():void
			{
				this.height = parent.height - 80;
				PopUpManager.centerPopUp(this);
				
				pricingMethodDataService.getAll("PreferencesPricingMethod");
				dataServiceEstimatingPreferences.getAll("PreferencesEstimating");
				
				if (job == null) {
					job=new Job();
					job.parentSize = "";
					job.runSize = "";
					job.finishSize = "";
					job.foldedSize = "";
					job.frontColors = 1;
					job.frontPasses = 1;
					job.inSetsOf = 1;
					job.sheets = 1;
					job.numOn = 1;
					job.numUp = 1;	
					job.singleSided = true;
					job.doubleSided = false;	
					job.pricingRecord = new PricingRecord;			
					job.pricingRecord.unitPriceOverride = false;
					job.pricingRecord.totalPriceOverride = false;	
					job.markup = 2.0;
					job.totalCost = 0.0;
					job.unitCost = 0.0;
				}
				
				this.copy_single_radio.selected = this.job.singleSided;

				var eventPriceMethod:JobsChangePricingMethodEvent = new JobsChangePricingMethodEvent(job_type, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPriceMethod.dispatch();
		
				var eventPricingCopier:JobsChangeCopierEvent = new JobsChangeCopierEvent(job_pricing_copier, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPricingCopier.dispatch();
				var eventCostingCopier:JobsChangeCopierEvent = new JobsChangeCopierEvent(job_costing_copier, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventCostingCopier.dispatch();
		
				var eventPricingPress:JobsChangePressEvent = new JobsChangePressEvent(job_pricing_press, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPricingPress.dispatch();
				var eventCostingPress:JobsChangePressEvent = new JobsChangePressEvent(job_costing_press, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventCostingPress.dispatch();
		
				var eventStock:JobsChangeStockEvent = new JobsChangeStockEvent(chage_stock_button, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventStock.dispatch(); 
				
				if (isNaN(job.id)) {
					this.enabled=false;
				}
			}
			public function handleUIControlEvent(evt:ResultEvent):void {
				evt.result.control.enabled = evt.result.enabled;
			}		
			private function handleUIControlFault(ev:FaultEvent):void {  
			
			}
			
			private function loadData():void {
				pressDataService.getAll("PressDefinition");
				copierDataService.getAll("CopierDefinition");
				locationDataService.getAll("Location");
				productDataService.getAll("ProductCode");
//				chargeDataService.getAll("Charge");
				dimensionDataService.getAll("Dimension");
				dataServiceSystemPreferences.getAll("PreferencesSystem");				
				//dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
				dataServiceEstimatingPreferences.getAll("PreferencesEstimating");
			}
			
			private function handleJobMethodPickerSelect(evt:JobMethodSelectEvent):void {
				if (evt.pricingMethod != null  && evt.pricingMethod.title != "Mailing" && evt.pricingMethod.title != "Merchandise" && evt.pricingMethod.title != "Charges Only" && evt.pricingMethod.title != "Outside Services" && evt.pricingMethod.title != "Lines & Inches") {
					this.setPricingMethod(evt.pricingMethod as PreferencesPricingMethod);
					dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
					
				} else if (evt.pricingMethod == null) {
					Alert.show("Job Method Picker returned a null array", "Error");
				} else {
					this.setPricingMethod(evt.pricingMethod as PreferencesPricingMethod);
					this.enabled = true;
				}
			}
			
			private function handleJobMethodPickerCancel(evt:JobMethodSelectEvent):void {
				// Currently no need to do anything on cancel.
			}

			private function findItem(name:String, array:ArrayCollection):int
			{
				for each (var element:Object in array)
				{
					if (name == element.name)
					{ 
						return array.getItemIndex(element);
					}
				}
				return -1;
			}

			private function doNew():void
			{
				job=new Job();
				setJob(job);
			}

			private function doDelete():void
			{
				PopUpManager.removePopUp(this);
			}
			
			private function doProductionData():void
			{
				var productionDataWindow:ProductionData=ProductionData(PopUpManager.createPopUp(this, ProductionData, true));
				productionDataWindow.setStyle("borderAlpha", 0.9);
//			    jobMethodPicker.addEventListener(JobMethodSelectEvent.CANCELSELECTJOBMETHOD, handleJobMethodPickerCancel);
// 			   	jobMethodPicker.addEventListener(JobMethodSelectEvent.SELECTJOBMETHOD, handleJobMethodPickerSelect);				
			}
			
			public function getInvoice():Invoice
			{
				return this.invoice;
			}

			public function setInvoice(invoice:Invoice):void
			{
				this.invoice=invoice;
			}

			private function doGet():void
			{

			}

			public function setJob(job2:Job):void
			{
				this.job=job2;
				pricingMethodDataService.getAll("PreferencesPricingMethod");
				
			}

			private function mapToJobData():void
			{
				job.binderyWaste=parseInt(bindery_waste.text);
				job.brokered=check_brokered.selected;
				job.comment=job_comment.text;
				job.costingPress=job_costing_press.selectedItem as PressDefinition;
				job.pricingPress=job_pricing_press.selectedItem as PressDefinition;
				job.pricingCopier=job_pricing_copier.selectedItem as CopierDefinition;
				job.costingCopier=job_costing_copier.selectedItem as CopierDefinition;
				job.productCode=product.selectedItem as ProductCode;
				job.pricingMethod = job_type.selectedItem as PreferencesPricingMethod;
				
				if (job_description.text != "") {
					job.description=job_description.text;
				} else {
					job.description = this.job_type.selectedLabel;
				}
				
				job.estWaste=parseInt(est_waste.text);
				job.finished=checked_finished.selected;
				job.inSetsOf=parseInt(sets_of.text);
				job.numOn=parseInt(job_on.text);
				job.oversUnders=parseInt(job_over_under.text);
				job.qtyOrdered=parseInt(job_ordered.text);
				job.sheets=parseInt(job_sheets.text);
				job.signatures=parseInt(num_of_sig.text);
				job.taxable=check_taxtable.selected;
				job.numUp=parseInt(job_up.text);
				job.jobNotes=job_notes.text;
				job.jobTicketNotes=check_job_notes.selected;
				job.frontColors=parseInt(this.front_colors_text.text);
				//job.frontInks=this.front_inks_text.text;
				job.frontPasses=parseInt(this.front_passes_text.text);
				job.frontWashes=parseInt(this.front_washes_text.text);
				job.backColors=parseInt(this.back_colors_text.text);
				//job.backInks=this.back_inks_text;
				job.backPasses=parseInt(this.back_passes_text.text);
				job.backWashes=parseInt(this.back_washes_text.text);
				job.location=job_location.selectedItem as Location;
				if (run_method_radiogroup.selectedValue != null)
					job.runMethod=run_method_radiogroup.selectedValue.toString();
				
				job.parentSize = job_parent.text;
				job.runSize = job_size.text;
				job.foldedSize = job_fold_size.text;
				job.finishSize = job_finish_size.text;
				if (cutOff_edit != null)
					job.cutOff= parseInt(cutOff_edit.text);
				job.impositionsPerRun = parseInt(job_imp.text);
				job.totalImpositions = parseInt(total_imp.text);
				if (job_unitCost != null)
					job.unitCost = parseFloat(job_unitCost.text);
				if (job_totalCost != null)
					job.totalCost = parseFloat(job_totalCost.text);
				if (job_markup != null)
					job.markup = parseFloat(job_markup.text);
			}

			private function mapFromJobData():void
			{
				
				/* if (job.pricingPress != null)
					job_pricing_press.selectedIndex=findItem(job.pricingPress.name, presses);
				if (job.costingPress != null)
					job_costing_press.selectedIndex=findItem(job.costingPress.name, presses);
				if (job.pricingCopier != null)
					job_pricing_copier.selectedIndex=findItem(job.pricingCopier.name, copiers);
				if (job.costingCopier != null)
					job_costing_copier.selectedIndex=findItem(job.costingCopier.name, copiers);
				if (job.location != null)
					job_location.selectedIndex=findItem(job.location.name, locations); */
				if (job.productCode != null)
					product.selectedIndex=findItem(job.productCode.name, productCodes);
				this.copy_single_radio.selected = this.job.singleSided;
				this.copy_double_radio.selected = this.job.doubleSided;
				run_method_radiogroup.selectedValue=job.runMethod;
				
				

			}

			private function doSave():void
			{
				mapToJobData();
				var jobEditCompleteEvent:JobEditCompleteEvent=new JobEditCompleteEvent(JobEditCompleteEvent.SAVE, this.job);
				dispatchEvent(jobEditCompleteEvent);

				PopUpManager.removePopUp(this);
			}
			private function doSaveTemplate():void
			{
				mapToJobData();
				
				var tmpJob:Job = job;
				var template:JobTemplate = new JobTemplate();
				template.user = Snowmass.getInstance().currentUser;

				template.backColors = tmpJob.backColors
				template.backInks = tmpJob.backInks
				template.backPasses = tmpJob.backPasses
				template.backWashes = tmpJob.backWashes
				template.binderyWaste = tmpJob.binderyWaste
				template.binderyWasteOverride = tmpJob.binderyWasteOverride
				template.brokered = tmpJob.brokered
				template.charges = tmpJob.charges;
				template.children = tmpJob.children
				template.comment = tmpJob.comment
				template.costingCopier = tmpJob.costingCopier
				template.costingPress = tmpJob.costingPress
				template.costingRecord = tmpJob.costingRecord
				template.cutOff = tmpJob.cutOff
				template.description = tmpJob.description
				template.doubleSided = tmpJob.doubleSided
				template.estWaste = tmpJob.estWaste
				template.estWasteOverride = tmpJob.estWasteOverride
				template.finished = tmpJob.finished
				template.finishSize = tmpJob.finishSize
				template.foldedSize = tmpJob.foldedSize
				template.frontColors = tmpJob.frontColors
				template.frontInks = tmpJob.frontInks
				template.frontPasses = tmpJob.frontPasses
				template.frontWashes = tmpJob.frontWashes
				template.inSetsOf = tmpJob.inSetsOf
				template.inSetsOfOverride = tmpJob.inSetsOfOverride
				template.jobIndex = tmpJob.jobIndex
				template.jobNotes = tmpJob.jobNotes
				template.jobNumber = tmpJob.jobNumber
				template.jobTicketNotes = tmpJob.jobTicketNotes
				template.location = tmpJob.location
				template.numCopies = tmpJob.numCopies
				template.numCopiesOverride = tmpJob.numCopiesOverride
				template.numOn = tmpJob.numOn
				template.numUp = tmpJob.numUp
				template.oversUnders = tmpJob.oversUnders
				template.parentSize = tmpJob.parentSize
				template.press = tmpJob.press
				template.pressQty = tmpJob.pressQty
				template.pricingCopier = tmpJob.pricingCopier
				template.pricingMethod = tmpJob.pricingMethod
				template.pricingPress = tmpJob.pricingPress
				template.pricingRecord = tmpJob.pricingRecord
				template.productCode = tmpJob.productCode
				template.qtyOrdered = tmpJob.qtyOrdered
				template.runMethod = tmpJob.runMethod
				template.runSize = tmpJob.runSize
				template.salesCategory = tmpJob.salesCategory
				template.sheets = tmpJob.sheets
				template.signatures = tmpJob.signatures
				template.singleSided = tmpJob.singleSided
				template.stock = tmpJob.stock
				template.stockQty = tmpJob.stockQty
				template.taxable = tmpJob.taxable
				template.totalCopies = tmpJob.totalCopies
				template.weight = tmpJob.weight

				setJob(template);

				var jobEditCompleteEvent:JobEditCompleteEvent=new JobEditCompleteEvent(JobEditCompleteEvent.SAVE, this.job);
				dispatchEvent(jobEditCompleteEvent);

				PopUpManager.removePopUp(this);
			}
			
			private function handleAssignPricingCopierResult(ev:ResultEvent):void
			{
				this.job = ev.result as Job;
				updatePrice();
			}
			
			private function handleAssignStockResult(ev:ResultEvent):void
			{
				this.job = ev.result as Job;
				updatePrice();
			}
			
			private function handleLoadResult(ev:ResultEvent):void
			{
				//jobs = ev.result as ArrayCollection;
			}

			private function handleLoadDimensionResult(ev:ResultEvent):void
			{
				dimensions=ev.result as ArrayCollection;

				this.job_parent.text = job.parentSize;
				this.job_size.text = job.runSize;
				this.job_fold_size.text = job.foldedSize;
				this.job_finish_size.text = job.finishSize;

			}
			
			private function handleLoadCopierResult(ev:ResultEvent):void
			{
				copiers=ev.result as ArrayCollection;
				if (!isNaN(job.id)) {
					
					this.job_pricing_copier.selectedIndex =findItem(job.pricingCopier.name, copiers);
					this.job_costing_copier.selectedIndex = findItem(job.costingCopier.name, copiers);
				}
			}
			private function handleLoadPressResult(ev:ResultEvent):void
			{
				presses=ev.result as ArrayCollection;
				if (!isNaN(job.id)) {
					
					this.job_pricing_press.selectedIndex =findItem(job.pricingPress.name, presses);
					this.job_costing_press.selectedIndex = findItem(job.costingPress.name, presses);
				}
			}
		
			private function handleLoadPreferencesStockDefinitionResult(event:ResultEvent):void {
				preferencesStockDefinitions = event.result as ArrayCollection;
				stockDataService.getStockPicker("StockDefinition", preferencesStockDefinitions);
			}

			private function handleLoadLocationResult(ev:ResultEvent):void
			{
				locations=ev.result as ArrayCollection;
			}

			private function handleLoadProductResult(ev:ResultEvent):void
			{
				productCodes=ev.result as ArrayCollection;
			}
			
			private function handleLoadVendorResult(ev:ResultEvent):void
			{
				vendors=ev.result as ArrayCollection;
			}

			private function handleDeleteResult(ev:ResultEvent):void
			{
			}

			private function handleLoadChargeResult(ev:ResultEvent):void
			{
				charges=ev.result as ArrayCollection;
			}

			private function handleStockLoadResult(ev:ResultEvent):void {
		    	stocks = ev.result as ArrayCollection;
		    	
				this.enabled=true;

				chargeCommandDataService.getChargeList();				
				initialStockPicker();
			}
			
			private function handleLoadChargeCommandResult(ev:ResultEvent):void
			{
				chargeCommands=ev.result as ArrayCollection;
				add_charge_button.enabled=true;
			}

			private function handleLoadPricingMethodResult(ev:ResultEvent):void
			{
				pricingMethods=ev.result as ArrayCollection;
				if (isNaN (job.id)) {
					var jobMethodPicker:JobMethodPicker=JobMethodPicker(PopUpManager.createPopUp(this, JobMethodPicker, true));
					jobMethodPicker.setStyle("borderAlpha", 0.9);
					jobMethodPicker.pricingMethods = this.pricingMethods;
				    jobMethodPicker.addEventListener(JobMethodSelectEvent.CANCELSELECTJOBMETHOD, handleJobMethodPickerCancel);
	 			   	jobMethodPicker.addEventListener(JobMethodSelectEvent.SELECTJOBMETHOD, handleJobMethodPickerSelect);
	 			} else {
	 				if (job.pricingMethod != null) {
						var i:int = 0;
						for (i=0; i< this.pricingMethods.length; i++) {
							var tmpPricingMethod:PreferencesPricingMethod = pricingMethods.getItemAt(i) as PreferencesPricingMethod;
							
							if (tmpPricingMethod.id == job.pricingMethod.id) {
								this.setPricingMethod(tmpPricingMethod);
								break;
							}
						}
		 			}
	 			}
				loadData();
				mapFromJobData();
			}

			private function handleSaveResult(ev:ResultEvent):void
			{

			}


			private function handleFault(ev:FaultEvent):void
			{
				var message:String;

				message="Error: " + ev.fault.faultCode + " - " + ev.fault.faultDetail + " - " + ev.fault.faultString;
				Alert.show(message, "Error", 0, null);
			}



			private function validateForm(event:Event):void
			{
				focussedFormControl=event.target as DisplayObject;

				//formIsValid = true;                    

			}

			private function validate(validator:Validator):Boolean
			{
//        var validatorSource:DisplayObject = validator.source as DisplayObject;
//     	var suppressEvents:Boolean = (validatorSource != focussedFormControl);
//        var event:ValidationResultEvent = validator.validate(null, suppressEvents); 
//        var currentControlIsValid:Boolean = (event.type == ValidationResultEvent.VALID);
//		formIsValid = formIsValid && currentControlIsValid;
//         
//		return currentControlIsValid;
				return true;
			}


			private function doAddCharge():void
			{
				var chargePicker:ChargePicker=ChargePicker(PopUpManager.createPopUp(this, ChargePicker, true));
				chargePicker.charges = this.job.charges;
				chargePicker.chargeCommands = chargeCommands;
				chargePicker.job = this.job;
				chargePicker.setStyle("borderAlpha", 0.9);
				chargePicker.addEventListener(ChargeDefinitionSelectEvent.CHARGEDEFINITIONCOMPLETE, handleChargeDefinitionComplete);
			}

			private function handleChargeDefinitionComplete(evt:ChargeDefinitionSelectEvent):void
			{
				this.job.charges=evt.chargeArray;
				this.updatePrice();
			}

			private function doDeleteCharge():void
			{
				if (invoice_charge_datagrid.selectedItem != null)
				{
					var charge:Charge=invoice_charge_datagrid.selectedItem as Charge;
					var index:int=this.job.charges.getItemIndex(charge);
					this.job.charges.removeItemAt(index);
				}
			}

			private function initialStockPicker():void {
				if (isNaN (job.id)) {
					changeStockDefinition();
				}
			}
			
			private function changeStockDefinition():void
			{
				var stockPickerWindow:StockPicker=StockPicker(PopUpManager.createPopUp(this, StockPicker, true));
				stockPickerWindow.setStyle("borderAlpha", 0.9);
			   	stockPickerWindow.setStockArray(stocks);
				stockPickerWindow.formIsEmpty=true;
				stockPickerWindow.addEventListener(StockPickerSelectEvent.CANCELSELECTSTOCK, handleStockPickerCancel);
				stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTSTOCK, handleStockPickerSelect);
				stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTNEWSTOCK, handleStockPickerNew);
			}

			private function handleStockPickerCancel(evt:StockPickerSelectEvent):void
			{
				if (this.job.stock == null)
				{
					this.job.stock=new StockDefinition();
				}
			}

			private function handleStockPickerSelect(evt:StockPickerSelectEvent):void
			{
				if (evt.stockDefinition != null)
				{
//					this.job.stock=evt.stockDefinition;
					if (this.job_type.text == "Large Format") {
						var cutoff:Number;
						if (estimatingPreferences != null)
							cutoff = estimatingPreferences.defaultPressCuttOff;
						else
							cutoff = 0;
						this.job.parentSize = evt.stockDefinition.parentsize;
						/*this.job.runSize = evt.stockDefinition.parentsize + " x " + cutoff; */
						this.job.cutOff = cutoff;
						this.job.finishSize = evt.stockDefinition.parentsize + " x " + cutoff;
						this.job.foldedSize = "";
						job_fold_size.text = "";
					}
					else if (this.job_type.text == "Printing") {
						this.job.parentSize = evt.stockDefinition.parentsize;
						this.job.runSize = evt.stockDefinition.parentsize;
						this.job.finishSize = evt.stockDefinition.parentsize;
					}
					else {
						this.job.parentSize = evt.stockDefinition.normalRunSize;
						this.job.runSize = evt.stockDefinition.normalRunSize;
						this.job.finishSize = evt.stockDefinition.normalRunSize;
					}
					this.mapToJobData();
					jobService.assignStockToJob(this.job, evt.stockDefinition);
//					var i:int;
//					if (this.job.charges == null) this.job.charges = new ArrayCollection();
//					for(i = 0; i < this.job.stock.charges.length; i++) {
////						this.job.charges.addItem(this.job.stock.charges.getItemAt(i));
//						
//					}
//					updatePrice();
				}
				else
				{
					this.job.stock=new StockDefinition();
					Alert.show("Stock Picker returned a null stock", "Error");
				}
			}

			private function handleStockPickerNew(evt:StockPickerSelectEvent):void
			{
				this.job.stock=new StockDefinition();
			}
			
			private function handleFocusOutEvent(evt:FocusEvent):void
			{
				if (evt.target == job_parent) {
					job.parentSize = job_parent.text;
				} else if (evt.target == job_size) {
					job.runSize = job_size.text;
				} else if (evt.target == job_finish_size) {
					job.finishSize = job_finish_size.text;
				} else if (evt.target == job_fold_size) {
					job.foldedSize = job_fold_size.text;
				}
				super.focusOutHandler(evt);
			}
			
			private function changePricingCopier():void
			{
				var copierDefinition:CopierDefinition = job_pricing_copier.selectedItem as CopierDefinition;
				jobService.assignPricingCopierToJob(this.job, copierDefinition);
				this.updatePrice();			
			}
			
			private function updatePrice():void
			{
				mapToJobData();
				var priceJobEvent:PriceJobEvent = new PriceJobEvent(this.job, new mx.rpc.Responder(handlePriceJobComplete, handlePriceJobFault));
				priceJobEvent.dispatch();
				refresh_price_btn.visible = false;
				refresh_price_btn.enabled = false;
				pricing_throbber.visible = true;
				pricing_throbber.play();
			}
			
			private function handlePriceJobComplete(ev:ResultEvent):void
			{
				pricing_throbber.stop();
				pricing_throbber.visible = false;
				var localJob:Job = ev.result as Job;
				refresh_price_btn.visible = true;
				refresh_price_btn.enabled = true;		
				job.pricingRecord.totalPrice = localJob.pricingRecord.totalPrice;	
				job.pricingRecord = localJob.pricingRecord;
				charges = localJob.charges;
				job.impositionsPerRun = localJob.impositionsPerRun;
				job.totalImpositions = localJob.totalImpositions;
				job.estWaste = localJob.estWaste;
				job.totalCost = localJob.totalCost;
				if (job != null) { 
					job_imp.text = job.impositionsPerRun.toString();
					total_imp.text = job.totalImpositions.toString();
					est_waste.text = job.estWaste.toString();
					if (job_totalCost != null) {
						job_totalCost.text = job.totalCost.toString();
					}
					if (job.pricingRecord != null) {
						overs_unit_price.text = job.pricingRecord.oversUnitPrice.toString();
						overs_total_price.text = job.pricingRecord.oversTotalPrice.toString();
						job_prep.text = job.pricingRecord.prepPrice.toString();
						job_bind.text = job.pricingRecord.bindPrice.toString();
						job_other.text = job.pricingRecord.otherChargePrice.toString();
						job_total.text = (job.pricingRecord.totalPrice + job.pricingRecord.prepPrice + job.pricingRecord.bindPrice + job.pricingRecord.otherChargePrice).toString();
					}
				}
			}
			
			private function handlePriceJobFault(ev:FaultEvent):void
			{
				pricing_throbber.stop();
				pricing_throbber.visible = false;
				if (ev != null && ev.fault != null && ev.fault.faultString != null) {				
					Alert.show(ev.fault.faultString, "Error in Pricing", 0, null);
				} else {
					Alert.show("Unknown error when pricing job", "Error in Pricing", 0, null);
				}
			}
			
			private function fieldChanged(evt:FocusEvent):void
			{	
				var doUpdatePrice:Boolean = false;
				mapToJobData();
				switch (evt.currentTarget) {
				case this.job_ordered:
					doUpdatePrice = true;
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					break;
				case this.job_over_under:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.sets_of:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.job_sheets:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.job_up:
					doUpdatePrice = true;
					break;
				case this.job_on:
					doUpdatePrice = true;
					break;
				case this.job_press:
					doUpdatePrice = true;
					break;
				case this.bindery_waste:
					doUpdatePrice = true;
					break;
				case this.est_waste:
					doUpdatePrice = true;
					break;
				case this.front_colors_text:
					this.front_passes_text.text = this.front_colors_text.text;
					doUpdatePrice = true;
					break;
				case this.back_colors_text:
					this.back_passes_text.text = this.back_colors_text.text;
					doUpdatePrice = true;
					break;	
				case this.job_unitCost:
					doUpdatePrice = true;
					break;
				case this.job_markup:
					doUpdatePrice = true;
					break;
				case this.job_number_of_inches:
					doUpdatePrice = true;
					break;
				case this.job_number_of_lines:
					break;
				}
				if (doUpdatePrice) updatePrice();
			}
			
			public function changeJobSides(evt:Event):void {
				if (this.copy_single_radio.selected == true) {
					this.job.singleSided = true;
					this.job.doubleSided = false;
				} else {
					this.job.singleSided = false;
					this.job.doubleSided = true;
				}
				updatePrice();
			}
			
			public function updatePricingMethod():void {
				// TODO: The pricing method needs to be based on the ESTIMATOR used NOT the title - each estimator may have multiple titles...
				var pricingMethod:PreferencesPricingMethod = job_type.selectedItem as PreferencesPricingMethod;
				
				if (pricingMethod.title == "Printing") {
					this.currentState = "PrintMethod";
					estimator_viewstack.selectedChild = printing_estimator_canvas;
				} else if (pricingMethod.title == "Roll-Fed") {
					this.currentState = "PrintMethod";
					estimator_viewstack.selectedChild = printing_estimator_canvas;
				} else if (pricingMethod.title == "B&W") {
					this.currentState = "CopyMethod";
					estimator_viewstack.selectedChild = copy_estimator_canvas;										
				} else if (pricingMethod.title == "Color") {
					this.currentState = "CopyMethod";
					estimator_viewstack.selectedChild = copy_estimator_canvas;					
				} else if (pricingMethod.title == "Large Format") {
					this.currentState = "LargeFormat";
					estimator_viewstack.selectedChild = copy_estimator_canvas;					
				} else if (pricingMethod.title == "Charges Only") {
					this.currentState = "ChargesOnly";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Outside Services") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Merchandise") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Lines & Inches") {
					this.currentState = "LinesAndInches";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Mailing") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				}

			}
			
			public function setPricingMethod(pricingMethod:PreferencesPricingMethod):void {
				if (pricingMethod != null)  {
					this.job_type.selectedItem = pricingMethod;
					this.job.pricingMethod = pricingMethod;
					updatePricingMethod();
				}
			}
			
			public function showJobPricingInfo():void {
	    		var jobPricingInfoWindow:JobPricingInfo = JobPricingInfo(PopUpManager.createPopUp(this, JobPricingInfo, true));
	    		jobPricingInfoWindow.setStyle("borderAlpha", 0.9);
	    		jobPricingInfoWindow.setPriceLogEntry(this.job.pricingRecord.priceLogEntry);		
	    	}
	    	
	    	private function editUnitPrice(evt:Event):void {
	    		if (job_unitPrice.text == "") {
	    			job.pricingRecord.unitPriceOverride = false;
	    			job.pricingRecord.unitPrice = 0;
	    		} else {
	    			job.pricingRecord.unitPriceOverride = true;
	    			job.pricingRecord.unitPrice = parseFloat(job_unitPrice.text); 
	    		}
	    	}
		]]>

	</mx:Script>

	<mx:VBox width="100%"
			 height="597"
			 creationPolicy="all" id="vbox1" verticalScrollPolicy="off">
		<mx:Canvas width="926"
				   height="598"
				   verticalScrollPolicy="off"
				   fontSize="9" id="canvas1">
			<mx:LinkButton x="10"
					   y="10"
					   width="38"
					   height="38"
					   click="doSave();"
					   id="file_button">
				<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="10"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Save')}"
					  width="38"
					  textAlign="center"/>
			<mx:LinkButton x="150.5"
					   y="10"
					   width="38"
					   height="38"
					   click="doGet();"
					   id="note_pad_button">
				<mx:icon>@Embed(source='../../../../assets/notes.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="139"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.JobNotes')}"
					  width="61"
					  textAlign="center"/>
			<mx:LinkButton x="253"
					   y="10"
					   width="38"
					   height="38"
					   click="doNew();"
					   id="new_job_button">
				<mx:icon>@Embed(source='../../../../assets/preview.png')</mx:icon>
			</mx:LinkButton>
			<mx:LinkButton x="67"
					   y="10"
					   width="38"
					   height="38"
					   click="doDelete();"
					   id="cancel_button">
				<mx:icon>@Embed(source='../../../../assets/delete.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="56"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Cancel')}"
					  width="58"
					  textAlign="center"/>
			<mx:LinkButton x="396.5"
					   y="10"
					   width="38"
					   height="38"
					   id="tickets_button">
				<mx:icon>@Embed(source='../../../../assets/print_carton_labels.png')</mx:icon>
			</mx:LinkButton>
			<mx:LinkButton x="503"
					   y="10"
					   width="38"
					   height="38"
					   id="print_button"
					   click="doProductionData();">
				<mx:icon>@Embed(source='../../../../assets/production.png')</mx:icon>
			</mx:LinkButton>
			<mx:LinkButton x="564"
					   y="10"
					   width="38"
					   height="38"
					   id="preview_button">
				<mx:icon>@Embed(source='../../../../assets/submit.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="554"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Submit')}"
					  width="58"
					  textAlign="center"/>
			<mx:Label x="488"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Production')}"
					  width="68"
					  textAlign="center"/>
			<mx:Label x="371"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.CartonLabels')}"
					  width="89"
					  textAlign="center"/>
			<mx:Label x="243"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'newInvCmd.Preview')}"
					  width="58"
					  textAlign="center"/>
			<mx:LinkButton x="319.5"
					   y="10"
					   width="38"
					   height="38"
					   click="doNew();"
					   id="change_account_button">
				<mx:icon>@Embed(source='../../../../assets/print.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="299"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.JobTicket')}"
					  width="79"
					  textAlign="center"/>
			<mx:CheckBox x="10"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Brokered')}"
						 id="check_brokered"
						 selected="{job.brokered}" width="75"/>
			<mx:CheckBox x="93"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Taxable')}"
						 id="check_taxtable"
						 selected="{job.taxable}" width="70"/>
			<mx:CheckBox x="171"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Finished')}"
						 id="checked_finished"
						 selected="{job.finished}" width="64"/>
			<fc:AutoComplete x="309"
							 y="68"
							 width="125.5"
							 id="product"
							 dataProvider="{productCodes}"
							 labelField="name"
							 height="20"/>
			<mx:TextInput
						  y="94"
						  width="797"
						  id="job_comment"
						  text="{job.comment}"
						  height="20"
						  right="10"/>
			<mx:Label x="10"
					  y="96"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Comment')}" textAlign="right" width="98"/>
			<fc:AutoComplete x="506.5"
							 y="68"
							 width="124"
							 id="job_location"
							 dataProvider="{locations}"
							 labelField="name"
							 height="20"/>
			<mx:Label x="243"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Product')}" textAlign="right" width="58"/>
			<mx:Label x="442.5"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Location')}" textAlign="right" width="56"/>
			<mx:Label x="638.5"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'posRegisterCmd.Type')}" textAlign="right" width="63.5"/>
			<mx:ComboBox
						 y="65"
						 id="job_type"
						 dataProvider="{pricingMethods}"
						 change="updatePricingMethod();"
						 labelField="title"
						 right="10"
						 left="710">
			</mx:ComboBox>
			<mx:Canvas x="0" y="121" width="914" height="512" verticalScrollPolicy="auto" id="canvas2">
				<mx:HDividedBox x="0"
								width="913"
								height="470" verticalScrollPolicy="off" id="hdividedbox1" bottom="42">
					<!--			<mx:Tree width="200"
						 height="100%">
						 </mx:Tree>
					-->
					<mx:ViewStack id="viewstack3"
								  width="640"
								  height="469">
						<mx:Canvas label="View 1"
								   width="100%"
								   height="100%"
								   fontSize="9" id="canvas4">
							<mx:TextArea x="85"
										 y="1"
										 width="281"
										 id="job_description"
										 text="{job.description}"
										 height="40"/>
							<mx:Label x="10"
									  y="2"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Description')}" width="67" textAlign="right" id="label32"/>
							<mx:TextInput x="496"
										  y="24"
										  id="job_over_under"
										  text="{job.oversUnders}"
										  height="20"
										  width="98" focusOut="fieldChanged(event)" textAlign="right"/>
							<mx:TextInput x="496"
										  y="47"
										  id="sets_of"
										  text="{job.inSetsOf}"
										  height="20"
										  width="98" focusOut="fieldChanged(event)" textAlign="right"/>
							<mx:TextInput x="496"
										  y="301"
										  id="overs_unit_price"
										  height="20"
										  width="98" textAlign="right"/>
							<mx:TextInput x="496"
										  y="323"
										  id="overs_total_price"
										  height="20"
										  width="98" textAlign="right"/>
							<mx:Label x="385"
									  y="325"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversTotalPrice')}" textAlign="right" width="108" id="label1"/>
							<mx:Label x="385"
									  y="387"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Other')}" textAlign="right" width="108" id="label2"/>
							<mx:Label x="385"
									  y="345"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Prep')}" textAlign="right" width="108" id="label3"/>
							<mx:Label x="496"
									  y="345"
									  width="98"
									  id="job_prep"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="366"
									  width="98"
									  id="job_bind"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="387"
									  width="98"
									  id="job_other"
									  height="20" textAlign="right"/>
							<mx:Label x="385"
									  y="422"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Total')}" textAlign="right" width="108" id="label4"/>
							<mx:Label x="496.95"
									  y="422"
									  width="97.05"
									  id="job_total"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="185"
									  width="98"
									  id="num_of_sig"
									  text="{job.signatures}"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="206"
									  width="98"
									  id="job_imp"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="227"
									  width="98"
									  id="total_imp"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="248"
									  width="98"
									  id="job_weight"
									  height="20" textAlign="right"/>
							<mx:Label x="385"
									  y="366"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Bind')}" textAlign="right" width="108" id="label5"/>
							<mx:TextInput x="496"
										  y="279"
										  id="job_price"
										  height="20"
										  width="98" textAlign="right" text="{job.pricingRecord.totalPrice}"/>
							<mx:Label x="385"
									  y="281"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Price')}" textAlign="right" width="108" id="label7"/>
							<mx:Label x="385"
									  y="303"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversUnitPrice')}" textAlign="right" width="108" id="label6"/>
							<mx:TextInput x="496"
										  y="70"
										  id="job_sheets"
										  text="{job.sheets}"
										  height="20"
										  width="98" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="93"
										  width="45.300003"
										  id="job_up"
										  text="{job.numUp}"
										  height="20" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="548.3"
										  y="93"
										  width="45.700005"
										  id="job_on"
										  text="{job.numOn}"
										  height="20" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="115"
										  id="job_press"
										  height="20"
										  width="98"
										  text="{job.pressQty}" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="138"
										  id="bindery_waste"
										  text="{job.binderyWaste}"
										  height="20"
										  width="98" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="161"
										  id="est_waste"
										  text="{job.estWaste}"
										  height="20"
										  width="98" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:Label x="385"
									  y="248"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Weight')}" textAlign="right" width="108" id="label11"/>
							<mx:Label x="385"
									  y="227"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.TotImp')}" textAlign="right" width="108" id="label8"/>
							<mx:Label x="385"
									  y="206"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.ImpRun')}" textAlign="right" width="108" id="label9"/>
							<mx:Label x="385"
									  y="185"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OfSignatures')}" textAlign="right" width="108" id="label10"/>
							<mx:Label x="385"
									  y="163"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.EstWaste')}" textAlign="right" width="108" id="label31"/>
							<mx:Label x="385"
									  y="140"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.BinderyWaste')}" textAlign="right" width="108" id="label34"/>
							<mx:Label x="385"
									  y="117"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Press')}" textAlign="right" width="108" id="label12"/>
							<mx:Label x="385"
									  y="95"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UpOn')}" textAlign="right" width="108" id="label30"/>
							<mx:Label x="385"
									  y="72"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Sheets')}" textAlign="right" width="108" id="label29"/>
							<mx:Label x="385"
									  y="49"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.InSetsOf')}" textAlign="right" width="108" id="label28"/>
							<mx:TextInput x="496"
										  y="1"
										  id="job_ordered"
										  text="{job.qtyOrdered}"
										  height="20"
										  width="98" focusOut="fieldChanged(event)" textAlign="right"/>
							<mx:Label x="385"
									  y="3"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Ordered')}" textAlign="right" width="108"/>
							<mx:Label x="385"
									  y="26"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversUnders')}" textAlign="right" width="108" id="label33"/>
							<mx:VRule x="374"
									  bottom="5"
									  top="5"/>
							<mx:HRule y="273"
									  height="2.0054946"
									  right="5"
									  left="380"/>
							<mx:HRule y="411"
									  height="2.0054946"
									  right="5"
									  left="380" id="hrule2"/>
							<mx:HRule y="415"
									  height="2.0054946"
									  right="5"
									  left="380" id="hrule1"/>
							<mx:HRule x="10"
									  y="46"
									  width="356"
									  height="2" id="hrule3"/>
							<mx:ViewStack x="10"
										  y="46"
										  id="viewstack4"
										  width="358"
										  height="218">
								<mx:Canvas label="View 1"
										   width="100%"
										   height="100%" id="canvas3">
									<mx:Text x="107"
											 y="57"
											 width="247"
											 height="20"
											 id="job_color"
											 text="{job.stock.color.name}"
											 fontSize="9"/>
								    <fc:AutoComplete x="107"
								      y="79"
								      width="100"
								      height="20"
								      id="job_parent"
								      dataProvider="{dimensions}"
								      labelField="name"
								      fontSize="9"
								      text="{job.parentSize}"
								      focusOut="handleFocusOutEvent(event)"
								      />
									<fc:AutoComplete x="107"
												  y="101"
												  width="100"
												  height="20"
												  id="job_size"
												  dataProvider="{dimensions}"
												  labelField="name"
												  fontSize="9"
												  text="{job.runSize}"
												  focusOut="handleFocusOutEvent(event)"
												  />
									<fc:AutoComplete x="107"
												  y="123"
												  width="100"
												  height="20"
												  id="job_finish_size"
												  dataProvider="{dimensions}"
												  labelField="name"
												  fontSize="9"
												  text="{job.finishSize}"
												  focusOut="handleFocusOutEvent(event)"
												  />
									<fc:AutoComplete x="107"
												  y="145"
												  width="100"
												  height="20"
												  id="job_fold_size"
												  dataProvider="{dimensions}"
												  labelField="name"
												  fontSize="9"
												  text="{job.foldedSize}"
												  focusOut="handleFocusOutEvent(event)"
												  />
									<mx:TextInput x="107"
												  y="167"
												  width="100"
												  height="20"
												  id="number_lines"
												  fontSize="9"/>
									<mx:Label x="6"
											  y="147"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.FoldedSize')}"
											  fontSize="9" textAlign="right" width="94" id="label16"/>
									<mx:Label x="6"
											  y="125"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Finish')}"
											  fontSize="9" textAlign="right" width="94" id="label17"/>
									<mx:Label x="6"
											  y="190"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}"
											  fontSize="9" textAlign="right" width="94" id="label15"/>
									<mx:TextInput x="107"
												  y="189"
												  width="100"
												  height="20"
												  id="job_unit_price"
												  fontSize="9"/>
									<mx:Label x="6"
											  y="103"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RunSize')}"
											  fontSize="9" textAlign="right" width="94" id="runsize_label"/>
									<mx:Label x="11"
											  y="81"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Parent')}"
											  fontSize="9" textAlign="right" width="89" id="label13"/>
									<mx:Label x="6"
											  y="169"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.NumberofLines')}"
											  fontSize="9" textAlign="right" width="94" id="label14"/>
									<mx:TextInput x="107"
												  y="35"
												  width="171"
												  height="20"
												  id="job_stock"
												  text="{job.stock.name}"
												  fontSize="9"/>
									<mx:Label x="6"
											  y="37"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Stock')}"
											  fontSize="9" width="94" textAlign="right" id="label18"/>
									<mx:Label x="10"
											  y="57"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Color')}"
											  fontSize="9" textAlign="right" width="90" id="label19"/>
									<mx:CheckBox x="10"
												 y="6"
												 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CustomerSuppliedStoc')}"
												 id="customer_suppliled_stock"
												 fontSize="9"/>
									<mx:CheckBox x="218"
												 y="7"
												 fontSize="9" id="checkbox1"/>
									<mx:Button x="240"
											   y="7"
											   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.SpecialOrder')}"
											   fontSize="9"
											   height="18"
											   id="special_order_button" width="108"/>
									<mx:Image x="215"
											  y="81"
											  width="139"
											  height="124"/>
									<mx:HRule x="2"
											  y="215"
											  width="356"
											  height="2"/>
									<mx:Button x="286"
											   y="35"
											   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'usecCmd.Change')}"
											   fontSize="9"
											   height="18"
											   id="chage_stock_button"
											   click="changeStockDefinition()" width="62"/>
								</mx:Canvas>
								<mx:Canvas label="merchandise_canvas"
										   width="100%"
										   height="100%">
									<mx:TextArea x="79"
												 y="10"
												 width="277"
												 id="job_notes"
												 text="{job.jobNotes}"/>
									<mx:Label x="-36"
											  y="11"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Notes')}"/>
									<mx:CheckBox x="79"
												 y="62"
												 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.ShowNotes')}"
												 id="check_job_notes"
												 selected="{job.jobTicketNotes}"/>
									<mx:TextInput x="79"
												  y="92"
												  width="277"
												  height="22"
												  id="vendor_edit"/>
									<mx:Label x="-36"
											  y="94"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Vendor')}"/>
								</mx:Canvas>
							</mx:ViewStack>
							<mx:ViewStack x="10"
										  y="263"
										  id="estimator_viewstack"
										  width="358"
										  height="202">
								<mx:Canvas id="printing_estimator_canvas"
										   width="100%"
										   height="100%">
									<fc:AutoComplete x="107"
													 y="5"
													 width="241"
													 height="20"
													 id="job_pricing_press"
													 dataProvider="{presses}"
													 labelField="name"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="7"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.PricingPress')}"
											  fontSize="9" textAlign="right" width="91" id="label20"/>
									<fc:AutoComplete x="107"
													 y="28"
													 width="241"
													 height="20"
													 id="job_costing_press"
													 dataProvider="{presses}"
													 labelField="name"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="30"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CostingPress')}"
											  fontSize="9" textAlign="right" width="91" id="label21"/>
									<mx:Label x="6"
											  y="96"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Back')}"
											  fontSize="9" textAlign="right" width="34" id="label26"/>
									<mx:Label x="5"
											  y="73"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Front')}"
											  fontSize="9" textAlign="right" width="35" id="label24"/>
									<mx:Panel x="10"
											  y="123"
											  width="338"
											  height="69"
											  layout="absolute"
											  title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RunMethod')}"
											  dropShadowEnabled="false"
											  fontSize="9">
										<mx:RadioButtonGroup id="run_method_radiogroup"/>
										<mx:RadioButton x="213"
														y="6"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.WorkandTurn')}"
														groupName="run_method_radiogroup"
														height="18"
														value="Work_Turn" width="95" id="radiobutton1"/>
										<mx:RadioButton x="10"
														y="6"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Sheetwise')}"
														groupName="run_method_radiogroup"
														height="18"
														value="Sheetwise" width="76" id="radiobutton2"/>
										<mx:RadioButton x="94"
														y="6"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.WorkandTumble')}"
														groupName="run_method_radiogroup"
														height="18"
														value="Work_Tumble" width="111" id="radiobutton3"/>
									</mx:Panel>
									<mx:Label x="48"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Colors')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label22"/>
									<mx:Label x="96"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Passes')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label23"/>
									<mx:Label x="144"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Washes')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label25"/>
									<mx:Label x="192"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Ink')}"
											  width="156"
											  textAlign="center"
											  fontSize="9" id="label27"/>
									<mx:TextInput x="48"
												  y="71"
												  width="46"
												  height="20"
												  id="front_colors_text"
												  fontSize="9" textAlign="center"
												  text="{job.frontColors}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="96"
												  y="71"
												  width="46"
												  height="20"
												  id="front_passes_text"
												  fontSize="9" textAlign="center"
												  text="{job.frontPasses}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="96"
												  y="94"
												  width="46"
												  height="20"
												  id="back_passes_text"
												  fontSize="9" textAlign="center"
												  text="{job.backPasses}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="144"
												  y="71"
												  width="46"
												  height="20"
												  id="front_washes_text"
												  fontSize="9" textAlign="center"
												  text="{job.frontWashes}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="192"
												  y="71"
												  width="156"
												  height="20"
												  id="front_inks_text"
												  fontSize="9" textAlign="center"
												  text="{job.frontInks}"/>
									<mx:TextInput x="192"
												  y="94"
												  width="156"
												  height="20"
												  id="back_inks_text"
												  fontSize="9" textAlign="center"
												  text="{job.backInks}"/>
									<mx:TextInput x="144"
												  y="94"
												  width="46"
												  height="20"
												  id="back_washes_text"
												  fontSize="9" textAlign="center"
												  text="{job.backWashes}" focusOut="fieldChanged(event)"/>
									<mx:TextInput x="48"
												  y="94"
												  width="46"
												  height="20"
												  id="back_colors_text"
												  fontSize="9" textAlign="center"
												  text="{job.backColors}" focusOut="fieldChanged(event)"/>
								</mx:Canvas>
								<mx:Canvas id="copy_estimator_canvas" label="Copiers" width="100%" height="100%">
									<mx:ComboBox x="107"
													 y="5"
													 width="241"
													 height="20"
													 id="job_pricing_copier"
													 dataProvider="{copiers}"
													 labelField="name"
													 change="changePricingCopier()"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="7"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.PricingCopier')}"
											  fontSize="9" width="90" textAlign="right"/>
									<mx:ComboBox x="107"
													 y="28"
													 width="241"
													 height="20"
													 id="job_costing_copier"
													 dataProvider="{copiers}"
													 labelField="name"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="30"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CostingCopier')}"
											  fontSize="9" width="90" textAlign="right"/>
									<mx:RadioButtonGroup id="copierSides"/>
									<mx:RadioButton x="107" y="58" click="changeJobSides(event)" id="copy_single_radio" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.SingleSided')}" groupName="copierSides" fontSize="9"/>
									<mx:RadioButton x="107" y="78" click="changeJobSides(event)" id="copy_double_radio" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.DoubleSided')}" groupName="copierSides" fontSize="9"/>
								</mx:Canvas>
							</mx:ViewStack>
							<ns1:Throbber visible="false" id="pricing_throbber" x="599" y="278" height="20" width="20"/>
							<mx:LinkButton x="596" y="278" width="20" id="refresh_price_btn" height="20" click="updatePrice()">
								<mx:icon>@Embed(source='../../../../assets/refresh_small.png')</mx:icon>
							</mx:LinkButton>
							<mx:LinkButton x="618" y="278" width="20" id="price_info_btn" height="20" click="showJobPricingInfo()">
								<mx:icon>@Embed(source='../../../../assets/help_small.png')</mx:icon>
							</mx:LinkButton>
						
						</mx:Canvas>
					</mx:ViewStack>
					<mx:Accordion width="250"
								  height="468"
								  fontSize="9">
						<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Charges')}"
								   width="100%"
								   height="100%"
								   fontSize="9"
								   verticalScrollPolicy="off"
								   horizontalScrollPolicy="off">
							<mx:LinkButton x="203"
										   y="464"
										   id="delete_charge_button"
										   click="doDeleteCharge()"
										   icon="@Embed(source='../../../../assets/delete16.png')"
										   width="24"
										   bottom="0"/>
							<mx:LinkButton x="234"
										   y="464"
										   id="add_charge_button"
										   click="doAddCharge()"
										   icon="@Embed(source='../../../../assets/add16.png')"
										   width="24"
										   bottom="0" enabled="false"/>
							<mx:DataGrid
										 id="invoice_charge_datagrid"
										 dataProvider="{job.charges}"
										 left="0"
										 bottom="25"
										 top="0"
										 right="0"
										 showHeaders="false" alternatingItemColors="[#FFFFFF,#FFFFFF]">
								<mx:columns>
									<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Description')}"
													   dataField="description"/>
									<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Price')}"
													   width="90"
													   dataField="price"
													    textAlign="right"/>
								</mx:columns>
							</mx:DataGrid>
						</mx:Canvas>
						<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Commands')}"
								   width="100%"
								   height="100%">
							<mx:LinkButton x="10"
										   y="10"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.PrintJobTicket')}"/>
							<mx:LinkButton x="10"
										   y="30"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.PreviewJobTicket')}"/>
							<mx:LinkButton x="10"
										   y="50"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.JobTicketNotes')}"/>
							<mx:LinkButton x="10"
										   y="70"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.WebWorkSheet')}"/>
							<mx:LinkButton x="10"
										   y="90"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.DigitalAssets')}"/>
							<mx:LinkButton x="10"
										   y="110"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.MultiQty')}"/>
						</mx:Canvas>
					</mx:Accordion>
				</mx:HDividedBox>
			</mx:Canvas>
			<mx:LinkButton x="629"
					   y="10"
					   width="38"
					   height="38"
					   click="doSaveTemplate();"
					   id="template_button">
				<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="620"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Savetemplateas')}"
					  width="64"
					  textAlign="center"/>

		</mx:Canvas>
	</mx:VBox>
</mx:TitleWindow>
