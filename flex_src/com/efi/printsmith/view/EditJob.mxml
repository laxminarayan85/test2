<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml"
				xmlns:view="com.efi.printsmith.view.*"
				xmlns:vo="com.efi.printsmith.vo.*"
				xmlns:fc="http://www.adobe.com/2006/fc"
				xmlns:comp="com.efi.printsmith.components.*"
				xmlns:common="com.efi.printsmith.common.components.*"
				title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Jobs')}"
				creationComplete="init()"
				label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Jobs')}"
				name="Job Editor"
				horizontalScrollPolicy="off"
				verticalScrollPolicy="auto"
				showCloseButton="false"
				headerHeight="0"
				width="100%" height="100%" xmlns:components="com.efi.printsmith.components.*" xmlns:ns2="com.adobe.flex.extras.controls.*"
				xmlns:commoncomponents="com.efi.printsmith.common.components.*">
	<mx:states>
		<mx:State name="PrintMethod">
			<mx:SetProperty target="{total_imp}" name="text" value="{job.totalImpressions}"/>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
		</mx:State>
		<mx:State name="CopyMethod">
			<mx:SetProperty target="{job_total}" name="y" value="471"/>
			<mx:SetProperty target="{hrule1}" name="y" value="464"/>
			<mx:SetProperty target="{hrule2}" name="y" value="460"/>
			<mx:SetProperty target="{job_other}" name="y" value="436"/>
			<mx:SetProperty target="{job_bind}" name="y" value="415"/>
			<mx:SetProperty target="{job_prep}" name="y" value="394"/>
			<mx:SetProperty target="{label2}" name="y" value="436"/>
			<mx:SetProperty target="{label3}" name="y" value="394"/>
			<mx:SetProperty target="{label4}" name="y" value="471"/>
			<mx:SetProperty target="{label5}" name="y" value="415"/>
			<mx:SetProperty target="{overs_total_price}" name="y" value="372"/>
			<mx:SetProperty target="{label1}" name="y" value="374"/>
			<mx:SetProperty target="{overs_unit_price}" name="y" value="350"/>
			<mx:SetProperty target="{label6}" name="y" value="352"/>
			<mx:SetProperty target="{label7}" name="y" value="330"/>
			<mx:SetProperty target="{refresh_price_btn}" name="y" value="327"/>
			<mx:SetProperty target="{pricing_throbber}" name="y" value="327"/>
			<mx:SetProperty target="{price_info_btn}" name="y" value="327"/>
			<mx:SetProperty target="{job_price}" name="y" value="328"/>
			<mx:AddChild relativeTo="{label7}" position="before">
				<mx:TextInput x="501"
							  y="306"
							  id="job_unitPrice"
							  height="20"
							  tabEnabled="false"
							  width="98" textAlign="right" text="{Snowmass.getCurrencyFormatter(false,4).format(job.pricingRecord.unitPrice)}"
							  change="editUnitPrice(event)" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{label7}" position="before">
				<mx:Label x="390"
						  y="308"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}" textAlign="right" width="108" id="label0"/>
			</mx:AddChild>
			<mx:SetProperty target="{copy_single_radio}" name="width" value="230"/>
			<mx:SetProperty target="{copy_double_radio}" name="width" value="230"/>
			<mx:SetProperty target="{pricing_throbber}" name="visible" value="false"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:AddChild relativeTo="{job_weight}" position="before">
				<mx:Label x="497"
						  y="205"
						  width="98"
						  id="num_of_sig"
						  text="{job.signatures}"
						  height="20" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{job_weight}" position="before">
				<mx:Label x="385"
						  y="205"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OfSignatures')}" textAlign="right" width="108"/>
			</mx:AddChild>
			<mx:SetProperty target="{label10}" name="x" value="384"/>
			<mx:SetProperty target="{label10}" name="y" value="231"/>
			<mx:SetProperty target="{label10}" name="text">
				<mx:value>{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.TotCopy')}</mx:value>
			</mx:SetProperty>
			<mx:SetProperty target="{job_weight}" name="y" value="253"/>
			<mx:SetProperty target="{label11}" name="x" value="384"/>
			<mx:SetProperty target="{label11}" name="y" value="253"/>
			<mx:SetProperty target="{job_weight}" name="text" value="{job.weight}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:AddChild relativeTo="{est_waste}" position="before">
				<mx:TextInput x="497"
							  y="138"
							  id="num_copies"
							  text="{job.numCopies}"
							  height="20" change="editNumCopies(event)"
							  tabIndex="6"
							  width="98" textAlign="right" focusOut="fieldChanged(event)" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{est_waste}" position="before">
				<mx:Label x="386"
						  y="140"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Copies')}" textAlign="right" width="108"/>
			</mx:AddChild>
			<mx:SetProperty target="{job_price}" name="text">
				<mx:value>{Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.totalPrice)}</mx:value>
			</mx:SetProperty>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:SetProperty target="{job_on}" name="x" value="550.3"/>
			<mx:SetProperty target="{bindery_waste}" name="x" value="497"/>
			<mx:SetProperty target="{label31}" name="x" value="384"/>
			<mx:SetProperty target="{label31}" name="y" value="185"/>
			<mx:SetProperty target="{est_waste}" name="y" value="183"/>
			<mx:SetProperty target="{label30}" name="x" value="386"/>
			<mx:SetProperty target="{job_up}" name="x" value="497"/>
			<mx:SetProperty target="{label30}" name="y" value="116"/>
			<mx:SetProperty target="{label7}" name="x" value="390"/>
			<mx:SetProperty target="{job_price}" name="x" value="501"/>
			<mx:SetProperty target="{refresh_price_btn}" name="x" value="601"/>
			<mx:SetProperty target="{price_info_btn}" name="x" value="623"/>
			<mx:SetProperty target="{label6}" name="x" value="390"/>
			<mx:SetProperty target="{overs_unit_price}" name="x" value="501"/>
			<mx:SetProperty target="{label1}" name="x" value="390"/>
			<mx:SetProperty target="{overs_total_price}" name="x" value="501"/>
			<mx:SetProperty target="{label3}" name="x" value="390"/>
			<mx:SetProperty target="{job_prep}" name="x" value="501"/>
			<mx:SetProperty target="{label5}" name="x" value="390"/>
			<mx:SetProperty target="{job_bind}" name="x" value="501"/>
			<mx:SetProperty target="{job_other}" name="x" value="501"/>
			<mx:SetProperty target="{label2}" name="x" value="390"/>
			<mx:SetProperty target="{label4}" name="x" value="390"/>
			<mx:SetProperty target="{job_total}" name="x" value="501.95"/>
			<mx:SetStyle target="{hrule2}" name="left" value="385"/>
			<mx:SetStyle target="{hrule2}" name="right" value="0"/>
			<mx:SetStyle target="{hrule1}" name="left" value="385"/>
			<mx:SetStyle target="{hrule1}" name="right" value="0"/>
			<mx:SetProperty target="{est_waste}" name="x" value="497"/>
			<mx:SetProperty target="{label34}" name="x" value="384"/>
			<mx:RemoveChild target="{num_signatures}"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label
						  width="98"
						  id="total_copies"
						  text="{job.totalCopies}"
						  height="20" textAlign="right" x="497" y="231"/>
			</mx:AddChild>
		</mx:State>
		<mx:State name="LargeFormat">
			<mx:RemoveChild target="{runsize_label}"/>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:Label x="14" y="83" width="86" id="rollWidth_label" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RollWidth')}" textAlign="right"/>
			</mx:AddChild>
			<mx:RemoveChild target="{label13}"/>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:Label x="10" y="111" width="91" id="cutoff_label" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Cutoff')}" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:TextInput x="107" y="110" width="100" height="20" id="cutOff_edit"  text="{job.cutOff}" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:SetProperty target="{label16}" name="x" value="5"/>
			<mx:SetProperty target="{label16}" name="y" value="164"/>
			<mx:SetProperty target="{label17}" name="x" value="5"/>
			<mx:SetProperty target="{label17}" name="y" value="139"/>
			<mx:SetProperty target="{job_fold_size}" name="y" value="162"/>
			<mx:SetProperty target="{job_finish_size}" name="y" value="135"/>
			<mx:RemoveChild target="{job_parent}"/>
			<mx:RemoveChild target="{job_size}"/>
			<mx:AddChild relativeTo="{canvas3}" position="lastChild">
				<mx:TextInput x="108" y="81" width="100" height="20" id="roll_width"  text="{job.rollWidth}" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:SetProperty target="{job_weight}" name="y" value="227"/>
			<mx:SetProperty target="{label11}" name="y" value="227"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput
							  id="num_copies1"
							  text="{job.numCopies}"
							  height="20"
							  width="98" textAlign="right" focusOut="fieldChanged(event)" x="496" y="139" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Copies')}" textAlign="right" width="108" x="386" y="142"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label
						  textAlign="right" width="108" id="label39" x="385" y="253">
					<mx:text>{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.TotCopy')}</mx:text>
				</mx:Label>
			</mx:AddChild>
			<mx:RemoveChild target="{num_signatures}"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="496"
						  y="253"
						  width="98"
						  id="total_copies0"
						  text="{job.totalCopies}"
						  height="20" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="496"
						  y="208"
						  width="98"
						  id="num_of_sig0"
						  text="{job.signatures}"
						  height="20" textAlign="right"/>
			</mx:AddChild>
			<mx:SetProperty target="{label4}" name="y" value="468"/>
			<mx:SetProperty target="{hrule2}" name="y" value="457"/>
			<mx:SetProperty target="{hrule1}" name="y" value="461"/>
			<mx:SetProperty target="{label2}" name="y" value="433"/>
			<mx:SetProperty target="{job_other}" name="y" value="433"/>
			<mx:SetProperty target="{job_bind}" name="y" value="412"/>
			<mx:SetProperty target="{job_prep}" name="y" value="391"/>
			<mx:SetProperty target="{overs_total_price}" name="y" value="369"/>
			<mx:SetProperty target="{overs_unit_price}" name="y" value="347"/>
			<mx:SetProperty target="{job_price}" name="y" value="325"/>
			<mx:SetProperty target="{refresh_price_btn}" name="y" value="324"/>
			<mx:SetProperty target="{pricing_throbber}" name="y" value="324"/>
			<mx:SetProperty target="{price_info_btn}" name="y" value="324"/>
			<mx:SetProperty target="{label7}" name="y" value="327"/>
			<mx:SetProperty target="{label6}" name="y" value="349"/>
			<mx:SetProperty target="{label1}" name="y" value="371"/>
			<mx:SetProperty target="{label3}" name="y" value="391"/>
			<mx:SetProperty target="{label5}" name="y" value="412"/>
			<mx:SetProperty target="{label4}" name="x" value="390"/>
			<mx:SetStyle target="{hrule2}" name="left" value="385"/>
			<mx:SetStyle target="{hrule2}" name="right" value="0"/>
			<mx:SetStyle target="{hrule1}" name="left" value="385"/>
			<mx:SetStyle target="{hrule1}" name="right" value="0"/>
			<mx:SetProperty target="{label2}" name="x" value="390"/>
			<mx:SetProperty target="{job_other}" name="x" value="501"/>
			<mx:SetProperty target="{job_bind}" name="x" value="501"/>
			<mx:SetProperty target="{job_prep}" name="x" value="501"/>
			<mx:SetProperty target="{overs_total_price}" name="x" value="501"/>
			<mx:SetProperty target="{overs_unit_price}" name="x" value="501"/>
			<mx:SetProperty target="{job_price}" name="x" value="501"/>
			<mx:SetProperty target="{refresh_price_btn}" name="x" value="601"/>
			<mx:SetProperty target="{price_info_btn}" name="x" value="623"/>
			<mx:SetProperty target="{label7}" name="x" value="390"/>
			<mx:SetProperty target="{label6}" name="x" value="390"/>
			<mx:SetProperty target="{label1}" name="x" value="390"/>
			<mx:SetProperty target="{label3}" name="x" value="390"/>
			<mx:SetProperty target="{label5}" name="x" value="390"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="501"
							  y="306"
							  id="job_LFUnitPrice"
							  height="20"
							  width="98" textAlign="right" text="{Snowmass.getCurrencyFormatter(false,4).format(job.pricingRecord.unitPrice)}"
							  change="editUnitPrice(event)" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="390"
						  y="308"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}" textAlign="right" width="108" id="label40"/>
			</mx:AddChild>
			<mx:SetProperty target="{job_total}" name="y" value="467"/>
			<mx:SetProperty target="{job_total}" name="x" value="501"/>
			<mx:SetProperty target="{label30}" name="x" value="384"/>
		</mx:State>
		<mx:State name="Mailing">
			<mx:RemoveChild target="{customer_suppliled_stock}"/>
			<mx:RemoveChild target="{specialOrder}"/>
			<mx:RemoveChild target="{special_order_button}"/>
			<mx:RemoveChild target="{chage_stock_button}"/>
			<mx:RemoveChild target="{job_stock}"/>
			<mx:RemoveChild target="{label18}"/>
			<mx:RemoveChild target="{label19}"/>
			<mx:RemoveChild target="{job_color}"/>
			<mx:RemoveChild target="{label13}"/>
			<mx:RemoveChild target="{runsize_label}"/>
			<mx:RemoveChild target="{label17}"/>
			<mx:RemoveChild target="{label16}"/>
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{canvas3}"/>
			<mx:RemoveChild target="{viewstack4}"/>
			<mx:RemoveChild target="{label20}"/>
			<mx:RemoveChild target="{label21}"/>
			<mx:RemoveChild target="{job_pricing_press}"/>
			<mx:RemoveChild target="{job_costing_press}"/>
			<mx:RemoveChild target="{label22}"/>
			<mx:RemoveChild target="{label23}"/>
			<mx:RemoveChild target="{label24}"/>
			<mx:RemoveChild target="{front_colors_text}"/>
			<mx:RemoveChild target="{front_passes_text}"/>
			<mx:RemoveChild target="{label25}"/>
			<mx:RemoveChild target="{front_washes_text}"/>
			<mx:RemoveChild target="{label26}"/>
			<mx:RemoveChild target="{back_passes_text}"/>
			<mx:RemoveChild target="{back_washes_text}"/>
			<mx:RemoveChild target="{back_colors_text}"/>
			<mx:RemoveChild target="{label27}"/>
			<mx:RemoveChild target="{front_inks_text}"/>
			<mx:RemoveChild target="{back_inks_text}"/>
			<mx:RemoveChild target="{radiobutton1}"/>
			<mx:RemoveChild target="{radiobutton2}"/>
			<mx:RemoveChild target="{radiobutton3}"/>
			<mx:RemoveChild target="{printing_estimator_canvas}"/>
			<mx:RemoveChild target="{estimator_viewstack}"/>
			<mx:SetProperty target="{hrule3}" name="y" value="86"/>
			<mx:SetProperty target="{job_description}" name="height" value="77"/>
			<mx:RemoveChild target="{sets_of}"/>
			<mx:RemoveChild target="{label28}"/>
			<mx:RemoveChild target="{label29}"/>
			<mx:RemoveChild target="{job_sheets}"/>
			<mx:RemoveChild target="{label30}"/>
			<mx:RemoveChild target="{job_up}"/>
			<mx:RemoveChild target="{job_on}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:RemoveChild target="{label31}"/>
			<mx:RemoveChild target="{est_waste}"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:RemoveChild target="{num_signatures}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{label11}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{job_weight}"/>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:TextArea x="85"
							 y="96"
							 width="281"
							 id="job_mailingnotes"
							 text="{job.notes}"
							 height="77"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="97"
						  text="Notes" width="67" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<components:CheckBoxRenderer x="85" y="181" id="job_shownotes" selected="false"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="181"
						  text="Show Notes" width="67" textAlign="right"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{label32}" position="before">
				<mx:Label x="10"
						  y="209"
						  text="Vendor" width="67" textAlign="right" id="label35"/>
			</mx:AddChild>
			<mx:SetProperty target="{label33}" name="y" value="83"/>
			<mx:SetProperty target="{job_over_under}" name="y" value="81"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="52" width="98" focusOut="fieldChanged(event)" id="job_unitCost" text="{job.unitCost}" textAlign="right" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="52"
						  text="Unit Cost" width="67" textAlign="right" id="label36"/>
			</mx:AddChild>
			<mx:SetProperty target="{label34}" name="x" value="384"/>
			<mx:SetProperty target="{label34}" name="y" value="109"/>
			<mx:SetProperty target="{bindery_waste}" name="y" value="109"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="137" width="98" focusOut="fieldChanged(event)" id="job_totalCost" text="{job.totalCost}" textAlign="right" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="137"
						  text="Total Cost" width="67" textAlign="right" id="label37"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496" y="167" width="98" focusOut="fieldChanged(event)" id="job_markup" text="{job.markup}" textAlign="right" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="421"
						  y="167"
						  text="Markup" width="67" textAlign="right" id="label38"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:ComboBox x="85" y="207" id="job_vendor" labelField="name" dataProvider="{vendors}" width="183"></mx:ComboBox>
			</mx:AddChild>
		</mx:State>
		<mx:State name="ChargesOnly" basedOn="Mailing">
			<mx:RemoveChild target="{label35}"/>
			<mx:RemoveChild target="{label36}"/>
			<mx:RemoveChild target="{job_over_under}"/>
			<mx:RemoveChild target="{job_unitCost}"/>
			<mx:RemoveChild target="{label33}"/>
			<mx:RemoveChild target="{label34}"/>
			<mx:RemoveChild target="{bindery_waste}"/>
			<mx:RemoveChild target="{job_totalCost}"/>
			<mx:RemoveChild target="{label37}"/>
			<mx:RemoveChild target="{label38}"/>
			<mx:RemoveChild target="{job_markup}"/>
			<mx:RemoveChild target="{overs_unit_price}"/>
			<mx:RemoveChild target="{label6}"/>
			<mx:RemoveChild target="{label1}"/>
			<mx:RemoveChild target="{overs_total_price}"/>
			<mx:SetProperty target="{label3}" name="y" value="330"/>
			<mx:SetProperty target="{job_prep}" name="y" value="330"/>
			<mx:SetProperty target="{label5}" name="y" value="351"/>
			<mx:SetProperty target="{job_bind}" name="y" value="351"/>
			<mx:SetProperty target="{label2}" name="y" value="372"/>
			<mx:SetProperty target="{job_other}" name="y" value="372"/>
			<mx:SetProperty target="{hrule2}" name="y" value="396"/>
			<mx:SetProperty target="{hrule1}" name="y" value="400"/>
			<mx:SetProperty target="{job_total}" name="y" value="407"/>
			<mx:SetProperty target="{label4}" name="y" value="407"/>
			<mx:RemoveChild target="{job_vendor}"/>
			<mx:SetProperty target="{label7}" name="x" value="384"/>
			<mx:SetProperty target="{label3}" name="x" value="384"/>
		</mx:State>
		<mx:State name="LinesAndInches" basedOn="Mailing">
			<mx:AddChild relativeTo="{pricing_throbber}" position="before">
				<mx:HRule x="10"
						  y="235"
						  width="356"
						  height="2" id="hrule0"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="10" y="257" text="Number Of Lines"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:Label x="2" y="281" text="Number Of Inches"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="107" y="255" id="job_number_of_lines" text="{job.numberOfLines}" textAlign="right" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="107" y="279" id="job_number_of_inches" text="{job.numberOfInches}" textAlign="right" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:RemoveChild target="{job_unitCost}"/>
			<mx:RemoveChild target="{label36}"/>
			<mx:RemoveChild target="{label38}"/>
			<mx:RemoveChild target="{job_markup}"/>
			<mx:SetProperty target="{job_over_under}" name="y" value="53"/>
			<mx:SetProperty target="{job_vendor}" name="width" value="182"/>
			<mx:SetProperty target="{bindery_waste}" name="y" value="79"/>
			<mx:SetProperty target="{label34}" name="y" value="81"/>
			<mx:SetProperty target="{label37}" name="y" value="109"/>
			<mx:SetProperty target="{job_totalCost}" name="y" value="107"/>
			<mx:SetProperty target="{label33}" name="y" value="55"/>
		</mx:State>
		<mx:State name="Blank">
			<mx:RemoveChild target="{label14}"/>
			<mx:RemoveChild target="{number_lines}"/>
			<mx:RemoveChild target="{job_unit_price}"/>
			<mx:RemoveChild target="{label15}"/>
			<mx:RemoveChild target="{label28}"/>
			<mx:RemoveChild target="{sets_of}"/>
			<mx:RemoveChild target="{label29}"/>
			<mx:RemoveChild target="{job_sheets}"/>
			<mx:RemoveChild target="{label30}"/>
			<mx:RemoveChild target="{job_up}"/>
			<mx:RemoveChild target="{job_on}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:RemoveChild target="{job_press}"/>
			<mx:RemoveChild target="{label31}"/>
			<mx:RemoveChild target="{est_waste}"/>
			<mx:RemoveChild target="{label10}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{label8}"/>
			<mx:RemoveChild target="{total_imp}"/>
			<mx:RemoveChild target="{job_imp}"/>
			<mx:RemoveChild target="{num_signatures}"/>
			<mx:SetProperty target="{label34}" name="y" value="49"/>
			<mx:SetProperty target="{bindery_waste}" name="y" value="47"/>
			<mx:SetProperty target="{label11}" name="y" value="69"/>
			<mx:SetProperty target="{job_weight}" name="y" value="69"/>
			<mx:RemoveChild target="{copy_estimator_canvas}"/>
			<mx:RemoveChild target="{estimator_viewstack}"/>
			<mx:SetProperty target="{hrule4}" name="y" value="250"/>
			<mx:AddChild relativeTo="{hrule2}" position="before">
				<mx:TextInput x="496"
							  y="260"
							  id="job_LFUnitPrice0"
							  height="20"
							  width="98" textAlign="right" text="{Snowmass.getCurrencyFormatter(false,4).format(job.pricingRecord.unitPrice)}"
							  change="editUnitPrice(event)" mouseDown="textInputClick(event)" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{hrule2}" position="before">
				<mx:Label x="385"
						  y="262"
						  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}" textAlign="right" width="108" id="label41"/>
			</mx:AddChild>
			<mx:SetProperty target="{label33}" name="y" value="27"/>
			<mx:RemoveChild target="{label42}"/>
			<mx:AddChild relativeTo="{canvas4}" position="lastChild">
				<mx:TextInput x="496"
							  y="25"
							  id="job_over_under0"
							  text="{job.oversUnders}"
							  height="20"
							  width="98" mouseDown="textInputClick(event)" focusOut="fieldChanged(event)" textAlign="right"/>
			</mx:AddChild>
			<mx:RemoveChild target="{multiQtyLabel}"/>
			<mx:RemoveChild target="{button1}"/>
		</mx:State>
	</mx:states>
	<mx:RemoteObject id="dataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadResult(event)"/>
		<mx:method name="addUpdate"
				   fault="handleFault(event)"
				   result="handleSaveResult(event)"/>
		<mx:method name="deleteItem"
				   fault="handleFault(event)"
				   result="handleDeleteResult(event)"/>
		<mx:method name="getDimensionByWildcardName"
				   fault="handleFault(event)"
				   result="handleDimesionByNameResult(event)"/>
		<mx:method name="getJob"
				   fault="handleFault(event)"
				   result="handleLoadJobResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="copierDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadCopierResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="pressDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadPressResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="dimensionDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadDimensionResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="pricingMethodDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadPricingMethodResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="locationDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadLocationResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="productDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadProductResult(event)"/>
		<mx:method name="addUpdate"
				   fault="handleFault(event)"
				   result="handleSaveProductResult(event)"/>
				   
	</mx:RemoteObject>
	<mx:RemoteObject id="chargeDataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadChargeResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="chargeCommandDataService"
					 destination="dataService">
		<mx:method name="getChargeList"
				   fault="handleFault(event)"
				   result="handleLoadChargeCommandResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServicePreferencesStockDefinition" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPreferencesStockDefinitionResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="stockDataService" destination="dataService">
		<mx:method name="getStockPicker" fault="handleFault(event)" result="handleStockLoadResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServiceSystemPreferences" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadSystemPreferencesResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServicePreferencesDefaultPresses" destination="dataService">
		<mx:method name="getSingle" fault="handleFault(event)" result="handleLoadPreferencesDefaultPressesResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServiceEstimatingPreferences" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadEstimatingPreferencesResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="jobService" destination="jobService">
		<mx:method name="createJob" fault="handleFault(event)" result="handleCreateJobResult(event)"/>
		<mx:method name="assignPricingCopierToJob" fault="handleFault(event)" result="handleAssignPricingCopierResult(event)"/>
		<mx:method name="assignStockToJob" fault="handleFault(event)" result="handleAssignStockResult(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="jdfIntegrationService"
				destination="jdfIntegrationService">
		<mx:method name="sendJobToFiery"
				fault="handleFault(event)"
				result="sendJobToFieryResult(event)"/>
	</mx:RemoteObject>		
	<mx:RemoteObject id="paperCalculatorService"
					 destination="paperCalculatorService">
		<mx:method name="CalcOut"
				   fault="handleFault(event)"
				   result="handleCalcOutResult(event)"/>
		<mx:method name="GeneratePaperCalculatorImage"
					fault="handleFault(event)"
					result="handleGenerateImage(event)"/>
		<mx:method name="CalculateCutCounts"
					fault="handleFault(event)"
					result="handleCalculateCuts(event)"/>
	</mx:RemoteObject>
	<mx:RemoteObject id="taxTableDataService" destination="dataService">
		<mx:method name="getCurrentTaxTables" fault="handleFault(event)" result="handleLoadTaxTables(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveTaxTableResult(event)"/>
	</mx:RemoteObject>
	
	<mx:RemoteObject id="dataServiceGroup" destination="dataService">
		<mx:method name="getAll" fault="handleFault(event)" result="handleLoadGroupResult(event)"/>
		<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveGroupResult(event)"/>
	</mx:RemoteObject>
	
	<mx:Script source="../common/scripts/ComponentHelper.as"/>
	
	<mx:Script>
		<![CDATA[
			import com.efi.printsmith.events.JobNotesAddedEvent;
			import mx.events.CloseEvent;
			import mx.messaging.Producer;
			import mx.events.CollectionEvent;
			import com.efi.printsmith.pages.MultiQtyView;
			import com.efi.printsmith.data.StockGroup;
			import com.efi.printsmith.events.SpecialOrderStockDefEvent;
			import com.efi.printsmith.events.StockDefinitionOpenEvent;
			import mx.controls.dataGridClasses.DataGridColumn;
			import mx.utils.StringUtil;
			import com.efi.mdi.view.window.MDIWindow;
			import com.efi.mdi.event.window.WindowCloseEvent;
			import flash.net.registerClassAlias;
			import mx.utils.ObjectUtil;
			import com.efi.printsmith.data.Estimate;
			import com.efi.printsmith.common.components.CommonLoadComponent;
			import com.efi.printsmith.data.Users;
			import com.efi.printsmith.data.Dimension;
			import com.efi.printsmith.data.DigitalAsset;
			import com.efi.printsmith.pages.JobDigitalAssets;
			import com.efi.printsmith.data.JobTemplate;
			import com.efi.printsmith.data.JobBase;
			import com.efi.printsmith.data.PricingRecord;
			import com.efi.printsmith.pages.JobPricingInfo;
			import com.efi.printsmith.data.PreferencesPricingMethod;
			import com.efi.printsmith.events.PriceJobEvent;
			import com.efi.printsmith.data.Invoice;
			import com.efi.printsmith.data.InvoiceBase;
			import com.efi.printsmith.data.Job;
			import com.efi.printsmith.data.PressDefinition;
			import com.efi.printsmith.data.CopierDefinition;
			import com.efi.printsmith.data.ProductionLocations;
			import com.efi.printsmith.data.Account;
			import com.efi.printsmith.data.ProductCode;
			import com.efi.printsmith.data.Charge;
			import com.efi.printsmith.data.ChargeCategory;
			import com.efi.printsmith.data.ChargeCommand;
			import com.efi.printsmith.data.StockDefinition;
			import com.efi.printsmith.data.PreferencesSystem;
			import com.efi.printsmith.data.PreferencesEstimating;
			import com.efi.printsmith.data.PreferencesDefaultPresses;
			import com.efi.printsmith.data.TaxTable;
			
			import com.efi.printsmith.events.JobEditCompleteEvent;
			import com.efi.printsmith.events.StockPickerSelectEvent;
			import com.efi.printsmith.events.JobEditCompleteEvent;
			import com.efi.printsmith.events.ChargeDefinitionSelectEvent;
			import com.efi.printsmith.events.JobMethodSelectEvent;
			import com.efi.printsmith.events.InkColorEvent;
		    import com.efi.printsmith.events.DigitalAssetEvent;
			import com.efi.printsmith.events.commandEvents.Jobs.*;
			
			import com.efi.printsmith.pages.JobMethodPicker;
			import com.efi.printsmith.view.StockPicker;
			import com.efi.printsmith.pages.InkColorPicker;

			import com.efi.printsmith.Constants;
			
			import mx.controls.Image;
			import mx.controls.Alert;
			import mx.managers.PopUpManager;
			import mx.containers.TitleWindow;
			import mx.collections.ArrayCollection;
			import mx.rpc.events.ResultEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.IResponder;
			import mx.messaging.messages.AsyncMessage;
			import mx.messaging.messages.IMessage;
			import mx.printing.FlexPrintJob;
			import mx.printing.PrintAdvancedDataGrid;
			import mx.printing.PrintDataGrid;
			import mx.core.Application;
			import mx.validators.Validator;
			import mx.events.ValidationResultEvent;
			import mx.collections.ICollectionView;
			import mx.core.UIComponent;
		    
		    [Bindable]
		    private var preferencesDefaultPresses:PreferencesDefaultPresses;
		    
			[Bindable]                                         
		    private var systemPreferences:PreferencesSystem;
		    
		    [Bindable]                                         
		    private var estimatingPreferences:PreferencesEstimating;
		
			[Bindable]                                
			private var systemPreferencesArray:ArrayCollection = new ArrayCollection();
			
			[Bindable]                                
			private var estimatingPreferencesArray:ArrayCollection = new ArrayCollection();

			[Bindable]
			private var dimensionsArray:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var accounts:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var presses:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var copiers:ArrayCollection=new ArrayCollection();
			
			[Bindable]
			private var costingCopiers:ArrayCollection=new ArrayCollection();
			
			[Bindable]
			private var costingPresses:ArrayCollection=new ArrayCollection();
			
			[Bindable]
			private var locations:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var productCodes:ArrayCollection=new ArrayCollection();
			
			[Bindable]
			private var vendors:ArrayCollection=new ArrayCollection();

			[Bindable]
			public var job:Job=null;

			[Bindable]
			public var invoice:InvoiceBase;
			
			[Bindable]
			private var chargeCommands:ArrayCollection=new ArrayCollection();

			[Bindable]
			public var tempOpen:Object=new Object();

			[Bindable]
			public var refreshSO:Boolean=false;
			[Bindable]
			public var front:Boolean=false;

			[Bindable]
			var dimensionJobTarget:Object=new Object();

		    [Bindable] private var loadComponent:CommonLoadComponent;

			[Bindable]
			private var setPaperCalculatorData:Boolean=false;

			[Bindable]
			private var charges:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var pricingMethods:ArrayCollection=new ArrayCollection();

			[Bindable]
			private var stocks:ArrayCollection=new ArrayCollection();

		    [Bindable]
		    private var taxTables:ArrayCollection = new ArrayCollection();
			
    		private var preferencesStockDefinitions:ArrayCollection = new ArrayCollection();

			private var focussedFormControl:DisplayObject;
	
			private var doInitialStockPicker:Boolean = false;
			
			[Bindable] public var multiQtyJobList:ArrayCollection = new ArrayCollection();
			
			[Bindable] public var invoiceMultiQtyJobList:ArrayCollection = new ArrayCollection();
			
			private static var thisInstance:EditJob = null;
			
			[Bindable] public var jobIndex:Number = -1;
			
			[Bindable] private var stockGroups:ArrayCollection = new ArrayCollection();  
			private var costingCopierIsUsePress:Boolean = false;
			private var currentSizeName:String = "";
			private function handleLoadSystemPreferencesResult(ev:ResultEvent):void {
				systemPreferencesArray = ev.result as ArrayCollection;
				if (systemPreferencesArray.length > 0)
				{
					systemPreferences = systemPreferencesArray.getItemAt(0) as PreferencesSystem;
					check_taxtable.visible = systemPreferences.disableNonTaxableOptions
				}else {
					check_taxtable.visible = true;
				}
		
			}
			
			private function handleLoadTaxTables(ev:ResultEvent):void {
				var selectedItem:Object = tax_table_combo.selectedItem;
				var temp:TaxTable = new TaxTable();
				taxTables = ev.result as ArrayCollection;
				temp.name = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'taxCmd.Default')+' ' + resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'custDataCmd.TaxTable');
				taxTables.addItemAt(temp, 0);
				tax_table_combo.selectedItem= selectedItem;
			}

			private function handleLoadPreferencesDefaultPressesResult(ev:ResultEvent):void {
				preferencesDefaultPresses = ev.result as PreferencesDefaultPresses;
			}
			
			private function sendJobToFieryResult(ev:ResultEvent):void {
				
			}
			
			private function handleLoadEstimatingPreferencesResult(ev:ResultEvent):void {
				throbber.stop();
				throbber.visible = false;

				estimatingPreferencesArray = ev.result as ArrayCollection;
				if (estimatingPreferencesArray.length > 0) {
					estimatingPreferences = estimatingPreferencesArray.getItemAt(0) as PreferencesEstimating;
				}
				if (job.paperCal != null)
				{
					setPreferenceDataforPaperCal();
					setPaperCalculatorData = false;
				}
				if (estimatingPreferences.useStockParentSize)
					this.job_parent.enabled = false;
				else
					this.job_parent.enabled = true;
			}	                    
			
			
			public static function getInstance() : EditJob {
				return thisInstance;
			}	              

			public function init():void
			{
				thisInstance = this;
				this.height = parent.height - 80;
//				PopUpManager.centerPopUp(this);
				this.job_description.setFocus();
				
				pricingMethodDataService.getAll("PreferencesPricingMethod");
				dataServiceEstimatingPreferences.getAll("PreferencesEstimating");
				dataServicePreferencesDefaultPresses.getSingle("PreferencesDefaultPresses");
			    taxTableDataService.getCurrentTaxTables("TaxTable");
			    dataServiceGroup.getAll("StockGroup");
				
				if (job == null) {
					job = new Job();
					doNew();
				}

				var eventPriceMethod:JobsChangePricingMethodEvent = new JobsChangePricingMethodEvent(job_type, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPriceMethod.dispatch();
		
				var eventPricingCopier:JobsChangeCopierEvent = new JobsChangeCopierEvent(job_pricing_copier, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPricingCopier.dispatch();
				var eventCostingCopier:JobsChangeCopierEvent = new JobsChangeCopierEvent(job_costing_copier, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventCostingCopier.dispatch();
		
				var eventPricingPress:JobsChangePressEvent = new JobsChangePressEvent(job_pricing_press, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventPricingPress.dispatch();
				var eventCostingPress:JobsChangePressEvent = new JobsChangePressEvent(job_costing_press, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventCostingPress.dispatch();
		
				var eventStock:JobsChangeStockEvent = new JobsChangeStockEvent(chage_stock_button, new mx.rpc.Responder(handleUIControlEvent, handleUIControlFault));
				eventStock.dispatch(); 
				
//				if (isNaN(job.id)) {
//					this.enabled=false;
//				}
//				loadComponent = PopUpManager.createPopUp(this,CommonLoadComponent,true) as CommonLoadComponent;
				multiQtyCombo.selectedItem = null;
				multiQtyCombo.selectedIndex = -1;
			}
			
			private function handleLoadGroupResult(event:ResultEvent):void {
				stockGroups = event.result as ArrayCollection;
			}
			
			public function handleUIControlEvent(evt:ResultEvent):void {
				evt.result.control.enabled = evt.result.enabled;
			}		
			private function handleUIControlFault(ev:FaultEvent):void {  
			
			}
			
			private function loadData():void {
				throbber.play();
				if (this.job != null) {
					
				}
				pressDataService.getAll("PressDefinition");
				copierDataService.getAll("CopierDefinition");
				locationDataService.getAll("ProductionLocations");
				productDataService.getAll("ProductCode");
//				chargeDataService.getAll("Charge");
				dimensionDataService.getAll("Dimension");
				dataServiceSystemPreferences.getAll("PreferencesSystem");		
				//if (stocks.length == 0)		
				// 	dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
				dataServiceEstimatingPreferences.getAll("PreferencesEstimating");
			}
			
			private function handleJobMethodPickerSelect(evt:JobMethodSelectEvent):void {
				if (evt.pricingMethod != null  && evt.pricingMethod.title != "Mailing" && evt.pricingMethod.title != "Merchandise" && evt.pricingMethod.title != "Charges Only" && evt.pricingMethod.title != "Outside Services" && evt.pricingMethod.title != "Lines & Inches") {
					this.setPricingMethod(evt.pricingMethod as PreferencesPricingMethod);
					dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
					job.runSize = new Dimension();
					job.foldedSize = new Dimension();
					job.parentSize = new Dimension();
					job.finishSize = new Dimension();
					
				} else if (evt.pricingMethod == null) {
					Alert.show("Job Method Picker returned a null array", "Error");
				} else {
					this.setPricingMethod(evt.pricingMethod as PreferencesPricingMethod);
					this.enabled = true;
				}
//				loadComponent = PopUpManager.createPopUp(this,CommonLoadComponent,true) as CommonLoadComponent; 
			}
			
			private function handleJobMethodPickerCancel(evt:JobMethodSelectEvent):void {
				this.enabled = true;
				if(loadComponent)
					loadComponent.close();
				var mdiWindow:MDIWindow = this.parent as MDIWindow;
				mdiWindow.closeWindow();
				//PopUpManager.removePopUp(this);
			}

			private function findItem(name:String, array:ArrayCollection):int
			{
				for each (var element:Object in array)
				{
					if (name == element.name)
					{ 
						return array.getItemIndex(element);
					}
				}
				return -1;
			}
			
			private function findItemById(id:int, array:ArrayCollection):int
			{
				for each (var element:Object in array)
				{
					if (id == element.id)
					{ 
						return array.getItemIndex(element);
					}
				}
				return -1;
			}

			private function doNew():void
			{
				jobService.createJob(invoice, job_type.selectedItem as PreferencesPricingMethod);
			}
			
			private function setPreferenceDataforPaperCal():void {
				if (estimatingPreferences != null)
				{
					job.paperCal.useGripEdgeGap = estimatingPreferences.useGripEdgeGap;
					job.paperCal.gripEdgeGap = estimatingPreferences.gripEdgeGap;
					job.paperCal.gripLocation = estimatingPreferences.gripLocation;
					job.paperCal.useFolioEdge = estimatingPreferences.useFolioEdge;
					job.paperCal.folioLocation = estimatingPreferences.folioLocation;
					job.paperCal.folioEdge = estimatingPreferences.folioEdge;
					job.paperCal.useColorBar = estimatingPreferences.useColorBar;
					job.paperCal.colorBar = estimatingPreferences.colorBar;
					job.paperCal.useWhiteSpace = estimatingPreferences.useWhiteSpace;
					job.paperCal.whiteSpaceLeft = estimatingPreferences.whiteSpace;
					job.paperCal.whiteSpaceBottom= estimatingPreferences.whiteSpaceBottom;
					job.paperCal.whiteSpaceRight = estimatingPreferences.whiteSpaceRight;
					job.paperCal.whiteSpaceTop = estimatingPreferences.whiteSpaceTop;
					job.paperCal.useGutter = estimatingPreferences.useGutter;
					job.paperCal.gutter = estimatingPreferences.gutter;
					job.paperCal.gutterHorizontal = estimatingPreferences.gutterHorizontal;
					job.paperCal.useBleed = estimatingPreferences.useBleed;
					job.paperCal.bleedLeft = estimatingPreferences.bleed;
					job.paperCal.bleedBottom = estimatingPreferences.bleedBottom;
					job.paperCal.bleedRight = estimatingPreferences.bleedRight;
					job.paperCal.bleedTop = estimatingPreferences.bleedTop;
					job.paperCal.backTrimParent = estimatingPreferences.backTrimParent;
					job.paperCal.backTrimRun = estimatingPreferences.backTrimRun;
					job.paperCal.workandTumble = estimatingPreferences.workandTumble;
					job.paperCal.runToFinishGrain =  estimatingPreferences.runToFinishGrain;
					job.paperCal.printParentToFinishSection = estimatingPreferences.printParentToFinishSection;
					job.paperCal.printParentToRunSection = estimatingPreferences.printParentToRunSection;
					job.paperCal.printRunToFinishSection = estimatingPreferences.printRunToFinishSection;
					job.paperCal.attachToJobTicket=  estimatingPreferences.attachToJobTicket;
				}
				
				if (job.paperCal.gripLocation == "") {
					job.paperCal.gripLocation = Constants.PAPER_CALCULATOR_GRIPPER_TOP;
				}
				
				if (job.paperCal.folioLocation == "") {
					job.paperCal.folioLocation = Constants.PAPER_CALCULATOR_FOLIO_TOP;
				}
			}
			
			private function doDelete():void
			{
				var mdiWindow:MDIWindow = this.parent as MDIWindow;
				mdiWindow.closeWindow();
				//PopUpManager.removePopUp(this);
			}
			
			private function doProductionData():void
			{
				var productionDataWindow:ProductionData=ProductionData(PopUpManager.createPopUp(this, ProductionData, true));
				productionDataWindow.setStyle("borderAlpha", 0.9);
				productionDataWindow.setJob(this.job);	
			}
			
			private function doPrint():void {
				if (isNaN(job.id) || job.id == 0) {
					Alert.show("You must save the job before printing", "Error");
				} else {
					var reportName:String = "jobTicket.rpt";
					var urlRequest:URLRequest = new URLRequest("http://localhost:8080/Snowmass/reportservlet?jobTicket="+reportName +"&reportParameter="+job.id);
                	navigateToURL(urlRequest, "_blank");
				}
			}

			public function getInvoice():InvoiceBase
			{
				return this.invoice;
			}

			public function setInvoice(invoice:Invoice):void
			{
				this.invoice=invoice;
				this.job.parentInvoice = invoice as InvoiceBase;
			}

			private function openJobNotes():void
			{
				var jneditor:JobNotesEditor = PopUpManager.createPopUp(this, JobNotesEditor, true) as JobNotesEditor;
				jneditor.notes = job.jobNotes;
				jneditor.addEventListener(JobNotesAddedEvent.JOBNOTESADDED, onJobNotesAdded);
				PopUpManager.centerPopUp(jneditor);
			}
			
			private function onJobNotesAdded(evt:JobNotesAddedEvent):void	{
				job.jobNotes = evt.notes;
			}
			public function setJob(job2:Job):void
			{
				this.job=job2;
				loadData();
				mapFromJobData();
				this.invoice = job.parentInvoice;
				if(this.job.jobGroup==0 && this.invoice != null){
					var counter:int = 1;
					if(this.invoice.jobs!=null && this.invoice.jobs.length>0){
						for(var i:int=1;i<=1000;i++){
							var checkFlag:Boolean = false;
							for each(var jobObj:JobBase in this.invoice.jobs){
								if(jobObj.jobGroup==i){
									checkFlag = true;
									break;
								}
							}
							if(!checkFlag){
								counter = i;
								break;
							}
						}
					}
					this.job.jobGroup = counter;
				}				
			}

			private function mapToJobData():void
			{
				var localSize:Dimension;
				job.binderyWaste=parseInt(bindery_waste.text);
				job.brokered=check_brokered.selected;
				job.comment=job_comment.text;
				job.costingPress=job_costing_press.selectedItem as PressDefinition;
				job.pricingPress=job_pricing_press.selectedItem as PressDefinition;
				job.pricingCopier=job_pricing_copier.selectedItem as CopierDefinition;
				job.costingCopier=job_costing_copier.selectedItem as CopierDefinition;
				
				//if (job.productCode == null)
					job.productCode=product.selectedItem as ProductCode;
				job.pricingMethod = job_type.selectedItem as PreferencesPricingMethod;
				
				if (job_description.text != "") {
					job.description=job_description.text;
				} else {
					job.description = this.job_type.selectedLabel;
				}
				
				if (tax_table_combo != null && tax_table_combo.selectedItem != null && tax_table_combo.text != "") 
					if (tax_table_combo.selectedIndex == 0)
						job.taxTable = null
					else
						job.taxTable = tax_table_combo.selectedItem as TaxTable;
				else
					job.taxTable = null;

				job.estWaste=parseInt(est_waste.text);
				job.finished=checked_finished.selected;
				job.inSetsOf=parseInt(sets_of.text);
				job.numOn=parseInt(job_on.text);
				job.oversUnders=parseInt(job_over_under.text);
				job.qtyOrdered=parseInt(job_ordered.text);
				job.sheets=parseInt(job_sheets.text);
//				if (num_of_sig != null)
//					job.signatures=parseInt(num_of_sig.text);
				job.taxable=check_taxtable.selected;
				job.numUp=parseInt(job_up.text);
				//job.jobNotes=job_notes.text;
				job.jobTicketNotes=check_job_notes.selected;
				job.frontColors=parseInt(this.front_colors_text.text);
				//job.frontInks=this.front_inks_text.text;
				job.frontPasses=parseInt(this.front_passes_text.text);
				job.frontWashes=parseInt(this.front_washes_text.text);
				job.backColors=parseInt(this.back_colors_text.text);
				//job.backInks=this.back_inks_text;
				job.backPasses=parseInt(this.back_passes_text.text);
				job.backWashes=parseInt(this.back_washes_text.text);
				job.location=job_location.selectedItem as ProductionLocations;
				if (run_method_radiogroup.selectedValue != null) {
					job.runMethod=run_method_radiogroup.selectedValue.toString();
				}
				if (this.job_type.text == "Large Format" || job_type.text == "Roll-Fed") {
					if (job.parentSize == null)
						job.parentSize = new Dimension;
					job.parentSize.name = this.roll_width.text;
				}
				else {
					if ( job.parentSize != null) {
						//job.parentSize = job_parent.selectedItem as Dimension;
						localSize = job_parent.selectedItem as Dimension;
						if (localSize != null) {
							job.parentSize.name = localSize.name;
							job.parentSize.type = localSize.type;
							job.parentSize.height = localSize.height;
							job.parentSize.width = localSize.width;
						}
					}
				}
				
				if ( job.runSize != null && job_size.selectedItem != null) {
					//job.runSize = job_size.selectedItem as Dimension;
					localSize = job_size.selectedItem as Dimension;
					if (localSize != null) {
						job.runSize.name = localSize.name;
						job.runSize.type = localSize.type;
						job.runSize.height = localSize.height;
						job.runSize.width = localSize.width;
					}
				}
				if ( job.foldedSize != null) {
					//job.foldedSize = job_fold_size.selectedItem as Dimension;
					localSize = job_fold_size.selectedItem as Dimension;
					if (localSize != null) {
						job.foldedSize.name = localSize.name;
						job.foldedSize.type = localSize.type;
						job.foldedSize.height = localSize.height;
						job.foldedSize.width = localSize.width;
					}
				}
				if ( job.finishSize != null && job_finish_size.selectedItem != null) {
					//job.finishSize = job_finish_size.selectedItem as Dimension;
					localSize = job_finish_size.selectedItem as Dimension;
					if (localSize != null) {
						job.finishSize.name = localSize.name;
						job.finishSize.type = localSize.type;
						job.finishSize.height = localSize.height;
						job.finishSize.width = localSize.width;
					}
				}

				if (cutOff_edit != null)
					job.cutOff= parseInt(cutOff_edit.text);
				if (job_imp != null)
					job.impositionsPerRun = parseInt(job_imp.text);
				if (total_imp != null)
					job.totalImpressions = parseInt(total_imp.text);
				if (job_unitCost != null)
					job.unitCost = parseFloat(job_unitCost.text);
				if (job_totalCost != null)
					job.totalCost = parseFloat(job_totalCost.text);
				if (job_markup != null)
					job.markup = parseFloat(job_markup.text);
				job.specialOrderStock = specialOrder.selected;
				job.customerSuppliedStock = customer_suppliled_stock.selected;
				job.parentInvoice = this.invoice;
			}

			private function mapFromJobData():void
			{
				if (presses != null) {
					if (job.pricingPress != null)
						job_pricing_press.selectedIndex=findItem(job.pricingPress.name, presses);
					if (job.costingPress != null)
						job_costing_press.selectedIndex=findItem(job.costingPress.name, presses);
				}
				if (copiers != null) {
					if (job.pricingCopier != null)
						job_pricing_copier.selectedIndex=findItem(job.pricingCopier.name, copiers);
					if (job.costingCopier != null)
						job_costing_copier.selectedIndex=findItem(job.costingCopier.name, copiers);
				}
				if (locations != null) { 	
					if (job.location != null)
						job_location.selectedIndex=findItem(job.location.name, locations);
				}
				if (productCodes != null) { 	
					if (job.productCode != null)
						product.selectedIndex=findItem(job.productCode.name, productCodes);
				}
				this.copy_single_radio.selected = this.job.singleSided;
				this.copy_double_radio.selected = this.job.doubleSided;
				run_method_radiogroup.selectedValue=job.runMethod;
				if (job.foldedSize == null)
						this.job_fold_size.text = "";
			}

			private function doSave():void
			{
				mapToJobData();
				var jobEditCompleteEvent:JobEditCompleteEvent=new JobEditCompleteEvent(JobEditCompleteEvent.SAVE, this.job, this.invoiceMultiQtyJobList, this.jobIndex);
				dispatchEvent(jobEditCompleteEvent);
				var mdiWindow:MDIWindow = this.parent as MDIWindow;
				mdiWindow.closeWindow();
				//PopUpManager.removePopUp(this);
			}
			private function doSaveTemplate():void
			{
				mapToJobData();
				
				var tmpJob:Job = job;
				var template:JobTemplate = new JobTemplate();
				template.user = Snowmass.getInstance().currentUser;

				template.backColors = tmpJob.backColors
				template.backInks = tmpJob.backInks
				template.backPasses = tmpJob.backPasses
				template.backWashes = tmpJob.backWashes
				template.binderyWaste = tmpJob.binderyWaste
				template.binderyWasteOverride = tmpJob.binderyWasteOverride
				template.brokered = tmpJob.brokered
				template.charges = tmpJob.charges;
				template.children = tmpJob.children
				template.comment = tmpJob.comment
				template.costingCopier = tmpJob.costingCopier
				template.costingPress = tmpJob.costingPress
				template.costingRecord = tmpJob.costingRecord
				template.cutOff = tmpJob.cutOff
				template.description = tmpJob.description
				template.doubleSided = tmpJob.doubleSided
				template.estWaste = tmpJob.estWaste
				template.estWasteOverride = tmpJob.estWasteOverride
				template.finished = tmpJob.finished
				template.finishSize = tmpJob.finishSize
				template.foldedSize = tmpJob.foldedSize
				template.frontColors = tmpJob.frontColors
				template.frontInks = tmpJob.frontInks
				template.frontPasses = tmpJob.frontPasses
				template.frontWashes = tmpJob.frontWashes
				template.inSetsOf = tmpJob.inSetsOf
				template.inSetsOfOverride = tmpJob.inSetsOfOverride
				template.jobIndex = tmpJob.jobIndex
				template.jobNotes = tmpJob.jobNotes
				template.jobNumber = tmpJob.jobNumber
				template.jobTicketNotes = tmpJob.jobTicketNotes
				template.location = tmpJob.location
				template.numCopies = tmpJob.numCopies
				template.numCopiesOverride = tmpJob.numCopiesOverride
				template.numOn = tmpJob.numOn
				template.numUp = tmpJob.numUp
				template.oversUnders = tmpJob.oversUnders
				template.parentSize = tmpJob.parentSize
				template.press = tmpJob.press
				template.pressQty = tmpJob.pressQty
				template.pricingCopier = tmpJob.pricingCopier
				template.pricingMethod = tmpJob.pricingMethod
				template.pricingPress = tmpJob.pricingPress
				template.pricingRecord = tmpJob.pricingRecord
				template.productCode = tmpJob.productCode
				template.qtyOrdered = tmpJob.qtyOrdered
				template.runMethod = tmpJob.runMethod
				template.runSize = tmpJob.runSize
				template.salesCategory = tmpJob.salesCategory
				template.sheets = tmpJob.sheets
				template.signatures = tmpJob.signatures
				template.singleSided = tmpJob.singleSided
				template.stock = tmpJob.stock
				template.stockQty = tmpJob.stockQty
				template.taxable = tmpJob.taxable
				template.totalCopies = tmpJob.totalCopies
				template.weight = tmpJob.weight

				setJob(template);

				var jobEditCompleteEvent:JobEditCompleteEvent=new JobEditCompleteEvent(JobEditCompleteEvent.SAVE, this.job, this.invoiceMultiQtyJobList, this.jobIndex);
				dispatchEvent(jobEditCompleteEvent);
				var mdiWindow:MDIWindow = this.parent as MDIWindow;
				mdiWindow.closeWindow();
				//PopUpManager.removePopUp(this);
			}
			
			private function handleCreateJobResult(ev:ResultEvent):void 
			{
				this.job = ev.result as Job;
				job.defaultJob = true;
				setJob(job);
				setPaperCalculatorData = true;				
				this.copy_single_radio.selected = this.job.singleSided;
				doInitialStockPicker = true;
			}
			
			private function handleAssignPricingCopierResult(ev:ResultEvent):void
			{
				this.job = ev.result as Job;
				updatePrice();
			}
			
			private function handleAssignStockResult(ev:ResultEvent):void
			{
				this.job = ev.result as Job;
				updatePrice();
				
				refreshCalcAndImage();		// new cut diagram to match existing values
				if (this.estimatingPreferences.showPaperCalculator == true)
					this.doPaperCal();
			}
			
			private function handleLoadResult(ev:ResultEvent):void
			{
				//jobs = ev.result as ArrayCollection;
			}

			private function handleLoadDimensionResult(ev:ResultEvent):void
			{
				dimensionsArray=ev.result as ArrayCollection;
				if (job.parentSize != null)
					this.job_parent.selectedIndex = findItem(job.parentSize.name, dimensionsArray);
				if (job.runSize != null)
					this.job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
				if (job.foldedSize != null)
					this.job_fold_size.selectedIndex = findItem(job.foldedSize.name, dimensionsArray);
				if ( job.finishSize != null)
					this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);

			}
			
			private function handleLoadCopierResult(ev:ResultEvent):void
			{
				copiers = new ArrayCollection();
				costingCopiers = new ArrayCollection();
				var result:ArrayCollection = ev.result as ArrayCollection;
				for (var i:int = 0;i<result.length;i++) {
					var item:CopierDefinition = result.getItemAt(i) as CopierDefinition;
					copiers.addItem(item);
					costingCopiers.addItem(item);
				}
				if (!isNaN(job.id)) {
					if (job.pricingCopier != null)
						this.job_pricing_copier.selectedIndex =findItem(job.pricingCopier.name, copiers);
					if ( job.costingCopier != null)
						this.job_costing_copier.selectedIndex = findItem(job.costingCopier.name, copiers);
				}
			}
			private function handleLoadPressResult(ev:ResultEvent):void
			{
				presses = new ArrayCollection();
				costingPresses = new ArrayCollection();
				var result:ArrayCollection = ev.result as ArrayCollection;
				for (var i:int = 0;i<result.length;i++) {
					var item:PressDefinition = result.getItemAt(i) as PressDefinition;
					presses.addItem(item);
					costingPresses.addItem(item);
				}
				if (!isNaN(job.id)) {
					if ( job.pricingPress != null)
						this.job_pricing_press.selectedIndex =findItem(job.pricingPress.name, presses);
					if (job.costingPress != null)
						this.job_costing_press.selectedIndex = findItem(job.costingPress.name, presses);
				}
			}
		
			private function handleLoadPreferencesStockDefinitionResult(event:ResultEvent):void {
				preferencesStockDefinitions = event.result as ArrayCollection;
				stockDataService.getStockPicker();
			}

			private function handleLoadLocationResult(ev:ResultEvent):void
			{
				locations=ev.result as ArrayCollection;
				if (job.location != null)
					job_location.selectedIndex=findItem(job.location.name, locations); 
				
			}

			private function handleLoadProductResult(ev:ResultEvent):void
			{
				productCodes=ev.result as ArrayCollection;
				if (productCodes != null && job.productCode != null)
					product.selectedIndex=findItem(job.productCode.name, productCodes);
			}
			
			private function handleLoadVendorResult(ev:ResultEvent):void
			{
				vendors=ev.result as ArrayCollection;
			}

			private function handleDeleteResult(ev:ResultEvent):void
			{
			}

			private function handleLoadChargeResult(ev:ResultEvent):void
			{
				charges=ev.result as ArrayCollection;
			}

			private function handleStockLoadResult(ev:ResultEvent):void {
		    	stocks = ev.result as ArrayCollection;
		    	
				this.enabled=true;

				chargeCommandDataService.getChargeList();
				if (doInitialStockPicker) initialStockPicker();
				
				if(loadComponent) {
					loadComponent.close();
				}                
			}
			
			private function handleLoadChargeCommandResult(ev:ResultEvent):void
			{
				chargeCommands=ev.result as ArrayCollection;
				add_charge_button.enabled=true;
				
			}

			private function handleLoadPricingMethodResult(ev:ResultEvent):void
			{
				pricingMethods=ev.result as ArrayCollection;
				if (isNaN (job.id)) {
					var jobMethodPicker:JobMethodPicker=JobMethodPicker(PopUpManager.createPopUp(this, JobMethodPicker, true));
					jobMethodPicker.setStyle("borderAlpha", 0.9);
					jobMethodPicker.pricingMethods = this.pricingMethods;
				    jobMethodPicker.addEventListener(JobMethodSelectEvent.CANCELSELECTJOBMETHOD, handleJobMethodPickerCancel);
	 			   	jobMethodPicker.addEventListener(JobMethodSelectEvent.SELECTJOBMETHOD, handleJobMethodPickerSelect);
	 			} else {
	 				if (job.pricingMethod != null) {
						var i:int = 0;
						for (i=0; i< this.pricingMethods.length; i++) {
							var tmpPricingMethod:PreferencesPricingMethod = pricingMethods.getItemAt(i) as PreferencesPricingMethod;
							
							if (tmpPricingMethod.id == job.pricingMethod.id) {
								this.setPricingMethod(tmpPricingMethod);
								break;
							}
						}
		 			}
		 			//cej
					dataServicePreferencesStockDefinition.getAll("PreferencesStockDefinition");
	 			}
				
			}

			private function handleSaveResult(ev:ResultEvent):void
			{

			}

			private function handleSaveTaxTableResult(ev:ResultEvent):void {
				taxTableDataService.getAll("TaxTable");
			}      


			private function handleFault(ev:FaultEvent):void
			{
				var message:String;

				message="Error: " + ev.fault.faultCode + " - " + ev.fault.faultDetail + " - " + ev.fault.faultString;
				Alert.show(message, "Error", 0, null);
				
				if(loadComponent) {
					loadComponent.close();
				}               
			}



			private function validateForm(event:Event):void
			{
				focussedFormControl=event.target as DisplayObject;

				//formIsValid = true;                    

			}

			private function validate(validator:Validator):Boolean
			{
//        var validatorSource:DisplayObject = validator.source as DisplayObject;
//     	var suppressEvents:Boolean = (validatorSource != focussedFormControl);
//        var event:ValidationResultEvent = validator.validate(null, suppressEvents); 
//        var currentControlIsValid:Boolean = (event.type == ValidationResultEvent.VALID);
//		formIsValid = formIsValid && currentControlIsValid;
//         
//		return currentControlIsValid;
				return true;
			}


			private function doAddCharge():void
			{
				this.mapToJobData();
				var chargePicker:ChargePicker=ChargePicker(PopUpManager.createPopUp(this, ChargePicker, true));
				chargePicker.charges = this.charges;
				// TODO: Restore the following line - only removed to make testing easier
				// chargePicker.chargeCommands = chargeCommands;
				chargePicker.job = this.job;
				chargePicker.setStyle("borderAlpha", 0.9);
				chargePicker.addEventListener(ChargeDefinitionSelectEvent.CHARGEDEFINITIONCOMPLETE, handleChargeDefinitionComplete);
			}

			private function handleChargeDefinitionComplete(evt:ChargeDefinitionSelectEvent):void
			{
				this.job.charges=evt.chargeArray;
				this.updatePrice();
			}

			private function doDeleteCharge():void
			{
				if (invoice_charge_datagrid.selectedItem != null)
				{
					var charge:Charge=invoice_charge_datagrid.selectedItem as Charge;
					var index:int=this.job.charges.getItemIndex(charge);
					this.job.charges.removeItemAt(index);
				}
			}

			private function initialStockPicker():void {
				changeStockDefinition();
				doInitialStockPicker = false;
			}
			
			private function changeStockDefinition():void
			{
				var stockPickerWindow:StockPicker=StockPicker(PopUpManager.createPopUp(this, StockPicker, true));
				stockPickerWindow.setStyle("borderAlpha", 0.9);
			   	stockPickerWindow.setStockArray(stocks);
			   	stockPickerWindow.setStockPref(preferencesStockDefinitions);
			   	stockPickerWindow.passStockDataFromParent = false;
				stockPickerWindow.formIsEmpty=true;
				stockPickerWindow.fromJobPage = true;
				stockPickerWindow.editableJob = this.job;
				if (this.currentState == "LargeFormat")
					stockPickerWindow.setLargeFormatOnly();
				stockPickerWindow.parentWindowId = Snowmass.getInstance().containerManager.getWindowWithChild(this,true).windowID;
				stockPickerWindow.addEventListener(StockPickerSelectEvent.CANCELSELECTSTOCK, handleStockPickerCancel, false, 0, true);
				stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTSTOCK, handleStockPickerSelect, false, 0, true);
				stockPickerWindow.addEventListener(StockPickerSelectEvent.SELECTNEWSTOCK, handleStockPickerNew, false, 0, true);
				stockPickerWindow.addEventListener(StockDefinitionOpenEvent.OPEN_EVENT,function(event:StockDefinitionOpenEvent):void {
					if(event.isOpened){
						var specialObject:StockGroup = event.specialStockGroupObject as StockGroup;
						var stockDefinitionsWindow:StockDefinitions = new StockDefinitions();
						var stockDefinitionsObj:StockDefinition = new StockDefinition();
						stockDefinitionsObj.stkgroup = specialObject;
						stockDefinitionsWindow.stockDefinitions = stockDefinitionsObj;
						stockDefinitionsWindow.fromJobPage = true;
						stockDefinitionsWindow.addEventListener(SpecialOrderStockDefEvent.SPECIAL_ORDER_SAVE_EVENT,function(event:SpecialOrderStockDefEvent):void {
							job.customerSuppliedStock = false;
							job.specialOrderStock = true;
							setStockDefinitionData(event.stockDefinitionObj);
						}, false, 0, true);
						var parentWindowId:int = Snowmass.getInstance().containerManager.getWindowWithChild(EditJob.getInstance(),true).windowID;
						Snowmass.getInstance().containerManager.openNewMDIWindow(stockDefinitionsWindow.title,stockDefinitionsWindow,-1,-1,-1,-1,parentWindowId);
					}
				}, false, 0, true);
			}
			
			private function runSizeGotFocus():void {
				this.currentSizeName = this.job_size.text;
			}
			
			private function finishSizeGotFocus():void {
				this.currentSizeName = this.job_finish_size.text;
			}
			
			private function foldedSizeGotFocus():void {
				this.currentSizeName = this.job_fold_size.text;
			}

			private function handleStockPickerCancel(evt:StockPickerSelectEvent):void
			{
				if (this.job.stock == null)
				{
					this.job.stock=new StockDefinition();
					job.parentSize = new Dimension();
					job.finishSize = new Dimension();
					job.foldedSize = new Dimension();
					job.runSize = new Dimension();
					if (this.job_size != null)
						job_size.selectedIndex = -1;
					if (this.job_finish_size != null)
						job_finish_size.selectedIndex = -1;
					if (this.job_fold_size != null)
						job_fold_size.selectedIndex = -1;
					if (this.job_parent != null)
						job_parent.selectedIndex = -1;
				}
			}
			private function doCustomerSupplied():void{
				if  (customer_suppliled_stock.selected)
					specialOrder.selected = false;
								
				
			}
			private function doSpecialOrder():void{
				 if (specialOrder.selected)
				 	customer_suppliled_stock.selected = false;
			}
			private function handleStockPickerSelect(evt:StockPickerSelectEvent):void
			{
				if (loadComponent)
					loadComponent.close();
				
				setStockDefinitionData(evt.stockDefinition);

					
			}
			
			private function setStockDefinitionData(stockDefinitionObj:StockDefinition):void {
				if (stockDefinitionObj != null)
				{
					if (this.job_type.text == "Large Format" && stockDefinitionObj.stockunit == 4)
							this.currentState = "CopyMethod";
//					this.job.stock=evt.stockDefinition;
					if ((this.job_type.text == "Large Format" && stockDefinitionObj.stockunit != 4) || job_type.text == "Roll-Fed") {
						var cutoff:Number;
						if (estimatingPreferences != null)
							cutoff = estimatingPreferences.defaultPressCuttOff;
						else
							cutoff = 0;
						this.job.rollWidth = stockDefinitionObj.parentsize.width;
						this.roll_width.text = job.rollWidth.toString();
						this.job.cutOff = cutoff;
						this.cutOff_edit.text = cutoff.toString();
						if (job.finishSize == null)
							job.finishSize = new Dimension();
						this.job.finishSize.name = stockDefinitionObj.parentsize.name + " x " + cutoff.toString();
						this.job.finishSize.type = stockDefinitionObj.parentsize.type;
						this.job.finishSize.width = stockDefinitionObj.parentsize.width;
						this.job.finishSize.height = cutoff;
						this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
						if (this.job_finish_size.selectedIndex == -1)
							this.job_finish_size.text = job.finishSize.name;
					//	this.job.foldedSize.name = "";
						
						this.job.foldedSize = new Dimension();
						job_fold_size.text = "";
						job_fold_size.selectedItem = null;
					//	if (this.estimatingPreferences.leaveFoldedSizeEmpty != true) {
					//		this.job.foldedSize.name = this.job.finishSize.name;
					//		this.job.foldedSize.type = this.job.finishSize.type;
					//		this.job.foldedSize.width = this.job.finishSize.width;
					//		this.job.foldedSize.height = this.job.finishSize.height;
					//		this.job_fold_size.selectedIndex = findItem(job.foldedSize.name, dimensionsArray);
					//	}
						if (this.job_type.text == "Large Format" && stockDefinitionObj.defaultLargeCopier != null) {
							job.pricingCopier = stockDefinitionObj.defaultLargeCopier;
							job_pricing_copier.selectedIndex=findItem(job.pricingCopier.name, copiers);
							job.costingCopier = stockDefinitionObj.defaultLargeCopier;
							job_costing_copier.selectedIndex=findItem(job.costingCopier.name, copiers);
						}
					}
					else if (this.job_type.text == "Printing" || this.job_type.text == "B&W" || this.job_type.text == "Color" || this.job_type.text == "Blank" || this.job_type.text == "List" || (this.job_type.text == "Large Format" && stockDefinitionObj.stockunit == 4)) {
						this.job.parentSize.name = stockDefinitionObj.parentsize.name;
						this.job.parentSize.type = stockDefinitionObj.parentsize.type;
						this.job.parentSize.height = stockDefinitionObj.parentsize.height;
						this.job.parentSize.width = stockDefinitionObj.parentsize.width;

						this.job_parent.selectedIndex = findItem(job.parentSize.name, dimensionsArray);
						if (stockDefinitionObj.normalRunSize == null || stockDefinitionObj.normalRunSize.name == "") {
							this.job.runSize.name = stockDefinitionObj.parentsize.name;
							this.job.runSize.type = stockDefinitionObj.parentsize.type;
							this.job.runSize.height = stockDefinitionObj.parentsize.height;
							this.job.runSize.width = stockDefinitionObj.parentsize.width;
						} else {
							this.job.runSize.name = stockDefinitionObj.normalRunSize.name;
							this.job.runSize.type = stockDefinitionObj.normalRunSize.type;
							this.job.runSize.height = stockDefinitionObj.normalRunSize.height;
							this.job.runSize.width = stockDefinitionObj.normalRunSize.width;
						}
						this.job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
						
						this.job.foldedSize = new Dimension();
						this.job.finishSize = new Dimension();
						job_fold_size.text = "";
						job_finish_size.text = "";
						
						job_fold_size.selectedItem = null;
						job_finish_size.selectedItem = null;
					/*
						if (this.job.runSize.width * this.job.runSize.height < this.job.parentSize.width * this.job.parentSize.height) {
							this.job.finishSize.name = this.job.runSize.name;
							this.job.finishSize.type = this.job.runSize.type;
							this.job.finishSize.height = this.job.runSize.height;
							this.job.finishSize.width = this.job.runSize.width;
						} else {
							this.job.finishSize.name = stockDefinitionObj.parentsize.name;
							this.job.finishSize.type = stockDefinitionObj.parentsize.type;
							this.job.finishSize.height = stockDefinitionObj.parentsize.height;
							this.job.finishSize.width = stockDefinitionObj.parentsize.width;
						}
						this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
						if (this.estimatingPreferences.leaveFoldedSizeEmpty != true) {
							this.job.foldedSize.name = this.job.finishSize.name;
							this.job.foldedSize.type = this.job.finishSize.type;
							this.job.foldedSize.height = this.job.finishSize.height;
							this.job.foldedSize.width = this.job.finishSize.width;
						}
						this.job_fold_size.selectedIndex = findItem(job.foldedSize.name, dimensionsArray);
						*/
						
						if (this.job_type.text == "B&W" && stockDefinitionObj.defaultBWCopier != null) {
							job.pricingCopier = stockDefinitionObj.defaultBWCopier;
							job_pricing_copier.selectedIndex=findItem(job.pricingCopier.name, copiers);
							job.costingCopier = stockDefinitionObj.defaultBWCopier;
							job_costing_copier.selectedIndex=findItem(job.costingCopier.name, copiers);
							job.copyMinutes = job.pricingCopier.copyMinutes;
						}
						if (this.job_type.text == "Color" && stockDefinitionObj.defaultColorCopier != null) {
							job.pricingCopier = stockDefinitionObj.defaultColorCopier;
							job_pricing_copier.selectedIndex=findItem(job.pricingCopier.name, copiers);
							job.costingCopier = stockDefinitionObj.defaultColorCopier;
							job_costing_copier.selectedIndex=findItem(job.costingCopier.name, copiers);
							job.copyMinutes = job.pricingCopier.copyMinutes;
						}
						job.inSetsOf = stockDefinitionObj.sheetsPerSet;
					}
					else {
						this.job.parentSize.name = stockDefinitionObj.normalRunSize.name;
						this.job.parentSize.type = stockDefinitionObj.normalRunSize.type;
						this.job.parentSize.height = stockDefinitionObj.normalRunSize.height;
						this.job.parentSize.width = stockDefinitionObj.normalRunSize.width;
						this.job_parent.selectedIndex = findItem(job.parentSize.name, dimensionsArray);
						
						this.job.runSize.name = stockDefinitionObj.normalRunSize.name;
						this.job.runSize.type = stockDefinitionObj.normalRunSize.type;
						this.job.runSize.height = stockDefinitionObj.normalRunSize.height;
						this.job.runSize.width = stockDefinitionObj.normalRunSize.width;
						this.job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
						
						this.job.finishSize.name = stockDefinitionObj.normalRunSize.name;
						this.job.finishSize.type = stockDefinitionObj.normalRunSize.type;
						this.job.finishSize.height = stockDefinitionObj.normalRunSize.height;
						this.job.finishSize.width = stockDefinitionObj.normalRunSize.width;
						this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
					}
					
					dimensionChangePropagate();
					job.costUnits = stockDefinitionObj.costunits;
					this.mapToJobData();
					jobService.assignStockToJob(this.job, stockDefinitionObj);
//					var i:int;
//					if (this.job.charges == null) this.job.charges = new ArrayCollection();
//					for(i = 0; i < this.job.stock.charges.length; i++) {
////						this.job.charges.addItem(this.job.stock.charges.getItemAt(i));
//						
//					}
//					updatePrice();
				}
				else
				{
					this.job.stock=new StockDefinition();
					Alert.show("Stock Picker returned a null stock", "Error");
				}
			}

			private function handleStockPickerNew(evt:StockPickerSelectEvent):void
			{
				/* TODO */
				this.job.stock=new StockDefinition();
			}
			
			private function handleFocusOutEvent(evt:FocusEvent):void
			{
				if (evt.target == job_parent) {
					job.parentSize.name = job_parent.text;
				} else if (evt.target == job_size) {
					job.runSize.name = job_size.text;
				} else if (evt.target == job_finish_size) {
					job.finishSize.name = job_finish_size.text;
				} else if (evt.target == job_fold_size) {
					job.foldedSize.name = job_fold_size.text;
				}
				super.focusOutHandler(evt);
			}
			
			private function changePricingCopier():void
			{
				var pricingMethod:PreferencesPricingMethod = job_type.selectedItem as PreferencesPricingMethod;
				var copierDefinition:CopierDefinition = job_pricing_copier.selectedItem as CopierDefinition;
				jobService.assignPricingCopierToJob(this.job, copierDefinition);
				this.checkCopierSize();
				var copier:CopierDefinition = this.job_pricing_copier.selectedItem as CopierDefinition;
				var currentCostingCopier:CopierDefinition = this.job_costing_copier.selectedItem as CopierDefinition;
				if (costingCopierIsUsePress)
					currentCostingCopier.costingCopy = false;
				costingCopiers = new ArrayCollection();
				for (var i:int = 0;i<copiers.length;i++) {
					var item:CopierDefinition = copiers.getItemAt(i) as CopierDefinition;
					costingCopiers.addItem(item);
				}
				if (pricingMethod.title == "B&W")
					costingCopiers.filterFunction = filterBWCostingCopiers;
				else if (pricingMethod.title == "Color")
					costingCopiers.filterFunction = filterColorCostingCopiers;
				else costingCopiers.filterFunction = filterLFCostingCopiers;
				costingCopiers.refresh();
				
				this.job_costing_copier.selectedIndex = findItemById(copier.id,costingCopiers);
				if (this.job_costing_copier.selectedIndex == -1) {
					copier.costingCopy = true;
					this.job_costing_copier.selectedIndex = findItemById(copier.id,costingCopiers);
					job.copyMinutes = copier.copyMinutes;
				}
				this.updatePrice();			
			}
			
			private function changePricingPress():void {
				var press:PressDefinition = this.job_pricing_press.selectedItem as PressDefinition;
				this.job_costing_press.selectedIndex = findItemById(press.id,costingPresses);
				if (this.job_costing_press.selectedIndex == -1) {
					press.costingPress = true;
					this.job_costing_press.selectedIndex = findItemById(press.id,costingPresses);
				}
			}
			
			private function updatePrice():void
			{
				mapToJobData();
				var priceJobEvent:PriceJobEvent = new PriceJobEvent(this.job, new mx.rpc.Responder(handlePriceJobComplete, handlePriceJobFault));
				priceJobEvent.dispatch();
				refresh_price_btn.visible = false;
				refresh_price_btn.enabled = false;
				pricing_throbber.visible = true;
				pricing_throbber.play();
			}
			
			private function handlePriceJobComplete(ev:ResultEvent):void
			{
				pricing_throbber.stop();
				pricing_throbber.visible = false;
				var localJob:Job = ev.result as Job;
				refresh_price_btn.visible = true;
				refresh_price_btn.enabled = true;		
				charges = localJob.charges;
				this.invoice_charge_datagrid.invalidateList();
				if (job != null) { 
					job.pricingRecord.totalPrice = localJob.pricingRecord.totalPrice;
					job.pricingRecord.bindPrice = localJob.pricingRecord.bindPrice;
					job.pricingRecord.otherChargePrice = localJob.pricingRecord.otherChargePrice;
					job.pricingRecord.prepPrice = localJob.pricingRecord.prepPrice;
					job.pricingRecord = localJob.pricingRecord;
					job.impressionsPerRun = localJob.impressionsPerRun;
					job.totalImpositions = localJob.totalImpositions;
					job.totalImpressions = localJob.totalImpressions;
					job.estWaste = localJob.estWaste;
					job.binderyWaste = localJob.binderyWaste;
					job.totalCost = localJob.totalCost;
					job.totalCopies = localJob.totalCopies;
					job.numCopies = localJob.numCopies;
					job.signatures = localJob.signatures;
					job.pressQty = localJob.pressQty;
					job.numUp = localJob.numUp;
					job.numOn = localJob.numOn;
					job.qtyOrdered = localJob.qtyOrdered;
					job.numCopiesOverride = localJob.numCopiesOverride;
					job.parentStockCost = localJob.parentStockCost;
					job.copyMinutes = localJob.copyMinutes;
					job.runTime = localJob.runTime;
					if (job.pricingRecord != null) {
						overs_total_price.text = Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.oversTotalPrice.toString());
						job_price.text = Snowmass.getCurrencyFormatter(false,2).format((job.pricingRecord.totalPrice));
					}
				}
			}
			
			private function handlePriceJobFault(ev:FaultEvent):void
			{
				pricing_throbber.stop();
				pricing_throbber.visible = false;
				if (ev != null && ev.fault != null && ev.fault.faultString != null) {				
					Alert.show(ev.fault.faultString, "Error in Pricing", 0, null);
				} else {
					Alert.show("Unknown error when pricing job", "Error in Pricing", 0, null);
				}
			}
			
			
			private function handleCalculateCuts(ev:ResultEvent):void
			{
				if (ev.result != null) {
					var results:ArrayCollection = ev.result as ArrayCollection;
					var intValue:Number;

					intValue = results.getItemAt(0) as Number;
					this.job.paperCal.cutstoRun = intValue;
					intValue = results.getItemAt(1) as Number;
					this.job.paperCal.cutstoFinish = intValue;
				}
			}
			
			private function handleCalcOutResult(ev:ResultEvent):void
			{
				if (ev.result != null) {
					var results:ArrayCollection = ev.result as ArrayCollection;
					var intValue:Number;
					
	// maintain same order in PaperCalcualtorService.java
	/*
		results.add(out);
		results.add(runCuts);
		results.add(finishCuts);
		
		results.add(job.getPaperCal().getDAcross());
		results.add(job.getPaperCal().getDDown());
		results.add(job.getPaperCal().getAcross());
		results.add(job.getPaperCal().getDown());
		results.add(job.getPaperCal().getDutchBottom());
		results.add(job.getPaperCal().getUsedSqrArea());
		results.add(job.getPaperCal().getParentSqrArea());
		results.add(job.getPaperCal().getRMargin());
		results.add(job.getPaperCal().getBMargin());
		results.add(job.getPaperCal().getSwap());
		results.add(runOut);
		results.add(finishOut);
	*/
					
					// paper image numbers
					
			//		this.job.paperCal.sheetsOut = intValue;
			//		this.job.paperCal.runout = intValue;
	
					if (job.orRunOut == 0)						// run out was not over-ridden in job production window
					{
						intValue = results.getItemAt(13) as Number;		// runOut
						job.paperCal.runout = intValue;
					}
					
					intValue = results.getItemAt(14) as Number;		// finishOut
			    	job.paperCal.finishOut = intValue;
					if (job.orUp == 0)
						job.numUp = intValue;
					
					//job.paperCal.runout = job.numUp;		// TEMP
					job.paperCal.sheetsOut = job.numUp;
					
					// cut counts, the override logic is handled in JAVA
					intValue = results.getItemAt(1) as Number;
					job.paperCal.cutstoRun = intValue;
					intValue = results.getItemAt(2) as Number;
					job.paperCal.cutstoFinish = intValue;
					
					intValue = results.getItemAt(3) as Number;
					job.paperCal.dAcross = intValue;
					intValue = results.getItemAt(4) as Number;
					job.paperCal.dDown = intValue;
					intValue = results.getItemAt(5) as Number;
					job.paperCal.across = intValue;
					intValue = results.getItemAt(6) as Number;
					job.paperCal.down = intValue;
					intValue = results.getItemAt(7) as Number;
					job.paperCal.dutchBottom = intValue;
					
					// floating point numbers
					job.paperCal.usedSqrArea = results.getItemAt(8) as Number;
					job.paperCal.parentSqrArea = results.getItemAt(9) as Number;
					job.paperCal.rMargin = results.getItemAt(10) as Number;
					job.paperCal.bMargin = results.getItemAt(11) as Number;
					
					// does the image render with swapped sheet values
					job.paperCal.swap = results.getItemAt(12) as Boolean;
										
					// the values are back, now request the image to be generated
					//
					paperCalculatorService.GeneratePaperCalculatorImage(job, job.paperCal.whichStartSize, cutDiagram.width-15, cutDiagram.height-15);
					this.updatePrice();
				}
			}

			private function handleGenerateImage(evt:ResultEvent):void {
				var imageByteArray:ByteArray = evt.result as ByteArray;
				
				var loader:Loader = new Loader();
				loader.loadBytes(imageByteArray);				 
				loader.contentLoaderInfo.addEventListener(Event.COMPLETE,loaderCompleteHandler);
			}
			
			private function loaderCompleteHandler(evt:Event):void {
				var loader:LoaderInfo = evt.target as LoaderInfo;
				var bmp:Bitmap = Bitmap(loader.content);
				
				var myImage:Image = new Image();
				myImage.source = bmp;
				this.cutDiagram.removeAllChildren();
				this.cutDiagram.addChild(myImage);
			}			

			private function checkCopierSize():void {
				if (this.currentState != "LargeFormat") {
					var copier:CopierDefinition = this.job_pricing_copier.selectedItem as CopierDefinition;
					var minSize:Dimension = new Dimension();
					minSize.name = copier.minSize;
					var maxSize:Dimension = new Dimension();
					maxSize.name = copier.maxSize;
					var minSizeWidth:Number = Snowmass.getWidthFromSizeString(minSize);
					var minSizeLength:Number = Snowmass.getLengthFromSizeString(minSize);
					var maxSizeWidth:Number = Snowmass.getWidthFromSizeString(maxSize);
					var maxSizeLength:Number = Snowmass.getLengthFromSizeString(maxSize);
					var runSize:Dimension = job.runSize;
					var message:String = "";
					if (runSize != null) {
						if (minSize.name != "" && (runSize.width * runSize.height) < (minSizeWidth * minSizeLength)) {
							 callLater(runSizeSmallerThanMinSize);
						}
						if (maxSize.name != "" && (runSize.width * runSize.height) > (maxSizeWidth * maxSizeLength)) {
							 callLater(runSizeBiggerThanMaxSize);
						}
					}
				}
			}
			
			private function runSizeBiggerThanMaxSize():void {
				var message:String = resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"msg_WarningRunSizeexceed");
				Alert.show(message, "Warning", 0, null, null, null, 4);
			}
			
			private function runSizeSmallerThanMinSize():void {
				var message:String = resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"msg_WarningRunSizeisless");
				Alert.show(message, "Warning", 0, null, null, null, 4);
			}
			
			private function runSizeToBig():void {
				var message:String = resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"msg_WarningTheRunSizeisl");
				Alert.show(message, "Warning", 0, null, null, null, 4);
			}
			
			private function finishSizeToBig():void {
				var message:String = resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"msg_WarningTheFinishSize");
				Alert.show(message, "Warning", 0, null, null, null, 4);
			}

			private function dimensionChangePropagate():void
			{	
				if (job == null) return;
				
				// keep in sync
				if ((job.runSize != null && job.parentSize != null) && (job.runSize.width == 0 || job.runSize.height == 0 || job.runSize.width > job.parentSize.width || job.runSize.height > job.parentSize.height)) {
					job.runSize.name = job.parentSize.name;
					job.runSize.type = job.parentSize.type;
					job.runSize.height = job.parentSize.height;
					job.runSize.width = job.parentSize.width;
					job_size.text = job.runSize.name;
					job_size.selectedIndex = job_parent.selectedIndex;
					if (this.currentState != "LargeFormat")
						callLater(runSizeToBig);
				}
	
				if (this.currentState != "LargeFormat") {
					if ((job.finishSize != null && job.runSize != null) && (job.finishSize.width == 0 || job.finishSize.height == 0 || job.finishSize.width > job.runSize.width || job.finishSize.height > job.runSize.height)) {
						var warn:Boolean = true;
						if (job.finishSize.width == 0 || job.finishSize.height == 0 || this.dimensionJobTarget == this.job_size)
							warn = false;
						job.finishSize.name = job.runSize.name;
						job.finishSize.type = job.runSize.type;
						job.finishSize.height = job.runSize.height;
						job.finishSize.width = job.runSize.width;
						job_finish_size.text = job.finishSize.name;
						job_finish_size.selectedIndex = job_size.selectedIndex;
						if (warn == true) {
							callLater(finishSizeToBig);
						}
					}
				}
				
				if (this.estimatingPreferences.leaveFoldedSizeEmpty != true) {
					if ((job.foldedSize != null && job.finishSize != null) && (job.foldedSize.width == 0 || job.foldedSize.height == 0 || job.foldedSize.width > job.finishSize.width || job.foldedSize.height > job.finishSize.height)) {
						job.foldedSize.name = job.finishSize.name;
						job.foldedSize.type = job.finishSize.type;
						job.foldedSize.width = job.finishSize.width;
						job.foldedSize.height = job.finishSize.height;
						job_fold_size.selectedIndex = findItem(job.foldedSize.name, dimensionsArray);
					} 
				}
			}
			
			private function dimensionChange(target:Object):void
			{	
				dimensionJobTarget = target;
				
				switch(dimensionJobTarget) {
				case job_parent:
					if (job.parentSize.height == 0 || job.parentSize.width == 0) {
						dataService.getDimensionByWildcardName(job_parent.text);
					} else {
						job_parent.text = job.parentSize.name;
						dimensionChangePropagate();
						refreshCalcAndImage();
					}
					break;
				case job_size:
					if (job.runSize.height == 0 || job.runSize.width == 0) {
						if (job_size.text.length == 0) {		// user emptys the size field
							this.job.runSize = new Dimension();
							job_size.selectedItem = null;
							dimensionChangePropagate();
							refreshCalcAndImage();
							if (this.currentState == "CopyMethod")
								this.checkCopierSize();
						} else {
							dataService.getDimensionByWildcardName(job_size.text);
						}
					} else {
						job_size.text = job.runSize.name;
						dimensionChangePropagate();
						refreshCalcAndImage();
					}
					break;
				case job_finish_size:
					if (job.finishSize.height == 0 || job.finishSize.width == 0) {
						if (job_finish_size.text.length == 0) {		// user emptys the size field
							this.job.finishSize = new Dimension();
							job_finish_size.selectedItem = null;
							dimensionChangePropagate();
							refreshCalcAndImage();
						} else {
							dataService.getDimensionByWildcardName(job_finish_size.text);
						}
					} else {
						job_finish_size.text = job.finishSize.name;
						dimensionChangePropagate();
						refreshCalcAndImage();
					}
					break;
				}
			}
	
			private function handleLoadJobResult(ev:ResultEvent):void
			{
				var localJob = ev.result as Job;
				if (localJob != null) {
					this.job = localJob;
				}
			}
			
			private function handleDimesionByNameResult(ev:ResultEvent):void
			{
				var matchingDimensions:ArrayCollection=new ArrayCollection();

				matchingDimensions = ev.result as ArrayCollection;
				if (matchingDimensions.length > 0) {
					var dim:Dimension = matchingDimensions.getItemAt(0) as Dimension;
					
					if (dim != null) {
						switch(dimensionJobTarget) {
						case job_parent:
							job.parentSize.height = dim.height;
							job.parentSize.width = dim.width;
							job.parentSize.name = dim.name;
							job.parentSize.type = dim.type;
							job_parent.text = dim.name;
							job_parent.selectedIndex = findItem(dim.name, dimensionsArray);
							break;
						case job_size:
							job.runSize.height = dim.height;
							job.runSize.width = dim.width;
							job.runSize.name = dim.name;
							job.runSize.type = dim.type;
							job_size.text = dim.name;
							job_size.selectedIndex = findItem(dim.name, dimensionsArray);
							break;
						case job_finish_size:
							job.finishSize.height = dim.height;
							job.finishSize.width = dim.width;
							job.finishSize.name = dim.name;
							job.finishSize.type = dim.type;
							job_finish_size.text = dim.name;
							job_finish_size.selectedIndex = findItem(dim.name, dimensionsArray);
							break;
						}
					}
				}
				
				dimensionChangePropagate();
				refreshCalcAndImage();
			}
					
			private function refreshCalcAndImage():void
			{				
				mapToJobData();

				paperCalculatorService.CalcOut(job, job.paperCal.whichStartSize);
			}

			private function refreshImageAndWeight():void
			{
				refreshCalcAndImage();
				updateWeight();
			}
			
			private function editNumCopies(e:Event) {
				if (this.num_copies.text == "") {
	    			job.numCopiesOverride = false;
	    			job.numCopies = 0;
	    		} else {
	    			job.numCopiesOverride = true;
	    			job.numCopies = parseInt(num_copies.text);
	    		}
			}


			private function fieldChanged(evt:FocusEvent):void
			{	
				var doUpdatePrice:Boolean = false;
				var localSize:Dimension;
				var message:String;       
				
				mapToJobData();
				switch (evt.currentTarget) {
				case this.job_ordered:
					doUpdatePrice = true;
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					updateWeight();
					break;
				case this.job_over_under:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.sets_of:
					if (job.inSetsOf == 0 || isNaN(job.inSetsOf))
						job.inSetsOf = 1;
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					updateWeight();
					break;
				case this.job_sheets:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					updateWeight();
					break;
				case this.job_up:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.job_on:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.job_press:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.bindery_waste:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.est_waste:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.front_colors_text:
					this.front_passes_text.text = this.front_colors_text.text;
					doUpdatePrice = true;
					break;
				case this.back_colors_text:
					this.back_passes_text.text = this.back_colors_text.text;
					doUpdatePrice = true;
					break;	
				case this.job_unitCost:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.job_markup:
					doUpdatePrice = true;
					break;
				case this.job_number_of_inches:
					doUpdatePrice = true;
					break;
				case this.job_number_of_lines:
					break;
				case this.num_copies:
					job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
					doUpdatePrice = true;
					break;
				case this.job_parent:
					doUpdatePrice = true;
					var parentStr:String = Snowmass.formatSizeString(this.job_parent.text);
					this.job_parent.selectedIndex = findItem(parentStr, dimensionsArray);
					if (this.job_parent.selectedIndex == -1) {
					//	this.job_parent.text = parentStr;
						if (job.parentSize == null)
							job.parentSize = new Dimension()
						job.parentSize.name = parentStr;
						job.parentSize.width = Snowmass.getWidthFromSizeString(job.parentSize);
						job.parentSize.height = Snowmass.getLengthFromSizeString(job.parentSize);
					}
					else {
						localSize = job_parent.selectedItem as Dimension;
						job.parentSize.name = localSize.name;
						job.parentSize.type = localSize.type;
						job.parentSize.height = localSize.height;
						job.parentSize.width = localSize.width;
					}
					dimensionChange(job_parent);
					break;
				case this.job_finish_size:
					//var oldDimension:Dimension = this.job_finish_size.selectedItem as Dimension;
					var finishSizeStr:String = Snowmass.formatSizeString(this.job_finish_size.text);
					this.job_finish_size.selectedIndex = findItem(finishSizeStr, dimensionsArray);
					if (this.job_finish_size.selectedIndex == -1) {
					//	this.job_finish_size.text = finishSizeStr;
						if (job.finishSize == null)
							job.finishSize = new Dimension();
						job.finishSize.name = finishSizeStr;
						job.finishSize.width = Snowmass.getWidthFromSizeString(job.finishSize);
						job.finishSize.height = Snowmass.getLengthFromSizeString(job.finishSize);
					}
					else if (job_finish_size.selectedItem != null) {
						//job.finishSize = job_finish_size.selectedItem as Dimension;
						localSize = job_finish_size.selectedItem as Dimension;
						job.finishSize.name = localSize.name;
						job.finishSize.type = localSize.type;
						job.finishSize.height = localSize.height;
						job.finishSize.width = localSize.width;

						/*if (job.finishSize.width * job.finishSize.height > job.runSize.width * job.runSize.height) {
							//job.finishSize = oldDimension;
							//job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
							message = resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"msg_WarningTheFinishSize");
							Alert.show(message, "Warning", 0, null, null, null, 4); 
							
						}*/
					}
					if (this.currentSizeName != job.finishSize.name) {
						doUpdatePrice = true;
						dimensionChange(job_finish_size);
					}
					break;
				case this.job_fold_size:
					var foldSizeStr:String = Snowmass.formatSizeString(this.job_fold_size.text);
					this.job_fold_size.selectedIndex = findItem(foldSizeStr, dimensionsArray);
					if (this.job_fold_size.selectedIndex == -1) {
					//	this.job_fold_size.text = foldSizeStr;
						if (job.foldedSize == null)
							job.foldedSize = new Dimension();
						job.foldedSize.name = foldSizeStr;
						job.foldedSize.width = Snowmass.getWidthFromSizeString(job.foldedSize);
						job.foldedSize.height = Snowmass.getLengthFromSizeString(job.foldedSize);
					} else {
						//job.foldedSize = job_fold_size.selectedItem as Dimension;
						localSize = job_fold_size.selectedItem as Dimension;
						job.foldedSize.name = localSize.name;
						job.foldedSize.type = localSize.type;
						job.foldedSize.height = localSize.height;
						job.foldedSize.width = localSize.width;
					}
					if (this.currentSizeName != job.foldedSize.name) {
						doUpdatePrice = true;
						dimensionChange(job_finish_size);
					}
					break;
				case this.job_size:
					//var oldDimension:Dimension = this.job_size.selectedItem as Dimension;
					var sizeStr:String = Snowmass.formatSizeString(this.job_size.text);
					this.job_size.selectedIndex = findItem(sizeStr, dimensionsArray);
					if (this.job_size.selectedIndex == -1) {
					//	this.job_size.text = sizeStr;
						if (job.runSize == null)
							job.runSize = new Dimension() as Dimension;
						job.runSize.name = sizeStr;
						job.runSize.width = Snowmass.getWidthFromSizeString(job.runSize);
						job.runSize.height = Snowmass.getLengthFromSizeString(job.runSize);
					}
					else if (job_size.selectedItem != null) {
						//job.runSize = job_size.selectedItem as Dimension;
						localSize = job_size.selectedItem as Dimension;
						job.runSize.name = localSize.name;
						job.runSize.type = localSize.type;
						job.runSize.height = localSize.height;
						job.runSize.width = localSize.width;

						/*if (job.runSize.width * job.runSize.height > job.parentSize.width * job.parentSize.height) {
							//job.runSize = oldDimension;
							//job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
							message = resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"msg_WarningTheRunSizeisl");
							Alert.show(message, "Warning", 0, null, null, null, 4); 
						}*/
					}
					if (this.currentSizeName != job.runSize.name) {
						doUpdatePrice = true;
						dimensionChange(job_finish_size);
					}
					break;
				}
				if (doUpdatePrice) updatePrice();
			}
			
			public function changeJobSides(evt:Event):void {
				if (this.copy_single_radio.selected == true) {
					this.job.singleSided = true;
					this.job.doubleSided = false;
				} else {
					this.job.singleSided = false;
					this.job.doubleSided = true;
				}
				job.pressQty = job.qtyOrdered*job.inSetsOf/job.numUp;
				updatePrice();
			}
			
			public function updatePricingMethod():void {
				// TODO: The pricing method needs to be based on the ESTIMATOR used NOT the title - each estimator may have multiple titles...
				var pricingMethod:PreferencesPricingMethod = job_type.selectedItem as PreferencesPricingMethod;
				
				if (pricingMethod.title == "Printing") {
					this.currentState = "PrintMethod";
					estimator_viewstack.selectedChild = printing_estimator_canvas;
					costingPresses.filterFunction = filterCostingPresses;
					costingPresses.refresh();
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultSheetFedPress != null) {
						this.job_pricing_press.selectedIndex = findItemById(preferencesDefaultPresses.defaultSheetFedPress.id, presses);
						this.job_costing_press.selectedIndex = findItemById(preferencesDefaultPresses.defaultSheetFedPress.id, costingPresses);
						if (this.job_costing_press.selectedIndex == -1) {
							var press:PressDefinition = this.job_pricing_press.selectedItem as PressDefinition;
							press.costingPress = true;
							this.job_costing_press.selectedIndex = findItemById(press.id, costingPresses);
						}
					}
				} else if (pricingMethod.title == "Roll-Fed") {
					this.currentState = "LargeFormat";
					estimator_viewstack.selectedChild = printing_estimator_canvas;
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultRollFedPress != null) {
						if (preferencesDefaultPresses.defaultRollFedPress != null) {
							this.job_pricing_press.selectedIndex = findItemById(preferencesDefaultPresses.defaultRollFedPress.id, presses);
							this.job_costing_press.selectedIndex = findItemById(preferencesDefaultPresses.defaultRollFedPress.id, presses);
						}
					}
				} else if (pricingMethod.title == "B&W") {
					this.currentState = "CopyMethod";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
					copiers.filterFunction = filterBWCopiers;
					copiers.refresh();
					costingCopiers.filterFunction = filterBWCostingCopiers;
					costingCopiers.refresh();
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultBWCopier != null) {
						this.job_pricing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultBWCopier.id, copiers);	
						this.job_costing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultBWCopier.id, costingCopiers);
						if (this.job_costing_copier.selectedIndex == -1) {
							var copier:CopierDefinition = this.job_pricing_copier.selectedItem as CopierDefinition;
							copier.costingCopy = true;
							costingCopierIsUsePress = true;
							this.job_costing_copier.selectedIndex = findItemById(copier.id, costingCopiers);
						}
					}			
				} else if (pricingMethod.title == "Color") {
					this.currentState = "CopyMethod";
					estimator_viewstack.selectedChild = copy_estimator_canvas;	
					copiers.filterFunction = filterColorCopiers;
					copiers.refresh();			
					costingCopiers.filterFunction = filterColorCostingCopiers;
					costingCopiers.refresh();
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultColorCopier != null) {
						this.job_pricing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultColorCopier.id, copiers);	
						this.job_costing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultColorCopier.id, costingCopiers);
						if (this.job_costing_copier.selectedIndex == -1) {
							var copier:CopierDefinition = this.job_pricing_copier.selectedItem as CopierDefinition;
							copier.costingCopy = true;
							costingCopierIsUsePress = true;
							this.job_costing_copier.selectedIndex = findItemById(copier.id, costingCopiers);
						}
					}	
				} else if (pricingMethod.title == "Large Format") {
					this.currentState = "LargeFormat";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
					copiers.filterFunction = filterLFCopiers;
					copiers.refresh();	
					costingCopiers.filterFunction = filterLFCostingCopiers;
					costingCopiers.refresh();
					if (preferencesDefaultPresses != null && preferencesDefaultPresses.defaultLargeFormat != null) {
						this.job_pricing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultLargeFormat.id, copiers);
						this.job_costing_copier.selectedIndex = findItemById(preferencesDefaultPresses.defaultLargeFormat.id, costingCopiers);
						if (this.job_costing_copier.selectedIndex == -1) {
							var copier:CopierDefinition = this.job_pricing_copier.selectedItem as CopierDefinition;
							copier.costingCopy = true;
							costingCopierIsUsePress
							this.job_costing_copier.selectedIndex = findItemById(copier.id, costingCopiers);
						}
					}				
				} else if (pricingMethod.title == "Charges Only") {
					this.currentState = "ChargesOnly";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Outside Services") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Merchandise") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Lines & Inches") {
					this.currentState = "LinesAndInches";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Mailing") {
					this.currentState = "Mailing";
					estimator_viewstack.selectedChild = copy_estimator_canvas;
				} else if (pricingMethod.title == "Blank") {
					this.currentState = "Blank";
				}
			}
			
			public function filterBWCopiers(item:CopierDefinition):Boolean {
				return item.blackwhite == true;
			}
			
			public function filterColorCopiers(item:CopierDefinition):Boolean {
				return item.color == true;
			}
			
			public function filterLFCopiers(item:CopierDefinition):Boolean {
				return item.largeFormat == true;
			}
			
			public function filterColorCostingCopiers(item:CopierDefinition):Boolean {
				return item.color == true && item.costingCopy == true;
			}
			
			public function filterBWCostingCopiers(item:CopierDefinition):Boolean {
				return item.blackwhite == true && item.costingCopy == true;
			}
			
			public function filterLFCostingCopiers(item:CopierDefinition):Boolean {
				return item.largeFormat == true && item.costingCopy == true;
			}
			
			public function filterCostingPresses(item:PressDefinition):Boolean {
				return item.costingPress == true;
			}
			
			private function updateWeight():void{
				var tempweight:Number;
				var finish:Number;
				var parent:Number;
				var basic:Number;
				var localSize:Dimension;
				
				if ( job.parentSize != null && localSize != null) {
					//job.parentSize = job_parent.selectedItem as Dimension;
					localSize = job_parent.selectedItem as Dimension;
					job.parentSize.name = localSize.name;
					job.parentSize.type = localSize.type;
					job.parentSize.height = localSize.height;
					job.parentSize.width = localSize.width;
				}
				if ( job.finishSize != null && job_finish_size.selectedIndex > -1) {
				//	job.finishSize = job_finish_size.selectedItem as Dimension;
					localSize = job_finish_size.selectedItem as Dimension;
					job.finishSize.name = localSize.name;
					job.finishSize.type = localSize.type;
					job.finishSize.height = localSize.height;
					job.finishSize.width = localSize.width;
				}
				if ( job.stock != null)
				 if( this.currentState != "LargeFormat"){
				   finish = job.finishSize.width * job.finishSize.height;
				   parent = job.parentSize.width * job.parentSize.height;
				   if (parent > 0.0){
						tempweight = ((finish / parent )* job.stock.mweight) / 1000;
						job.weight= (job.qtyOrdered * job.inSetsOf * job.sheets)* tempweight;
				  	 }
				}else{
					if(job.stock!=null && job.stock.parentsize!=null){
						parent = job.stock.parentsize.width * job.cutOff;
					}
					//basic = job.stock.stktype.size
				}	
			}
			public function setPricingMethod(pricingMethod:PreferencesPricingMethod):void {
				if (pricingMethod != null)  {
					this.job_type.selectedItem = pricingMethod;
					this.job.pricingMethod = pricingMethod;
					refreshCalcAndImage();
					updatePricingMethod();
				}
			}
			
			public function showJobPricingInfo():void {
	    		var jobPricingInfoWindow:JobPricingInfo = JobPricingInfo(PopUpManager.createPopUp(this, JobPricingInfo, true));
	    		jobPricingInfoWindow.setStyle("borderAlpha", 0.9);
	    		jobPricingInfoWindow.setPriceLogEntry(this.job.pricingRecord.priceLogEntry);		
	    	}
	    	
	    	private function editUnitPrice(evt:Event):void {
	    		if (job_unitPrice.text == "") {
	    			job.pricingRecord.unitPriceOverride = false;
	    			job.pricingRecord.unitPrice = 0;
	    		} else {
	    			job.pricingRecord.unitPriceOverride = true;
	    			job.pricingRecord.unitPrice = parseFloat(job_unitPrice.text); 
	    		}
	    	}
	    	
	    	private function editBinderyWaste(evt:Event):void {
	    		if (this.bindery_waste.text == "") {
	    			job.binderyWasteOverride = false;
	    			job.binderyWaste = 0;
	    		} else {
	    			job.binderyWasteOverride = true;
	    			job.binderyWaste = parseInt(bindery_waste.text);
	    		}
	    	}
	    	
	    	private function editEstWaste(evt:Event):void {
	    		if (this.est_waste.text == "") {
	    			job.estWasteOverride = false;
	    			job.estWaste = 0;
	    		} else {
	    			job.estWasteOverride = true;
	    			job.estWaste = parseInt(est_waste.text);
	    		}
	    	}
	    	
	    	private function textInputClick(evt:Event):void {
	    		if (evt.currentTarget != null && evt.currentTarget is TextInput) {
					(evt.currentTarget as TextInput).setSelection(0, 9999);	    			
	    		}
	    	}
	    	private function doPaperCal():void{
	    		mapToJobData();

				var paperCalWindow:PaperCalculator = new PaperCalculator();
				Snowmass.getInstance().containerManager.openNewMDIWindow(resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"genericPrefCmd.PaperCalculator"), paperCalWindow);
	    		
	    	//	var paperCalWindow:PaperCalculator = PaperCalculator(PopUpManager.createPopUp(this, PaperCalculator, true));
				paperCalWindow.setStyle("borderAlpha", 0.9);
				if (job.paperCal.colorBar == 0 && estimatingPreferences != null)
					job.paperCal.colorBar = estimatingPreferences.colorBar;
				paperCalWindow.setdimension(dimensionsArray)
			 	paperCalWindow.setJob(job);
			   
			//    paperCalWindow.addEventListener(StockPickerSelectEvent.CANCELSELECTSTOCK, handleStockPickerCancel);
			    paperCalWindow.addEventListener(JobEditCompleteEvent.SAVE, handleJobEditSave);
			 }
	    	private function doDigitalAssets():void {
	    		var digitalAssetsWindow:JobDigitalAssets = JobDigitalAssets(PopUpManager.createPopUp(this, JobDigitalAssets, true));
	    		digitalAssetsWindow.addEventListener(DigitalAssetEvent.OK, handleDigitalAssetComplete);
				digitalAssetsWindow.setStyle("borderAlpha", 0.9);
	    		digitalAssetsWindow.job = this.job;
	    	}
	    	
	    	private function handleDigitalAssetComplete(event:DigitalAssetEvent):void {
	    		if (event.assetArray != null) {
	    			this.job.digitalAssets = event.assetArray;
	    		}
	    	}
	    	
	    	private function handleJobEditSave(event:JobEditCompleteEvent):void {
	    		var localJob:Job = event.job as Job;
	    		
				job.parentSize = localJob.parentSize;
				job.runSize = localJob.runSize;
				job.finishSize = localJob.finishSize;
				
				if (job.parentSize != null)
					this.job_parent.selectedIndex = findItem(job.parentSize.name, dimensionsArray);
				if (job.runSize != null)
					this.job_size.selectedIndex = findItem(job.runSize.name, dimensionsArray);
				if (job.foldedSize != null)
					this.job_fold_size.selectedIndex = findItem(job.foldedSize.name, dimensionsArray);
				if ( job.finishSize != null)
					this.job_finish_size.selectedIndex = findItem(job.finishSize.name, dimensionsArray);
	    		
	    		job.paperCal = localJob.paperCal;
	    		
	    		refreshCalcAndImage();
	    	}
	    	
	    	
	    	private function doXpedxStockStatus():void{
				var statusWindow:XpdexStockAvailability = XpdexStockAvailability(PopUpManager.createPopUp(this,XpdexStockAvailability,true));
				statusWindow.setStyle("borderAlpha", 0.9);
				var temp:StockDefinition
				temp = job.stock as StockDefinition;
			 	statusWindow.setStock(temp);
			 }
	    	
			private function doTaxTable(): void{                             
				var taxtable:TaxTable;
				var result:Boolean;
				
				if (tax_table_combo.text != null && tax_table_combo.text != "" && tax_table_combo.selectedIndex == -1) {
					var item:int = findItem(tax_table_combo.text, taxTables);
					if (item == -1) {
						taxtable = new TaxTable();
						taxtable.name = tax_table_combo.text;
						taxTableDataService.addUpdate(taxtable);
						job.taxTable = taxtable;
					}
					else {
						tax_table_combo.selectedItem = item;
					}
				}
			}
			
	    	private function doInkEditorFront():void{
	    		var inkWindow:InkColorPicker = InkColorPicker(PopUpManager.createPopUp(this, InkColorPicker, true));
				inkWindow.setStyle("borderAlpha", 0.9);
				inkWindow.setSide("front");
			 	inkWindow.setInks(job);
			 	front = true;
			 	inkWindow.addEventListener(InkColorEvent.Close, handleInkColorClose);
			 	
			 }
			 private function doInkEditorBack():void{
	    		var inkWindow:InkColorPicker = InkColorPicker(PopUpManager.createPopUp(this, InkColorPicker, true));
				inkWindow.setStyle("borderAlpha", 0.9);
				inkWindow.setSide("back");			 	
			 	inkWindow.setInks(job);
			 	front = false;
			 	inkWindow.addEventListener(InkColorEvent.Close, handleInkColorClose);
			 	
			 }
			 private function handleInkColorClose(event:InkColorEvent):void
			 {
			 	if (front)
			 		job.frontInks = event.tempArray;
			 	else
			 		job.backInks = event.tempArray;
			 }
	    	private function submitToFiery():void {
				if (invoice != null && !isNaN(invoice.id)) { // Only allow submission if invoice & job have been saved
					if (job != null && !isNaN(job.id)) {
						jdfIntegrationService.sendJobToFiery(job.id, invoice.id);	
					}
				} else {
					Alert.show("You may only submit jobs that have been saved to a valid invoice.", "Error", 0, null);
				}
	    	}
	    	
	    	private function addMultiQtyJob():void {
	    		if(job!=null){
	    			mapToJobData();
	    			registerClassAlias("com.efi.printsmith.data.Job",Job);
	    			var multiQtyJobObject:Job = ObjectUtil.copy(job) as Job;
	    			multiQtyJobObject.created = null;
	    			multiQtyJobObject.modified = null;
	    			multiQtyJobObject.id = 0;
	    			multiQtyJobObject.defaultJob = false;
	    			multiQtyJobObject.multiQtyJob = true;
	    			if(multiQtyJobObject.charges!=null && multiQtyJobObject.charges.length>0){
	    				for each(var chargeObj:Charge in multiQtyJobObject.charges) {
	    					chargeObj.id = 0;
	    					chargeObj.created = null;
	    					chargeObj.modified = null;
	    					chargeObj.parentJob = multiQtyJobObject;
	    				}
	    			}
	    			/* var editJobWindow:EditJob=EditJob(PopUpManager.createPopUp(this, EditJob, true));
					editJobWindow.setStyle("borderAlpha", 0.9);
					editJobWindow.setJob(multiQtyJobObject);
					editJobWindow.addEventListener(JobEditCompleteEvent.SAVE, saveMultiQtyJob); */
					var editJobWindow:EditJob= new EditJob();
					var windowID:int = Snowmass.getInstance().containerManager.getWindowWithChild(this,true).windowID;
					var invoiceNumber:String = "";
					var pricingMethodTitle:String = "";
					if(job.parentInvoice==null || job.parentInvoice.invoiceNumber==null || job.parentInvoice.invoiceNumber==""){
						invoiceNumber = "0";
					} else {
						invoiceNumber = job.parentInvoice.invoiceNumber;
					}
					if(job.pricingMethod==null){
						pricingMethodTitle = "";
					} else {
						pricingMethodTitle = job.pricingMethod.title;
					}
					var jobTitle:String = StringUtil.substitute(resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"jobCmd.EditJob"),invoiceNumber,0,pricingMethodTitle);
					Snowmass.getInstance().containerManager.openNewMDIWindow(jobTitle,editJobWindow, -1,-1,-1,-1, windowID);
					editJobWindow.setJob(multiQtyJobObject);
					editJobWindow.addEventListener(JobEditCompleteEvent.SAVE, saveMultiQtyJob, false, 0, true);
	    		}
	    	}
	    	
	    	private function saveMultiQtyJob(event:JobEditCompleteEvent):void
			{
				invoiceMultiQtyJobList.addItem(event.job);
				//invoiceMultiQtyJobList = multiQtyJobList;
			}
			
			private function getMultiQtyString(tempInvoiceMultiQtyJobList:ArrayCollection,invoiceMultiQtyJobListLength:Number):String {
				if(tempInvoiceMultiQtyJobList==null || tempInvoiceMultiQtyJobList.length==0) {
					return resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'jobCmd.add');
				}
				return resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'jobCmd.edit');
			}
			
			private function openMultiQtyCombo(tempInvoiceMultiQtyJobList:ArrayCollection):void {
				if(tempInvoiceMultiQtyJobList!=null && tempInvoiceMultiQtyJobList.length>0) {
					multiQtyCombo.selectedIndex=-1;
					multiQtyCombo.open();
				}
			}
			
			private function doUpdateNumberOn():void {
				if (isNaN(job.sheets) || job.sheets == 0)
					job.sheets = 1;
				if (job.sheets < job.numUp)
					job.numOn = job.sheets;
				else
					job.numOn = job.numUp;
			}
			
			private function openEditMultiQtyJobWindow():void {
				if(multiQtyCombo.selectedItem!=null && multiQtyCombo.selectedItem is Job){
					var selectedMultiQtyJob:Job = multiQtyCombo.selectedItem as Job;
					var editJobWindow:EditJob= new EditJob();
					var windowID:int = Snowmass.getInstance().containerManager.getWindowWithChild(this,true).windowID;
					var invoiceNumber:String = "";
					var pricingMethodTitle:String = "";
					if(selectedMultiQtyJob.parentInvoice==null || selectedMultiQtyJob.parentInvoice.invoiceNumber==null || selectedMultiQtyJob.parentInvoice.invoiceNumber==""){
						invoiceNumber = "0";
					} else {
						invoiceNumber = selectedMultiQtyJob.parentInvoice.invoiceNumber;
					}
					if(selectedMultiQtyJob.pricingMethod==null){
						pricingMethodTitle = "";
					} else {
						pricingMethodTitle = selectedMultiQtyJob.pricingMethod.title;
					}
					var jobTitle:String = StringUtil.substitute(resourceManager.getString(Snowmass.RESOURCE_BUNDLE,"jobCmd.EditJob"),invoiceNumber,selectedMultiQtyJob.jobIndex,pricingMethodTitle);
					Snowmass.getInstance().containerManager.openNewMDIWindow(jobTitle,editJobWindow, -1,-1,-1,-1, windowID);
					editJobWindow.jobIndex = multiQtyCombo.selectedIndex;
					editJobWindow.setJob(selectedMultiQtyJob);
					editJobWindow.addEventListener(JobEditCompleteEvent.SAVE, updateJob, false, 0, true);
					multiQtyCombo.selectedItem = null;
					multiQtyCombo.selectedIndex = -1;
				}
			}
			
			private function handleSaveProductResult(ev:ResultEvent):void	{
				if(job!=null){
					job.productCode= ev.result as ProductCode;
				}
				productDataService.getAll("ProductCode");
			}
			private function doProduct():void	{
				var tmpProduct:ProductCode;
				var result:Boolean;
				
				if (product.text != null 
						&& product.text != "" 
						&& product.selectedIndex == -1
						&& product.doesDuplicateExist() == null) {
							
					var item:Object = product.lastSelectedObj; //findItem(cbostockClass.text, stockClass);
					if ((item == null) || (item == "")) {
						tmpProduct = new ProductCode();
					}
					else {
						tmpProduct = item as ProductCode;
					}
					Alert.show(resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'Warning.NotInTable'), resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'webDataCmd.Warning'), Alert.YES|Alert.NO, Application.application as Application, 
					function(event:CloseEvent):void {
						if(event.detail == Alert.YES) {
							tmpProduct.name = product.text;
							productDataService.addUpdate(tmpProduct);	
						} else if(event.detail == Alert.NO) {
							product.selectedIndex = -1;
							if(job!=null){
								job.productCode = null;
							}
						}
					}, null, Alert.NO);					
					 //product.selectedItem as ProductCode;
				}
				
			}
			private function updateJob(event:JobEditCompleteEvent):void
			{
				var updatedJobList:ArrayCollection = new ArrayCollection();
				for(var i:int=0;i<invoiceMultiQtyJobList.length;i++) {
					var tempJobBaseObj:JobBase = invoiceMultiQtyJobList.getItemAt(i) as JobBase;
					if(!isNaN(event.job.id) && event.job.id!=0){
						if(tempJobBaseObj.id == event.job.id){
							registerClassAlias("com.efi.printsmith.data.JobBase",JobBase);
							tempJobBaseObj = ObjectUtil.copy(event.job) as JobBase;
						}
					} else {
						if(event.jobIndex!=-1){
							if(i==event.jobIndex) {
								registerClassAlias("com.efi.printsmith.data.JobBase",JobBase);
								tempJobBaseObj = ObjectUtil.copy(event.job) as JobBase;
							}
						} else {
							if(tempJobBaseObj.jobIndex == event.job.jobIndex){
								registerClassAlias("com.efi.printsmith.data.JobBase",JobBase);
								tempJobBaseObj = ObjectUtil.copy(event.job) as JobBase;
							}
						}
					}
					updatedJobList.addItem(tempJobBaseObj);
				}
				invoiceMultiQtyJobList = updatedJobList;
			}
			
			private function formatChargePrice(item:Object, column:DataGridColumn):String {
				return this.numberFormatter.format(item.price);
			}
			
			private function openStockDefinition():void {
				var stockDefinitionsWindow:StockDefinitions = new StockDefinitions();
				var stockDefinitionsObj:StockDefinition = new StockDefinition();
				var specialObject:StockGroup;
				for each(var stockGroupObject:StockGroup in stockGroups) {
					if(stockGroupObject.name=="Special"){
						specialObject = stockGroupObject;
						break;
					}
				}
				if(specialObject!=null){
					var stockDefinitionsWindow:StockDefinitions = new StockDefinitions();
					var stockDefinitionsObj:StockDefinition = new StockDefinition();
					stockDefinitionsObj.stkgroup = specialObject;
					stockDefinitionsWindow.stockDefinitions = stockDefinitionsObj;
					stockDefinitionsWindow.fromJobPage = true;
					stockDefinitionsWindow.addEventListener(SpecialOrderStockDefEvent.SPECIAL_ORDER_SAVE_EVENT,function(event:SpecialOrderStockDefEvent):void {
						job.customerSuppliedStock = false;
						job.specialOrderStock = true;
						setStockDefinitionData(event.stockDefinitionObj);
					}, false, 0, true);
					var parentWindowId:int = Snowmass.getInstance().containerManager.getWindowWithChild(EditJob.getInstance(),true).windowID;
					Snowmass.getInstance().containerManager.openNewMDIWindow(stockDefinitionsWindow.title,stockDefinitionsWindow,-1,-1,-1,-1,parentWindowId);
				} else {
					specialObject = new StockGroup();
					specialObject.name = "Special";
					dataServiceGroup.addUpdate(specialObject);
				}
			}
			
			private function handleSaveGroupResult(event:ResultEvent):void {
				stockGroups.addItem(event.result as StockGroup);
				var stockDefinitionsWindow:StockDefinitions = new StockDefinitions();
				var stockDefinitionsObj:StockDefinition = new StockDefinition();
				stockDefinitionsObj.stkgroup = event.result as StockGroup;
				stockDefinitionsWindow.stockDefinitions = stockDefinitionsObj;
				stockDefinitionsWindow.fromJobPage = true;
				stockDefinitionsWindow.addEventListener(SpecialOrderStockDefEvent.SPECIAL_ORDER_SAVE_EVENT,function(event:SpecialOrderStockDefEvent):void {
					job.customerSuppliedStock = false;
					job.specialOrderStock = true;
					setStockDefinitionData(event.stockDefinitionObj);
				}, false, 0, true);
				var parentWindowId:int = Snowmass.getInstance().containerManager.getWindowWithChild(EditJob.getInstance(),true).windowID;
				Snowmass.getInstance().containerManager.openNewMDIWindow(stockDefinitionsWindow.title,stockDefinitionsWindow,-1,-1,-1,-1,parentWindowId);
			}
			
			private function openMultiQtyView():void {
				mapToJobData();
				var multiQtyViewWindow:MultiQtyView = PopUpManager.createPopUp(this,MultiQtyView,true) as MultiQtyView;
				multiQtyViewWindow.multiQtyJob = this.job;
			}
			
			private function getStockName(stockDefObj:StockDefinition):String {
				if(stockDefObj!=null){
					return stockDefObj.weight+"# "+stockDefObj.name;
				}
				return "";
			}
		]]>

	</mx:Script>
   	<mx:NumberFormatter id="numberFormatter" precision="2" useNegativeSign="true" useThousandsSeparator="true"/>

	<mx:VBox width="100%"
			 height="625"
			 creationPolicy="all" id="vbox1" verticalScrollPolicy="off">
		<mx:Canvas width="939"
				   height="624"
				   verticalScrollPolicy="off"
				   fontSize="9" id="canvas1">
			<mx:LinkButton x="10"
					   y="10"
					   width="38"
					   height="38"
					   click="doSave();"
					   id="file_button">
				<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="10"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Save')}"
					  width="38"
					  textAlign="center"/>
			<mx:LinkButton x="150.5"
					   y="10"
					   width="38"
					   height="38"
					   click="openJobNotes();"
					   id="note_pad_button">
				<mx:icon>@Embed(source='../../../../assets/notes.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="139"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.JobNotes')}"
					  width="61"
					  textAlign="center"/>
			<mx:LinkButton x="253"
					   y="10"
					   width="38"
					   height="38"
					   id="new_job_button">
				<mx:icon>@Embed(source='../../../../assets/preview.png')</mx:icon>
			</mx:LinkButton>
			<mx:LinkButton x="67"
					   y="10"
					   width="38"
					   height="38"
					   click="doDelete();"
					   id="cancel_button">
				<mx:icon>@Embed(source='../../../../assets/delete.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="56"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Cancel')}"
					  width="58"
					  textAlign="center"/>
			<mx:LinkButton x="396.5"
					   y="10"
					   width="38"
					   height="38"
					   id="tickets_button">
				<mx:icon>@Embed(source='../../../../assets/print_carton_labels.png')</mx:icon>
			</mx:LinkButton>
			<mx:LinkButton x="503"
					   y="10"
					   width="38"
					   height="38"
					   id="print_button"
					   click="doProductionData();">
				<mx:icon>@Embed(source='../../../../assets/production.png')</mx:icon>
			</mx:LinkButton>
			<!--<mx:LinkButton x="564"
					   y="10"
					   width="38"
					   height="38"
					   id="preview_button"
					   click="submitToFiery()">
				<mx:icon>@Embed(source='../../../../assets/submit.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="554"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Submit')}"
					  width="58"
					  textAlign="center"/>-->
			<mx:Label x="488"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Production')}"
					  width="68"
					  textAlign="center"/>
			<mx:Label x="371"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.CartonLabels')}"
					  width="89"
					  textAlign="center"/>
			<mx:Label x="243"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'newInvCmd.Preview')}"
					  width="58"
					  textAlign="center"/>
			<mx:LinkButton x="319.5"
					   y="10"
					   width="38"
					   height="38"
					   click="doPrint()"
					   id="change_account_button">
				<mx:icon>@Embed(source='../../../../assets/print.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="299"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.JobTicket')}"
					  width="79"
					  textAlign="center"/>
			<mx:CheckBox x="10"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Brokered')}"
						 id="check_brokered"
						 selected="{job.brokered}" width="75"/>
			<mx:CheckBox x="93"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Taxable')}"
						 id="check_taxtable"
						 selected="{job.taxable}" width="70"/>
			<mx:CheckBox x="370.5"
						 y="68"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.Finished')}"
						 id="checked_finished"
						 selected="{job.finished}" width="87"/>
			<common:EditableComboBox x="510.5"
							 y="68"
							 width="100"
							 id="product"
							 dataProvider="{productCodes}"
							 labelField="name"
							 editable="true"
							 alwaysAddNewItem="true"
							 optional="true"
							 focusOut="doProduct();"
							 tabIndex="27"
							 height="20"/>
			<mx:TextInput
						  y="94"
						  width="797"
						  id="job_comment"
						  text="{job.comment}"
						  height="20"
						  tabIndex="30"
						  right="10"/>
			<mx:Label x="10"
					  y="96"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Comment')}" textAlign="right" width="98"/>
			<common:EditableComboBox x="668"
							 y="68"
							 width="100"
							 id="job_location"
							 dataProvider="{locations}"
							 labelField="name"
							 tabIndex="28"
							 editable="false"
							 optional="true"
							 height="20"/>
			<mx:Label x="450.5"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Product')}" textAlign="right" width="52"/>
			<mx:Label x="604"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Location')}" textAlign="right" width="56"/>
			<mx:Label x="756"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'posRegisterCmd.Type')}" textAlign="right" width="46.5"/>
			<mx:ComboBox
						 y="67.5"
						 id="job_type"
						 dataProvider="{pricingMethods}"
						 change="updatePricingMethod();"
						 labelField="title"
						 right="10"
						 tabIndex="29"
						 left="810.5">
			</mx:ComboBox>
			<mx:Label x="162"
					  y="70"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'taxCmd.TaxTable')}" textAlign="right" width="55.5"/>
			<mx:ComboBox
						 y="67.5"
						 id="tax_table_combo"
						 dataProvider="{taxTables}"
						 change="updatePricingMethod();"
						 labelField="name"
						 right="581.5"
						 tabIndex="26"
						 left="221.5">
			</mx:ComboBox>
			<mx:Canvas x="0" y="119" width="939" height="512" verticalScrollPolicy="auto" id="canvas2">
				<mx:HDividedBox x="0"
								width="939"
								height="502" verticalScrollPolicy="off" id="hdividedbox1" bottom="10">
					<!--			<mx:Tree width="200"
						 height="100%">
						 </mx:Tree>
					-->
					<mx:Accordion width="250"
								  height="502"
								  fontSize="9" headerHeight="18">
						<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Charges')}"
								   width="100%"
								   height="100%"
								   fontSize="9"
								   verticalScrollPolicy="off"
								   horizontalScrollPolicy="off">
							<mx:LinkButton x="188"
										   id="delete_charge_button"
										   click="doDeleteCharge()"
										   icon="@Embed(source='../../../../assets/delete16.png')"
										   width="24"
										   bottom="2"/>
							<mx:LinkButton x="219"
										   id="add_charge_button"
										   click="doAddCharge()"
										   icon="@Embed(source='../../../../assets/add16.png')"
										   width="24"
										   bottom="2" enabled="false"/>
							<mx:DataGrid
										 id="invoice_charge_datagrid"
										 dataProvider="{this.charges}"
										 left="0"
										 bottom="25"
										 top="0"
										 right="0"
										 showHeaders="false" alternatingItemColors="[#FFFFFF,#FFFFFF]">
								<mx:columns>
									<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Description')}"
													   dataField="description"/>
									<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Price')}"
													   width="90" labelFunction="formatChargePrice"
													   dataField="price"
													    textAlign="right"/>
								</mx:columns>
							</mx:DataGrid>
						</mx:Canvas>
						<mx:Canvas label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Commands')}"
								   width="100%"
								   height="100%">
							<mx:LinkButton x="10"
										   y="10"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.PrintJobTicket')}"/>
							<mx:LinkButton x="10"
										   y="30"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.PreviewJobTicket')}"/>
							<mx:LinkButton x="10"
										   y="50"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.JobTicketNotes')}"/>
							<mx:LinkButton x="10"
										   y="70"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.WebWorkSheet')}"/>
							<mx:LinkButton x="10"
										   y="90"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.DigitalAssets')}"
										   click="doDigitalAssets()"/>
							<mx:LinkButton x="10"
										   y="110"
										   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.MultiQty')}" click="{openMultiQtyView()}"
										   color="{job.showMultiQty?0x00BB00:0x000000}"/>							
							<mx:LinkButton x="22" y="129" label="Current xpedx Stock Status" click="doXpedxStockStatus()"/>
						</mx:Canvas>
					</mx:Accordion>
					<mx:ViewStack id="viewstack3"
								  width="640"
								  height="504">
						<mx:Canvas label="View 1"
								   width="100%"
								   height="100%"
								   fontSize="9" id="canvas4">
							<mx:TextArea x="85"
										 y="1"
										 width="281"
										 id="job_description"
										 text="{job.description}"
										 tabIndex="0"
										 height="40"/>
							<mx:Label x="10"
									  y="2"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Description')}" width="67" textAlign="right" id="label32"/>
							<mx:TextInput x="496"
										  y="47"
										  id="job_over_under"
										  text="{job.oversUnders}"
										  height="20"
										  tabIndex="2"
										  tabEnabled="false"
										  width="98" mouseDown="textInputClick(event)" focusOut="fieldChanged(event)" textAlign="right"/>
							<mx:TextInput x="496"
										  y="70"
										  id="sets_of"
										  text="{job.inSetsOf}"
										  height="20"
								          tabEnabled="false"
										  width="98" mouseDown="textInputClick(event)" focusOut="fieldChanged(event)" textAlign="right"/>
							<commoncomponents:CustomNumericTextInputComponent x="496"
										  y="324"
										  id="overs_unit_price"
										  height="20"
										  width="98" 
										  tabEnabled="false"
										  dataHolder="{job.pricingRecord}" variableName="oversUnitPrice"
										  customText="{job.pricingRecord.oversUnitPrice}"
										  precision="4" rounding="nearest"
										  text="{Snowmass.getCurrencyFormatter(false,4).format(job.pricingRecord.oversUnitPrice)}"
										  mouseDown="textInputClick(event)" textAlign="right"/>
							<commoncomponents:CustomNumericTextInputComponent x="496"
										  y="346"
										  id="overs_total_price"
										  height="20"
										  width="98" 
										  tabEnabled="false"
										  dataHolder="{job.pricingRecord}" variableName="oversTotalPrice"
										  customText="{Snowmass.getCurrencyFormatter(true,2).format(job.pricingRecord.oversTotalPrice)}"
										  precision="2" rounding="nearest"
										  text="{Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.oversTotalPrice)}"
										  mouseDown="textInputClick(event)" textAlign="right"/>
							<mx:Label x="385"
									  y="348"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversTotalPrice')}" textAlign="right" width="108" id="label1"/>
							<mx:Label x="385"
									  y="410"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Other')}" textAlign="right" width="108" id="label2"/>
							<mx:Label x="385"
									  y="368"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Prep')}" textAlign="right" width="108" id="label3"/>
							<mx:Label x="496"
									  y="368"
									  width="98"
									  id="job_prep"
									  text="{Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.prepPrice)}"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="389"
									  width="98"
									  id="job_bind"
									  text="{Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.bindPrice)}"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="410"
									  width="98"
									  id="job_other"
									  text="{Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.otherChargePrice)}"
									  height="20" textAlign="right"/>
							<mx:Label x="385"
									  y="445"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Total')}" textAlign="right" width="108" id="label4"/>
							<mx:Label x="496.95"
									  y="445"
									  width="97.05"
									  id="job_total"
									  text="{Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.totalPrice + job.pricingRecord.prepPrice + job.pricingRecord.bindPrice + job.pricingRecord.otherChargePrice)}"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="208"
									  width="98"
									  id="num_signatures"
									  text="{job.signatures}"
									  height="20" textAlign="right"/>
							<mx:Label x="496"
									  y="229"
									  width="98"
									  id="job_imp"
									  height="20" textAlign="right" text="{job.impressionsPerRun}"/>
							<mx:Label x="496"
									  y="250"
									  width="98"
									  id="total_imp"
									  height="20" textAlign="right" text="{job.totalImpressions}"/>
							<mx:Label x="496"
									  y="271"
									  width="98"
									  id="job_weight"
									  height="20" textAlign="right" text="{numberFormatter.format(job.weight)}"/>
							<mx:Label x="385"
									  y="389"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Bind')}" textAlign="right" width="108" id="label5"/>
							<commoncomponents:CustomNumericTextInputComponent x="496"
										  y="302"
										  id="job_price"
										  height="20"
										  width="98" 
										  dataHolder="{job.pricingRecord}" variableName="totalPrice"
										  customText="{Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.totalPrice)}"
										  precision="2" rounding="nearest"
										  mouseDown="textInputClick(event)" 
										  textAlign="right" 
										  tabEnabled="false"
										  text="{Snowmass.getCurrencyFormatter(false,2).format(job.pricingRecord.totalPrice)}"/>
							<mx:Label x="385"
									  y="304"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Price')}" textAlign="right" width="108" id="label7"/>
							<mx:Label x="385"
									  y="326"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversUnitPrice')}" textAlign="right" width="108" id="label6"/>
							<mx:TextInput x="496"
										  y="93"
										  id="job_sheets"
										  text="{job.sheets}"
										  height="20"
										  tabIndex="3"
										  width="98" mouseDown="textInputClick(event)" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="116"
										  width="45.300003"
										  id="job_up"
										  text="{job.numUp}"
										  tabIndex="4"
										  height="20" mouseDown="textInputClick(event)" textAlign="right" focusOut="fieldChanged(event)" change="doUpdateNumberOn();"/>
							<mx:TextInput x="548.3"
										  y="116"
										  width="45.700005"
										  id="job_on"
										  text="{job.numOn}"
										  tabIndex="5"
										  height="20" mouseDown="textInputClick(event)" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="138"
										  id="job_press"
										  height="20"
										  width="98"
										  tabIndex="6"
										  text="{job.pressQty}" mouseDown="textInputClick(event)" textAlign="right" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="161"
										  id="bindery_waste"
										  text="{job.binderyWaste}"
										  height="20"
										  tabIndex="7"
										  width="98" mouseDown="textInputClick(event)" textAlign="right" change="editBinderyWaste(event)" focusOut="fieldChanged(event)"/>
							<mx:TextInput x="496"
										  y="184"
										  id="est_waste"
										  text="{job.estWaste}"
										  height="20"
										  tabIndex="8"
										  width="98" mouseDown="textInputClick(event)" textAlign="right" change="editEstWaste(event)" focusOut="fieldChanged(event)"/>
							<mx:Label x="385"
									  y="271"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Weight')}" textAlign="right" width="108" id="label11"/>
							<mx:Label x="385"
									  y="250"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.TotImp')}" textAlign="right" width="108" id="label8"/>
							<mx:Label x="385"
									  y="229"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.ImpRun')}" textAlign="right" width="108" id="label9"/>
							<mx:Label x="385"
									  y="208"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OfSignatures')}" textAlign="right" width="108" id="label10"/>
							<mx:Label x="385"
									  y="186"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.EstWaste')}" textAlign="right" width="108" id="label31"/>
							<mx:Label x="385"
									  y="163"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.BinderyWaste')}" textAlign="right" width="108" id="label34"/>
							<mx:Label x="385"
									  y="140"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Press')}" textAlign="right" width="108" id="label12"/>
							<mx:Label x="385"
									  y="118"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UpOn')}" textAlign="right" width="108" id="label30"/>
							<mx:Label x="385"
									  y="95"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Sheets')}" textAlign="right" width="108" id="label29"/>
							<mx:Label x="385"
									  y="72"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.InSetsOf')}" textAlign="right" width="108" id="label28"/>
							<mx:TextInput x="496"
										  y="1"
										  id="job_ordered"
										  text="{job.qtyOrdered}"
										  height="20"
										  tabIndex="1"
										  width="98" mouseDown="textInputClick(event)" focusOut="fieldChanged(event)" textAlign="right"/>
							<mx:Label x="385"
									  y="3"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Ordered')}" textAlign="right" width="108"/>
							<mx:Label x="385"
									  y="26"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.MultiQty')}" textAlign="right" width="108" id="label42"
									  visible="{invoice is Estimate &amp;&amp; !job.multiQtyJob}"/>
							<mx:ComboBox id="multiQtyCombo" dataProvider="{invoiceMultiQtyJobList}" labelField="qtyOrdered"
								x="496" y="26" visible="false" close="{openEditMultiQtyJobWindow()}"/>
							<mx:Label id="multiQtyLabel" x="496" y="26" text="{getMultiQtyString(invoiceMultiQtyJobList,invoiceMultiQtyJobList.length)}"
								visible="{invoice is Estimate &amp;&amp; !job.multiQtyJob}" click="{openMultiQtyCombo(invoiceMultiQtyJobList)}"/>
							<mx:Button 
								x="555" y="24" label="+" visible="{invoice is Estimate &amp;&amp; !job.multiQtyJob}" click="{addMultiQtyJob()}" id="button1"/>
							<mx:Label x="385"
									  y="49"
									  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.OversUnders')}" textAlign="right" width="108" id="label33"/>
									  
							<mx:VRule x="374"
									  bottom="5"
									  top="5"/>
							<mx:HRule y="296"
									  height="2.0054946"
									  right="5"
									  left="380" id="hrule4"/>
							<mx:HRule y="434"
									  height="2.0054946"
									  right="5"
									  left="380" id="hrule2"/>
							<mx:HRule y="438"
									  height="2.0054946"
									  right="5"
									  left="380" id="hrule1"/>
							<mx:HRule x="10"
									  y="46"
									  width="356"
									  height="2" id="hrule3"/>
							<mx:ViewStack x="10"
										  y="46"
										  id="viewstack4"
										  width="358"
										  height="218">
								<mx:Canvas label="View 1"
										   width="100%"
										   height="100%" id="canvas3">
									<mx:Text x="107"
											 y="57"
											 width="247"
											 height="20"
											 id="job_color"
											 text="{job.stock.color.name}"
											 fontSize="9"/>
									<mx:TextInput x="107"
												  y="167"
												  width="100"
												  height="20"
												  id="number_lines"
												  fontSize="9"
												  tabIndex="14"
												  mouseDown="textInputClick(event)" />
									<mx:Label x="6"
											  y="147"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.FoldedSize')}"
											  fontSize="9" textAlign="right" width="94" id="label16"/>
									<mx:Label x="6"
											  y="125"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Finish')}"
											  fontSize="9" textAlign="right" width="94" id="label17"/>
									<mx:Label x="6"
											  y="190"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.UnitPrice')}"
											  fontSize="9" textAlign="right" width="94" id="label15"/>
									<mx:TextInput x="107"
												  y="189"
												  width="100"
												  height="20"
												  id="job_unit_price"
												  tabIndex="15"
												  fontSize="9" mouseDown="textInputClick(event)" />
									<mx:Label x="6"
											  y="103"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RunSize')}"
											  fontSize="9" textAlign="right" width="94" id="runsize_label"/>
									<mx:Label x="11"
											  y="81"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Parent')}"
											  fontSize="9" textAlign="right" width="89" id="label13"/>
									<mx:Label x="6"
											  y="169"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.NumberofLines')}"
											  fontSize="9" textAlign="right" width="94" id="label14"/>
									<mx:TextInput x="107"
												  y="35"
												  width="171"
												  height="20"
												  id="job_stock"
												  tabIndex="9"
												  text="{getStockName(job.stock)}"
												  fontSize="9" mouseDown="textInputClick(event)" />
									<mx:Label x="6"
											  y="37"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Stock')}"
											  fontSize="9" width="94" textAlign="right" id="label18"/>
									<mx:Label x="10"
											  y="57"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Color')}"
											  fontSize="9" textAlign="right" width="90" id="label19"/>
									<mx:CheckBox x="10"
												 y="6"
												 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CustomerSuppliedStoc')}"
												 id="customer_suppliled_stock"
												 fontSize="9"
												  selected="{job.customerSuppliedStock}"
												   change="doCustomerSupplied()"/>
									<mx:CheckBox x="218"
												 y="7"
												 fontSize="9" id="specialOrder"
												  selected="{job.specialOrderStock}"
												   change="doSpecialOrder()"/>
									<mx:Button x="240"
											   y="7"
											   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.SpecialOrder')}"
											   fontSize="9"
											   height="18"
											   id="special_order_button" width="108" click="{openStockDefinition()}"/>
							<!--		<mx:Image x="215"
											  y="81"
											  width="139"
											  id="cutDiagram"
											  height="124" click="doPaperCal();" source="assets/380.png"/>
								-->	
									<mx:Canvas x="215"
											   y="81"
											   width="140"
											   height="127"
											   borderStyle="inset"
											   click="doPaperCal();"
											   id="cutDiagram">
									</mx:Canvas>
									<mx:HRule x="2"
											  y="215"
											  width="356"
											  height="2"/>
									<mx:Button x="286"
											   y="35"
											   label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'usecCmd.Change')}"
											   fontSize="9"
											   height="18"
											   id="chage_stock_button"
											   click="changeStockDefinition()" width="62"/>
									<mx:ComboBox x="108" y="79" width="99" id="job_parent" tabIndex="10" labelField = "name" dataProvider="{dimensionsArray}" editable="true" focusOut="fieldChanged(event)"></mx:ComboBox>
									<mx:ComboBox x="108" y="101" width="99" id="job_size" labelField="name" tabIndex="11" focusIn="runSizeGotFocus()" dataProvider="{dimensionsArray}" editable="true" focusOut="fieldChanged(event)"></mx:ComboBox>
									<mx:ComboBox x="108" y="123" width="99" id="job_finish_size" labelField="name" tabIndex="12" focusIn="finishSizeGotFocus()" dataProvider="{dimensionsArray}" editable="true" focusOut="fieldChanged(event)"></mx:ComboBox>
									<mx:ComboBox x="108" y="145" width="99" id="job_fold_size"  labelField="name" tabIndex="13" focusIn="foldedSizeGotFocus()" dataProvider="{dimensionsArray}" editable="true" focusOut="fieldChanged(event)"></mx:ComboBox>
								</mx:Canvas>
								<mx:Canvas label="merchandise_canvas"
										   width="100%"
										   height="100%">
									<mx:TextArea x="79"
												 y="10"
												 width="277"
												 id="job_notes" 
												 text="{job.jobNotes}"/>
									<mx:Label x="-36"
											  y="11"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Notes')}"/>
									<mx:CheckBox x="79"
												 y="62"
												 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rPresetInfo.ShowNotes')}"
												 id="check_job_notes"
												 selected="{job.jobTicketNotes}"/>
									<mx:TextInput x="79"
												  y="92"
												  width="277"
												  height="22"
												  id="vendor_edit" mouseDown="textInputClick(event)" />
									<mx:Label x="-36"
											  y="94"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Vendor')}"/>
								</mx:Canvas>
							</mx:ViewStack>
							<mx:ViewStack x="10"
										  y="263"
										  id="estimator_viewstack"
										  width="358"
										  height="239">
								<mx:Canvas id="printing_estimator_canvas"
										   width="100%"
										   height="100%">
									<mx:ComboBox x="107"
													 y="5"
													 width="241"
													 height="20"
													 id="job_pricing_press"
													 dataProvider="{presses}"
													 labelField="name"
													 tabIndex="16"
													 fontSize="9" change="changePricingPress()"/>
									<mx:Label x="10"
											  y="7"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.PricingPress')}"
											  fontSize="9" textAlign="right" width="91" id="label20"/>
									<mx:ComboBox x="107"
													 y="28"
													 width="241"
													 height="20"
													 id="job_costing_press"
													 dataProvider="{costingPresses}"
													 labelField="name"
													 tabIndex="17"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="30"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CostingPress')}"
											  fontSize="9" textAlign="right" width="91" id="label21"/>
									<mx:Label x="6"
											  y="96"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Back')}"
											  fontSize="9" textAlign="right" width="34" id="label26"/>
									<mx:Label x="5"
											  y="73"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Front')}"
											  fontSize="9" textAlign="right" width="35" id="label24"/>
									<mx:Panel x="48"
											  y="122"
											  width="203"
											  height="94"
											  layout="absolute"
											  title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.RunMethod')}"
											  dropShadowEnabled="false"
											  fontSize="9" headerHeight="20" borderThicknessBottom="3" borderThicknessLeft="3" borderThicknessRight="3">
										<mx:RadioButtonGroup id="run_method_radiogroup"/>
										<mx:RadioButton x="10"
														y="27"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.WorkandTurn')}"
														groupName="run_method_radiogroup"
														height="18"
														value="{Constants.JOB_RUN_METHOD_WORK_TURN}" width="179" id="radiobutton1"/>
										<mx:RadioButton x="10"
														y="6"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Sheetwise')}"
														groupName="run_method_radiogroup"
														height="18"
														value="{Constants.JOB_RUN_METHOD_SHEETWISE}" width="177" id="radiobutton2"/>
										<mx:RadioButton x="10"
														y="48"
														label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.WorkandTumble')}"
														groupName="run_method_radiogroup"
														height="18"
														value="{Constants.JOB_RUN_METHOD_WORK_TUMBLE}" width="169" id="radiobutton3"/>
									</mx:Panel>
									<mx:Label x="48"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Colors')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label22"/>
									<mx:Label x="96"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Passes')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label23"/>
									<mx:Label x="144"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Washes')}"
											  width="46"
											  textAlign="center"
											  fontSize="9" id="label25"/>
									<mx:Label x="192"
											  y="54"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.Ink')}"
											  width="156"
											  textAlign="center"
											  fontSize="9" id="label27"/>
									<mx:TextInput x="48"
												  y="71"
												  width="46"
												  height="20"
												  id="front_colors_text"
												  fontSize="9" textAlign="center"
												  tabIndex="18"
												  text="{job.frontColors}" focusOut="fieldChanged(event)" mouseDown="textInputClick(event)" />
									<mx:TextInput x="96"
												  y="71"
												  width="46"
												  height="20"
												  id="front_passes_text"
												  fontSize="9" textAlign="center"
												  tabIndex="19"
												  text="{job.frontPasses}" focusOut="fieldChanged(event)" mouseDown="textInputClick(event)" />
									<mx:TextInput x="96"
												  y="94"
												  width="46"
												  height="20"
												  id="back_passes_text"
												  tabIndex="23"
												  fontSize="9" textAlign="center"
												  text="{job.backPasses}" focusOut="fieldChanged(event)" mouseDown="textInputClick(event)" />
									<mx:TextInput x="144"
												  y="71"
												  width="46"
												  height="20"
												  id="front_washes_text"
												  fontSize="9" textAlign="center"
												  tabIndex="20"
												  text="{job.frontWashes}" focusOut="fieldChanged(event)" mouseDown="textInputClick(event)" />
									<mx:List x="192"
												  y="71"
												  width="156"
												  height="20"
												  id="front_inks_text"
												  fontSize="9" textAlign="center"
												  tabIndex="21"
												   dataProvider="{job.frontInks}"
												    labelField="name" click="doInkEditorFront();" wordWrap="true"/>
									<mx:List x="192"
												  y="94"
												  width="156"
												  height="20"
												  id="back_inks_text"
												  tabIndex="25"
												  fontSize="9" textAlign="center"
												   dataProvider="{job.backInks}"
												    labelField="name" click="doInkEditorBack();"/>
									<mx:TextInput x="144"
												  y="94"
												  width="46"
												  height="20"
												  id="back_washes_text"
												  tabIndex="24"
												  fontSize="9" textAlign="center"
												  text="{job.backWashes}" focusOut="fieldChanged(event)" mouseDown="textInputClick(event)" />
									<mx:TextInput x="48"
												  y="94"
												  width="46"
												  height="20"
												  id="back_colors_text"
												  tabIndex="22"
												  fontSize="9" textAlign="center"
												  text="{job.backColors}" focusOut="fieldChanged(event)" mouseDown="textInputClick(event)" />
								</mx:Canvas>
								<mx:Canvas id="copy_estimator_canvas" label="Copiers" width="100%" height="100%">
									<mx:ComboBox x="107"
													 y="5"
													 width="241"
													 height="20"
													 id="job_pricing_copier"
													 dataProvider="{copiers}"
													 labelField="name"
													 change="changePricingCopier()"
													 tabIndex="16"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="7"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.PricingCopier')}"
											  fontSize="9" width="90" textAlign="right"/>
									<mx:ComboBox x="107"
													 y="28"
													 width="241"
													 height="20"
													 id="job_costing_copier"
													 dataProvider="{costingCopiers}"
													 labelField="name"
													 tabIndex="17"
													 fontSize="9"/>
									<mx:Label x="10"
											  y="30"
											  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.CostingCopier')}"
											  fontSize="9" width="90" textAlign="right"/>
									<mx:RadioButtonGroup id="copierSides"/>
									<mx:RadioButton x="107" y="58" click="changeJobSides(event)" id="copy_single_radio" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.SingleSided')}" groupName="copierSides" fontSize="9"/>
									<mx:RadioButton x="107" y="78" click="changeJobSides(event)" id="copy_double_radio" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'jobCmd.DoubleSided')}" groupName="copierSides" fontSize="9"/>
								</mx:Canvas>
							</mx:ViewStack>
							<components:SmallThrobber visible="false" id="pricing_throbber" x="599" y="301" height="20" width="20"/>
							<mx:LinkButton x="596" y="301" width="20" id="refresh_price_btn" height="20" click="updatePrice()">
								<mx:icon>@Embed(source='../../../../assets/refresh_small.png')</mx:icon>
							</mx:LinkButton>
							<mx:LinkButton x="618" y="301" width="20" id="price_info_btn" height="20" click="showJobPricingInfo()">
								<mx:icon>@Embed(source='../../../../assets/help_small.png')</mx:icon>
							</mx:LinkButton>
							
						
						</mx:Canvas>
					</mx:ViewStack>
				</mx:HDividedBox>
			</mx:Canvas>
			<!--<mx:LinkButton x="629"
					   y="10"
					   width="38"
					   height="38"
					   click="doSaveTemplate();"
					   id="template_button">
				<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
			</mx:LinkButton>
			<mx:Label x="620"
					  y="46"
					  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Savetemplateas')}"
					  width="64"
					  textAlign="center"/>-->
		
		</mx:Canvas>
		<comp:SmallThrobber id="throbber" height="20" width="20" visible="true" horizontalCenter="0" verticalCenter="0"/>
	</mx:VBox>
</mx:TitleWindow>
