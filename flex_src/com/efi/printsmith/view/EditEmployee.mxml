<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:view="com.efi.printsmith.view.*" xmlns:vo="com.efi.printsmith.vo.*" xmlns:fc="http://www.adobe.com/2006/fc" xmlns:hc="com.hillelcoren.components.*"
width="100%" height="100%" headerHeight="0" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Employees')}" showCloseButton="true" close="{closeWindow()}" 
creationComplete="init()" verticalScrollPolicy="auto" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Employees')}" name="Employee Editor" xmlns:ns1="com.efi.printsmith.components.*" xmlns:ns2="com.adobe.flex.extras.controls.*" xmlns:components="com.efi.printsmith.common.components.*">

<mx:RemoteObject id="dataService" destination="dataService" showBusyCursor="true">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadResult(event)"/>
	<mx:method name="getEmployee" fault="handleFault(event)" result="handleLoadEmployee(event)"/>
	<mx:method name="addUpdate" fault="handleFault(event)" result="handleSaveResult(event)"/>
	<mx:method name="deleteItem" fault="handleFault(event)" result="handleDeleteResult(event)"/>
</mx:RemoteObject>

<mx:RemoteObject id="pressService" destination="dataService" showBusyCursor="true">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPress(event)"/>
</mx:RemoteObject>
<mx:RemoteObject id="copierService" destination="dataService" showBusyCursor="true">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCopier(event)"/>
</mx:RemoteObject>
<mx:RemoteObject id="priceListService" destination="dataService" showBusyCursor="true">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadPriceList(event)"/>
</mx:RemoteObject>
<mx:RemoteObject id="chargeService" destination="dataService" showBusyCursor="true">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadCharge(event)"/>
</mx:RemoteObject>
<mx:RemoteObject id="locationService" destination="dataService" showBusyCursor="true">
	<mx:method name="getAll" fault="handleFault(event)" result="handleLoadLocation(event)"/>
</mx:RemoteObject>

<mx:RemoteObject id="dataServiceTimeCard" destination="dataService" showBusyCursor="true">
		<mx:method name="getByClockInOut" fault="handleFault(event)" result="handleLoadTimeCardResult(event)"/>
	</mx:RemoteObject>


<mx:Producer id="producer" destination="employees"/>
<mx:Consumer id="consumer" destination="employees"  message="messageHandler(event.message)"/>
<mx:Consumer id="notification_consumer" destination="notifications" message="messageHandler(event.message)"/>


<mx:StringValidator id="employeeFirstValidator" source="{firstName_edit}"	property="text"	minLength="2" required="true"/>
<mx:StringValidator id="employeeLastValidator" source="{lastName_edit}"	property="text"	minLength="2" required="true"/>
<mx:NumberValidator id= "timeValidator" source="{hour_edit}" property= "text" maxValue="24" minValue="0" required="false"/>
<mx:NumberValidator id= "timeValidator2" source="{minute_edit}" property= "text" maxValue="59" minValue="0"  required="false"/>




<mx:Script> 
                                  
<![CDATA[
	import com.efi.mdi.view.window.MDIWindow;
	import com.efi.printsmith.data.TimeCard;
	import com.efi.printsmith.model.AutoClockOutDetector;
	import mx.utils.StringUtil;
	import com.efi.printsmith.data.ComLink;
	import com.efi.printsmith.data.ProductionLocations;
	import com.efi.printsmith.data.ChargeCommand;
	import com.efi.printsmith.data.ProductionPress;
	import com.efi.printsmith.data.ProductionCopiers;
	import com.efi.printsmith.data.PreferencesPricingMethod;
	import mx.controls.DateField;
	
	import mx.rpc.Responder;
	import com.efi.printsmith.data.Employee;
	import com.efi.printsmith.data.Address;                        
	import com.efi.printsmith.data.Employee;                          
	import mx.controls.Alert;                                         
	import mx.managers.PopUpManager;                                         
	import mx.containers.TitleWindow;                                         
	import mx.collections.ArrayCollection;                                         
	import mx.rpc.events.ResultEvent;                                         
	import mx.rpc.events.FaultEvent;                                         
	import mx.messaging.messages.AsyncMessage;
	import mx.messaging.messages.IMessage;
    import mx.printing.FlexPrintJob;
    import mx.printing.PrintAdvancedDataGrid;
    import mx.printing.PrintDataGrid;
    import mx.core.Application;
    import mx.validators.Validator;
    import mx.events.ValidationResultEvent;    
    import com.efi.printsmith.events.commandEvents.Employees.*;
    
    [Bindable]
    private var enableSave:Boolean = true;
    
   	[Bindable]
    private var employees:ArrayCollection = new ArrayCollection();
 
    [Bindable]                                         
	public var employee:Employee;
	
	[Bindable] 
	private var presses:ArrayCollection = new ArrayCollection(); 
	
	[Bindable] 
	private var copiers:ArrayCollection = new ArrayCollection(); 
	
	[Bindable] 
	private var pricemethods:ArrayCollection = new ArrayCollection();
		 
	[Bindable] 
	private var charges:ArrayCollection = new ArrayCollection();   
    [Bindable] 
	private var productionLocation:ArrayCollection = new ArrayCollection();                 
    [Bindable]
    private var formIsValid:Boolean = false;
    
    [Bindable]
	private var customerWantType:String = "Due_Today";
	
    [Bindable]
	private var employeeStatus:String = "Active";
	
    private var focussedFormControl:DisplayObject;
    
    [Bindable] public var loadEmployee:Boolean = false;
    
    [Bindable] public var checkDataCount:int;
    
    [Bindable] public var dataCount:int;
    
	public function init():void {
		//consumer.subscribe();
	//	notification_consumer.subscribe();  
		PopUpManager.centerPopUp(this);
		var mdiWin:MDIWindow = Snowmass.getInstance().containerManager.getWindowWithChild(this);
      	mdiWin.title = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, "rStandardMenuText.Employees");
		if(employee==null){
			var titleWindow:EmployeePicker = EmployeePicker(PopUpManager.createPopUp(this, EmployeePicker, true));
			titleWindow.parentContainer = this;
		    titleWindow.setStyle("borderAlpha", 0.9);
		    titleWindow.formIsEmpty = true;
			dataService.getAll("Employee");   
			employee = new Employee();
			employee.active = true;
			employee.comLinks = new ArrayCollection();
		} else {
			loadEmployee = true;
			dataCount = 5;
		}
		pressService.getAll("ProductionPress");
		copierService.getAll("ProductionCopiers");
		priceListService.getAll("PreferencesPricingMethod");
		chargeService.getAll("ChargeCommand");
		locationService.getAll("ProductionLocations");

		var eventPersonal:EmployeeEmployeesPersonalPanelEvent = new EmployeeEmployeesPersonalPanelEvent(canvasPersonal, new mx.rpc.Responder(handleUIPanelEvent, handleUIPanelFault));
		eventPersonal.dispatch();

		var eventProduction:EmployeeEmployeesProductionPanelEvent = new EmployeeEmployeesProductionPanelEvent(canvasProduction, new mx.rpc.Responder(handleUIPanelEvent, handleUIPanelFault));
		eventProduction.dispatch();

		var eventSettings:EmployeeEmployeesSettingsPanelEvent = new EmployeeEmployeesSettingsPanelEvent(canvasSettings, new mx.rpc.Responder(handleUIPanelEvent, handleUIPanelFault));
		eventSettings.dispatch();
		
	}
	
	private function closeWindow():void {
		PopUpManager.removePopUp(this);
	}
	 
	public function handleUIPanelEvent(evt:ResultEvent):void {
		evt.result.panel.enabled = evt.result.enabled;
	}		
	private function handleUIPanelFault(ev:FaultEvent):void {  
	
	}
	
	private function messageHandler(message:IMessage):void
	{
	}	
	public function setEmployee(employee2:Employee):void
	{
		dataService.getEmployee(employee2.id);
	}
	private function handleLoadEmployee(evt:ResultEvent):void
	{
		this.employee = evt.result as Employee;
	 	if(this.employee == null) {
	 		this.employee = new  Employee();
	 		this.employee.active = true;
	 	}
		if( this.employee.employeeCharges == null)
			this.employee.employeeCharges = new ArrayCollection();
		if( this.employee.employeePresses == null)
			this.employee.employeePresses = new ArrayCollection();
		if( this.employee.employeeCopiers == null)
			this.employee.employeeCopiers = new ArrayCollection();
		if( this.employee.employeePricings == null)
			this.employee.employeePricings = new ArrayCollection();
		if( this.employee.productionParents == null)
			this.employee.productionParents = new ArrayCollection();
		if( this.employee.comLinks == null)
			this.employee.comLinks = new ArrayCollection();
		mapFromEmployeeData();

	}
	private function mapFromEmployeeData():void{
		var index:int;
		var i:int;
		var tempCom:ComLink;
		address_editor.setAddress(employee.address);
		title = resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rStandardMenuText.Employees') + "  " + employee.firstName + " "+ employee.lastName;
		customerWantType = employee.customerWant;
		Due.selectedValue = customerWantType;
		if (employee.active) 
			employeeStatus= "Active";
		else
			employeeStatus= "InActive";
		employee_status.selectedValue = employeeStatus;
		
		
		
		
		if(employee.productionParents!=null && employee.productionParents.length>0){
			for each(var productionLocationsObj:ProductionLocations in productionLocation){
				var isProdLocSelected:Boolean = false;
				for(var i:int=0; i < employee.productionParents.length; i++) {
					var productionLocations:ProductionLocations = employee.productionParents.getItemAt(i) as ProductionLocations;
				 	if(productionLocationsObj.id==productionLocations.id){
				 		isProdLocSelected = true;
				 		productionLocationsObj.isSelected = true;
				 		break;
				 	}
				}
				if(!isProdLocSelected){
					productionLocationsObj.isSelected = false;
				}
			}
		} else {
			for each(var productionLocationsObj:ProductionLocations in productionLocation){
				productionLocationsObj.isSelected = false;
			}
		}
		productionLocation.refresh();
		
		if(employee.employeeCharges!=null && employee.employeeCharges.length>0){
			for each(var chargeCommandObj:ChargeCommand in charges){
				var isChargeSelected:Boolean = false;
				for(i=0; i < employee.employeeCharges.length; i++) {	
					var tCharge:ChargeCommand = employee.employeeCharges[i] as ChargeCommand;
					if(chargeCommandObj.id==tCharge.id){
						isChargeSelected = true;
						chargeCommandObj.isSelected = true;
						break;
					}
				}
				if(!isChargeSelected){
					chargeCommandObj.isSelected = false;
				}
			}
		} else {
			for each(var chargeCommandObj:ChargeCommand in charges){
				chargeCommandObj.isSelected = false;
			}
		}
		charges.refresh();
		
		if(employee.employeeCopiers!=null && employee.employeeCopiers.length>0){
			for each(var productionCopiersObj:ProductionCopiers in copiers){
				var isCopierSelected:Boolean = false;
				for(var i:int=0; i < employee.employeeCopiers.length; i++) {
					var productionCopiers:ProductionCopiers = employee.employeeCopiers.getItemAt(i) as ProductionCopiers;
					if(productionCopiers.id == productionCopiersObj.id){
						isCopierSelected = true;
						productionCopiersObj.isSelected = true;
						break;
					}
				}
				if(!isCopierSelected){
					productionCopiersObj.isSelected = false;
				}
			 	/* index = findItem(productionCopiers.id, copiers);
			 	tempArray.push(index); */
			}
		} else {
			for each(var productionCopiersObj:ProductionCopiers in copiers){
				productionCopiersObj.isSelected = false;
			}
		}
		copiers.refresh();
		//copier_list.selectedIndices = tempArray;
		
		
		if(employee.employeePricings!=null && employee.employeePricings.length>0){
			for each(var preferencesPricingMethodObj:PreferencesPricingMethod in pricemethods){
				var isPricingMethodSelected:Boolean = false;
				for(var i:int=0; i < employee.employeePricings.length; i++) {
					var preferencesPricingMethod:PreferencesPricingMethod = employee.employeePricings.getItemAt(i) as PreferencesPricingMethod;
				 	if(preferencesPricingMethodObj.id == preferencesPricingMethod.id){
				 		isPricingMethodSelected = true;
				 		preferencesPricingMethodObj.isSelected = true;
				 		break;
				 	}
				}
				if(!isPricingMethodSelected){
					preferencesPricingMethodObj.isSelected = false;
				}
			}
		} else {
			for each(var preferencesPricingMethodObj:PreferencesPricingMethod in pricemethods){
				preferencesPricingMethodObj.isSelected = false;
			}
		}
		pricemethods.refresh();
		
		
		if(employee.employeePresses!=null && employee.employeePresses.length>0){
			for each(var productionPressObj:ProductionPress in presses){
				var isPressSelected:Boolean = false;
				for(var i:int=0; i < employee.employeePresses.length; i++) {
					var productionPress:ProductionPress = employee.employeePresses.getItemAt(i) as ProductionPress;
				 	if(productionPressObj.id == productionPress.id){
				 		isPressSelected = true;
				 		productionPressObj.isSelected = true;
				 		break;
				 	}
				}
				if(!isPressSelected){
					productionPressObj.isSelected = false;
				}
			}
		} else {
			for each(var productionPressObj:ProductionPress in presses){
				productionPressObj.isSelected = false;
			}
		}
		presses.refresh();
		
		if (employee.comLinks != null){
			phone_edit.text = "";
			mobile_edit.text = "";
			email_edit.text = "";
			
			
			 for (var t:int =0; t < employee.comLinks.length ; t++)
		    {	
		    	tempCom = employee.comLinks.getItemAt(t) as ComLink;
		    	switch (tempCom.type){
		    		case "Phone" :
		    			phone_edit.text = tempCom.value;
		    			break;
		    		case "Cell":
		    			mobile_edit.text = tempCom.value;
		    			break;
		    		/* case "Fax":
		    			fax_edit.text = tempCom.value;
		    			break; */
		    		case "E-Mail":
		    			email_edit.text = tempCom.value;
		    			break;
		    		/* case "Other":
		    			other_edit.text = tempCom.value;
		    			break; */
		    	}
		    }
		}
		
	}	
	
	private function doRevert():void{
		dataService.getEmployee(employee.id);
	}
	private function mapToEmployeeData():void {
		var tempCom:ComLink;
		var index:int;
		
		employee.firstName = firstName_edit.text;
		employee.lastName = lastName_edit.text;
		
		employee.address = address_editor.getAddress();
		
		employee.customerWant = Due.selectedValue.toString();
		
		if (employee_status.selectedValue == "Active")
			employee.active= true;
		else
			employee.active = false;
			
		
		//employee.rate= parseFloat(rate_edit.text); 
		employee.allowOverrideCost = override_cost_check.selected;
		employee.costingAmounts = hide_cost_amount_check.selected;
		employee.hideNonReleaseProduction = hide_non_production_items.selected;
		employee.hideEstimateTimeTracker = hide_est_time_tracker.selected;
		employee.productionSettings = modify_production_settings.selected;
		employee.trackerNextLocation = tracker_next_location.selected;
		employee.trackerClockIn = show_tracker_console.selected;
		employee.showWorkCenter = show_work_center.selected;
		/* employee.pinRequired = requirePin.selected;
		employee.pin = pin_edit.text; */
		employee.magCardReader = allow_mag_reader.selected
		/* employee.includeInvoice = invoice_check.selected;
		employee.includeEstimate = estimate_check.selected;
		employee.includeJobs = jobs_check.selected;
		employee.includeJobCharges = job_charges.selected;
		employee.includeInvoiceCharges = invoice_level_charges.selected; */

		employee.onlyShowProductionParents = show_check_production.selected;
		employee.allPricingMethods = all_pricing.selected;
		employee.allChargeTypes = all_charge_types.selected;
		employee.allPresses	= all_presses.selected;
		employee.allCopiers	= all_copiers.selected;
		employee.anyPastDue = any_past_due.selected;
		/* employee.showMessageClockin= show_message_clockIn.selected;
		employee.showMessageClockout = show_message_clockOut.selected; */
		employee.autoHour = parseInt(hour_edit.text);
		employee.autoMin = parseInt(minute_edit.text);
		//employee.message = message.text;
		employee.exportCode = parseInt(export_code_edit.text);
		employee.socialSecurity = ssn_edit.text;
	
		if (phone_edit.text.length >0){
	 		index = findCom("Phone", employee.comLinks);
	 		if (index != -1){
	 			
	 			tempCom = employee.comLinks.getItemAt(index) as ComLink;
		 		tempCom.value = phone_edit.text;
		 		employee.comLinks.setItemAt(tempCom, index);
		 	}
		 	else{
		 		tempCom = new ComLink();
	 		tempCom.value = phone_edit.text;
	 		tempCom.type = "Phone";
	 		employee.comLinks.addItem(tempCom);
	 		}
	 	
	 }
	 if (mobile_edit.text.length >0){
	 	index = findCom("Cell", employee.comLinks);
	 	if ( index != -1){
	 	
	 		tempCom = employee.comLinks.getItemAt(index) as ComLink;
	 		tempCom.value = mobile_edit.text;
	 		employee.comLinks.setItemAt(tempCom, index);
	 	}
	 	else{
	 		tempCom = new ComLink();
	 		tempCom.value = mobile_edit.text;
	 		tempCom.type = "Cell"
	 		employee.comLinks.addItem(tempCom);
	 		
	 	}
	 }
	 
	 if (email_edit.text.length >0){
	 	index = findCom("E-Mail", employee.comLinks);
	 	if ( index != -1){
	 		tempCom = employee.comLinks.getItemAt(index) as ComLink;
	 		tempCom.value = email_edit.text;
	 		employee.comLinks.setItemAt(tempCom, index);
	 	}
	 	else{
	 		tempCom = new ComLink();
	 		tempCom.value = email_edit.text;
	 		tempCom.type = "E-Mail"
	 		employee.comLinks.addItem(tempCom);
	 		
	 	}
	 }
	
			
	}
	private function findCom(name:String, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (name == element.type) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}
	
	private function doSave():void {
		mapToEmployeeData();
		if(validateEmployee()){
			doParent();
			doCharge();
			doCopier();
			doPress();
			doPricingMethod();
			dataService.addUpdate(employee);
		}                            		
	}
	
	private function validateEmployee():Boolean {
		if(employee!=null){
			if(employee.firstName==null || StringUtil.trim(employee.firstName)==""){
				Alert.show("Please enter First Name");
				return false;
			}
			if(employee.lastName==null || StringUtil.trim(employee.lastName)==""){
				Alert.show("Please enter Last Name");
				return false;
			}
			if(employee.pinRequired) {
				if(employee.pin==null || StringUtil.trim(employee.pin)==""){
					Alert.show("Please enter PIN Number");
					return false;
				}
				if(employee.pin.length<4){
					Alert.show("An emplyee's PIN Number must be atleast 4 digits and can be no longer than 9 digits");
					return false;
				}
			}
		}
		return true;
	} 
	
		
    private function doNew():void {
	    employee = new Employee();
	    employee.active = true;
	    employee.comLinks = new ArrayCollection();
	    setEmployee(employee);
	 	
	}
	
	private function checkDeleteBtnEnability(employeeId:Number):Boolean {
		if(employee!=null){
			if(isNaN(employeeId) || employeeId==0){
				return false;
			} else {
				return true;
			}
		}
		
		return false;
		
	}  
	
	private function doDelete():void {
		if(employee.clockIn || employee.clockBreak){
			Alert.show(resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'employeeTimeCardsCmd.Theemployeetimecards'));
			return;
		} else {
	    	dataService.deleteItem("Employee",employee.id);
	 	}
	}
	
	private function handleDeleteResult(event:ResultEvent):void {
		doNew();
		dataService.getAll("Employee");
	}  
	private function doGet():void{
		var titleWindow:EmployeePicker = EmployeePicker(PopUpManager.createPopUp(this, EmployeePicker, true));
		titleWindow.parentContainer = this;
	    titleWindow.setStyle("borderAlpha", 0.9);
	    titleWindow.formIsEmpty = true; 
	   	    
	} 
	private function findItemID(id:int, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (id == element.id) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}   
	private function doNext():void {  
		var itemp:int;
		itemp = findItemID(employee.id, employees);
		itemp++;
		if (itemp == employees.length){
			itemp = employees.length - 1;
		}
		employee = employees.getItemAt(itemp,0) as Employee;   
	    setEmployee(employee);                         
	}
	private function doPrev():void {              
	    var itemp:int;
		itemp = findItemID(employee.id, employees);
		itemp--;
		if (itemp < 0){
			itemp = 0; 
		}
		employee = employees.getItemAt(itemp,0) as Employee;   
	    setEmployee(employee);                                           
	}                                                	
	private function send():void
	{
		var message:IMessage = new AsyncMessage();
		message.body.accounts = "*";
		//producer.send(message);
	}      
	
	private function findItem(id:Number, array:ArrayCollection):int {
		for each(var element:Object in array) {
			if (id == element.id) {
				return array.getItemIndex(element);
			}
		}
		return -1;
	}
	
	
	
	
	private function handleSaveResult(ev:ResultEvent):void {
		
		this.employee = ev.result as Employee;
		dataService.getAll("Employee");
		var autoClockOutDetectortList:ArrayCollection = parentDocument.autoClockOutDetectortList as ArrayCollection;
		var count:int=-1;
		var checkFlag:Boolean = false;
		for each(var autoClockOutDetectorObj:AutoClockOutDetector in autoClockOutDetectortList){
			count++;
			if(autoClockOutDetectorObj.employee.id==this.employee.id){
				checkFlag = true;
				break;
			}
		}
		if(count!=-1 && checkFlag){
			var autoClockOutDetectorObject:AutoClockOutDetector = autoClockOutDetectortList.getItemAt(count) as AutoClockOutDetector;
			if(this.employee.autoHour==0 && this.employee.autoMin==0){
				autoClockOutDetectorObject.stop();
				autoClockOutDetectortList.removeItemAt(count);
			} else {
				if(autoClockOutDetectorObject.employee.autoHour!=this.employee.autoHour || autoClockOutDetectorObject.employee.autoMin!=this.employee.autoMin){
					autoClockOutDetectorObject.employee = this.employee;
				}
			}
		} else {
			if(employee.clockIn || employee.clockBreak){
				if(employee.autoHour!=0 || employee.autoMin!=0){
					dataServiceTimeCard.getByClockInOut("TimeCard",employee);
				}
			}
		}
		
	}
	
	private function handleLoadTimeCardResult(ev:ResultEvent):void {
		var timecardArray:ArrayCollection = ev.result as ArrayCollection;
		var autoClockOutDetector:AutoClockOutDetector = new AutoClockOutDetector();
		autoClockOutDetector.employee = employee;
		autoClockOutDetector.timeCard =	timecardArray.getItemAt(0,0) as TimeCard; 
		autoClockOutDetector.start();
		parentDocument.autoClockOutDetectortList.addItem(autoClockOutDetector);
	}
	
     
	private function handleLoadResult(ev:ResultEvent):void {
		employees = ev.result as ArrayCollection;
	}
	
	private function handleLoadPress(ev:ResultEvent):void {
	 	
	 	presses = ev.result as ArrayCollection;
	 	if(loadEmployee){
	 		checkDataCount++;
	 		if(checkDataCount==dataCount){
	 			loadEmployee = false;
	 			dataService.getEmployee(employee.id);   
	 		}
	 	}
		
	}   
	private function handleLoadCopier(ev:ResultEvent):void {
	 	
	 	
	 	copiers = ev.result as ArrayCollection;
	 	if(loadEmployee){
	 		checkDataCount++;
	 		if(checkDataCount==dataCount){
	 			loadEmployee = false;
	 			dataService.getEmployee(employee.id);   
	 		}
	 	}
		
	} 
	private function handleLoadCharge(ev:ResultEvent):void {
	 	
	 	charges = ev.result as ArrayCollection;
	 	if(loadEmployee){
	 		checkDataCount++;
	 		if(checkDataCount==dataCount){
	 			loadEmployee = false;
	 			dataService.getEmployee(employee.id);   
	 		}
	 	}
		
	} 
	private function handleLoadLocation(ev:ResultEvent):void {
	 	
	 	productionLocation = ev.result as ArrayCollection;
	 	if(loadEmployee){
	 		checkDataCount++;
	 		if(checkDataCount==dataCount){
	 			loadEmployee = false;
	 			dataService.getEmployee(employee.id);   
	 		}
	 	}
	 	
		
	}         
	private function handleLoadPriceList(ev:ResultEvent):void {
	 	
	 	pricemethods = ev.result as ArrayCollection;
	 	if(loadEmployee){
	 		checkDataCount++;
	 		if(checkDataCount==dataCount){
	 			loadEmployee = false;
	 			dataService.getEmployee(employee.id);   
	 		}
	 	}
		
	}
	
	
	private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error");                                 
	}
	private function validateForm(event:Event):void 
    {                    
        focussedFormControl = event.target as DisplayObject;    

        formIsValid = true;            

        validate(employeeFirstValidator);
        validate(employeeLastValidator);
        validate(timeValidator);
        validate(timeValidator2)
      
        
        
    }
 
    private function validate(validator:Validator):Boolean
	{                
        var validatorSource:DisplayObject = validator.source as DisplayObject;
     	var suppressEvents:Boolean = (validatorSource != focussedFormControl);
        var event:ValidationResultEvent = validator.validate(null, suppressEvents); 
        var currentControlIsValid:Boolean = (event.type == ValidationResultEvent.VALID);
		formIsValid = formIsValid && currentControlIsValid;
         
		return currentControlIsValid;
	}
	private function doShowTime():void{
		var temp1:String;
		var temp2:String;
		var ampm: String;
		var hour:int;
		var min:int;
		if (formIsValid){
			temp1 = hour_edit.text;
			hour = parseInt(hour_edit.text);
			temp2 = minute_edit.text;	
			if ( hour > 12){
				ampm = 'PM';
				temp1= (hour - 12).toString();
			}
			else
				ampm = 'AM';
			
			real_time.text = temp1+":"+temp2+ampm;
			}
	}
	private function doPricingMethod():void{
		/* var tempPriceArray:Array = new Array();
		var i:int;
		var tPrice:PreferencesPricingMethod;
		employee.employeePricings = new ArrayCollection();
		tempPriceArray = pricing_methods.selectedItems as Array;
		for(i=0; i < tempPriceArray.length; i++)
		{
		 tPrice = tempPriceArray[i];
		 employee.employeePricings.addItem(tPrice);
		} */
		employee.employeePricings = new ArrayCollection();
		for each(var preferencesPricingMethod:PreferencesPricingMethod in pricemethods){
			if(preferencesPricingMethod.isSelected){
				employee.employeePricings.addItem(preferencesPricingMethod);
			}
		}
		 
	}
	private function doCopier():void{
		/* var tempcopyArray :Array= new Array();
		var tCopier:ProductionCopiers;
		var i:int;
		employee.employeeCopiers = new ArrayCollection();
		tempcopyArray = copier_list.selectedItems as Array;
		for(i=0; i < tempcopyArray.length; i++)
		{
		 tCopier = tempcopyArray[i];
		 employee.employeeCopiers.addItem(tCopier);
		} */
		employee.employeeCopiers = new ArrayCollection();
		for each(var productionCopiers:ProductionCopiers in copiers){
			if(productionCopiers.isSelected){
				employee.employeeCopiers.addItem(productionCopiers);
			}
		}
		 
	}
	private function doPress():void{
		/* var temppressArray :Array= new Array();
		var i:int;
		var tPress:ProductionPress;
		employee.employeePresses = new ArrayCollection();
		temppressArray = press_list.selectedItems as Array;
		for(i=0; i < temppressArray.length; i++)
		{
		 tPress = temppressArray[i];
		 employee.employeePresses.addItem(tPress);
		} */
		employee.employeePresses = new ArrayCollection();
		for each(var productionPress:ProductionPress in presses){
			if(productionPress.isSelected){
				employee.employeePresses.addItem(productionPress);
			}
		}
		 
	}
	private function doCharge():void{
		/* var tempchargeArray :Array= new Array();
		var i:int;
		var tCharge:ChargeCommand;
		employee.employeeCharges = new ArrayCollection();
		tempchargeArray = charge_types.selectedItems as Array;
		for(i=0; i < tempchargeArray.length; i++)
		{
		 tCharge = tempchargeArray[i];
		 employee.employeeCharges.addItem(tCharge);
		} */
		employee.employeeCharges = new ArrayCollection();
		for each(var chargeCommand:ChargeCommand in charges){
			if(chargeCommand.isSelected){
				employee.employeeCharges.addItem(chargeCommand);
			}
		}
	}
	private function doParent():void{
		/* var tempparentArray :Array= new Array();
		var i:int;
		var tProduction:ProductionLocations
		employee.productionParents = new ArrayCollection();
		tempparentArray = production_parents.selectedItems as Array;
		for(i=0; i < tempparentArray.length; i++)
		{
		 tProduction = tempparentArray[i];
		 employee.productionParents.addItem(tProduction);
		} */
		employee.productionParents = new ArrayCollection();
		for each(var productionLocations:ProductionLocations in productionLocation){
			if(productionLocations.isSelected){
				employee.productionParents.addItem(productionLocations);
			}
		}
	}
	
	private function clearSelectedPricings(event:Event):void {
		for each(var preferencesPricingMethod:PreferencesPricingMethod in pricemethods){
			if(event.currentTarget.selected){
				preferencesPricingMethod.isSelected = false;
			}		
		}
		pricemethods.refresh();
	}
	
	private function clearSelectedCharges(event:Event):void {
		for each(var chargeCommand:ChargeCommand in charges){
			if(event.currentTarget.selected){
				chargeCommand.isSelected = false;
			}		
		}
		charges.refresh();
	}
	
	private function clearSelectedCopiers(event:Event):void {
		for each(var productionCopiers:ProductionCopiers in copiers){
			if(event.currentTarget.selected){
				productionCopiers.isSelected = false;
			}		
		}
		copiers.refresh();
	}
	
	private function clearSelectedPresses(event:Event):void {
		for each(var productionPress:ProductionPress in presses){
			if(event.currentTarget.selected){
				productionPress.isSelected = false;
			}		
		}
		presses.refresh();
	}
]]>

</mx:Script>
	<mx:Canvas width="100%" height="100%"  verticalScrollPolicy="auto">
		<mx:Button x="10" y="10" width="38" height="38" click="doPrev();">
			<mx:icon>@Embed(source='../../../../assets/previous_page.png')</mx:icon>
		</mx:Button>
		<mx:Button x="69" y="10" width="38" height="38" click="doNext();">
			<mx:icon>@Embed(source='../../../../assets/next_page.png')</mx:icon>
		</mx:Button>
		<mx:Label x="0" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'invoiceDeliveryTicketCmd.Previous')}" width="61" textAlign="center"/>
		<mx:Label x="69" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Next')}" width="49" textAlign="center"/>
		<mx:Button x="171" y="10" width="38" height="38" click="doSave();" enabled="{enableSave}">
			<mx:icon>@Embed(source='../../../../assets/file.png')</mx:icon>
		</mx:Button>
		<mx:Label x="171" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Save')}" width="38" textAlign="center"/>
		<mx:Button x="217" y="10" width="38" height="38" click="doGet();">
			<mx:icon>@Embed(source='../../../../assets/get.png')</mx:icon>
		</mx:Button>
		<mx:Label x="217" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Get')}" width="38" textAlign="center"/>
		<mx:Button x="263" y="10" width="38" height="38" click="doNew();">
			<mx:icon>@Embed(source='../../../../assets/new.png')</mx:icon>
		</mx:Button>
		<components:CustomDeleteButtonComponent x="370" y="10" width="38" height="38" enabled="{checkDeleteBtnEnability(employee.id)}"
			clickFuncName="doDelete" deleteLabel="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Employee')}"/>
		<!--<mx:Button x="370" y="10" width="38" height="38" click="doDelete();" enabled="{checkDeleteBtnEnability(employee)}">
			<mx:icon>@Embed(source='../../../../assets/delete.png')</mx:icon>
		</mx:Button>-->
	    <mx:Label x="360" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Delete')}" width="58" textAlign="center"/>
		<mx:Button x="493" y="10" width="38" height="38" click="doRevert()">
			<mx:icon>@Embed(source='../../../../assets/revert.png')</mx:icon>
		</mx:Button>
		<mx:Label x="483" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Revert')}" width="58" textAlign="center"/>
		<mx:Label x="263" y="46" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.New')}" width="38" textAlign="center"/>
		<mx:TabNavigator x="0" y="80" width="100%" height="100%" creationPolicy="all">
			<mx:Canvas id="canvasSettings" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Settings')}" width="100%" height="100%">	
				<mx:Label x="51" y="19" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.IDNumber')}" width="71" textAlign="right"/>
				<mx:Text x="143" y="19" id="employeeID" text="{employee.employeeId}" width="106" />
				<mx:Label x="47" y="80" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.First')}" textAlign="right"/>
				<mx:Label x="47" y="106" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Last')}" textAlign="right"/>
				<mx:TextInput x="124" y="78" id="firstName_edit" text="{employee.firstName}" width="205"/>
				<mx:TextInput x="124" y="104" id="lastName_edit" text="{employee.lastName}" width="205"/>
				<mx:Label x="73" y="136" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Phone')}" textAlign="right"/>
				<mx:Label x="73" y="164" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Mobile')}" textAlign="right"/>
				<mx:Label x="79" y="190" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.EMail')}" textAlign="right"/>
				<mx:Label x="88" y="216" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.SSN')}" textAlign="right"/>
				<mx:Label x="41" y="246" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.ExportCode')}" />
				<mx:TextInput x="127" y="134" id="phone_edit"/>
				<mx:TextInput x="127" y="162" id="mobile_edit"/>
				<mx:TextInput x="127" y="188" id="email_edit"/>
				<mx:TextInput x="127" y="214" id="ssn_edit" text="{employee.socialSecurity}"/>
				<mx:TextInput x="127" y="244" id="export_code_edit" text="{employee.exportCode}" />
				<ns1:AddressEditor x="381" y="78" openedFromEmployee="true" id="address_editor" height="157" width="325"/>
			</mx:Canvas>
			<mx:Canvas id="canvasPersonal" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Personal')}" width="100%" height="100%">	
				<mx:Label x="10" y="42" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Rate')}"/>
				<mx:Panel x="10" y="68" width="295" height="133" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Status')}">
					<mx:RadioButtonGroup  id="employee_status" selectedValue="{employeeStatus}"/>
					<mx:RadioButton x="10" y="19" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Active')}" groupName="employee_status" width="78" value="Active"/>
					<mx:RadioButton x="10" y="45" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Inactive')}" groupName="employee_status" value="InActive"/>
				</mx:Panel>
				<mx:Panel x="368" y="68" width="349" height="133" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.PINSettings')}">
					<components:CustomCheckBoxComponent x="10" y="10" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.RequirePIN')}" width="282"
						dataHolder="{employee}" variableName="pinRequired" customText="{employee.pinRequired}"
						selectedValue="true" deSelectedValue="false" defaultValue="false"/>
					<mx:Label x="10" y="40" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.PIN')}"/>
					<components:CustomStringTextInputComponent x="47" y="38" restrict="0-9" displayAsPassword="true" maxChars="9"
						dataHolder="{employee}" variableName="pin" customText="{employee.pin}" enabled="{employee.pinRequired}"/>
				</mx:Panel>
				<components:CustomNumericTextInputComponent x="54" y="40"
					dataHolder="{employee}" variableName="rate" customText="{employee.rate}"
					precision="2" rounding="nearest"/>
				<!--<mx:TextInput  restrict="0-9\." x="54" y="40" id="rate_edit" text="{Snowmass.getCurrencyFormatter(false, 2).format(employee.rate)}"/>-->
				<mx:Panel x="10" y="224" width="295" height="290" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.EditableProductionOp')}">
					<mx:CheckBox x="10" y="10" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Allowedtooverridecos')}" id="override_cost_check" selected="{employee.allowOverrideCost}"/>
					<mx:CheckBox x="10" y="40" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Hidecostingamounts')}" id="hide_cost_amount_check" selected="{employee.costingAmounts}"/>
					<mx:CheckBox x="10" y="70" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Hideitemsnotreleased')}" id="hide_non_production_items" selected="{employee.hideNonReleaseProduction}"/>
					<mx:CheckBox x="10" y="100" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.HideestimatedtimeinT')}" id="hide_est_time_tracker" selected="{employee.hideEstimateTimeTracker}"/>
					<mx:CheckBox x="10" y="130" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Allowtomodifyproduct')}" id="modify_production_settings" selected="{employee.productionSettings}"/>
					<mx:CheckBox x="10" y="160" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.AllowTrackerNEXTloca')}" id="tracker_next_location" selected="{employee.trackerNextLocation}"/>
					<mx:CheckBox x="10" y="190" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.AutoshowTrackerConso')}" id="show_tracker_console" selected="{employee.trackerClockIn}"/>
					<mx:CheckBox x="10" y="218" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.AutoshowMyWorkCenter')}" id="show_work_center" selected="{employee.showWorkCenter}"/>
				</mx:Panel>
				<mx:Panel x="368" y="255" width="349" height="86" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.MagneticCardReaderAu')}">
					<mx:CheckBox x="10" y="10" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.Allowauthenticationw')}" id="allow_mag_reader" selected="{employee.magCardReader}"/>
				</mx:Panel>
				<mx:Panel x="368" y="405" width="349" height="109" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeEmpClockOptionsCmd.AutoOut')}">
					<mx:Label x="22" y="10" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeEmpClockOptionsCmd.Hour')}" textAlign="right"/>
					<mx:Label x="11" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeEmpClockOptionsCmd.Minute')}" textAlign="right"/>
					<mx:TextInput x="66" y="8" width="79" id="hour_edit" focusOut="doShowTime();" change="validateForm(event);" text="{employee.autoHour}"/>
					<mx:TextInput x="66" y="37" width="79" id="minute_edit" text="{employee.autoMin}" focusOut="doShowTime();" change="validateForm(event);"/>
					<mx:Text x="180" y="23" width="105" height="20" id="real_time" enabled="false"/>
				</mx:Panel>
				<!--<mx:Panel x="10" y="522" width="796" height="173" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeEmpClockOptionsCmd.Message')}" >
					<mx:TextInput x="10" y="10" width="746" height="79" id="message" text="{employee.message}"/>
					<mx:CheckBox x="10" y="97" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeEmpClockOptionsCmd.ShowmessageatclockIN')}" id="show_message_clockIn" selected="{employee.showMessageClockin}"/>
					<mx:CheckBox x="239" y="97" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeEmpClockOptionsCmd.ShowmessageatclockOU')}" id="show_message_clockOut" selected="{employee.showMessageClockout}"/>
				</mx:Panel>-->
			</mx:Canvas>
			<mx:Canvas id="canvasProduction" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.ProductionFilter')}" width="100%" height="100%">	
				<mx:Panel x="10" y="30" width="280" height="233"  layout="absolute" title="Include">
					<components:CustomCheckBoxComponent x="10" y="10" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Invoices')}" 
						dataHolder="{employee}" variableName="includeInvoice" customText="{employee.includeInvoice}" 
						selectedValue="true" deSelectedValue="false" defaultValue="false" width="196"/>
					<components:CustomCheckBoxComponent x="10" y="40" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Estimates')}" 
						dataHolder="{employee}" variableName="includeEstimate" customText="{employee.includeEstimate}" 
						selectedValue="true" deSelectedValue="false" defaultValue="false" width="212"/>
					<components:CustomCheckBoxComponent x="31" y="70" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Jobs')}" 
						dataHolder="{employee}" variableName="includeJobs" customText="{employee.includeJobs}" 
						selectedValue="true" deSelectedValue="false" defaultValue="false" enabled="{employee.includeInvoice || employee.includeEstimate}"/>
					<components:CustomCheckBoxComponent x="66" y="100" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Charges')}" 
						dataHolder="{employee}" variableName="includeJobCharges" customText="{employee.includeJobCharges}" 
						selectedValue="true" deSelectedValue="false" defaultValue="false" enabled="{(employee.includeInvoice || employee.includeEstimate) &amp;&amp; employee.includeJobs}"/>
					<components:CustomCheckBoxComponent x="10" y="143" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.InvoiceLevelCharges')}" 
						dataHolder="{employee}" variableName="includeInvoiceCharges" customText="{employee.includeInvoiceCharges}" 
						selectedValue="true" deSelectedValue="false" defaultValue="false" enabled="{employee.includeInvoice || employee.includeEstimate}"/>
				</mx:Panel>
				<mx:Panel x="309" y="30" width="227" height="255" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.CustomerWantedBy')}">
					<mx:RadioButtonGroup id="Due" selectedValue="{customerWantType}"/>
					<mx:RadioButton x="10" y="20" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.DueToday')}" groupName="Due" id="dueToday" value="Due_Today"/>
					<mx:RadioButton x="10" y="46" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.DueTomorrow')}" groupName="Due" id="dueTomorrow" value="Due_Tomorrow"/>
					<mx:RadioButton x="10" y="76" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.DueThisWeek')}" groupName="Due" height="18" id="duethisweek" value="Due_This_Week"/>
					<mx:RadioButton x="10" y="98" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.DueNext7Days')}" groupName="Due" id="duenextweek" value="Due_Next"/>
					<mx:RadioButton x="10" y="124" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.DueAnytime')}" groupName="Due" id="dueanytime" value="Due_Any_Time"/>
					<mx:CheckBox x="10" y="154" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.AnyPastDue')}" id="any_past_due" selected="{employee.anyPastDue}"/>
				</mx:Panel>
				<mx:Panel x="556" y="30" width="316" height="255" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.ProductionParents')}">
					<!--<mx:List x="10" y="35" id="production_parents" width="100%" dataProvider="{productionLocation}" focusOut="doParent();" labelField="name" allowMultipleSelection="true"></mx:List>-->
					<mx:DataGrid x="10" y="35" width="100%" height="110" dataProvider="{productionLocation}">
						<mx:columns>
							<mx:DataGridColumn headerText=" " sortable="false" width="200">
								<!--<mx:headerRenderer>
									<mx:Component>
										<components:CheckBoxHeaderRenderer unCheckDisabledField="isDisabled"/>
									</mx:Component>
								</mx:headerRenderer>-->
								<mx:itemRenderer>
									<mx:Component>
										<components:CustomCheckBoxComponent 
											datagridControl="true" variableName="isSelected" customText="{data.isSelected}"
											selectedValue="true" deSelectedValue="false" defaultValue="false"/>
									</mx:Component>
								</mx:itemRenderer>
							</mx:DataGridColumn>
							<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'workflowCmd.ProductionParents')}" dataField="name" width="800"/>
						</mx:columns>
					</mx:DataGrid> 
					<mx:CheckBox x="10" y="5" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'employeeMgrCmd.OnlyshowcheckedProdu')}" id="show_check_production" selected="{employee.onlyShowProductionParents}"/>
				</mx:Panel>
				<mx:Panel x="10" y="321" width="323" height="200" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.PricingMethods')}">
					<mx:CheckBox x="10" y="10" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.UseallPricingMethods')}" id="all_pricing" click="{clearSelectedPricings(event)}" selected="{employee.allPricingMethods}"/>
					<mx:DataGrid x="10" y="40" width="283"  height="110" dataProvider="{pricemethods}">
						<mx:columns>
							<mx:DataGridColumn headerText=" " sortable="false" width="200">
								<!--<mx:headerRenderer>
									<mx:Component>
										<components:CheckBoxHeaderRenderer unCheckDisabledField="isDisabled" click="{outerDocument.employee.allPricingMethods=false}"/>
									</mx:Component>
								</mx:headerRenderer>-->
								<mx:itemRenderer>
									<mx:Component>
										<components:CustomCheckBoxComponent 
											datagridControl="true" variableName="isSelected" customText="{data.isSelected}"
											selectedValue="true" deSelectedValue="false" defaultValue="false"
											click="{outerDocument.employee.allPricingMethods=false}"/>
									</mx:Component>
								</mx:itemRenderer>
							</mx:DataGridColumn>
							<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'workflowCmd.PricingMethods')}" dataField="title" width="800"/>
						</mx:columns>
					</mx:DataGrid> 
					<!--<mx:List x="10" y="40" focusOut="doPricingMethod()" width="283"  height="110" id="pricing_methods" dataProvider="{pricemethods}" labelField="title" allowMultipleSelection="true" itemClick="{employee.allPricingMethods=false}"></mx:List>-->
				</mx:Panel>
				<mx:Panel x="365" y="321" width="368" height="200" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.ChargeType')}">
					<mx:CheckBox x="10" y="10" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.UseallChargeTypes')}" id="all_charge_types" click="{clearSelectedCharges(event)}" selected="{employee.allChargeTypes}"/>
					<mx:DataGrid x="10" y="40" width="318" height="110" dataProvider="{charges}">
						<mx:columns>
							<mx:DataGridColumn headerText=" " sortable="false" width="200">
								<!--<mx:headerRenderer>
									<mx:Component>
										<components:CheckBoxHeaderRenderer unCheckDisabledField="isDisabled" click="{outerDocument.employee.allChargeTypes=false}"/>
									</mx:Component>
								</mx:headerRenderer>-->
								<mx:itemRenderer>
									<mx:Component>
										<components:CustomCheckBoxComponent 
											datagridControl="true" variableName="isSelected" customText="{data.isSelected}"
											selectedValue="true" deSelectedValue="false" defaultValue="false"
											click="{outerDocument.employee.allChargeTypes=false}"/>
									</mx:Component>
								</mx:itemRenderer>
							</mx:DataGridColumn>
							<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'workflowCmd.ChargeType')}" dataField="name" width="800"/>
						</mx:columns>
					</mx:DataGrid> 
					<!--<mx:List x="10" y="40" width="318" height="110" id="charge_types" dataProvider="{charges}" labelField="name" allowMultipleSelection="true" focusOut="doCharge();" itemClick="{employee.allChargeTypes=false}"></mx:List>-->
				</mx:Panel>
				<mx:Panel x="10" y="553" width="323" height="200" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Press')}">
					<mx:CheckBox x="10" y="10" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.UseallPresses')}" id="all_presses" click="{clearSelectedPresses(event)}" selected="{employee.allPresses}"/>
					<mx:DataGrid x="10" y="40" width="283" height="110" dataProvider="{presses}">
						<mx:columns>
							<mx:DataGridColumn headerText=" " sortable="false" width="200">
								<!--<mx:headerRenderer>
									<mx:Component>
										<components:CheckBoxHeaderRenderer unCheckDisabledField="isDisabled" click="{outerDocument.employee.allPresses=false}"/>
									</mx:Component>
								</mx:headerRenderer>-->
								<mx:itemRenderer>
									<mx:Component>
										<components:CustomCheckBoxComponent 
											datagridControl="true" variableName="isSelected" customText="{data.isSelected}"
											selectedValue="true" deSelectedValue="false" defaultValue="false"
											click="{outerDocument.employee.allPresses=false}"/>
									</mx:Component>
								</mx:itemRenderer>
							</mx:DataGridColumn>
							<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'workflowCmd.Press')}" dataField="name" width="800"/>
						</mx:columns>
					</mx:DataGrid> 
					<!--<mx:List x="10" y="40" width="283" height="110" id="press_list" dataProvider="{presses}" labelField="name" allowMultipleSelection="true" focusOut="doPress();" itemClick="{employee.allPresses=false}"> </mx:List>-->
				</mx:Panel>
				<mx:Panel x="365" y="553" width="368" height="200" layout="absolute" title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.Copier')}">
					<mx:CheckBox x="10" y="10" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'workflowCmd.UseallCopiers')}" id="all_copiers" click="{clearSelectedCopiers(event)}" selected="{employee.allCopiers}"/>
					<mx:DataGrid x="10" y="40" width="318" height="110" dataProvider="{copiers}">
						<mx:columns>
							<mx:DataGridColumn headerText=" " sortable="false" width="200">
								<!--<mx:headerRenderer>
									<mx:Component>
										<components:CheckBoxHeaderRenderer unCheckDisabledField="isDisabled" click="{outerDocument.employee.allCopiers=false}"/>
									</mx:Component>
								</mx:headerRenderer>-->
								<mx:itemRenderer>
									<mx:Component>
										<components:CustomCheckBoxComponent 
											datagridControl="true" variableName="isSelected" customText="{data.isSelected}"
											selectedValue="true" deSelectedValue="false" defaultValue="false"
											click="{outerDocument.employee.allCopiers=false}"/>
									</mx:Component>
								</mx:itemRenderer>
							</mx:DataGridColumn>
							<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE,'workflowCmd.Copier')}" dataField="name" width="800"/>
						</mx:columns>
					</mx:DataGrid> 
					<!--<mx:List x="10" y="40" width="318" height="110" id="copier_list" dataProvider="{copiers}" labelField="name" focusOut="doCopier();" allowMultipleSelection="true" itemClick="{employee.allCopiers=false}"></mx:List>-->
				</mx:Panel>
			</mx:Canvas>	
		</mx:TabNavigator>
		
	</mx:Canvas>

</mx:TitleWindow>