<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml"
				layout="absolute"
				width="920"
				height="666"
				title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'genericPrefCmd.PaperCalculator')}"
				creationComplete="init();"
				showCloseButton="true"
				close="PopUpManager.removePopUp(this);" fontSize="9">
	<mx:RemoteObject id="dataService"
					 destination="dataService">
		<mx:method name="getAll"
				   fault="handleFault(event)"
				   result="handleLoadResult(event)"/>
		<mx:method name="addUpdate"
				   fault="handleFault(event)"
				   result="handleSaveResult(event)"/>
		<mx:method name="deleteItem"
				   fault="handleFault(event)"
				   result="handleDeleteResult(event)"/>
	</mx:RemoteObject>

	<mx:RemoteObject id="paperCalculatorService"
					 destination="paperCalculatorService">
		<mx:method name="CalcOut"
				   fault="handleFault(event)"
				   result="handleCalcOutResult(event)"/>
<!--		<mx:method name="GeneratePageImage"
				   fault="handleFault(event)"
				   result="handleCalcOutResult(event)"/>-->				   
	</mx:RemoteObject>
	<mx:Script>
		<![CDATA[
			import mx.controls.Alert;
			import mx.managers.PopUpManager;
			import mx.containers.TitleWindow;
			import mx.collections.ArrayCollection;
			import mx.rpc.events.ResultEvent;
			import mx.rpc.events.FaultEvent;
			import mx.messaging.messages.AsyncMessage;
			import mx.messaging.messages.IMessage;
			import mx.printing.FlexPrintJob;
			import mx.printing.PrintAdvancedDataGrid;
			import mx.printing.PrintDataGrid;
			import mx.core.Application;
			import mx.validators.Validator;
			import mx.events.ValidationResultEvent;
			import com.efi.printsmith.data.JobBase;
			import com.efi.printsmith.data.Dimension;
			import com.efi.printsmith.Constants;
			
			[Bindable]
			private var job:JobBase;
			[Bindable]
			private var parentBoolean:Boolean;
			[Bindable]
			private var runBoolean:Boolean;
			[Bindable]
			private var finishBoolean:Boolean;
			
			[Bindable]
			private var dimensions:ArrayCollection;
			[Bindable]
			private var gripLocationRadioValue:String;
			[Bindable]
			private var folioLocationRadioValue:String;
			[Bindable]
			private var RunToFinishGrainArray:ArrayCollection=new ArrayCollection();

			private function init():void
			{
				//fillRunToFinishGrainArray(RunToFinishGrainArray);
				this.job.paperCal.whichStartSize = Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_RUN;
				this.job.paperCal.runToFinishGrain = Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_NEITHER;
				this.job.paperCal.gripLocation = Constants.PAPER_CALCULATOR_GRIPPER_TOP;
				this.job.paperCal.folioLocation = Constants.PAPER_CALCULATOR_FOLIO_TOP;
			}

			private function handleCalcOutResult(ev:ResultEvent):void
			{
				if (ev.result != null) {
					var results:ArrayCollection = ev.result as ArrayCollection;
					var intValue:Number;
			//		var dblValue:Double;
					
	// maintain same order in PaperCalcualtorService.java
	/*
		results.add(out);
		results.add(runCuts);
		results.add(finishCuts);
		
		results.add(job.getPaperCal().getDAcross());
		results.add(job.getPaperCal().getDDown());
		results.add(job.getPaperCal().getAcross());
		results.add(job.getPaperCal().getDown());
		results.add(job.getPaperCal().getDutchBottom());
		results.add(job.getPaperCal().getUsedSqrArea());
		results.add(job.getPaperCal().getParentSqrArea());
		results.add(job.getPaperCal().getRMargin());
		results.add(job.getPaperCal().getBMargin());
		results.add(job.getPaperCal().getSwap());
	*/
					
					// paper image numbers
					intValue = results.getItemAt(0) as Number;
					this.job.paperCal.sheetsOut = intValue;
					this.job.paperCal.runout = intValue;
					
					// cut counts, the override logic is handled in JAVA
					intValue = results.getItemAt(1) as Number;
					this.job.paperCal.cutstoRun = intValue;
					intValue = results.getItemAt(2) as Number;
					this.job.paperCal.cutstoFinish = intValue;
					
					intValue = results.getItemAt(3) as Number;
					this.job.paperCal.dAcross = intValue;
					intValue = results.getItemAt(4) as Number;
					this.job.paperCal.dDown = intValue;
					intValue = results.getItemAt(5) as Number;
					this.job.paperCal.across = intValue;
					intValue = results.getItemAt(6) as Number;
					this.job.paperCal.down = intValue;
					intValue = results.getItemAt(7) as Number;
					this.job.paperCal.dutchBottom = intValue;
					
					// floating point numbers
					this.job.paperCal.usedSqrArea = results.getItemAt(8) as Number;
					this.job.paperCal.parentSqrArea = results.getItemAt(9) as Number;
					this.job.paperCal.rMargin = results.getItemAt(10) as Number;
					this.job.paperCal.bMargin = results.getItemAt(11) as Number;
					
					// does the image render with swapped sheet values
					this.job.paperCal.swap = results.getItemAt(12) as Boolean;
					
//				var testStringValue:String = results.getItemAt(1) as String;
	//				var testNumberValue:Number = results.getItemAt(2) as Number;
					
				}

			}

			private function handleLoadResult(ev:ResultEvent):void
			{

			}

			private function handleDeleteResult(ev:ResultEvent):void
			{
			}

			private function handleSaveResult(ev:ResultEvent):void
			{
				PopUpManager.removePopUp(this);

			/* Todo brodcast save*/
			}

			private function handleFault(ev:FaultEvent):void
			{
				var message:String;

				message="Error: " + ev.fault.faultCode + " - " + ev.fault.faultDetail + " - " + ev.fault.faultString;
				Alert.show(message, "Error", 0, null);
			}


			public function setJob(job2:JobBase):void
			{
				fillRunToFinishGrainArray(RunToFinishGrainArray);
				job=job2;
				mapFromJobData();
			}

			public function setdimension(dim2:ArrayCollection):void
			{
				dimensions=dim2;

			}
			
			//
			// this is used to change the font in the active field to show a override state
			//
			private function setOverrideForField(field:TextInput, overrideActive:Boolean):void
			{
				if (overrideActive)
				{
					field.setStyle("fontStyle","italic");
					field.setStyle("textDecoration","underline");
				} else {
					field.setStyle("fontStyle","normal");
					field.setStyle("textDecoration","none");
				}
			}
			
			//
			// call back function when the user changes the value in the "Cuts to Run" field
			// 
			private function changedCutstoRun():void
			{				
				// current value is EMPTY string, remove override
				if (txtCutstoRun.text == "")
					job.orRunCuts = false;
				else
					job.orRunCuts = true;
				
				// update the field font state to match
				setOverrideForField(txtCutstoRun, job.orRunCuts);
				
				// calcuate the REAL value again in the case of override is REMOVED
				//  function will not replace value if override flag is ON
				refreshCalcAndImage();
			}
	
			//
			// call back function when the user changes the value in the "Cuts to Finish" field
			// 
			private function changedCutstoFinish():void
			{				
				// current value is EMPTY string, remove override
				if (txtCutstoFinish.text == "")
					job.orFinishCuts = false;
				else
					job.orFinishCuts = true;
					
				// update the field font state to match
				setOverrideForField(txtCutstoFinish, job.orFinishCuts);
				
				// calcuate the REAL value again in the case of override is REMOVED
				//  function will not replace value if override flag is ON
				refreshCalcAndImage();
			}
		
			private function mapFromJobData():void
			{
				gripLocationRadioValue=job.paperCal.gripLocation;
				doGrip();
				folioLocationRadioValue=job.paperCal.folioLocation;
				doFolio();
				if (job.paperCal.runToFinishGrain != "") {
					if (job.paperCal.runToFinishGrain == Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_NEITHER) {
						cboRunToFinishGrain.selectedIndex = 0;
					} else if (job.paperCal.runToFinishGrain == Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_MATCH_GRAIN) {
						cboRunToFinishGrain.selectedIndex = 1;
					} else if (job.paperCal.runToFinishGrain == Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_SWING_COMBINATION) {
						cboRunToFinishGrain.selectedIndex = 2;
					} 
				}
			//	if (job.paperCal.printParentToFinishSection == true) {
			//		calc_order_radio_group.selectedValue = Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_FINISH;
			//	} else if (job.paperCal.printParentToRunSection == true) {
			//		calc_order_radio_group.selectedValue = Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_RUN;
			//	} else if (job.paperCal.printRunToFinishSection == true) {
			//		calc_order_radio_group.selectedValue = Constants.PAPER_CALCULATOR_WHICH_START_RUN_TO_FINISH;					
			//	}
				calc_order_radio_group.selectedValue = job.paperCal.whichStartSize;
				job.paperCal.runSize=job.runSize;
				job.paperCal.finishSize=job.finishSize;
				job.paperCal.parentSize=job.parentSize;
				
				setOverrideForField(txtCutstoRun, job.orRunCuts);
				setOverrideForField(txtCutstoFinish, job.orFinishCuts);
			}

			private function findItem(name:String, array:ArrayCollection):int
			{
				for each (var element:Object in array)
				{
					if (name == element.name)
					{
						return array.getItemIndex(element);
					}
				}
				return -1;
			}

			private function mapToJobData():void
			{
				if (gripLocation.selectedValue != null) {
					job.paperCal.gripLocation=gripLocation.selectedValue.toString();
				}
				if (folioLocation.selectedValue != null) {
					job.paperCal.folioLocation=folioLocation.selectedValue.toString();
				}
				if (cboRunToFinishGrain != null && cboRunToFinishGrain.selectedItem != null) {
					switch (cboRunToFinishGrain.selectedItem) {
						case 0:
							job.paperCal.runToFinishGrain = Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_NEITHER;
							break;
						case 1:
							job.paperCal.runToFinishGrain = Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_MATCH_GRAIN;
							break;
						case 2:
							job.paperCal.runToFinishGrain = Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_SWING_COMBINATION;
							break;
					}
				} else
					job.paperCal.runToFinishGrain = Constants.PAPER_CALCULATOR_GRAIN_DIRECTION_NEITHER;
				
				switch (calc_order_radio_group.selectedValue) {
					case Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_FINISH:
				//		job.paperCal.printParentToFinishSection = true;
				//		job.paperCal.printParentToRunSection = false;
				//		job.paperCal.printRunToFinishSection = false;	
						job.paperCal.whichStartSize = Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_FINISH;
						break;
					case Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_RUN:
				//		job.paperCal.printParentToFinishSection = false;
				//		job.paperCal.printParentToRunSection = true;
				//		job.paperCal.printRunToFinishSection = false;						
						job.paperCal.whichStartSize = Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_RUN;
						break;
					case Constants.PAPER_CALCULATOR_WHICH_START_RUN_TO_FINISH:
				//		job.paperCal.printParentToFinishSection = false;
				//		job.paperCal.printParentToRunSection = false;
				//		job.paperCal.printRunToFinishSection = true;						
						job.paperCal.whichStartSize = Constants.PAPER_CALCULATOR_WHICH_START_RUN_TO_FINISH;
						break;					
				}
				job.paperCal.runSize.name=run_size_edit.text
				job.paperCal.attachToJobTicket=chkAttachToJobTicket.selected;
				job.paperCal.backTrimParent=chkBackTrimParent.selected;
				job.paperCal.bleedLeft=parseFloat(txtBleed.text);
				job.paperCal.bleedBottom=parseFloat(txtBleedBottom.text);
				job.paperCal.bleedRight=parseFloat(txtBleedRight.text);
				job.paperCal.bleedTop=parseFloat(txtBleedTop.text);
				job.paperCal.colorBar=parseFloat(txtColorBar.text);
				job.paperCal.cutstoFinish=parseInt(txtCutstoFinish.text);
				job.paperCal.cutstoRun=parseInt(txtCutstoRun.text);
				job.paperCal.disableFSC=chkDisableFSC.selected
				job.paperCal.finishSize.name=finish_size_edit.text
				job.paperCal.folioEdge=parseFloat(txtFolioEdge.text);
				job.paperCal.gripEdgeGap=parseFloat(txtGripEdge.text);
				job.paperCal.gutter=parseFloat(txtGutter.text);
				job.paperCal.gutterHorizontal=parseFloat(txtGutterHorizontal.text);
				job.paperCal.parentSize.name=parent_size_edit.text;
				job.paperCal.sheetsOut=parseInt(txtSheetsOut.text);
				job.paperCal.trimFourSides=chkTrimFourSides.selected;
				job.paperCal.useBleed=chkBleed.selected;
				job.paperCal.useColorBar=chkColorBar.selected;
				job.paperCal.useFolioEdge=chkFolioEdge.selected;
				job.paperCal.useGripEdgeGap=chkGripEdge.selected;
				job.paperCal.useGutter=chkGutter.selected;
				job.paperCal.useWhiteSpace=chkWhiteSpace.selected;
				job.paperCal.whiteSpaceLeft=parseFloat(txtWhiteSpace.text);
				job.paperCal.whiteSpaceBottom=parseFloat(txtWhiteSpaceBottom.text);
				job.paperCal.whiteSpaceRight=parseFloat(txtWhiteSpaceRight.text);
				job.paperCal.whiteSpaceTop=parseFloat(txtWhiteSpaceTop.text);
				job.paperCal.workandTumble=chkWorkAndTumble.selected;

			}

			private function doGrip():void
			{
				if (gripLocation.selectedValue == Constants.PAPER_CALCULATOR_GRIPPER_TOP)
				{
					topGrip.alpha=.4;
					leftGrip.alpha=1;
				}
				if (gripLocation.selectedValue == Constants.PAPER_CALCULATOR_GRIPPER_LEFT)
				{
					topGrip.alpha=1;
					leftGrip.alpha=.4;
				}

			}

			private function doFolio():void
			{
				if (folioLocation.selectedValue == Constants.PAPER_CALCULATOR_FOLIO_TOP)
				{
					topFolio.alpha=0.4;
					leftFolio.alpha=1;
				}
				if (folioLocation.selectedValue == Constants.PAPER_CALCULATOR_FOLIO_LEFT)
				{
					topFolio.alpha=1;
					leftFolio.alpha=.4;
				}

			}

			private function refreshCalcAndImage():void
			{
				mapToJobData();
				
				paperCalculatorService.CalcOut(this.job, this.job.paperCal.whichStartSize);
				//paperCalculatorService.GeneratePageImage(this.job);
			}
			
			private function fillRunToFinishGrainArray(fillArray:ArrayCollection):void
			{
				var setting:Object=new Object();
				setting.name=resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Neither');
				fillArray.addItem(setting);
				setting=new Object();
				setting.name=resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcPickerCmd.MatchGrain');
				fillArray.addItem(setting);
				setting=new Object();
				setting.name=resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.SwingCombination');
				fillArray.addItem(setting);
			}

			private function doSave():void
			{
				mapToJobData();
				dataService.addUpdate(job.paperCal);
			}
			private function doParentBoolean():void{
				parentBoolean = true;
				runBoolean = false;
				finishBoolean = false;
			}
			private function doRunBoolean():void{
				parentBoolean = false;
				runBoolean = true;
				finishBoolean = false;
			}
			private function doFinishBoolean():void{
				parentBoolean = false;
				runBoolean = false;
				finishBoolean = true;
			}
			private function doDimension():void{
				var tempDim:Dimension;
				tempDim = dimension_list.selectedItem as Dimension;
				if (parentBoolean){
					job.parentSize = tempDim;
				}
				if (runBoolean){
					job.runSize = tempDim;
				}
				if (finishBoolean){
					job.finishSize = tempDim;
				}
				
			}
		]]>

	</mx:Script>
	<mx:Canvas width="100%"
			   height="622"
			   id="papercalculator_canvas"
			   hideEffect="effect"
			   showEffect="effect"
			   y="0">

		<mx:CheckBox x="241"
					 y="113.5"
					 id="chkGripEdge"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.useGripEdgeGap}"/>
		<mx:CheckBox x="241"
					 y="168"
					 id="chkFolioEdge"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.useFolioEdge}"/>
		<mx:CheckBox x="242"
					 y="219"
					 id="chkColorBar"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.useColorBar}"/>
		<mx:CheckBox x="242"
					 y="267"
					 id="chkWhiteSpace"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.useWhiteSpace}"/>
		<mx:CheckBox x="242"
					 y="357"
					 id="chkGutter"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.useGutter}"/>
		<mx:CheckBox x="242"
					 y="402"
					 id="chkBleed"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.useBleed}"/>

		<mx:Label x="261"
				  y="92"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.GripEdgeGap')}"
				  textAlign="left" width="93"/>
		<mx:Label x="261"
				  y="147"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.FolioEdge')}"
				  textAlign="left" width="93"/>
		<mx:Label x="262"
				  y="197"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.ColorBar')}"
				  textAlign="left" width="92"/>
		<mx:Label x="262"
				  y="245"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.WhiteSpace')}"
				  textAlign="left" width="93"/>
		<mx:Label x="262"
				  y="289"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Right')}"
				  textAlign="left" width="93"/>
		<mx:Label x="262"
				  y="334"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Gutter')}"
				  textAlign="left" width="93"/>
		<mx:Label x="262"
				  y="379"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Bleed')}"
				  textAlign="left" width="93"/>
		<mx:Label x="262"
				  y="424"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Right')}"
				  textAlign="left" width="93"/>

		<mx:TextInput enabled="{chkGripEdge.selected}"
					  x="261"
					  y="112"
					  id="txtGripEdge"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.gripEdgeGap}" height="20"/>
		<mx:TextInput enabled="{chkFolioEdge.selected}"
					  x="261"
					  y="167"
					  id="txtFolioEdge"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.folioEdge}" height="20"/>
		<mx:TextInput enabled="{chkColorBar.selected}"
					  x="262"
					  y="217"
					  id="txtColorBar"
					  restrict="0-9\."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.colorBar}" height="20"/>
		<mx:TextInput enabled="{chkWhiteSpace.selected}"
					  x="262"
					  y="265"
					  id="txtWhiteSpace"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.whiteSpaceLeft}" height="20"/>
		<mx:TextInput enabled="{chkWhiteSpace.selected}"
					  x="262"
					  y="310"
					  id="txtWhiteSpaceRight"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.whiteSpaceRight}" height="20"/>
		<mx:TextInput enabled="{chkGutter.selected}"
					  x="262"
					  y="355"
					  id="txtGutter"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.gutter}" height="20"/>
		<mx:TextInput enabled="{chkBleed.selected}"
					  x="262"
					  y="400"
					  id="txtBleed"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.bleedLeft}" height="20"/>
		<mx:TextInput enabled="{chkBleed.selected}"
					  x="262"
					  y="445"
					  id="txtBleedRight"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.bleedRight}" height="20"/>

		<mx:Label x="363"
				  y="245"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Top')}"
				  textAlign="left"/>
		<mx:Label x="363"
				  y="289"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Bottom')}"
				  textAlign="left"/>
		<mx:Label x="363"
				  y="334"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Horizontal')}"
				  textAlign="left"/>
		<mx:Label x="363"
				  y="379"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Top')}"
				  textAlign="left"/>
		<mx:Label x="363"
				  y="424"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.Bottom')}"
				  textAlign="left"/>

		<mx:TextInput enabled="{chkWhiteSpace.selected}"
					  x="363"
					  y="265"
					  id="txtWhiteSpaceTop"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.whiteSpaceTop}" height="20"/>
		<mx:TextInput enabled="{chkWhiteSpace.selected}"
					  x="363"
					  y="310"
					  id="txtWhiteSpaceBottom"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.whiteSpaceBottom}" height="20"/>
		<mx:TextInput enabled="{chkGutter.selected}"
					  x="363"
					  y="355"
					  id="txtGutterHorizontal"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.gutterHorizontal}" height="20"/>
		<mx:TextInput enabled="{chkBleed.selected}"
					  x="363"
					  y="400"
					  id="txtBleedTop"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.bleedTop}" height="20"/>
		<mx:TextInput enabled="{chkBleed.selected}"
					  x="363"
					  y="445"
					  id="txtBleedBottom"
					  restrict="0-9."
					  width="93"
					  focusOut="refreshCalcAndImage()"
					  text="{job.paperCal.bleedBottom}" height="20"/>


		<mx:CheckBox x="242"
					 y="494"
					 id="chkBackTrimParent"
					 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.BackTrimParent')}"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.backTrimParent}"/>
		<mx:CheckBox x="242"
					 y="515"
					 id="chkTrimFourSides"
					 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.TrimFourSides')}"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.trimFourSides}"/>
		<mx:CheckBox x="242"
					 y="473"
					 id="chkWorkAndTumble"
					 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.WorkandTumble')}"
					 click="refreshCalcAndImage()"
					 selected="{job.paperCal.workandTumble}"/>

		<mx:Label x="241"
				  y="565"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.RuntoFinishGrain')}"
				  textAlign="right"
				  width="129"/>
		<mx:ComboBox x="378"
					 y="563.5"
					 id="cboRunToFinishGrain"
					 dataProvider="{RunToFinishGrainArray}"
					 labelField="name"
					 width="129" height="20"/>

		<mx:Panel x="515"
				  y="464"
				  width="342"
				  height="140"
				  layout="absolute"
				  title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.PrintOptions')}" borderThicknessLeft="3" borderThicknessTop="3" borderThicknessRight="3" dropShadowEnabled="false" headerHeight="20">
			<mx:CheckBox x="10"
						 y="10"
						 id="chkPrintParentToFinish"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.PrintParenttoFinishS')}"
						 selected="{job.paperCal.printParentToFinishSection}"
						 width="193"/>
			<mx:CheckBox x="10"
						 y="85"
						 id="chkAttachToJobTicket"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.AttachtoJobTicket')}"
						 selected="{job.paperCal.attachToJobTicket}"/>
			<mx:CheckBox x="10"
						 y="35"
						 id="chkPrintParentToRun"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.PrintParenttoRunSect')}"
						 selected="{job.paperCal.printParentToRunSection}"
						 width="193"/>
			<mx:CheckBox x="10"
						 y="60"
						 id="chkPrintRunToFinish"
						 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.PrintRuntoFinishSect')}"
						 selected="{job.paperCal.printRunToFinishSection}"
						 width="229"/>
		</mx:Panel>
		<mx:RadioButtonGroup id="gripLocation"
							 selectedValue="{gripLocationRadioValue}"
							 change="doGrip();"/>
		<mx:RadioButton x="362"
						y="112"
						value="{Constants.PAPER_CALCULATOR_GRIPPER_TOP}"
						id="topGrip"
						icon="@Embed(source='../../../../assets/GripSideTopBottom.png')"
						groupName="gripLocation"
						click="refreshCalcAndImage()"
						width="20"
						height="20"/>
		<mx:RadioButton x="390"
						y="112"
						value="{Constants.PAPER_CALCULATOR_GRIPPER_LEFT}"
						id="leftGrip"
						groupName="gripLocation"
						click="refreshCalcAndImage()"
						width="20"
						height="20">
			<mx:icon>@Embed(source='../../../../assets/GripSideLeftRight.png')</mx:icon>
		</mx:RadioButton>
		<mx:RadioButtonGroup id="folioLocation"
							 selectedValue="{folioLocationRadioValue}"
							 change="doFolio();"/>
		<mx:RadioButton x="362"
						y="167"
						value="{Constants.PAPER_CALCULATOR_FOLIO_TOP}"
						id="topFolio"
						groupName="folioLocation" height="20" width="20">
			<mx:icon>@Embed(source='../../../../assets/FolioSideTopBottom.png')</mx:icon>
		</mx:RadioButton>
		<mx:RadioButton x="390"
						y="167"
						value="{Constants.PAPER_CALCULATOR_FOLIO_LEFT}"
						id="leftFolio"
						groupName="folioLocation" height="20" width="20">
			<mx:icon>@Embed(source='../../../../assets/FolioSideLeftRight.png')</mx:icon>
		</mx:RadioButton>
		<mx:CheckBox x="242"
					 y="534"
					 label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.DisableFSCoptions')}"
					 selected="{job.paperCal.disableFSC}"
					 id="chkDisableFSC"/>
		<mx:List x="21"
				 y="284"
				 height="320"
				 dataProvider="{dimensions}"
				 labelField="name"
				 width="192" click="doDimension();" id="dimension_list">
		</mx:List>
		<mx:Label x="21"
				  y="92"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.TemplateName')}" textAlign="left"/>
		<mx:TextInput x="21"
					  y="113" width="192" height="20"/>
		<mx:TextInput x="21"
					  y="160"
					  text="{job.parentSize.name}"
					  focusOut="refreshCalcAndImage()"
					  id="parent_size_edit" width="192"  height="20" focusIn="doParentBoolean();" />
		<mx:Label x="21"
				  y="139"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.ParentSize')}" textAlign="left"/>
		<mx:Label x="21"
				  y="186"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.RunSize')}" textAlign="left"/>
		<mx:TextInput x="21"
					  y="207"
					  text="{job.runSize.name}"
					  focusOut="refreshCalcAndImage()"
					  id="run_size_edit" width="192" height="20" focusIn="doRunBoolean();"/>
		<mx:Label x="21"
				  y="233"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.FinishSize')}" textAlign="left"/>
		<mx:TextInput x="21"
					  y="254"
					  text="{job.finishSize.name}"
					  focusOut="refreshCalcAndImage()"
					  id="finish_size_edit" width="192" height="20" focusIn="doFinishBoolean();"/>
		<mx:Button x="32"
				   y="21"
				   icon="@Embed(source='../../../../assets/save.png')"
				   width="38"
				   height="38"
				   click="doSave();"/>
		<mx:Button x="116"
				   y="21"
				   width="38"
				   height="38"
				   icon="@Embed(source='../../../../assets/find.png')"/>
		<mx:Button x="241"
				   y="21"
				   width="38"
				   height="38"
				   icon="@Embed(source='../../../../assets/print.png')"/>
		<mx:Button x="328"
				   y="21"
				   width="38"
				   height="38"
				   icon="@Embed(source='../../../../assets/cancel.png')"/>
		<mx:HRule x="10"
				  y="82"
				  width="880"/>
		<mx:Label x="26"
				  y="60"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Save')}" width="50" textAlign="center"/>
		<mx:Label x="110"
				  y="60"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Find')}" width="50" textAlign="center"/>
		<mx:Label x="235"
				  y="60"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Print')}" width="50" textAlign="center"/>
		<mx:Label x="322"
				  y="60"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Cancel')}" width="50" textAlign="center"/>
		<mx:TextInput x="515"
					  y="112"
					  width="171"
					  text="{job.paperCal.finishSize.name} {resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.outof')} {job.paperCal.runSize.name}" height="20"/>
		<mx:TextInput x="712"
					  y="112"
					  width="123"
					  text="{job.paperCal.sheetsOut}"
					  id="txtSheetsOut" height="20"/>
		<mx:Label x="712"
				  y="92"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.SheetsOut')}" textAlign="left"/>
		<mx:Label x="515"
				  y="138"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.CutstoRun')}" textAlign="left"/>
		<mx:Label x="676"
				  y="138"
				  text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'extPaperCalcCmd.CutstoFinish')}" textAlign="left"/>
		<mx:TextInput x="515"
					  y="159"
					  width="125"
					  text="{job.paperCal.cutstoRun}"
					  change="changedCutstoRun()"
					  id="txtCutstoRun" height="20"/>
		<mx:TextInput x="676"
					  y="159"
					  text="{job.paperCal.cutstoFinish}"
					  change="changedCutstoFinish()"
					  id="txtCutstoFinish" height="20"/>
		<mx:Canvas x="515"
				   y="187"
				   width="342"
				   height="233"
				   borderStyle="inset">
		</mx:Canvas>
		<mx:Label x="694"
				  y="114"
				  text="="
				  width="20"/>
		<mx:RadioButtonGroup id="calc_order_radio_group" selectedValue="{job.paperCal.whichStartSize}"/>
		<mx:RadioButton x="532" y="428" label="Parent, Finish" id="parent_finish" value="{Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_FINISH}" groupName="calc_order_radio_group" click="refreshCalcAndImage()" labelPlacement="right"/>
		<mx:RadioButton x="634" y="428" label="Parent, Run" id="parent_run" value="{Constants.PAPER_CALCULATOR_WHICH_START_PARENT_TO_RUN}" groupName="calc_order_radio_group" click="refreshCalcAndImage()" labelPlacement="right"/>
		<mx:RadioButton x="725" y="428" label="Run, Finish" id="run_finish" value="{Constants.PAPER_CALCULATOR_WHICH_START_RUN_TO_FINISH}" groupName="calc_order_radio_group" click="refreshCalcAndImage()" labelPlacement="right"/>

	</mx:Canvas>
</mx:TitleWindow>
