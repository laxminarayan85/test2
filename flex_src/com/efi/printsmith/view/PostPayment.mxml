<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="918" height="600"
	showCloseButton="true" creationComplete="init()"
    close="PopUpManager.removePopUp(this);"
    title="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.PostPayments')}" 
     label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.PostPayments')}"
    xmlns:text="flash.text.*" borderThickness="3" borderStyle="solid">
	
	
	<mx:RemoteObject id="dataService" destination="dataService">
		<mx:method name="getAccount" fault="handleFault(event)" result="handleGetResult(event)"/>
	</mx:RemoteObject>
	
<mx:Script>
                                   
<![CDATA[
	import com.efi.printsmith.data.Account;
	import mx.containers.Accordion;
	
	import mx.collections.ArrayCollection;                 
	import mx.managers.PopUpManager;                                 
	import mx.controls.Alert;                          
	import mx.containers.Canvas;                                
	import mx.rpc.events.ResultEvent;                                 
	import mx.rpc.events.FaultEvent;                          
	import mx.events.ValidationResultEvent;                          
	import mx.validators.Validator;       
	import mx.messaging.messages.AsyncMessage;
	import mx.messaging.messages.IMessage;
	import mx.core.Application;
	
	import com.efi.printsmith.data.Account;
	import com.efi.printsmith.events.AccountPickerSelectEvent;

	[Bindable]                             
	private var account: Account;
	
	private function handleAccountPickerCancel(evt:AccountPickerSelectEvent):void {
		
		account = new Account();
		
	}
	private function doGet():void{
		account = new Account();
		 var accountPickerWindow:AccountPicker = AccountPicker(PopUpManager.createPopUp(this, AccountPicker, true));
	    accountPickerWindow.setStyle("borderAlpha", 0.9);
	    accountPickerWindow.formIsEmpty = true;
	    accountPickerWindow.prospect_boolean = true;
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.CANCELSELECTACCOUNT, handleAccountPickerCancel);
	    accountPickerWindow.addEventListener(AccountPickerSelectEvent.SELECTACCOUNT, handleAccountPickerSelect);
	}
	private function init():void {   
		doGet();
	 }
	 private function handleFault(ev:FaultEvent):void {  
		var message:String;
		              
		message = "Error: "                          
		+ ev.fault.faultCode + " - "                                  
		+ ev.fault.faultDetail + " - "                                  
		+ ev.fault.faultString;
		Alert.show(message, "Error", 0);                                 
	}
	private function handleGetResult(ev:ResultEvent):void {
		account = ev.result as Account;
			     
	}
	private function handleAccountPickerSelect(evt:AccountPickerSelectEvent):void {
		
		dataService.getAccount(evt.account.id);
		
		
	}
	
]]>        
</mx:Script>
	<mx:Canvas x="0" y="10" width="100%" height="100%">
		<mx:Button x="10" y="21" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'posRegisterCmd.CustAcct')}" click="doGet();"/>
		<mx:Text x="173" y="10"  text="{account.title}"/>
		<mx:Label x="173" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'posRegisterCmd.Type')}" width="51"/>
		<mx:Text x="232" y="36" text="{account.type}"/>
		<mx:Label x="371" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.UnpostedMerchandiseC')}" width="145"/>
		<mx:Text x="524" y="36" text="Text"/>
		<mx:Label x="502" y="10" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Status')}"/>
		<mx:Text x="629" y="10" text="{account.status}" width="77"/>
		<mx:Label x="10" y="70" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.MasterAccount')}"/>
		<mx:Text x="134" y="70" text="{account.masterAcct}"/>
		<mx:DataGrid x="10" y="96" width="506" height="257">
			<mx:columns>
				<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Ref')}" dataField="col1"/>
				<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Date')}" dataField="col2"/>
				<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Description')}" dataField="col3"/>
				<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Due')}" dataField="col2"/>
				<mx:DataGridColumn headerText="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Pay')}" dataField="col3"/>
			
			</mx:columns>
		</mx:DataGrid>
		<mx:Canvas x="524" y="190" width="358" height="163">
			<mx:Label x="53" y="107" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Amount')}"/>
			<mx:TextInput x="188" y="105" id="amount_edit"/>
			<mx:Text x="112" y="10" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.PAYMENTMETHOD')}"/>
			<mx:Button x="53" y="36" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.CASH')}" width="127"/>
			<mx:Button x="53" y="66" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.CARD')}" width="127"/>
			<mx:Button x="188" y="36" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.CHECK')}"/>
			<mx:Button x="188" y="66" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.DRAFT')}"/>
			<mx:Label x="53" y="133" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Remainder')}" height="20"/>
			<mx:ComboBox x="189" y="131" id="remainder_combo"></mx:ComboBox>
		</mx:Canvas>
		<mx:Canvas x="524" y="350" width="358" height="136">
			<mx:Label x="10" y="10" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Balance')}"/>
			<mx:Label x="10" y="36" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.TotalDue')}"/>
			<mx:Label x="10" y="62" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Tendered')}"/>
			<mx:Label x="10" y="88" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.Remainder')}"/>
			<mx:Label x="10" y="114" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.NewBal')}"/>
			<mx:Text x="187" y="10" text="Text" width="161" id="balance_text"/>
			<mx:Text x="187" y="36" text="Text" width="161" id="due_text"/>
			<mx:Text x="187" y="62" text="Text" width="161" id="tendered_text"/>
			<mx:Text x="187" y="88" text="Text" width="161" id="reminder_text"/>
			<mx:Text x="187" y="114" text="Text" width="161" id="new_balance_text"/>
		</mx:Canvas>
		<mx:Canvas x="524" y="96" width="358" height="95">
			<mx:Label x="10" y="10" text="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'labelCmd.Format')}"/>
			<mx:CheckBox x="10" y="36" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'posRegisterCmd.PrintInvoice')}"/>
			<mx:CheckBox x="10" y="66" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'posRegisterCmd.PrintReceipt')}"/>
		</mx:Canvas>
		<mx:Button x="95" y="501" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'posRegisterCmd.Post')}" width="91"/>
		<mx:Button x="194" y="501" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.AutoApply')}" width="99"/>
		<mx:Button x="301" y="501" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.CalculatePayment')}" width="99"/>
		<mx:Button x="417" y="501" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'paymentsCmd.AddJournalEntry')}" width="99"/>
		<mx:Button x="524" y="501" label="{resourceManager.getString(Snowmass.RESOURCE_BUNDLE, 'rButtonLabel.Close')}"/>
	</mx:Canvas>
</mx:TitleWindow>
